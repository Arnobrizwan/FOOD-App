var QT=e=>{throw TypeError(e)};var jx=(e,t,n)=>t.has(e)||QT("Cannot "+n);var je=(e,t,n)=>(jx(e,t,"read from private field"),n?n.call(e):t.get(e)),rr=(e,t,n)=>t.has(e)?QT("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ft=(e,t,n,s)=>(jx(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Mr=(e,t,n)=>(jx(e,t,"access private method"),n);var My=(e,t,n,s)=>({set _(u){Ft(e,t,u,n)},get _(){return je(e,t,s)}});function WE(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const u in s)if(u!=="default"&&!(u in e)){const p=Object.getOwnPropertyDescriptor(s,u);p&&Object.defineProperty(e,u,p.get?p:{enumerable:!0,get:()=>s[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const p of u)if(p.type==="childList")for(const f of p.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(u){const p={};return u.integrity&&(p.integrity=u.integrity),u.referrerPolicy&&(p.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?p.credentials="include":u.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function s(u){if(u.ep)return;u.ep=!0;const p=n(u);fetch(u.href,p)}})();var TN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _v(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var XE={exports:{}},vv={},KE={exports:{}},Tr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rg=Symbol.for("react.element"),CN=Symbol.for("react.portal"),PN=Symbol.for("react.fragment"),EN=Symbol.for("react.strict_mode"),MN=Symbol.for("react.profiler"),kN=Symbol.for("react.provider"),IN=Symbol.for("react.context"),RN=Symbol.for("react.forward_ref"),AN=Symbol.for("react.suspense"),DN=Symbol.for("react.memo"),zN=Symbol.for("react.lazy"),JT=Symbol.iterator;function jN(e){return e===null||typeof e!="object"?null:(e=JT&&e[JT]||e["@@iterator"],typeof e=="function"?e:null)}var YE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QE=Object.assign,JE={};function qh(e,t,n){this.props=e,this.context=t,this.refs=JE,this.updater=n||YE}qh.prototype.isReactComponent={};qh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};qh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function eM(){}eM.prototype=qh.prototype;function bw(e,t,n){this.props=e,this.context=t,this.refs=JE,this.updater=n||YE}var ww=bw.prototype=new eM;ww.constructor=bw;QE(ww,qh.prototype);ww.isPureReactComponent=!0;var eC=Array.isArray,tM=Object.prototype.hasOwnProperty,Sw={current:null},rM={key:!0,ref:!0,__self:!0,__source:!0};function nM(e,t,n){var s,u={},p=null,f=null;if(t!=null)for(s in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(p=""+t.key),t)tM.call(t,s)&&!rM.hasOwnProperty(s)&&(u[s]=t[s]);var c=arguments.length-2;if(c===1)u.children=n;else if(1<c){for(var S=Array(c),E=0;E<c;E++)S[E]=arguments[E+2];u.children=S}if(e&&e.defaultProps)for(s in c=e.defaultProps,c)u[s]===void 0&&(u[s]=c[s]);return{$$typeof:rg,type:e,key:p,ref:f,props:u,_owner:Sw.current}}function LN(e,t){return{$$typeof:rg,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Tw(e){return typeof e=="object"&&e!==null&&e.$$typeof===rg}function NN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var tC=/\/+/g;function Lx(e,t){return typeof e=="object"&&e!==null&&e.key!=null?NN(""+e.key):t.toString(36)}function r_(e,t,n,s,u){var p=typeof e;(p==="undefined"||p==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(p){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case rg:case CN:f=!0}}if(f)return f=e,u=u(f),e=s===""?"."+Lx(f,0):s,eC(u)?(n="",e!=null&&(n=e.replace(tC,"$&/")+"/"),r_(u,t,n,"",function(E){return E})):u!=null&&(Tw(u)&&(u=LN(u,n+(!u.key||f&&f.key===u.key?"":(""+u.key).replace(tC,"$&/")+"/")+e)),t.push(u)),1;if(f=0,s=s===""?".":s+":",eC(e))for(var c=0;c<e.length;c++){p=e[c];var S=s+Lx(p,c);f+=r_(p,t,n,S,u)}else if(S=jN(e),typeof S=="function")for(e=S.call(e),c=0;!(p=e.next()).done;)p=p.value,S=s+Lx(p,c++),f+=r_(p,t,n,S,u);else if(p==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function ky(e,t,n){if(e==null)return e;var s=[],u=0;return r_(e,s,"","",function(p){return t.call(n,p,u++)}),s}function ON(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var as={current:null},n_={transition:null},FN={ReactCurrentDispatcher:as,ReactCurrentBatchConfig:n_,ReactCurrentOwner:Sw};function iM(){throw Error("act(...) is not supported in production builds of React.")}Tr.Children={map:ky,forEach:function(e,t,n){ky(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ky(e,function(){t++}),t},toArray:function(e){return ky(e,function(t){return t})||[]},only:function(e){if(!Tw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Tr.Component=qh;Tr.Fragment=PN;Tr.Profiler=MN;Tr.PureComponent=bw;Tr.StrictMode=EN;Tr.Suspense=AN;Tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FN;Tr.act=iM;Tr.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=QE({},e.props),u=e.key,p=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(p=t.ref,f=Sw.current),t.key!==void 0&&(u=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(S in t)tM.call(t,S)&&!rM.hasOwnProperty(S)&&(s[S]=t[S]===void 0&&c!==void 0?c[S]:t[S])}var S=arguments.length-2;if(S===1)s.children=n;else if(1<S){c=Array(S);for(var E=0;E<S;E++)c[E]=arguments[E+2];s.children=c}return{$$typeof:rg,type:e.type,key:u,ref:p,props:s,_owner:f}};Tr.createContext=function(e){return e={$$typeof:IN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:kN,_context:e},e.Consumer=e};Tr.createElement=nM;Tr.createFactory=function(e){var t=nM.bind(null,e);return t.type=e,t};Tr.createRef=function(){return{current:null}};Tr.forwardRef=function(e){return{$$typeof:RN,render:e}};Tr.isValidElement=Tw;Tr.lazy=function(e){return{$$typeof:zN,_payload:{_status:-1,_result:e},_init:ON}};Tr.memo=function(e,t){return{$$typeof:DN,type:e,compare:t===void 0?null:t}};Tr.startTransition=function(e){var t=n_.transition;n_.transition={};try{e()}finally{n_.transition=t}};Tr.unstable_act=iM;Tr.useCallback=function(e,t){return as.current.useCallback(e,t)};Tr.useContext=function(e){return as.current.useContext(e)};Tr.useDebugValue=function(){};Tr.useDeferredValue=function(e){return as.current.useDeferredValue(e)};Tr.useEffect=function(e,t){return as.current.useEffect(e,t)};Tr.useId=function(){return as.current.useId()};Tr.useImperativeHandle=function(e,t,n){return as.current.useImperativeHandle(e,t,n)};Tr.useInsertionEffect=function(e,t){return as.current.useInsertionEffect(e,t)};Tr.useLayoutEffect=function(e,t){return as.current.useLayoutEffect(e,t)};Tr.useMemo=function(e,t){return as.current.useMemo(e,t)};Tr.useReducer=function(e,t,n){return as.current.useReducer(e,t,n)};Tr.useRef=function(e){return as.current.useRef(e)};Tr.useState=function(e){return as.current.useState(e)};Tr.useSyncExternalStore=function(e,t,n){return as.current.useSyncExternalStore(e,t,n)};Tr.useTransition=function(){return as.current.useTransition()};Tr.version="18.3.1";KE.exports=Tr;var N=KE.exports;const xt=_v(N),sM=WE({__proto__:null,default:xt},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BN=N,UN=Symbol.for("react.element"),VN=Symbol.for("react.fragment"),$N=Object.prototype.hasOwnProperty,ZN=BN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GN={key:!0,ref:!0,__self:!0,__source:!0};function oM(e,t,n){var s,u={},p=null,f=null;n!==void 0&&(p=""+n),t.key!==void 0&&(p=""+t.key),t.ref!==void 0&&(f=t.ref);for(s in t)$N.call(t,s)&&!GN.hasOwnProperty(s)&&(u[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)u[s]===void 0&&(u[s]=t[s]);return{$$typeof:UN,type:e,key:p,ref:f,props:u,_owner:ZN.current}}vv.Fragment=VN;vv.jsx=oM;vv.jsxs=oM;XE.exports=vv;var C=XE.exports,aM={exports:{}},Xs={},lM={exports:{}},cM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Xe,Oe){var at=Xe.length;Xe.push(Oe);e:for(;0<at;){var Et=at-1>>>1,wt=Xe[Et];if(0<u(wt,Oe))Xe[Et]=Oe,Xe[at]=wt,at=Et;else break e}}function n(Xe){return Xe.length===0?null:Xe[0]}function s(Xe){if(Xe.length===0)return null;var Oe=Xe[0],at=Xe.pop();if(at!==Oe){Xe[0]=at;e:for(var Et=0,wt=Xe.length,Lt=wt>>>1;Et<Lt;){var It=2*(Et+1)-1,Wt=Xe[It],tr=It+1,gt=Xe[tr];if(0>u(Wt,at))tr<wt&&0>u(gt,Wt)?(Xe[Et]=gt,Xe[tr]=at,Et=tr):(Xe[Et]=Wt,Xe[It]=at,Et=It);else if(tr<wt&&0>u(gt,at))Xe[Et]=gt,Xe[tr]=at,Et=tr;else break e}}return Oe}function u(Xe,Oe){var at=Xe.sortIndex-Oe.sortIndex;return at!==0?at:Xe.id-Oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;e.unstable_now=function(){return p.now()}}else{var f=Date,c=f.now();e.unstable_now=function(){return f.now()-c}}var S=[],E=[],A=1,z=null,L=3,I=!1,F=!1,B=!1,X=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(Xe){for(var Oe=n(E);Oe!==null;){if(Oe.callback===null)s(E);else if(Oe.startTime<=Xe)s(E),Oe.sortIndex=Oe.expirationTime,t(S,Oe);else break;Oe=n(E)}}function de(Xe){if(B=!1,Y(Xe),!F)if(n(S)!==null)F=!0,ct(Se);else{var Oe=n(E);Oe!==null&&Pt(de,Oe.startTime-Xe)}}function Se(Xe,Oe){F=!1,B&&(B=!1,q(Ie),Ie=-1),I=!0;var at=L;try{for(Y(Oe),z=n(S);z!==null&&(!(z.expirationTime>Oe)||Xe&&!vt());){var Et=z.callback;if(typeof Et=="function"){z.callback=null,L=z.priorityLevel;var wt=Et(z.expirationTime<=Oe);Oe=e.unstable_now(),typeof wt=="function"?z.callback=wt:z===n(S)&&s(S),Y(Oe)}else s(S);z=n(S)}if(z!==null)var Lt=!0;else{var It=n(E);It!==null&&Pt(de,It.startTime-Oe),Lt=!1}return Lt}finally{z=null,L=at,I=!1}}var ce=!1,Re=null,Ie=-1,We=5,tt=-1;function vt(){return!(e.unstable_now()-tt<We)}function st(){if(Re!==null){var Xe=e.unstable_now();tt=Xe;var Oe=!0;try{Oe=Re(!0,Xe)}finally{Oe?Tt():(ce=!1,Re=null)}}else ce=!1}var Tt;if(typeof V=="function")Tt=function(){V(st)};else if(typeof MessageChannel<"u"){var _t=new MessageChannel,Kt=_t.port2;_t.port1.onmessage=st,Tt=function(){Kt.postMessage(null)}}else Tt=function(){X(st,0)};function ct(Xe){Re=Xe,ce||(ce=!0,Tt())}function Pt(Xe,Oe){Ie=X(function(){Xe(e.unstable_now())},Oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Xe){Xe.callback=null},e.unstable_continueExecution=function(){F||I||(F=!0,ct(Se))},e.unstable_forceFrameRate=function(Xe){0>Xe||125<Xe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):We=0<Xe?Math.floor(1e3/Xe):5},e.unstable_getCurrentPriorityLevel=function(){return L},e.unstable_getFirstCallbackNode=function(){return n(S)},e.unstable_next=function(Xe){switch(L){case 1:case 2:case 3:var Oe=3;break;default:Oe=L}var at=L;L=Oe;try{return Xe()}finally{L=at}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Xe,Oe){switch(Xe){case 1:case 2:case 3:case 4:case 5:break;default:Xe=3}var at=L;L=Xe;try{return Oe()}finally{L=at}},e.unstable_scheduleCallback=function(Xe,Oe,at){var Et=e.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?Et+at:Et):at=Et,Xe){case 1:var wt=-1;break;case 2:wt=250;break;case 5:wt=1073741823;break;case 4:wt=1e4;break;default:wt=5e3}return wt=at+wt,Xe={id:A++,callback:Oe,priorityLevel:Xe,startTime:at,expirationTime:wt,sortIndex:-1},at>Et?(Xe.sortIndex=at,t(E,Xe),n(S)===null&&Xe===n(E)&&(B?(q(Ie),Ie=-1):B=!0,Pt(de,at-Et))):(Xe.sortIndex=wt,t(S,Xe),F||I||(F=!0,ct(Se))),Xe},e.unstable_shouldYield=vt,e.unstable_wrapCallback=function(Xe){var Oe=L;return function(){var at=L;L=Oe;try{return Xe.apply(this,arguments)}finally{L=at}}}})(cM);lM.exports=cM;var HN=lM.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qN=N,qs=HN;function mt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uM=new Set,dm={};function Zu(e,t){Dh(e,t),Dh(e+"Capture",t)}function Dh(e,t){for(dm[e]=t,e=0;e<t.length;e++)uM.add(t[e])}var Ya=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jb=Object.prototype.hasOwnProperty,WN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rC={},nC={};function XN(e){return jb.call(nC,e)?!0:jb.call(rC,e)?!1:WN.test(e)?nC[e]=!0:(rC[e]=!0,!1)}function KN(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function YN(e,t,n,s){if(t===null||typeof t>"u"||KN(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ls(e,t,n,s,u,p,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=u,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=p,this.removeEmptyString=f}var Mi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Mi[e]=new ls(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Mi[t]=new ls(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Mi[e]=new ls(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Mi[e]=new ls(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Mi[e]=new ls(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Mi[e]=new ls(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Mi[e]=new ls(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Mi[e]=new ls(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Mi[e]=new ls(e,5,!1,e.toLowerCase(),null,!1,!1)});var Cw=/[\-:]([a-z])/g;function Pw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Cw,Pw);Mi[t]=new ls(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Cw,Pw);Mi[t]=new ls(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Cw,Pw);Mi[t]=new ls(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Mi[e]=new ls(e,1,!1,e.toLowerCase(),null,!1,!1)});Mi.xlinkHref=new ls("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Mi[e]=new ls(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ew(e,t,n,s){var u=Mi.hasOwnProperty(t)?Mi[t]:null;(u!==null?u.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(YN(t,n,u,s)&&(n=null),s||u===null?XN(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):u.mustUseProperty?e[u.propertyName]=n===null?u.type===3?!1:"":n:(t=u.attributeName,s=u.attributeNamespace,n===null?e.removeAttribute(t):(u=u.type,n=u===3||u===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var sl=qN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Iy=Symbol.for("react.element"),Kd=Symbol.for("react.portal"),Yd=Symbol.for("react.fragment"),Mw=Symbol.for("react.strict_mode"),Lb=Symbol.for("react.profiler"),dM=Symbol.for("react.provider"),hM=Symbol.for("react.context"),kw=Symbol.for("react.forward_ref"),Nb=Symbol.for("react.suspense"),Ob=Symbol.for("react.suspense_list"),Iw=Symbol.for("react.memo"),Nl=Symbol.for("react.lazy"),pM=Symbol.for("react.offscreen"),iC=Symbol.iterator;function If(e){return e===null||typeof e!="object"?null:(e=iC&&e[iC]||e["@@iterator"],typeof e=="function"?e:null)}var Mn=Object.assign,Nx;function Zf(e){if(Nx===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Nx=t&&t[1]||""}return`
`+Nx+e}var Ox=!1;function Fx(e,t){if(!e||Ox)return"";Ox=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var s=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){s=E}e.call(t.prototype)}else{try{throw Error()}catch(E){s=E}e()}}catch(E){if(E&&s&&typeof E.stack=="string"){for(var u=E.stack.split(`
`),p=s.stack.split(`
`),f=u.length-1,c=p.length-1;1<=f&&0<=c&&u[f]!==p[c];)c--;for(;1<=f&&0<=c;f--,c--)if(u[f]!==p[c]){if(f!==1||c!==1)do if(f--,c--,0>c||u[f]!==p[c]){var S=`
`+u[f].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=f&&0<=c);break}}}finally{Ox=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Zf(e):""}function QN(e){switch(e.tag){case 5:return Zf(e.type);case 16:return Zf("Lazy");case 13:return Zf("Suspense");case 19:return Zf("SuspenseList");case 0:case 2:case 15:return e=Fx(e.type,!1),e;case 11:return e=Fx(e.type.render,!1),e;case 1:return e=Fx(e.type,!0),e;default:return""}}function Fb(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yd:return"Fragment";case Kd:return"Portal";case Lb:return"Profiler";case Mw:return"StrictMode";case Nb:return"Suspense";case Ob:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case hM:return(e.displayName||"Context")+".Consumer";case dM:return(e._context.displayName||"Context")+".Provider";case kw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Iw:return t=e.displayName||null,t!==null?t:Fb(e.type)||"Memo";case Nl:t=e._payload,e=e._init;try{return Fb(e(t))}catch{}}return null}function JN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fb(t);case 8:return t===Mw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function oc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fM(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function eO(e){var t=fM(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var u=n.get,p=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(f){s=""+f,p.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(f){s=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ry(e){e._valueTracker||(e._valueTracker=eO(e))}function mM(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=fM(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function T_(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Bb(e,t){var n=t.checked;return Mn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function sC(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=oc(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function gM(e,t){t=t.checked,t!=null&&Ew(e,"checked",t,!1)}function Ub(e,t){gM(e,t);var n=oc(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vb(e,t.type,n):t.hasOwnProperty("defaultValue")&&Vb(e,t.type,oc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function oC(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Vb(e,t,n){(t!=="number"||T_(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Gf=Array.isArray;function ch(e,t,n,s){if(e=e.options,t){t={};for(var u=0;u<n.length;u++)t["$"+n[u]]=!0;for(n=0;n<e.length;n++)u=t.hasOwnProperty("$"+e[n].value),e[n].selected!==u&&(e[n].selected=u),u&&s&&(e[n].defaultSelected=!0)}else{for(n=""+oc(n),t=null,u=0;u<e.length;u++){if(e[u].value===n){e[u].selected=!0,s&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function $b(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(mt(91));return Mn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function aC(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(mt(92));if(Gf(n)){if(1<n.length)throw Error(mt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:oc(n)}}function yM(e,t){var n=oc(t.value),s=oc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function lC(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function _M(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zb(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?_M(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ay,vM=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,u){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,u)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ay=Ay||document.createElement("div"),Ay.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ay.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function hm(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var tm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tO=["Webkit","ms","Moz","O"];Object.keys(tm).forEach(function(e){tO.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),tm[t]=tm[e]})});function xM(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||tm.hasOwnProperty(e)&&tm[e]?(""+t).trim():t+"px"}function bM(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,u=xM(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,u):e[n]=u}}var rO=Mn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gb(e,t){if(t){if(rO[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(mt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(mt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(mt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(mt(62))}}function Hb(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qb=null;function Rw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wb=null,uh=null,dh=null;function cC(e){if(e=sg(e)){if(typeof Wb!="function")throw Error(mt(280));var t=e.stateNode;t&&(t=Tv(t),Wb(e.stateNode,e.type,t))}}function wM(e){uh?dh?dh.push(e):dh=[e]:uh=e}function SM(){if(uh){var e=uh,t=dh;if(dh=uh=null,cC(e),t)for(e=0;e<t.length;e++)cC(t[e])}}function TM(e,t){return e(t)}function CM(){}var Bx=!1;function PM(e,t,n){if(Bx)return e(t,n);Bx=!0;try{return TM(e,t,n)}finally{Bx=!1,(uh!==null||dh!==null)&&(CM(),SM())}}function pm(e,t){var n=e.stateNode;if(n===null)return null;var s=Tv(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(mt(231,t,typeof n));return n}var Xb=!1;if(Ya)try{var Rf={};Object.defineProperty(Rf,"passive",{get:function(){Xb=!0}}),window.addEventListener("test",Rf,Rf),window.removeEventListener("test",Rf,Rf)}catch{Xb=!1}function nO(e,t,n,s,u,p,f,c,S){var E=Array.prototype.slice.call(arguments,3);try{t.apply(n,E)}catch(A){this.onError(A)}}var rm=!1,C_=null,P_=!1,Kb=null,iO={onError:function(e){rm=!0,C_=e}};function sO(e,t,n,s,u,p,f,c,S){rm=!1,C_=null,nO.apply(iO,arguments)}function oO(e,t,n,s,u,p,f,c,S){if(sO.apply(this,arguments),rm){if(rm){var E=C_;rm=!1,C_=null}else throw Error(mt(198));P_||(P_=!0,Kb=E)}}function Gu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function EM(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function uC(e){if(Gu(e)!==e)throw Error(mt(188))}function aO(e){var t=e.alternate;if(!t){if(t=Gu(e),t===null)throw Error(mt(188));return t!==e?null:e}for(var n=e,s=t;;){var u=n.return;if(u===null)break;var p=u.alternate;if(p===null){if(s=u.return,s!==null){n=s;continue}break}if(u.child===p.child){for(p=u.child;p;){if(p===n)return uC(u),e;if(p===s)return uC(u),t;p=p.sibling}throw Error(mt(188))}if(n.return!==s.return)n=u,s=p;else{for(var f=!1,c=u.child;c;){if(c===n){f=!0,n=u,s=p;break}if(c===s){f=!0,s=u,n=p;break}c=c.sibling}if(!f){for(c=p.child;c;){if(c===n){f=!0,n=p,s=u;break}if(c===s){f=!0,s=p,n=u;break}c=c.sibling}if(!f)throw Error(mt(189))}}if(n.alternate!==s)throw Error(mt(190))}if(n.tag!==3)throw Error(mt(188));return n.stateNode.current===n?e:t}function MM(e){return e=aO(e),e!==null?kM(e):null}function kM(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=kM(e);if(t!==null)return t;e=e.sibling}return null}var IM=qs.unstable_scheduleCallback,dC=qs.unstable_cancelCallback,lO=qs.unstable_shouldYield,cO=qs.unstable_requestPaint,Vn=qs.unstable_now,uO=qs.unstable_getCurrentPriorityLevel,Aw=qs.unstable_ImmediatePriority,RM=qs.unstable_UserBlockingPriority,E_=qs.unstable_NormalPriority,dO=qs.unstable_LowPriority,AM=qs.unstable_IdlePriority,xv=null,aa=null;function hO(e){if(aa&&typeof aa.onCommitFiberRoot=="function")try{aa.onCommitFiberRoot(xv,e,void 0,(e.current.flags&128)===128)}catch{}}var Lo=Math.clz32?Math.clz32:mO,pO=Math.log,fO=Math.LN2;function mO(e){return e>>>=0,e===0?32:31-(pO(e)/fO|0)|0}var Dy=64,zy=4194304;function Hf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function M_(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,u=e.suspendedLanes,p=e.pingedLanes,f=n&268435455;if(f!==0){var c=f&~u;c!==0?s=Hf(c):(p&=f,p!==0&&(s=Hf(p)))}else f=n&~u,f!==0?s=Hf(f):p!==0&&(s=Hf(p));if(s===0)return 0;if(t!==0&&t!==s&&!(t&u)&&(u=s&-s,p=t&-t,u>=p||u===16&&(p&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Lo(t),u=1<<n,s|=e[n],t&=~u;return s}function gO(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yO(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,u=e.expirationTimes,p=e.pendingLanes;0<p;){var f=31-Lo(p),c=1<<f,S=u[f];S===-1?(!(c&n)||c&s)&&(u[f]=gO(c,t)):S<=t&&(e.expiredLanes|=c),p&=~c}}function Yb(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function DM(){var e=Dy;return Dy<<=1,!(Dy&4194240)&&(Dy=64),e}function Ux(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ng(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Lo(t),e[t]=n}function _O(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var u=31-Lo(n),p=1<<u;t[u]=0,s[u]=-1,e[u]=-1,n&=~p}}function Dw(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Lo(n),u=1<<s;u&t|e[s]&t&&(e[s]|=t),n&=~u}}var Zr=0;function zM(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var jM,zw,LM,NM,OM,Qb=!1,jy=[],Yl=null,Ql=null,Jl=null,fm=new Map,mm=new Map,Fl=[],vO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hC(e,t){switch(e){case"focusin":case"focusout":Yl=null;break;case"dragenter":case"dragleave":Ql=null;break;case"mouseover":case"mouseout":Jl=null;break;case"pointerover":case"pointerout":fm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mm.delete(t.pointerId)}}function Af(e,t,n,s,u,p){return e===null||e.nativeEvent!==p?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:p,targetContainers:[u]},t!==null&&(t=sg(t),t!==null&&zw(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function xO(e,t,n,s,u){switch(t){case"focusin":return Yl=Af(Yl,e,t,n,s,u),!0;case"dragenter":return Ql=Af(Ql,e,t,n,s,u),!0;case"mouseover":return Jl=Af(Jl,e,t,n,s,u),!0;case"pointerover":var p=u.pointerId;return fm.set(p,Af(fm.get(p)||null,e,t,n,s,u)),!0;case"gotpointercapture":return p=u.pointerId,mm.set(p,Af(mm.get(p)||null,e,t,n,s,u)),!0}return!1}function FM(e){var t=pu(e.target);if(t!==null){var n=Gu(t);if(n!==null){if(t=n.tag,t===13){if(t=EM(n),t!==null){e.blockedOn=t,OM(e.priority,function(){LM(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function i_(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);qb=s,n.target.dispatchEvent(s),qb=null}else return t=sg(n),t!==null&&zw(t),e.blockedOn=n,!1;t.shift()}return!0}function pC(e,t,n){i_(e)&&n.delete(t)}function bO(){Qb=!1,Yl!==null&&i_(Yl)&&(Yl=null),Ql!==null&&i_(Ql)&&(Ql=null),Jl!==null&&i_(Jl)&&(Jl=null),fm.forEach(pC),mm.forEach(pC)}function Df(e,t){e.blockedOn===t&&(e.blockedOn=null,Qb||(Qb=!0,qs.unstable_scheduleCallback(qs.unstable_NormalPriority,bO)))}function gm(e){function t(u){return Df(u,e)}if(0<jy.length){Df(jy[0],e);for(var n=1;n<jy.length;n++){var s=jy[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Yl!==null&&Df(Yl,e),Ql!==null&&Df(Ql,e),Jl!==null&&Df(Jl,e),fm.forEach(t),mm.forEach(t),n=0;n<Fl.length;n++)s=Fl[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Fl.length&&(n=Fl[0],n.blockedOn===null);)FM(n),n.blockedOn===null&&Fl.shift()}var hh=sl.ReactCurrentBatchConfig,k_=!0;function wO(e,t,n,s){var u=Zr,p=hh.transition;hh.transition=null;try{Zr=1,jw(e,t,n,s)}finally{Zr=u,hh.transition=p}}function SO(e,t,n,s){var u=Zr,p=hh.transition;hh.transition=null;try{Zr=4,jw(e,t,n,s)}finally{Zr=u,hh.transition=p}}function jw(e,t,n,s){if(k_){var u=Jb(e,t,n,s);if(u===null)Yx(e,t,s,I_,n),hC(e,s);else if(xO(u,e,t,n,s))s.stopPropagation();else if(hC(e,s),t&4&&-1<vO.indexOf(e)){for(;u!==null;){var p=sg(u);if(p!==null&&jM(p),p=Jb(e,t,n,s),p===null&&Yx(e,t,s,I_,n),p===u)break;u=p}u!==null&&s.stopPropagation()}else Yx(e,t,s,null,n)}}var I_=null;function Jb(e,t,n,s){if(I_=null,e=Rw(s),e=pu(e),e!==null)if(t=Gu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=EM(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return I_=e,null}function BM(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uO()){case Aw:return 1;case RM:return 4;case E_:case dO:return 16;case AM:return 536870912;default:return 16}default:return 16}}var Wl=null,Lw=null,s_=null;function UM(){if(s_)return s_;var e,t=Lw,n=t.length,s,u="value"in Wl?Wl.value:Wl.textContent,p=u.length;for(e=0;e<n&&t[e]===u[e];e++);var f=n-e;for(s=1;s<=f&&t[n-s]===u[p-s];s++);return s_=u.slice(e,1<s?1-s:void 0)}function o_(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ly(){return!0}function fC(){return!1}function Ks(e){function t(n,s,u,p,f){this._reactName=n,this._targetInst=u,this.type=s,this.nativeEvent=p,this.target=f,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(p):p[c]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ly:fC,this.isPropagationStopped=fC,this}return Mn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ly)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ly)},persist:function(){},isPersistent:Ly}),t}var Wh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nw=Ks(Wh),ig=Mn({},Wh,{view:0,detail:0}),TO=Ks(ig),Vx,$x,zf,bv=Mn({},ig,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ow,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zf&&(zf&&e.type==="mousemove"?(Vx=e.screenX-zf.screenX,$x=e.screenY-zf.screenY):$x=Vx=0,zf=e),Vx)},movementY:function(e){return"movementY"in e?e.movementY:$x}}),mC=Ks(bv),CO=Mn({},bv,{dataTransfer:0}),PO=Ks(CO),EO=Mn({},ig,{relatedTarget:0}),Zx=Ks(EO),MO=Mn({},Wh,{animationName:0,elapsedTime:0,pseudoElement:0}),kO=Ks(MO),IO=Mn({},Wh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),RO=Ks(IO),AO=Mn({},Wh,{data:0}),gC=Ks(AO),DO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LO(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jO[e])?!!t[e]:!1}function Ow(){return LO}var NO=Mn({},ig,{key:function(e){if(e.key){var t=DO[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=o_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zO[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ow,charCode:function(e){return e.type==="keypress"?o_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?o_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),OO=Ks(NO),FO=Mn({},bv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yC=Ks(FO),BO=Mn({},ig,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ow}),UO=Ks(BO),VO=Mn({},Wh,{propertyName:0,elapsedTime:0,pseudoElement:0}),$O=Ks(VO),ZO=Mn({},bv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),GO=Ks(ZO),HO=[9,13,27,32],Fw=Ya&&"CompositionEvent"in window,nm=null;Ya&&"documentMode"in document&&(nm=document.documentMode);var qO=Ya&&"TextEvent"in window&&!nm,VM=Ya&&(!Fw||nm&&8<nm&&11>=nm),_C=" ",vC=!1;function $M(e,t){switch(e){case"keyup":return HO.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZM(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qd=!1;function WO(e,t){switch(e){case"compositionend":return ZM(t);case"keypress":return t.which!==32?null:(vC=!0,_C);case"textInput":return e=t.data,e===_C&&vC?null:e;default:return null}}function XO(e,t){if(Qd)return e==="compositionend"||!Fw&&$M(e,t)?(e=UM(),s_=Lw=Wl=null,Qd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return VM&&t.locale!=="ko"?null:t.data;default:return null}}var KO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!KO[e.type]:t==="textarea"}function GM(e,t,n,s){wM(s),t=R_(t,"onChange"),0<t.length&&(n=new Nw("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var im=null,ym=null;function YO(e){rk(e,0)}function wv(e){var t=th(e);if(mM(t))return e}function QO(e,t){if(e==="change")return t}var HM=!1;if(Ya){var Gx;if(Ya){var Hx="oninput"in document;if(!Hx){var bC=document.createElement("div");bC.setAttribute("oninput","return;"),Hx=typeof bC.oninput=="function"}Gx=Hx}else Gx=!1;HM=Gx&&(!document.documentMode||9<document.documentMode)}function wC(){im&&(im.detachEvent("onpropertychange",qM),ym=im=null)}function qM(e){if(e.propertyName==="value"&&wv(ym)){var t=[];GM(t,ym,e,Rw(e)),PM(YO,t)}}function JO(e,t,n){e==="focusin"?(wC(),im=t,ym=n,im.attachEvent("onpropertychange",qM)):e==="focusout"&&wC()}function eF(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wv(ym)}function tF(e,t){if(e==="click")return wv(t)}function rF(e,t){if(e==="input"||e==="change")return wv(t)}function nF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fo=typeof Object.is=="function"?Object.is:nF;function _m(e,t){if(Fo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var u=n[s];if(!jb.call(t,u)||!Fo(e[u],t[u]))return!1}return!0}function SC(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function TC(e,t){var n=SC(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=SC(n)}}function WM(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?WM(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function XM(){for(var e=window,t=T_();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=T_(e.document)}return t}function Bw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function iF(e){var t=XM(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&WM(n.ownerDocument.documentElement,n)){if(s!==null&&Bw(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=n.textContent.length,p=Math.min(s.start,u);s=s.end===void 0?p:Math.min(s.end,u),!e.extend&&p>s&&(u=s,s=p,p=u),u=TC(n,p);var f=TC(n,s);u&&f&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),p>s?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sF=Ya&&"documentMode"in document&&11>=document.documentMode,Jd=null,e1=null,sm=null,t1=!1;function CC(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;t1||Jd==null||Jd!==T_(s)||(s=Jd,"selectionStart"in s&&Bw(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),sm&&_m(sm,s)||(sm=s,s=R_(e1,"onSelect"),0<s.length&&(t=new Nw("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Jd)))}function Ny(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var eh={animationend:Ny("Animation","AnimationEnd"),animationiteration:Ny("Animation","AnimationIteration"),animationstart:Ny("Animation","AnimationStart"),transitionend:Ny("Transition","TransitionEnd")},qx={},KM={};Ya&&(KM=document.createElement("div").style,"AnimationEvent"in window||(delete eh.animationend.animation,delete eh.animationiteration.animation,delete eh.animationstart.animation),"TransitionEvent"in window||delete eh.transitionend.transition);function Sv(e){if(qx[e])return qx[e];if(!eh[e])return e;var t=eh[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in KM)return qx[e]=t[n];return e}var YM=Sv("animationend"),QM=Sv("animationiteration"),JM=Sv("animationstart"),ek=Sv("transitionend"),tk=new Map,PC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gc(e,t){tk.set(e,t),Zu(t,[e])}for(var Wx=0;Wx<PC.length;Wx++){var Xx=PC[Wx],oF=Xx.toLowerCase(),aF=Xx[0].toUpperCase()+Xx.slice(1);gc(oF,"on"+aF)}gc(YM,"onAnimationEnd");gc(QM,"onAnimationIteration");gc(JM,"onAnimationStart");gc("dblclick","onDoubleClick");gc("focusin","onFocus");gc("focusout","onBlur");gc(ek,"onTransitionEnd");Dh("onMouseEnter",["mouseout","mouseover"]);Dh("onMouseLeave",["mouseout","mouseover"]);Dh("onPointerEnter",["pointerout","pointerover"]);Dh("onPointerLeave",["pointerout","pointerover"]);Zu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lF=new Set("cancel close invalid load scroll toggle".split(" ").concat(qf));function EC(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,oO(s,t,void 0,e),e.currentTarget=null}function rk(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],u=s.event;s=s.listeners;e:{var p=void 0;if(t)for(var f=s.length-1;0<=f;f--){var c=s[f],S=c.instance,E=c.currentTarget;if(c=c.listener,S!==p&&u.isPropagationStopped())break e;EC(u,c,E),p=S}else for(f=0;f<s.length;f++){if(c=s[f],S=c.instance,E=c.currentTarget,c=c.listener,S!==p&&u.isPropagationStopped())break e;EC(u,c,E),p=S}}}if(P_)throw e=Kb,P_=!1,Kb=null,e}function hn(e,t){var n=t[o1];n===void 0&&(n=t[o1]=new Set);var s=e+"__bubble";n.has(s)||(nk(t,e,2,!1),n.add(s))}function Kx(e,t,n){var s=0;t&&(s|=4),nk(n,e,s,t)}var Oy="_reactListening"+Math.random().toString(36).slice(2);function vm(e){if(!e[Oy]){e[Oy]=!0,uM.forEach(function(n){n!=="selectionchange"&&(lF.has(n)||Kx(n,!1,e),Kx(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Oy]||(t[Oy]=!0,Kx("selectionchange",!1,t))}}function nk(e,t,n,s){switch(BM(t)){case 1:var u=wO;break;case 4:u=SO;break;default:u=jw}n=u.bind(null,t,n,e),u=void 0,!Xb||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),s?u!==void 0?e.addEventListener(t,n,{capture:!0,passive:u}):e.addEventListener(t,n,!0):u!==void 0?e.addEventListener(t,n,{passive:u}):e.addEventListener(t,n,!1)}function Yx(e,t,n,s,u){var p=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var f=s.tag;if(f===3||f===4){var c=s.stateNode.containerInfo;if(c===u||c.nodeType===8&&c.parentNode===u)break;if(f===4)for(f=s.return;f!==null;){var S=f.tag;if((S===3||S===4)&&(S=f.stateNode.containerInfo,S===u||S.nodeType===8&&S.parentNode===u))return;f=f.return}for(;c!==null;){if(f=pu(c),f===null)return;if(S=f.tag,S===5||S===6){s=p=f;continue e}c=c.parentNode}}s=s.return}PM(function(){var E=p,A=Rw(n),z=[];e:{var L=tk.get(e);if(L!==void 0){var I=Nw,F=e;switch(e){case"keypress":if(o_(n)===0)break e;case"keydown":case"keyup":I=OO;break;case"focusin":F="focus",I=Zx;break;case"focusout":F="blur",I=Zx;break;case"beforeblur":case"afterblur":I=Zx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=mC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=PO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=UO;break;case YM:case QM:case JM:I=kO;break;case ek:I=$O;break;case"scroll":I=TO;break;case"wheel":I=GO;break;case"copy":case"cut":case"paste":I=RO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=yC}var B=(t&4)!==0,X=!B&&e==="scroll",q=B?L!==null?L+"Capture":null:L;B=[];for(var V=E,Y;V!==null;){Y=V;var de=Y.stateNode;if(Y.tag===5&&de!==null&&(Y=de,q!==null&&(de=pm(V,q),de!=null&&B.push(xm(V,de,Y)))),X)break;V=V.return}0<B.length&&(L=new I(L,F,null,n,A),z.push({event:L,listeners:B}))}}if(!(t&7)){e:{if(L=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",L&&n!==qb&&(F=n.relatedTarget||n.fromElement)&&(pu(F)||F[Qa]))break e;if((I||L)&&(L=A.window===A?A:(L=A.ownerDocument)?L.defaultView||L.parentWindow:window,I?(F=n.relatedTarget||n.toElement,I=E,F=F?pu(F):null,F!==null&&(X=Gu(F),F!==X||F.tag!==5&&F.tag!==6)&&(F=null)):(I=null,F=E),I!==F)){if(B=mC,de="onMouseLeave",q="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(B=yC,de="onPointerLeave",q="onPointerEnter",V="pointer"),X=I==null?L:th(I),Y=F==null?L:th(F),L=new B(de,V+"leave",I,n,A),L.target=X,L.relatedTarget=Y,de=null,pu(A)===E&&(B=new B(q,V+"enter",F,n,A),B.target=Y,B.relatedTarget=X,de=B),X=de,I&&F)t:{for(B=I,q=F,V=0,Y=B;Y;Y=$d(Y))V++;for(Y=0,de=q;de;de=$d(de))Y++;for(;0<V-Y;)B=$d(B),V--;for(;0<Y-V;)q=$d(q),Y--;for(;V--;){if(B===q||q!==null&&B===q.alternate)break t;B=$d(B),q=$d(q)}B=null}else B=null;I!==null&&MC(z,L,I,B,!1),F!==null&&X!==null&&MC(z,X,F,B,!0)}}e:{if(L=E?th(E):window,I=L.nodeName&&L.nodeName.toLowerCase(),I==="select"||I==="input"&&L.type==="file")var Se=QO;else if(xC(L))if(HM)Se=rF;else{Se=eF;var ce=JO}else(I=L.nodeName)&&I.toLowerCase()==="input"&&(L.type==="checkbox"||L.type==="radio")&&(Se=tF);if(Se&&(Se=Se(e,E))){GM(z,Se,n,A);break e}ce&&ce(e,L,E),e==="focusout"&&(ce=L._wrapperState)&&ce.controlled&&L.type==="number"&&Vb(L,"number",L.value)}switch(ce=E?th(E):window,e){case"focusin":(xC(ce)||ce.contentEditable==="true")&&(Jd=ce,e1=E,sm=null);break;case"focusout":sm=e1=Jd=null;break;case"mousedown":t1=!0;break;case"contextmenu":case"mouseup":case"dragend":t1=!1,CC(z,n,A);break;case"selectionchange":if(sF)break;case"keydown":case"keyup":CC(z,n,A)}var Re;if(Fw)e:{switch(e){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Qd?$M(e,n)&&(Ie="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ie="onCompositionStart");Ie&&(VM&&n.locale!=="ko"&&(Qd||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Qd&&(Re=UM()):(Wl=A,Lw="value"in Wl?Wl.value:Wl.textContent,Qd=!0)),ce=R_(E,Ie),0<ce.length&&(Ie=new gC(Ie,e,null,n,A),z.push({event:Ie,listeners:ce}),Re?Ie.data=Re:(Re=ZM(n),Re!==null&&(Ie.data=Re)))),(Re=qO?WO(e,n):XO(e,n))&&(E=R_(E,"onBeforeInput"),0<E.length&&(A=new gC("onBeforeInput","beforeinput",null,n,A),z.push({event:A,listeners:E}),A.data=Re))}rk(z,t)})}function xm(e,t,n){return{instance:e,listener:t,currentTarget:n}}function R_(e,t){for(var n=t+"Capture",s=[];e!==null;){var u=e,p=u.stateNode;u.tag===5&&p!==null&&(u=p,p=pm(e,n),p!=null&&s.unshift(xm(e,p,u)),p=pm(e,t),p!=null&&s.push(xm(e,p,u))),e=e.return}return s}function $d(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function MC(e,t,n,s,u){for(var p=t._reactName,f=[];n!==null&&n!==s;){var c=n,S=c.alternate,E=c.stateNode;if(S!==null&&S===s)break;c.tag===5&&E!==null&&(c=E,u?(S=pm(n,p),S!=null&&f.unshift(xm(n,S,c))):u||(S=pm(n,p),S!=null&&f.push(xm(n,S,c)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var cF=/\r\n?/g,uF=/\u0000|\uFFFD/g;function kC(e){return(typeof e=="string"?e:""+e).replace(cF,`
`).replace(uF,"")}function Fy(e,t,n){if(t=kC(t),kC(e)!==t&&n)throw Error(mt(425))}function A_(){}var r1=null,n1=null;function i1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var s1=typeof setTimeout=="function"?setTimeout:void 0,dF=typeof clearTimeout=="function"?clearTimeout:void 0,IC=typeof Promise=="function"?Promise:void 0,hF=typeof queueMicrotask=="function"?queueMicrotask:typeof IC<"u"?function(e){return IC.resolve(null).then(e).catch(pF)}:s1;function pF(e){setTimeout(function(){throw e})}function Qx(e,t){var n=t,s=0;do{var u=n.nextSibling;if(e.removeChild(n),u&&u.nodeType===8)if(n=u.data,n==="/$"){if(s===0){e.removeChild(u),gm(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=u}while(n);gm(t)}function ec(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function RC(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Xh=Math.random().toString(36).slice(2),sa="__reactFiber$"+Xh,bm="__reactProps$"+Xh,Qa="__reactContainer$"+Xh,o1="__reactEvents$"+Xh,fF="__reactListeners$"+Xh,mF="__reactHandles$"+Xh;function pu(e){var t=e[sa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qa]||n[sa]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=RC(e);e!==null;){if(n=e[sa])return n;e=RC(e)}return t}e=n,n=e.parentNode}return null}function sg(e){return e=e[sa]||e[Qa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function th(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(mt(33))}function Tv(e){return e[bm]||null}var a1=[],rh=-1;function yc(e){return{current:e}}function pn(e){0>rh||(e.current=a1[rh],a1[rh]=null,rh--)}function an(e,t){rh++,a1[rh]=e.current,e.current=t}var ac={},Hi=yc(ac),vs=yc(!1),ku=ac;function zh(e,t){var n=e.type.contextTypes;if(!n)return ac;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var u={},p;for(p in n)u[p]=t[p];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function xs(e){return e=e.childContextTypes,e!=null}function D_(){pn(vs),pn(Hi)}function AC(e,t,n){if(Hi.current!==ac)throw Error(mt(168));an(Hi,t),an(vs,n)}function ik(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var u in s)if(!(u in t))throw Error(mt(108,JN(e)||"Unknown",u));return Mn({},n,s)}function z_(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ac,ku=Hi.current,an(Hi,e),an(vs,vs.current),!0}function DC(e,t,n){var s=e.stateNode;if(!s)throw Error(mt(169));n?(e=ik(e,t,ku),s.__reactInternalMemoizedMergedChildContext=e,pn(vs),pn(Hi),an(Hi,e)):pn(vs),an(vs,n)}var Za=null,Cv=!1,Jx=!1;function sk(e){Za===null?Za=[e]:Za.push(e)}function gF(e){Cv=!0,sk(e)}function _c(){if(!Jx&&Za!==null){Jx=!0;var e=0,t=Zr;try{var n=Za;for(Zr=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Za=null,Cv=!1}catch(u){throw Za!==null&&(Za=Za.slice(e+1)),IM(Aw,_c),u}finally{Zr=t,Jx=!1}}return null}var nh=[],ih=0,j_=null,L_=0,uo=[],ho=0,Iu=null,qa=1,Wa="";function lu(e,t){nh[ih++]=L_,nh[ih++]=j_,j_=e,L_=t}function ok(e,t,n){uo[ho++]=qa,uo[ho++]=Wa,uo[ho++]=Iu,Iu=e;var s=qa;e=Wa;var u=32-Lo(s)-1;s&=~(1<<u),n+=1;var p=32-Lo(t)+u;if(30<p){var f=u-u%5;p=(s&(1<<f)-1).toString(32),s>>=f,u-=f,qa=1<<32-Lo(t)+u|n<<u|s,Wa=p+e}else qa=1<<p|n<<u|s,Wa=e}function Uw(e){e.return!==null&&(lu(e,1),ok(e,1,0))}function Vw(e){for(;e===j_;)j_=nh[--ih],nh[ih]=null,L_=nh[--ih],nh[ih]=null;for(;e===Iu;)Iu=uo[--ho],uo[ho]=null,Wa=uo[--ho],uo[ho]=null,qa=uo[--ho],uo[ho]=null}var $s=null,Vs=null,xn=!1,Ao=null;function ak(e,t){var n=po(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function zC(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,$s=e,Vs=ec(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,$s=e,Vs=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Iu!==null?{id:qa,overflow:Wa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=po(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,$s=e,Vs=null,!0):!1;default:return!1}}function l1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function c1(e){if(xn){var t=Vs;if(t){var n=t;if(!zC(e,t)){if(l1(e))throw Error(mt(418));t=ec(n.nextSibling);var s=$s;t&&zC(e,t)?ak(s,n):(e.flags=e.flags&-4097|2,xn=!1,$s=e)}}else{if(l1(e))throw Error(mt(418));e.flags=e.flags&-4097|2,xn=!1,$s=e}}}function jC(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$s=e}function By(e){if(e!==$s)return!1;if(!xn)return jC(e),xn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!i1(e.type,e.memoizedProps)),t&&(t=Vs)){if(l1(e))throw lk(),Error(mt(418));for(;t;)ak(e,t),t=ec(t.nextSibling)}if(jC(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(mt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Vs=ec(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Vs=null}}else Vs=$s?ec(e.stateNode.nextSibling):null;return!0}function lk(){for(var e=Vs;e;)e=ec(e.nextSibling)}function jh(){Vs=$s=null,xn=!1}function $w(e){Ao===null?Ao=[e]:Ao.push(e)}var yF=sl.ReactCurrentBatchConfig;function jf(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(mt(309));var s=n.stateNode}if(!s)throw Error(mt(147,e));var u=s,p=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===p?t.ref:(t=function(f){var c=u.refs;f===null?delete c[p]:c[p]=f},t._stringRef=p,t)}if(typeof e!="string")throw Error(mt(284));if(!n._owner)throw Error(mt(290,e))}return e}function Uy(e,t){throw e=Object.prototype.toString.call(t),Error(mt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function LC(e){var t=e._init;return t(e._payload)}function ck(e){function t(q,V){if(e){var Y=q.deletions;Y===null?(q.deletions=[V],q.flags|=16):Y.push(V)}}function n(q,V){if(!e)return null;for(;V!==null;)t(q,V),V=V.sibling;return null}function s(q,V){for(q=new Map;V!==null;)V.key!==null?q.set(V.key,V):q.set(V.index,V),V=V.sibling;return q}function u(q,V){return q=ic(q,V),q.index=0,q.sibling=null,q}function p(q,V,Y){return q.index=Y,e?(Y=q.alternate,Y!==null?(Y=Y.index,Y<V?(q.flags|=2,V):Y):(q.flags|=2,V)):(q.flags|=1048576,V)}function f(q){return e&&q.alternate===null&&(q.flags|=2),q}function c(q,V,Y,de){return V===null||V.tag!==6?(V=ob(Y,q.mode,de),V.return=q,V):(V=u(V,Y),V.return=q,V)}function S(q,V,Y,de){var Se=Y.type;return Se===Yd?A(q,V,Y.props.children,de,Y.key):V!==null&&(V.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Nl&&LC(Se)===V.type)?(de=u(V,Y.props),de.ref=jf(q,V,Y),de.return=q,de):(de=p_(Y.type,Y.key,Y.props,null,q.mode,de),de.ref=jf(q,V,Y),de.return=q,de)}function E(q,V,Y,de){return V===null||V.tag!==4||V.stateNode.containerInfo!==Y.containerInfo||V.stateNode.implementation!==Y.implementation?(V=ab(Y,q.mode,de),V.return=q,V):(V=u(V,Y.children||[]),V.return=q,V)}function A(q,V,Y,de,Se){return V===null||V.tag!==7?(V=Pu(Y,q.mode,de,Se),V.return=q,V):(V=u(V,Y),V.return=q,V)}function z(q,V,Y){if(typeof V=="string"&&V!==""||typeof V=="number")return V=ob(""+V,q.mode,Y),V.return=q,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Iy:return Y=p_(V.type,V.key,V.props,null,q.mode,Y),Y.ref=jf(q,null,V),Y.return=q,Y;case Kd:return V=ab(V,q.mode,Y),V.return=q,V;case Nl:var de=V._init;return z(q,de(V._payload),Y)}if(Gf(V)||If(V))return V=Pu(V,q.mode,Y,null),V.return=q,V;Uy(q,V)}return null}function L(q,V,Y,de){var Se=V!==null?V.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Se!==null?null:c(q,V,""+Y,de);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case Iy:return Y.key===Se?S(q,V,Y,de):null;case Kd:return Y.key===Se?E(q,V,Y,de):null;case Nl:return Se=Y._init,L(q,V,Se(Y._payload),de)}if(Gf(Y)||If(Y))return Se!==null?null:A(q,V,Y,de,null);Uy(q,Y)}return null}function I(q,V,Y,de,Se){if(typeof de=="string"&&de!==""||typeof de=="number")return q=q.get(Y)||null,c(V,q,""+de,Se);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case Iy:return q=q.get(de.key===null?Y:de.key)||null,S(V,q,de,Se);case Kd:return q=q.get(de.key===null?Y:de.key)||null,E(V,q,de,Se);case Nl:var ce=de._init;return I(q,V,Y,ce(de._payload),Se)}if(Gf(de)||If(de))return q=q.get(Y)||null,A(V,q,de,Se,null);Uy(V,de)}return null}function F(q,V,Y,de){for(var Se=null,ce=null,Re=V,Ie=V=0,We=null;Re!==null&&Ie<Y.length;Ie++){Re.index>Ie?(We=Re,Re=null):We=Re.sibling;var tt=L(q,Re,Y[Ie],de);if(tt===null){Re===null&&(Re=We);break}e&&Re&&tt.alternate===null&&t(q,Re),V=p(tt,V,Ie),ce===null?Se=tt:ce.sibling=tt,ce=tt,Re=We}if(Ie===Y.length)return n(q,Re),xn&&lu(q,Ie),Se;if(Re===null){for(;Ie<Y.length;Ie++)Re=z(q,Y[Ie],de),Re!==null&&(V=p(Re,V,Ie),ce===null?Se=Re:ce.sibling=Re,ce=Re);return xn&&lu(q,Ie),Se}for(Re=s(q,Re);Ie<Y.length;Ie++)We=I(Re,q,Ie,Y[Ie],de),We!==null&&(e&&We.alternate!==null&&Re.delete(We.key===null?Ie:We.key),V=p(We,V,Ie),ce===null?Se=We:ce.sibling=We,ce=We);return e&&Re.forEach(function(vt){return t(q,vt)}),xn&&lu(q,Ie),Se}function B(q,V,Y,de){var Se=If(Y);if(typeof Se!="function")throw Error(mt(150));if(Y=Se.call(Y),Y==null)throw Error(mt(151));for(var ce=Se=null,Re=V,Ie=V=0,We=null,tt=Y.next();Re!==null&&!tt.done;Ie++,tt=Y.next()){Re.index>Ie?(We=Re,Re=null):We=Re.sibling;var vt=L(q,Re,tt.value,de);if(vt===null){Re===null&&(Re=We);break}e&&Re&&vt.alternate===null&&t(q,Re),V=p(vt,V,Ie),ce===null?Se=vt:ce.sibling=vt,ce=vt,Re=We}if(tt.done)return n(q,Re),xn&&lu(q,Ie),Se;if(Re===null){for(;!tt.done;Ie++,tt=Y.next())tt=z(q,tt.value,de),tt!==null&&(V=p(tt,V,Ie),ce===null?Se=tt:ce.sibling=tt,ce=tt);return xn&&lu(q,Ie),Se}for(Re=s(q,Re);!tt.done;Ie++,tt=Y.next())tt=I(Re,q,Ie,tt.value,de),tt!==null&&(e&&tt.alternate!==null&&Re.delete(tt.key===null?Ie:tt.key),V=p(tt,V,Ie),ce===null?Se=tt:ce.sibling=tt,ce=tt);return e&&Re.forEach(function(st){return t(q,st)}),xn&&lu(q,Ie),Se}function X(q,V,Y,de){if(typeof Y=="object"&&Y!==null&&Y.type===Yd&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case Iy:e:{for(var Se=Y.key,ce=V;ce!==null;){if(ce.key===Se){if(Se=Y.type,Se===Yd){if(ce.tag===7){n(q,ce.sibling),V=u(ce,Y.props.children),V.return=q,q=V;break e}}else if(ce.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Nl&&LC(Se)===ce.type){n(q,ce.sibling),V=u(ce,Y.props),V.ref=jf(q,ce,Y),V.return=q,q=V;break e}n(q,ce);break}else t(q,ce);ce=ce.sibling}Y.type===Yd?(V=Pu(Y.props.children,q.mode,de,Y.key),V.return=q,q=V):(de=p_(Y.type,Y.key,Y.props,null,q.mode,de),de.ref=jf(q,V,Y),de.return=q,q=de)}return f(q);case Kd:e:{for(ce=Y.key;V!==null;){if(V.key===ce)if(V.tag===4&&V.stateNode.containerInfo===Y.containerInfo&&V.stateNode.implementation===Y.implementation){n(q,V.sibling),V=u(V,Y.children||[]),V.return=q,q=V;break e}else{n(q,V);break}else t(q,V);V=V.sibling}V=ab(Y,q.mode,de),V.return=q,q=V}return f(q);case Nl:return ce=Y._init,X(q,V,ce(Y._payload),de)}if(Gf(Y))return F(q,V,Y,de);if(If(Y))return B(q,V,Y,de);Uy(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,V!==null&&V.tag===6?(n(q,V.sibling),V=u(V,Y),V.return=q,q=V):(n(q,V),V=ob(Y,q.mode,de),V.return=q,q=V),f(q)):n(q,V)}return X}var Lh=ck(!0),uk=ck(!1),N_=yc(null),O_=null,sh=null,Zw=null;function Gw(){Zw=sh=O_=null}function Hw(e){var t=N_.current;pn(N_),e._currentValue=t}function u1(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function ph(e,t){O_=e,Zw=sh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(_s=!0),e.firstContext=null)}function yo(e){var t=e._currentValue;if(Zw!==e)if(e={context:e,memoizedValue:t,next:null},sh===null){if(O_===null)throw Error(mt(308));sh=e,O_.dependencies={lanes:0,firstContext:e}}else sh=sh.next=e;return t}var fu=null;function qw(e){fu===null?fu=[e]:fu.push(e)}function dk(e,t,n,s){var u=t.interleaved;return u===null?(n.next=n,qw(t)):(n.next=u.next,u.next=n),t.interleaved=n,Ja(e,s)}function Ja(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ol=!1;function Ww(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function tc(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Ar&2){var u=s.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),s.pending=t,Ja(e,n)}return u=s.interleaved,u===null?(t.next=t,qw(s)):(t.next=u.next,u.next=t),s.interleaved=t,Ja(e,n)}function a_(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Dw(e,n)}}function NC(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var u=null,p=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};p===null?u=p=f:p=p.next=f,n=n.next}while(n!==null);p===null?u=p=t:p=p.next=t}else u=p=t;n={baseState:s.baseState,firstBaseUpdate:u,lastBaseUpdate:p,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function F_(e,t,n,s){var u=e.updateQueue;Ol=!1;var p=u.firstBaseUpdate,f=u.lastBaseUpdate,c=u.shared.pending;if(c!==null){u.shared.pending=null;var S=c,E=S.next;S.next=null,f===null?p=E:f.next=E,f=S;var A=e.alternate;A!==null&&(A=A.updateQueue,c=A.lastBaseUpdate,c!==f&&(c===null?A.firstBaseUpdate=E:c.next=E,A.lastBaseUpdate=S))}if(p!==null){var z=u.baseState;f=0,A=E=S=null,c=p;do{var L=c.lane,I=c.eventTime;if((s&L)===L){A!==null&&(A=A.next={eventTime:I,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var F=e,B=c;switch(L=t,I=n,B.tag){case 1:if(F=B.payload,typeof F=="function"){z=F.call(I,z,L);break e}z=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=B.payload,L=typeof F=="function"?F.call(I,z,L):F,L==null)break e;z=Mn({},z,L);break e;case 2:Ol=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,L=u.effects,L===null?u.effects=[c]:L.push(c))}else I={eventTime:I,lane:L,tag:c.tag,payload:c.payload,callback:c.callback,next:null},A===null?(E=A=I,S=z):A=A.next=I,f|=L;if(c=c.next,c===null){if(c=u.shared.pending,c===null)break;L=c,c=L.next,L.next=null,u.lastBaseUpdate=L,u.shared.pending=null}}while(!0);if(A===null&&(S=z),u.baseState=S,u.firstBaseUpdate=E,u.lastBaseUpdate=A,t=u.shared.interleaved,t!==null){u=t;do f|=u.lane,u=u.next;while(u!==t)}else p===null&&(u.shared.lanes=0);Au|=f,e.lanes=f,e.memoizedState=z}}function OC(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],u=s.callback;if(u!==null){if(s.callback=null,s=n,typeof u!="function")throw Error(mt(191,u));u.call(s)}}}var og={},la=yc(og),wm=yc(og),Sm=yc(og);function mu(e){if(e===og)throw Error(mt(174));return e}function Xw(e,t){switch(an(Sm,t),an(wm,e),an(la,og),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Zb(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Zb(t,e)}pn(la),an(la,t)}function Nh(){pn(la),pn(wm),pn(Sm)}function pk(e){mu(Sm.current);var t=mu(la.current),n=Zb(t,e.type);t!==n&&(an(wm,e),an(la,n))}function Kw(e){wm.current===e&&(pn(la),pn(wm))}var Pn=yc(0);function B_(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var eb=[];function Yw(){for(var e=0;e<eb.length;e++)eb[e]._workInProgressVersionPrimary=null;eb.length=0}var l_=sl.ReactCurrentDispatcher,tb=sl.ReactCurrentBatchConfig,Ru=0,En=null,ai=null,gi=null,U_=!1,om=!1,Tm=0,_F=0;function Ui(){throw Error(mt(321))}function Qw(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Fo(e[n],t[n]))return!1;return!0}function Jw(e,t,n,s,u,p){if(Ru=p,En=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,l_.current=e===null||e.memoizedState===null?wF:SF,e=n(s,u),om){p=0;do{if(om=!1,Tm=0,25<=p)throw Error(mt(301));p+=1,gi=ai=null,t.updateQueue=null,l_.current=TF,e=n(s,u)}while(om)}if(l_.current=V_,t=ai!==null&&ai.next!==null,Ru=0,gi=ai=En=null,U_=!1,t)throw Error(mt(300));return e}function e2(){var e=Tm!==0;return Tm=0,e}function ea(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gi===null?En.memoizedState=gi=e:gi=gi.next=e,gi}function _o(){if(ai===null){var e=En.alternate;e=e!==null?e.memoizedState:null}else e=ai.next;var t=gi===null?En.memoizedState:gi.next;if(t!==null)gi=t,ai=e;else{if(e===null)throw Error(mt(310));ai=e,e={memoizedState:ai.memoizedState,baseState:ai.baseState,baseQueue:ai.baseQueue,queue:ai.queue,next:null},gi===null?En.memoizedState=gi=e:gi=gi.next=e}return gi}function Cm(e,t){return typeof t=="function"?t(e):t}function rb(e){var t=_o(),n=t.queue;if(n===null)throw Error(mt(311));n.lastRenderedReducer=e;var s=ai,u=s.baseQueue,p=n.pending;if(p!==null){if(u!==null){var f=u.next;u.next=p.next,p.next=f}s.baseQueue=u=p,n.pending=null}if(u!==null){p=u.next,s=s.baseState;var c=f=null,S=null,E=p;do{var A=E.lane;if((Ru&A)===A)S!==null&&(S=S.next={lane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),s=E.hasEagerState?E.eagerState:e(s,E.action);else{var z={lane:A,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null};S===null?(c=S=z,f=s):S=S.next=z,En.lanes|=A,Au|=A}E=E.next}while(E!==null&&E!==p);S===null?f=s:S.next=c,Fo(s,t.memoizedState)||(_s=!0),t.memoizedState=s,t.baseState=f,t.baseQueue=S,n.lastRenderedState=s}if(e=n.interleaved,e!==null){u=e;do p=u.lane,En.lanes|=p,Au|=p,u=u.next;while(u!==e)}else u===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function nb(e){var t=_o(),n=t.queue;if(n===null)throw Error(mt(311));n.lastRenderedReducer=e;var s=n.dispatch,u=n.pending,p=t.memoizedState;if(u!==null){n.pending=null;var f=u=u.next;do p=e(p,f.action),f=f.next;while(f!==u);Fo(p,t.memoizedState)||(_s=!0),t.memoizedState=p,t.baseQueue===null&&(t.baseState=p),n.lastRenderedState=p}return[p,s]}function fk(){}function mk(e,t){var n=En,s=_o(),u=t(),p=!Fo(s.memoizedState,u);if(p&&(s.memoizedState=u,_s=!0),s=s.queue,t2(_k.bind(null,n,s,e),[e]),s.getSnapshot!==t||p||gi!==null&&gi.memoizedState.tag&1){if(n.flags|=2048,Pm(9,yk.bind(null,n,s,u,t),void 0,null),yi===null)throw Error(mt(349));Ru&30||gk(n,t,u)}return u}function gk(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=En.updateQueue,t===null?(t={lastEffect:null,stores:null},En.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function yk(e,t,n,s){t.value=n,t.getSnapshot=s,vk(t)&&xk(e)}function _k(e,t,n){return n(function(){vk(t)&&xk(e)})}function vk(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Fo(e,n)}catch{return!0}}function xk(e){var t=Ja(e,1);t!==null&&No(t,e,1,-1)}function FC(e){var t=ea();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cm,lastRenderedState:e},t.queue=e,e=e.dispatch=bF.bind(null,En,e),[t.memoizedState,e]}function Pm(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=En.updateQueue,t===null?(t={lastEffect:null,stores:null},En.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function bk(){return _o().memoizedState}function c_(e,t,n,s){var u=ea();En.flags|=e,u.memoizedState=Pm(1|t,n,void 0,s===void 0?null:s)}function Pv(e,t,n,s){var u=_o();s=s===void 0?null:s;var p=void 0;if(ai!==null){var f=ai.memoizedState;if(p=f.destroy,s!==null&&Qw(s,f.deps)){u.memoizedState=Pm(t,n,p,s);return}}En.flags|=e,u.memoizedState=Pm(1|t,n,p,s)}function BC(e,t){return c_(8390656,8,e,t)}function t2(e,t){return Pv(2048,8,e,t)}function wk(e,t){return Pv(4,2,e,t)}function Sk(e,t){return Pv(4,4,e,t)}function Tk(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ck(e,t,n){return n=n!=null?n.concat([e]):null,Pv(4,4,Tk.bind(null,t,e),n)}function r2(){}function Pk(e,t){var n=_o();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Qw(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Ek(e,t){var n=_o();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Qw(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function Mk(e,t,n){return Ru&21?(Fo(n,t)||(n=DM(),En.lanes|=n,Au|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_s=!0),e.memoizedState=n)}function vF(e,t){var n=Zr;Zr=n!==0&&4>n?n:4,e(!0);var s=tb.transition;tb.transition={};try{e(!1),t()}finally{Zr=n,tb.transition=s}}function kk(){return _o().memoizedState}function xF(e,t,n){var s=nc(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Ik(e))Rk(t,n);else if(n=dk(e,t,n,s),n!==null){var u=ss();No(n,e,s,u),Ak(n,t,s)}}function bF(e,t,n){var s=nc(e),u={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ik(e))Rk(t,u);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=t.lastRenderedReducer,p!==null))try{var f=t.lastRenderedState,c=p(f,n);if(u.hasEagerState=!0,u.eagerState=c,Fo(c,f)){var S=t.interleaved;S===null?(u.next=u,qw(t)):(u.next=S.next,S.next=u),t.interleaved=u;return}}catch{}finally{}n=dk(e,t,u,s),n!==null&&(u=ss(),No(n,e,s,u),Ak(n,t,s))}}function Ik(e){var t=e.alternate;return e===En||t!==null&&t===En}function Rk(e,t){om=U_=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ak(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Dw(e,n)}}var V_={readContext:yo,useCallback:Ui,useContext:Ui,useEffect:Ui,useImperativeHandle:Ui,useInsertionEffect:Ui,useLayoutEffect:Ui,useMemo:Ui,useReducer:Ui,useRef:Ui,useState:Ui,useDebugValue:Ui,useDeferredValue:Ui,useTransition:Ui,useMutableSource:Ui,useSyncExternalStore:Ui,useId:Ui,unstable_isNewReconciler:!1},wF={readContext:yo,useCallback:function(e,t){return ea().memoizedState=[e,t===void 0?null:t],e},useContext:yo,useEffect:BC,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,c_(4194308,4,Tk.bind(null,t,e),n)},useLayoutEffect:function(e,t){return c_(4194308,4,e,t)},useInsertionEffect:function(e,t){return c_(4,2,e,t)},useMemo:function(e,t){var n=ea();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=ea();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=xF.bind(null,En,e),[s.memoizedState,e]},useRef:function(e){var t=ea();return e={current:e},t.memoizedState=e},useState:FC,useDebugValue:r2,useDeferredValue:function(e){return ea().memoizedState=e},useTransition:function(){var e=FC(!1),t=e[0];return e=vF.bind(null,e[1]),ea().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=En,u=ea();if(xn){if(n===void 0)throw Error(mt(407));n=n()}else{if(n=t(),yi===null)throw Error(mt(349));Ru&30||gk(s,t,n)}u.memoizedState=n;var p={value:n,getSnapshot:t};return u.queue=p,BC(_k.bind(null,s,p,e),[e]),s.flags|=2048,Pm(9,yk.bind(null,s,p,n,t),void 0,null),n},useId:function(){var e=ea(),t=yi.identifierPrefix;if(xn){var n=Wa,s=qa;n=(s&~(1<<32-Lo(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Tm++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=_F++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},SF={readContext:yo,useCallback:Pk,useContext:yo,useEffect:t2,useImperativeHandle:Ck,useInsertionEffect:wk,useLayoutEffect:Sk,useMemo:Ek,useReducer:rb,useRef:bk,useState:function(){return rb(Cm)},useDebugValue:r2,useDeferredValue:function(e){var t=_o();return Mk(t,ai.memoizedState,e)},useTransition:function(){var e=rb(Cm)[0],t=_o().memoizedState;return[e,t]},useMutableSource:fk,useSyncExternalStore:mk,useId:kk,unstable_isNewReconciler:!1},TF={readContext:yo,useCallback:Pk,useContext:yo,useEffect:t2,useImperativeHandle:Ck,useInsertionEffect:wk,useLayoutEffect:Sk,useMemo:Ek,useReducer:nb,useRef:bk,useState:function(){return nb(Cm)},useDebugValue:r2,useDeferredValue:function(e){var t=_o();return ai===null?t.memoizedState=e:Mk(t,ai.memoizedState,e)},useTransition:function(){var e=nb(Cm)[0],t=_o().memoizedState;return[e,t]},useMutableSource:fk,useSyncExternalStore:mk,useId:kk,unstable_isNewReconciler:!1};function Eo(e,t){if(e&&e.defaultProps){t=Mn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function d1(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Mn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ev={isMounted:function(e){return(e=e._reactInternals)?Gu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=ss(),u=nc(e),p=Xa(s,u);p.payload=t,n!=null&&(p.callback=n),t=tc(e,p,u),t!==null&&(No(t,e,u,s),a_(t,e,u))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=ss(),u=nc(e),p=Xa(s,u);p.tag=1,p.payload=t,n!=null&&(p.callback=n),t=tc(e,p,u),t!==null&&(No(t,e,u,s),a_(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ss(),s=nc(e),u=Xa(n,s);u.tag=2,t!=null&&(u.callback=t),t=tc(e,u,s),t!==null&&(No(t,e,s,n),a_(t,e,s))}};function UC(e,t,n,s,u,p,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,p,f):t.prototype&&t.prototype.isPureReactComponent?!_m(n,s)||!_m(u,p):!0}function Dk(e,t,n){var s=!1,u=ac,p=t.contextType;return typeof p=="object"&&p!==null?p=yo(p):(u=xs(t)?ku:Hi.current,s=t.contextTypes,p=(s=s!=null)?zh(e,u):ac),t=new t(n,p),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ev,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=p),t}function VC(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Ev.enqueueReplaceState(t,t.state,null)}function h1(e,t,n,s){var u=e.stateNode;u.props=n,u.state=e.memoizedState,u.refs={},Ww(e);var p=t.contextType;typeof p=="object"&&p!==null?u.context=yo(p):(p=xs(t)?ku:Hi.current,u.context=zh(e,p)),u.state=e.memoizedState,p=t.getDerivedStateFromProps,typeof p=="function"&&(d1(e,t,p,n),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&Ev.enqueueReplaceState(u,u.state,null),F_(e,n,u,s),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function Oh(e,t){try{var n="",s=t;do n+=QN(s),s=s.return;while(s);var u=n}catch(p){u=`
Error generating stack: `+p.message+`
`+p.stack}return{value:e,source:t,stack:u,digest:null}}function ib(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function p1(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var CF=typeof WeakMap=="function"?WeakMap:Map;function zk(e,t,n){n=Xa(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Z_||(Z_=!0,S1=s),p1(e,t)},n}function jk(e,t,n){n=Xa(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var u=t.value;n.payload=function(){return s(u)},n.callback=function(){p1(e,t)}}var p=e.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(n.callback=function(){p1(e,t),typeof s!="function"&&(rc===null?rc=new Set([this]):rc.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),n}function $C(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new CF;var u=new Set;s.set(t,u)}else u=s.get(t),u===void 0&&(u=new Set,s.set(t,u));u.has(n)||(u.add(n),e=FF.bind(null,e,t,n),t.then(e,e))}function ZC(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function GC(e,t,n,s,u){return e.mode&1?(e.flags|=65536,e.lanes=u,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Xa(-1,1),t.tag=2,tc(n,t,1))),n.lanes|=1),e)}var PF=sl.ReactCurrentOwner,_s=!1;function is(e,t,n,s){t.child=e===null?uk(t,null,n,s):Lh(t,e.child,n,s)}function HC(e,t,n,s,u){n=n.render;var p=t.ref;return ph(t,u),s=Jw(e,t,n,s,p,u),n=e2(),e!==null&&!_s?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,el(e,t,u)):(xn&&n&&Uw(t),t.flags|=1,is(e,t,s,u),t.child)}function qC(e,t,n,s,u){if(e===null){var p=n.type;return typeof p=="function"&&!u2(p)&&p.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=p,Lk(e,t,p,s,u)):(e=p_(n.type,null,s,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(p=e.child,!(e.lanes&u)){var f=p.memoizedProps;if(n=n.compare,n=n!==null?n:_m,n(f,s)&&e.ref===t.ref)return el(e,t,u)}return t.flags|=1,e=ic(p,s),e.ref=t.ref,e.return=t,t.child=e}function Lk(e,t,n,s,u){if(e!==null){var p=e.memoizedProps;if(_m(p,s)&&e.ref===t.ref)if(_s=!1,t.pendingProps=s=p,(e.lanes&u)!==0)e.flags&131072&&(_s=!0);else return t.lanes=e.lanes,el(e,t,u)}return f1(e,t,n,s,u)}function Nk(e,t,n){var s=t.pendingProps,u=s.children,p=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},an(ah,Fs),Fs|=n;else{if(!(n&1073741824))return e=p!==null?p.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,an(ah,Fs),Fs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=p!==null?p.baseLanes:n,an(ah,Fs),Fs|=s}else p!==null?(s=p.baseLanes|n,t.memoizedState=null):s=n,an(ah,Fs),Fs|=s;return is(e,t,u,n),t.child}function Ok(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function f1(e,t,n,s,u){var p=xs(n)?ku:Hi.current;return p=zh(t,p),ph(t,u),n=Jw(e,t,n,s,p,u),s=e2(),e!==null&&!_s?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,el(e,t,u)):(xn&&s&&Uw(t),t.flags|=1,is(e,t,n,u),t.child)}function WC(e,t,n,s,u){if(xs(n)){var p=!0;z_(t)}else p=!1;if(ph(t,u),t.stateNode===null)u_(e,t),Dk(t,n,s),h1(t,n,s,u),s=!0;else if(e===null){var f=t.stateNode,c=t.memoizedProps;f.props=c;var S=f.context,E=n.contextType;typeof E=="object"&&E!==null?E=yo(E):(E=xs(n)?ku:Hi.current,E=zh(t,E));var A=n.getDerivedStateFromProps,z=typeof A=="function"||typeof f.getSnapshotBeforeUpdate=="function";z||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(c!==s||S!==E)&&VC(t,f,s,E),Ol=!1;var L=t.memoizedState;f.state=L,F_(t,s,f,u),S=t.memoizedState,c!==s||L!==S||vs.current||Ol?(typeof A=="function"&&(d1(t,n,A,s),S=t.memoizedState),(c=Ol||UC(t,n,c,s,L,S,E))?(z||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=S),f.props=s,f.state=S,f.context=E,s=c):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{f=t.stateNode,hk(e,t),c=t.memoizedProps,E=t.type===t.elementType?c:Eo(t.type,c),f.props=E,z=t.pendingProps,L=f.context,S=n.contextType,typeof S=="object"&&S!==null?S=yo(S):(S=xs(n)?ku:Hi.current,S=zh(t,S));var I=n.getDerivedStateFromProps;(A=typeof I=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(c!==z||L!==S)&&VC(t,f,s,S),Ol=!1,L=t.memoizedState,f.state=L,F_(t,s,f,u);var F=t.memoizedState;c!==z||L!==F||vs.current||Ol?(typeof I=="function"&&(d1(t,n,I,s),F=t.memoizedState),(E=Ol||UC(t,n,E,s,L,F,S)||!1)?(A||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(s,F,S),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(s,F,S)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||c===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=F),f.props=s,f.state=F,f.context=S,s=E):(typeof f.componentDidUpdate!="function"||c===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),s=!1)}return m1(e,t,n,s,p,u)}function m1(e,t,n,s,u,p){Ok(e,t);var f=(t.flags&128)!==0;if(!s&&!f)return u&&DC(t,n,!1),el(e,t,p);s=t.stateNode,PF.current=t;var c=f&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&f?(t.child=Lh(t,e.child,null,p),t.child=Lh(t,null,c,p)):is(e,t,c,p),t.memoizedState=s.state,u&&DC(t,n,!0),t.child}function Fk(e){var t=e.stateNode;t.pendingContext?AC(e,t.pendingContext,t.pendingContext!==t.context):t.context&&AC(e,t.context,!1),Xw(e,t.containerInfo)}function XC(e,t,n,s,u){return jh(),$w(u),t.flags|=256,is(e,t,n,s),t.child}var g1={dehydrated:null,treeContext:null,retryLane:0};function y1(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bk(e,t,n){var s=t.pendingProps,u=Pn.current,p=!1,f=(t.flags&128)!==0,c;if((c=f)||(c=e!==null&&e.memoizedState===null?!1:(u&2)!==0),c?(p=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),an(Pn,u&1),e===null)return c1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=s.children,e=s.fallback,p?(s=t.mode,p=t.child,f={mode:"hidden",children:f},!(s&1)&&p!==null?(p.childLanes=0,p.pendingProps=f):p=Iv(f,s,0,null),e=Pu(e,s,n,null),p.return=t,e.return=t,p.sibling=e,t.child=p,t.child.memoizedState=y1(n),t.memoizedState=g1,e):n2(t,f));if(u=e.memoizedState,u!==null&&(c=u.dehydrated,c!==null))return EF(e,t,f,s,c,u,n);if(p){p=s.fallback,f=t.mode,u=e.child,c=u.sibling;var S={mode:"hidden",children:s.children};return!(f&1)&&t.child!==u?(s=t.child,s.childLanes=0,s.pendingProps=S,t.deletions=null):(s=ic(u,S),s.subtreeFlags=u.subtreeFlags&14680064),c!==null?p=ic(c,p):(p=Pu(p,f,n,null),p.flags|=2),p.return=t,s.return=t,s.sibling=p,t.child=s,s=p,p=t.child,f=e.child.memoizedState,f=f===null?y1(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},p.memoizedState=f,p.childLanes=e.childLanes&~n,t.memoizedState=g1,s}return p=e.child,e=p.sibling,s=ic(p,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function n2(e,t){return t=Iv({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Vy(e,t,n,s){return s!==null&&$w(s),Lh(t,e.child,null,n),e=n2(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function EF(e,t,n,s,u,p,f){if(n)return t.flags&256?(t.flags&=-257,s=ib(Error(mt(422))),Vy(e,t,f,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(p=s.fallback,u=t.mode,s=Iv({mode:"visible",children:s.children},u,0,null),p=Pu(p,u,f,null),p.flags|=2,s.return=t,p.return=t,s.sibling=p,t.child=s,t.mode&1&&Lh(t,e.child,null,f),t.child.memoizedState=y1(f),t.memoizedState=g1,p);if(!(t.mode&1))return Vy(e,t,f,null);if(u.data==="$!"){if(s=u.nextSibling&&u.nextSibling.dataset,s)var c=s.dgst;return s=c,p=Error(mt(419)),s=ib(p,s,void 0),Vy(e,t,f,s)}if(c=(f&e.childLanes)!==0,_s||c){if(s=yi,s!==null){switch(f&-f){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(s.suspendedLanes|f)?0:u,u!==0&&u!==p.retryLane&&(p.retryLane=u,Ja(e,u),No(s,e,u,-1))}return c2(),s=ib(Error(mt(421))),Vy(e,t,f,s)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=BF.bind(null,e),u._reactRetry=t,null):(e=p.treeContext,Vs=ec(u.nextSibling),$s=t,xn=!0,Ao=null,e!==null&&(uo[ho++]=qa,uo[ho++]=Wa,uo[ho++]=Iu,qa=e.id,Wa=e.overflow,Iu=t),t=n2(t,s.children),t.flags|=4096,t)}function KC(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),u1(e.return,t,n)}function sb(e,t,n,s,u){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:u}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=s,p.tail=n,p.tailMode=u)}function Uk(e,t,n){var s=t.pendingProps,u=s.revealOrder,p=s.tail;if(is(e,t,s.children,n),s=Pn.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&KC(e,n,t);else if(e.tag===19)KC(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(an(Pn,s),!(t.mode&1))t.memoizedState=null;else switch(u){case"forwards":for(n=t.child,u=null;n!==null;)e=n.alternate,e!==null&&B_(e)===null&&(u=n),n=n.sibling;n=u,n===null?(u=t.child,t.child=null):(u=n.sibling,n.sibling=null),sb(t,!1,u,n,p);break;case"backwards":for(n=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&B_(e)===null){t.child=u;break}e=u.sibling,u.sibling=n,n=u,u=e}sb(t,!0,n,null,p);break;case"together":sb(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function u_(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function el(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Au|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(mt(153));if(t.child!==null){for(e=t.child,n=ic(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ic(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function MF(e,t,n){switch(t.tag){case 3:Fk(t),jh();break;case 5:pk(t);break;case 1:xs(t.type)&&z_(t);break;case 4:Xw(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,u=t.memoizedProps.value;an(N_,s._currentValue),s._currentValue=u;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(an(Pn,Pn.current&1),t.flags|=128,null):n&t.child.childLanes?Bk(e,t,n):(an(Pn,Pn.current&1),e=el(e,t,n),e!==null?e.sibling:null);an(Pn,Pn.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return Uk(e,t,n);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),an(Pn,Pn.current),s)break;return null;case 22:case 23:return t.lanes=0,Nk(e,t,n)}return el(e,t,n)}var Vk,_1,$k,Zk;Vk=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_1=function(){};$k=function(e,t,n,s){var u=e.memoizedProps;if(u!==s){e=t.stateNode,mu(la.current);var p=null;switch(n){case"input":u=Bb(e,u),s=Bb(e,s),p=[];break;case"select":u=Mn({},u,{value:void 0}),s=Mn({},s,{value:void 0}),p=[];break;case"textarea":u=$b(e,u),s=$b(e,s),p=[];break;default:typeof u.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=A_)}Gb(n,s);var f;n=null;for(E in u)if(!s.hasOwnProperty(E)&&u.hasOwnProperty(E)&&u[E]!=null)if(E==="style"){var c=u[E];for(f in c)c.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(dm.hasOwnProperty(E)?p||(p=[]):(p=p||[]).push(E,null));for(E in s){var S=s[E];if(c=u!=null?u[E]:void 0,s.hasOwnProperty(E)&&S!==c&&(S!=null||c!=null))if(E==="style")if(c){for(f in c)!c.hasOwnProperty(f)||S&&S.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in S)S.hasOwnProperty(f)&&c[f]!==S[f]&&(n||(n={}),n[f]=S[f])}else n||(p||(p=[]),p.push(E,n)),n=S;else E==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,c=c?c.__html:void 0,S!=null&&c!==S&&(p=p||[]).push(E,S)):E==="children"?typeof S!="string"&&typeof S!="number"||(p=p||[]).push(E,""+S):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(dm.hasOwnProperty(E)?(S!=null&&E==="onScroll"&&hn("scroll",e),p||c===S||(p=[])):(p=p||[]).push(E,S))}n&&(p=p||[]).push("style",n);var E=p;(t.updateQueue=E)&&(t.flags|=4)}};Zk=function(e,t,n,s){n!==s&&(t.flags|=4)};function Lf(e,t){if(!xn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Vi(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var u=e.child;u!==null;)n|=u.lanes|u.childLanes,s|=u.subtreeFlags&14680064,s|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)n|=u.lanes|u.childLanes,s|=u.subtreeFlags,s|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function kF(e,t,n){var s=t.pendingProps;switch(Vw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vi(t),null;case 1:return xs(t.type)&&D_(),Vi(t),null;case 3:return s=t.stateNode,Nh(),pn(vs),pn(Hi),Yw(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(By(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ao!==null&&(P1(Ao),Ao=null))),_1(e,t),Vi(t),null;case 5:Kw(t);var u=mu(Sm.current);if(n=t.type,e!==null&&t.stateNode!=null)$k(e,t,n,s,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(mt(166));return Vi(t),null}if(e=mu(la.current),By(t)){s=t.stateNode,n=t.type;var p=t.memoizedProps;switch(s[sa]=t,s[bm]=p,e=(t.mode&1)!==0,n){case"dialog":hn("cancel",s),hn("close",s);break;case"iframe":case"object":case"embed":hn("load",s);break;case"video":case"audio":for(u=0;u<qf.length;u++)hn(qf[u],s);break;case"source":hn("error",s);break;case"img":case"image":case"link":hn("error",s),hn("load",s);break;case"details":hn("toggle",s);break;case"input":sC(s,p),hn("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!p.multiple},hn("invalid",s);break;case"textarea":aC(s,p),hn("invalid",s)}Gb(n,p),u=null;for(var f in p)if(p.hasOwnProperty(f)){var c=p[f];f==="children"?typeof c=="string"?s.textContent!==c&&(p.suppressHydrationWarning!==!0&&Fy(s.textContent,c,e),u=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(p.suppressHydrationWarning!==!0&&Fy(s.textContent,c,e),u=["children",""+c]):dm.hasOwnProperty(f)&&c!=null&&f==="onScroll"&&hn("scroll",s)}switch(n){case"input":Ry(s),oC(s,p,!0);break;case"textarea":Ry(s),lC(s);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(s.onclick=A_)}s=u,t.updateQueue=s,s!==null&&(t.flags|=4)}else{f=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=_M(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=f.createElement(n,{is:s.is}):(e=f.createElement(n),n==="select"&&(f=e,s.multiple?f.multiple=!0:s.size&&(f.size=s.size))):e=f.createElementNS(e,n),e[sa]=t,e[bm]=s,Vk(e,t,!1,!1),t.stateNode=e;e:{switch(f=Hb(n,s),n){case"dialog":hn("cancel",e),hn("close",e),u=s;break;case"iframe":case"object":case"embed":hn("load",e),u=s;break;case"video":case"audio":for(u=0;u<qf.length;u++)hn(qf[u],e);u=s;break;case"source":hn("error",e),u=s;break;case"img":case"image":case"link":hn("error",e),hn("load",e),u=s;break;case"details":hn("toggle",e),u=s;break;case"input":sC(e,s),u=Bb(e,s),hn("invalid",e);break;case"option":u=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},u=Mn({},s,{value:void 0}),hn("invalid",e);break;case"textarea":aC(e,s),u=$b(e,s),hn("invalid",e);break;default:u=s}Gb(n,u),c=u;for(p in c)if(c.hasOwnProperty(p)){var S=c[p];p==="style"?bM(e,S):p==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&vM(e,S)):p==="children"?typeof S=="string"?(n!=="textarea"||S!=="")&&hm(e,S):typeof S=="number"&&hm(e,""+S):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(dm.hasOwnProperty(p)?S!=null&&p==="onScroll"&&hn("scroll",e):S!=null&&Ew(e,p,S,f))}switch(n){case"input":Ry(e),oC(e,s,!1);break;case"textarea":Ry(e),lC(e);break;case"option":s.value!=null&&e.setAttribute("value",""+oc(s.value));break;case"select":e.multiple=!!s.multiple,p=s.value,p!=null?ch(e,!!s.multiple,p,!1):s.defaultValue!=null&&ch(e,!!s.multiple,s.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=A_)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Vi(t),null;case 6:if(e&&t.stateNode!=null)Zk(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(mt(166));if(n=mu(Sm.current),mu(la.current),By(t)){if(s=t.stateNode,n=t.memoizedProps,s[sa]=t,(p=s.nodeValue!==n)&&(e=$s,e!==null))switch(e.tag){case 3:Fy(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fy(s.nodeValue,n,(e.mode&1)!==0)}p&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[sa]=t,t.stateNode=s}return Vi(t),null;case 13:if(pn(Pn),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xn&&Vs!==null&&t.mode&1&&!(t.flags&128))lk(),jh(),t.flags|=98560,p=!1;else if(p=By(t),s!==null&&s.dehydrated!==null){if(e===null){if(!p)throw Error(mt(318));if(p=t.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(mt(317));p[sa]=t}else jh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Vi(t),p=!1}else Ao!==null&&(P1(Ao),Ao=null),p=!0;if(!p)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Pn.current&1?li===0&&(li=3):c2())),t.updateQueue!==null&&(t.flags|=4),Vi(t),null);case 4:return Nh(),_1(e,t),e===null&&vm(t.stateNode.containerInfo),Vi(t),null;case 10:return Hw(t.type._context),Vi(t),null;case 17:return xs(t.type)&&D_(),Vi(t),null;case 19:if(pn(Pn),p=t.memoizedState,p===null)return Vi(t),null;if(s=(t.flags&128)!==0,f=p.rendering,f===null)if(s)Lf(p,!1);else{if(li!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=B_(e),f!==null){for(t.flags|=128,Lf(p,!1),s=f.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)p=n,e=s,p.flags&=14680066,f=p.alternate,f===null?(p.childLanes=0,p.lanes=e,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=f.childLanes,p.lanes=f.lanes,p.child=f.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=f.memoizedProps,p.memoizedState=f.memoizedState,p.updateQueue=f.updateQueue,p.type=f.type,e=f.dependencies,p.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return an(Pn,Pn.current&1|2),t.child}e=e.sibling}p.tail!==null&&Vn()>Fh&&(t.flags|=128,s=!0,Lf(p,!1),t.lanes=4194304)}else{if(!s)if(e=B_(f),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Lf(p,!0),p.tail===null&&p.tailMode==="hidden"&&!f.alternate&&!xn)return Vi(t),null}else 2*Vn()-p.renderingStartTime>Fh&&n!==1073741824&&(t.flags|=128,s=!0,Lf(p,!1),t.lanes=4194304);p.isBackwards?(f.sibling=t.child,t.child=f):(n=p.last,n!==null?n.sibling=f:t.child=f,p.last=f)}return p.tail!==null?(t=p.tail,p.rendering=t,p.tail=t.sibling,p.renderingStartTime=Vn(),t.sibling=null,n=Pn.current,an(Pn,s?n&1|2:n&1),t):(Vi(t),null);case 22:case 23:return l2(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Fs&1073741824&&(Vi(t),t.subtreeFlags&6&&(t.flags|=8192)):Vi(t),null;case 24:return null;case 25:return null}throw Error(mt(156,t.tag))}function IF(e,t){switch(Vw(t),t.tag){case 1:return xs(t.type)&&D_(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Nh(),pn(vs),pn(Hi),Yw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Kw(t),null;case 13:if(pn(Pn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(mt(340));jh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pn(Pn),null;case 4:return Nh(),null;case 10:return Hw(t.type._context),null;case 22:case 23:return l2(),null;case 24:return null;default:return null}}var $y=!1,Zi=!1,RF=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function oh(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){An(e,t,s)}else n.current=null}function v1(e,t,n){try{n()}catch(s){An(e,t,s)}}var YC=!1;function AF(e,t){if(r1=k_,e=XM(),Bw(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var u=s.anchorOffset,p=s.focusNode;s=s.focusOffset;try{n.nodeType,p.nodeType}catch{n=null;break e}var f=0,c=-1,S=-1,E=0,A=0,z=e,L=null;t:for(;;){for(var I;z!==n||u!==0&&z.nodeType!==3||(c=f+u),z!==p||s!==0&&z.nodeType!==3||(S=f+s),z.nodeType===3&&(f+=z.nodeValue.length),(I=z.firstChild)!==null;)L=z,z=I;for(;;){if(z===e)break t;if(L===n&&++E===u&&(c=f),L===p&&++A===s&&(S=f),(I=z.nextSibling)!==null)break;z=L,L=z.parentNode}z=I}n=c===-1||S===-1?null:{start:c,end:S}}else n=null}n=n||{start:0,end:0}}else n=null;for(n1={focusedElem:e,selectionRange:n},k_=!1,Ot=t;Ot!==null;)if(t=Ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ot=e;else for(;Ot!==null;){t=Ot;try{var F=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var B=F.memoizedProps,X=F.memoizedState,q=t.stateNode,V=q.getSnapshotBeforeUpdate(t.elementType===t.type?B:Eo(t.type,B),X);q.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var Y=t.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(mt(163))}}catch(de){An(t,t.return,de)}if(e=t.sibling,e!==null){e.return=t.return,Ot=e;break}Ot=t.return}return F=YC,YC=!1,F}function am(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&e)===e){var p=u.destroy;u.destroy=void 0,p!==void 0&&v1(t,n,p)}u=u.next}while(u!==s)}}function Mv(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function x1(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Gk(e){var t=e.alternate;t!==null&&(e.alternate=null,Gk(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[sa],delete t[bm],delete t[o1],delete t[fF],delete t[mF])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Hk(e){return e.tag===5||e.tag===3||e.tag===4}function QC(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hk(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function b1(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=A_));else if(s!==4&&(e=e.child,e!==null))for(b1(e,t,n),e=e.sibling;e!==null;)b1(e,t,n),e=e.sibling}function w1(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(w1(e,t,n),e=e.sibling;e!==null;)w1(e,t,n),e=e.sibling}var Ci=null,Io=!1;function Il(e,t,n){for(n=n.child;n!==null;)qk(e,t,n),n=n.sibling}function qk(e,t,n){if(aa&&typeof aa.onCommitFiberUnmount=="function")try{aa.onCommitFiberUnmount(xv,n)}catch{}switch(n.tag){case 5:Zi||oh(n,t);case 6:var s=Ci,u=Io;Ci=null,Il(e,t,n),Ci=s,Io=u,Ci!==null&&(Io?(e=Ci,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ci.removeChild(n.stateNode));break;case 18:Ci!==null&&(Io?(e=Ci,n=n.stateNode,e.nodeType===8?Qx(e.parentNode,n):e.nodeType===1&&Qx(e,n),gm(e)):Qx(Ci,n.stateNode));break;case 4:s=Ci,u=Io,Ci=n.stateNode.containerInfo,Io=!0,Il(e,t,n),Ci=s,Io=u;break;case 0:case 11:case 14:case 15:if(!Zi&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){u=s=s.next;do{var p=u,f=p.destroy;p=p.tag,f!==void 0&&(p&2||p&4)&&v1(n,t,f),u=u.next}while(u!==s)}Il(e,t,n);break;case 1:if(!Zi&&(oh(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(c){An(n,t,c)}Il(e,t,n);break;case 21:Il(e,t,n);break;case 22:n.mode&1?(Zi=(s=Zi)||n.memoizedState!==null,Il(e,t,n),Zi=s):Il(e,t,n);break;default:Il(e,t,n)}}function JC(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new RF),t.forEach(function(s){var u=UF.bind(null,e,s);n.has(s)||(n.add(s),s.then(u,u))})}}function Co(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var u=n[s];try{var p=e,f=t,c=f;e:for(;c!==null;){switch(c.tag){case 5:Ci=c.stateNode,Io=!1;break e;case 3:Ci=c.stateNode.containerInfo,Io=!0;break e;case 4:Ci=c.stateNode.containerInfo,Io=!0;break e}c=c.return}if(Ci===null)throw Error(mt(160));qk(p,f,u),Ci=null,Io=!1;var S=u.alternate;S!==null&&(S.return=null),u.return=null}catch(E){An(u,t,E)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Wk(t,e),t=t.sibling}function Wk(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Co(t,e),Qo(e),s&4){try{am(3,e,e.return),Mv(3,e)}catch(B){An(e,e.return,B)}try{am(5,e,e.return)}catch(B){An(e,e.return,B)}}break;case 1:Co(t,e),Qo(e),s&512&&n!==null&&oh(n,n.return);break;case 5:if(Co(t,e),Qo(e),s&512&&n!==null&&oh(n,n.return),e.flags&32){var u=e.stateNode;try{hm(u,"")}catch(B){An(e,e.return,B)}}if(s&4&&(u=e.stateNode,u!=null)){var p=e.memoizedProps,f=n!==null?n.memoizedProps:p,c=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{c==="input"&&p.type==="radio"&&p.name!=null&&gM(u,p),Hb(c,f);var E=Hb(c,p);for(f=0;f<S.length;f+=2){var A=S[f],z=S[f+1];A==="style"?bM(u,z):A==="dangerouslySetInnerHTML"?vM(u,z):A==="children"?hm(u,z):Ew(u,A,z,E)}switch(c){case"input":Ub(u,p);break;case"textarea":yM(u,p);break;case"select":var L=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!p.multiple;var I=p.value;I!=null?ch(u,!!p.multiple,I,!1):L!==!!p.multiple&&(p.defaultValue!=null?ch(u,!!p.multiple,p.defaultValue,!0):ch(u,!!p.multiple,p.multiple?[]:"",!1))}u[bm]=p}catch(B){An(e,e.return,B)}}break;case 6:if(Co(t,e),Qo(e),s&4){if(e.stateNode===null)throw Error(mt(162));u=e.stateNode,p=e.memoizedProps;try{u.nodeValue=p}catch(B){An(e,e.return,B)}}break;case 3:if(Co(t,e),Qo(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{gm(t.containerInfo)}catch(B){An(e,e.return,B)}break;case 4:Co(t,e),Qo(e);break;case 13:Co(t,e),Qo(e),u=e.child,u.flags&8192&&(p=u.memoizedState!==null,u.stateNode.isHidden=p,!p||u.alternate!==null&&u.alternate.memoizedState!==null||(o2=Vn())),s&4&&JC(e);break;case 22:if(A=n!==null&&n.memoizedState!==null,e.mode&1?(Zi=(E=Zi)||A,Co(t,e),Zi=E):Co(t,e),Qo(e),s&8192){if(E=e.memoizedState!==null,(e.stateNode.isHidden=E)&&!A&&e.mode&1)for(Ot=e,A=e.child;A!==null;){for(z=Ot=A;Ot!==null;){switch(L=Ot,I=L.child,L.tag){case 0:case 11:case 14:case 15:am(4,L,L.return);break;case 1:oh(L,L.return);var F=L.stateNode;if(typeof F.componentWillUnmount=="function"){s=L,n=L.return;try{t=s,F.props=t.memoizedProps,F.state=t.memoizedState,F.componentWillUnmount()}catch(B){An(s,n,B)}}break;case 5:oh(L,L.return);break;case 22:if(L.memoizedState!==null){tP(z);continue}}I!==null?(I.return=L,Ot=I):tP(z)}A=A.sibling}e:for(A=null,z=e;;){if(z.tag===5){if(A===null){A=z;try{u=z.stateNode,E?(p=u.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(c=z.stateNode,S=z.memoizedProps.style,f=S!=null&&S.hasOwnProperty("display")?S.display:null,c.style.display=xM("display",f))}catch(B){An(e,e.return,B)}}}else if(z.tag===6){if(A===null)try{z.stateNode.nodeValue=E?"":z.memoizedProps}catch(B){An(e,e.return,B)}}else if((z.tag!==22&&z.tag!==23||z.memoizedState===null||z===e)&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===e)break e;for(;z.sibling===null;){if(z.return===null||z.return===e)break e;A===z&&(A=null),z=z.return}A===z&&(A=null),z.sibling.return=z.return,z=z.sibling}}break;case 19:Co(t,e),Qo(e),s&4&&JC(e);break;case 21:break;default:Co(t,e),Qo(e)}}function Qo(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Hk(n)){var s=n;break e}n=n.return}throw Error(mt(160))}switch(s.tag){case 5:var u=s.stateNode;s.flags&32&&(hm(u,""),s.flags&=-33);var p=QC(e);w1(e,p,u);break;case 3:case 4:var f=s.stateNode.containerInfo,c=QC(e);b1(e,c,f);break;default:throw Error(mt(161))}}catch(S){An(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function DF(e,t,n){Ot=e,Xk(e)}function Xk(e,t,n){for(var s=(e.mode&1)!==0;Ot!==null;){var u=Ot,p=u.child;if(u.tag===22&&s){var f=u.memoizedState!==null||$y;if(!f){var c=u.alternate,S=c!==null&&c.memoizedState!==null||Zi;c=$y;var E=Zi;if($y=f,(Zi=S)&&!E)for(Ot=u;Ot!==null;)f=Ot,S=f.child,f.tag===22&&f.memoizedState!==null?rP(u):S!==null?(S.return=f,Ot=S):rP(u);for(;p!==null;)Ot=p,Xk(p),p=p.sibling;Ot=u,$y=c,Zi=E}eP(e)}else u.subtreeFlags&8772&&p!==null?(p.return=u,Ot=p):eP(e)}}function eP(e){for(;Ot!==null;){var t=Ot;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Zi||Mv(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Zi)if(n===null)s.componentDidMount();else{var u=t.elementType===t.type?n.memoizedProps:Eo(t.type,n.memoizedProps);s.componentDidUpdate(u,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var p=t.updateQueue;p!==null&&OC(t,p,s);break;case 3:var f=t.updateQueue;if(f!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}OC(t,f,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var S=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&n.focus();break;case"img":S.src&&(n.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var E=t.alternate;if(E!==null){var A=E.memoizedState;if(A!==null){var z=A.dehydrated;z!==null&&gm(z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(mt(163))}Zi||t.flags&512&&x1(t)}catch(L){An(t,t.return,L)}}if(t===e){Ot=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ot=n;break}Ot=t.return}}function tP(e){for(;Ot!==null;){var t=Ot;if(t===e){Ot=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ot=n;break}Ot=t.return}}function rP(e){for(;Ot!==null;){var t=Ot;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Mv(4,t)}catch(S){An(t,n,S)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var u=t.return;try{s.componentDidMount()}catch(S){An(t,u,S)}}var p=t.return;try{x1(t)}catch(S){An(t,p,S)}break;case 5:var f=t.return;try{x1(t)}catch(S){An(t,f,S)}}}catch(S){An(t,t.return,S)}if(t===e){Ot=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Ot=c;break}Ot=t.return}}var zF=Math.ceil,$_=sl.ReactCurrentDispatcher,i2=sl.ReactCurrentOwner,fo=sl.ReactCurrentBatchConfig,Ar=0,yi=null,Jn=null,Ei=0,Fs=0,ah=yc(0),li=0,Em=null,Au=0,kv=0,s2=0,lm=null,ys=null,o2=0,Fh=1/0,$a=null,Z_=!1,S1=null,rc=null,Zy=!1,Xl=null,G_=0,cm=0,T1=null,d_=-1,h_=0;function ss(){return Ar&6?Vn():d_!==-1?d_:d_=Vn()}function nc(e){return e.mode&1?Ar&2&&Ei!==0?Ei&-Ei:yF.transition!==null?(h_===0&&(h_=DM()),h_):(e=Zr,e!==0||(e=window.event,e=e===void 0?16:BM(e.type)),e):1}function No(e,t,n,s){if(50<cm)throw cm=0,T1=null,Error(mt(185));ng(e,n,s),(!(Ar&2)||e!==yi)&&(e===yi&&(!(Ar&2)&&(kv|=n),li===4&&Bl(e,Ei)),bs(e,s),n===1&&Ar===0&&!(t.mode&1)&&(Fh=Vn()+500,Cv&&_c()))}function bs(e,t){var n=e.callbackNode;yO(e,t);var s=M_(e,e===yi?Ei:0);if(s===0)n!==null&&dC(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&dC(n),t===1)e.tag===0?gF(nP.bind(null,e)):sk(nP.bind(null,e)),hF(function(){!(Ar&6)&&_c()}),n=null;else{switch(zM(s)){case 1:n=Aw;break;case 4:n=RM;break;case 16:n=E_;break;case 536870912:n=AM;break;default:n=E_}n=nI(n,Kk.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Kk(e,t){if(d_=-1,h_=0,Ar&6)throw Error(mt(327));var n=e.callbackNode;if(fh()&&e.callbackNode!==n)return null;var s=M_(e,e===yi?Ei:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=H_(e,s);else{t=s;var u=Ar;Ar|=2;var p=Qk();(yi!==e||Ei!==t)&&($a=null,Fh=Vn()+500,Cu(e,t));do try{NF();break}catch(c){Yk(e,c)}while(!0);Gw(),$_.current=p,Ar=u,Jn!==null?t=0:(yi=null,Ei=0,t=li)}if(t!==0){if(t===2&&(u=Yb(e),u!==0&&(s=u,t=C1(e,u))),t===1)throw n=Em,Cu(e,0),Bl(e,s),bs(e,Vn()),n;if(t===6)Bl(e,s);else{if(u=e.current.alternate,!(s&30)&&!jF(u)&&(t=H_(e,s),t===2&&(p=Yb(e),p!==0&&(s=p,t=C1(e,p))),t===1))throw n=Em,Cu(e,0),Bl(e,s),bs(e,Vn()),n;switch(e.finishedWork=u,e.finishedLanes=s,t){case 0:case 1:throw Error(mt(345));case 2:cu(e,ys,$a);break;case 3:if(Bl(e,s),(s&130023424)===s&&(t=o2+500-Vn(),10<t)){if(M_(e,0)!==0)break;if(u=e.suspendedLanes,(u&s)!==s){ss(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=s1(cu.bind(null,e,ys,$a),t);break}cu(e,ys,$a);break;case 4:if(Bl(e,s),(s&4194240)===s)break;for(t=e.eventTimes,u=-1;0<s;){var f=31-Lo(s);p=1<<f,f=t[f],f>u&&(u=f),s&=~p}if(s=u,s=Vn()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*zF(s/1960))-s,10<s){e.timeoutHandle=s1(cu.bind(null,e,ys,$a),s);break}cu(e,ys,$a);break;case 5:cu(e,ys,$a);break;default:throw Error(mt(329))}}}return bs(e,Vn()),e.callbackNode===n?Kk.bind(null,e):null}function C1(e,t){var n=lm;return e.current.memoizedState.isDehydrated&&(Cu(e,t).flags|=256),e=H_(e,t),e!==2&&(t=ys,ys=n,t!==null&&P1(t)),e}function P1(e){ys===null?ys=e:ys.push.apply(ys,e)}function jF(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var u=n[s],p=u.getSnapshot;u=u.value;try{if(!Fo(p(),u))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bl(e,t){for(t&=~s2,t&=~kv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Lo(t),s=1<<n;e[n]=-1,t&=~s}}function nP(e){if(Ar&6)throw Error(mt(327));fh();var t=M_(e,0);if(!(t&1))return bs(e,Vn()),null;var n=H_(e,t);if(e.tag!==0&&n===2){var s=Yb(e);s!==0&&(t=s,n=C1(e,s))}if(n===1)throw n=Em,Cu(e,0),Bl(e,t),bs(e,Vn()),n;if(n===6)throw Error(mt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,cu(e,ys,$a),bs(e,Vn()),null}function a2(e,t){var n=Ar;Ar|=1;try{return e(t)}finally{Ar=n,Ar===0&&(Fh=Vn()+500,Cv&&_c())}}function Du(e){Xl!==null&&Xl.tag===0&&!(Ar&6)&&fh();var t=Ar;Ar|=1;var n=fo.transition,s=Zr;try{if(fo.transition=null,Zr=1,e)return e()}finally{Zr=s,fo.transition=n,Ar=t,!(Ar&6)&&_c()}}function l2(){Fs=ah.current,pn(ah)}function Cu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,dF(n)),Jn!==null)for(n=Jn.return;n!==null;){var s=n;switch(Vw(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&D_();break;case 3:Nh(),pn(vs),pn(Hi),Yw();break;case 5:Kw(s);break;case 4:Nh();break;case 13:pn(Pn);break;case 19:pn(Pn);break;case 10:Hw(s.type._context);break;case 22:case 23:l2()}n=n.return}if(yi=e,Jn=e=ic(e.current,null),Ei=Fs=t,li=0,Em=null,s2=kv=Au=0,ys=lm=null,fu!==null){for(t=0;t<fu.length;t++)if(n=fu[t],s=n.interleaved,s!==null){n.interleaved=null;var u=s.next,p=n.pending;if(p!==null){var f=p.next;p.next=u,s.next=f}n.pending=s}fu=null}return e}function Yk(e,t){do{var n=Jn;try{if(Gw(),l_.current=V_,U_){for(var s=En.memoizedState;s!==null;){var u=s.queue;u!==null&&(u.pending=null),s=s.next}U_=!1}if(Ru=0,gi=ai=En=null,om=!1,Tm=0,i2.current=null,n===null||n.return===null){li=1,Em=t,Jn=null;break}e:{var p=e,f=n.return,c=n,S=t;if(t=Ei,c.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var E=S,A=c,z=A.tag;if(!(A.mode&1)&&(z===0||z===11||z===15)){var L=A.alternate;L?(A.updateQueue=L.updateQueue,A.memoizedState=L.memoizedState,A.lanes=L.lanes):(A.updateQueue=null,A.memoizedState=null)}var I=ZC(f);if(I!==null){I.flags&=-257,GC(I,f,c,p,t),I.mode&1&&$C(p,E,t),t=I,S=E;var F=t.updateQueue;if(F===null){var B=new Set;B.add(S),t.updateQueue=B}else F.add(S);break e}else{if(!(t&1)){$C(p,E,t),c2();break e}S=Error(mt(426))}}else if(xn&&c.mode&1){var X=ZC(f);if(X!==null){!(X.flags&65536)&&(X.flags|=256),GC(X,f,c,p,t),$w(Oh(S,c));break e}}p=S=Oh(S,c),li!==4&&(li=2),lm===null?lm=[p]:lm.push(p),p=f;do{switch(p.tag){case 3:p.flags|=65536,t&=-t,p.lanes|=t;var q=zk(p,S,t);NC(p,q);break e;case 1:c=S;var V=p.type,Y=p.stateNode;if(!(p.flags&128)&&(typeof V.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(rc===null||!rc.has(Y)))){p.flags|=65536,t&=-t,p.lanes|=t;var de=jk(p,c,t);NC(p,de);break e}}p=p.return}while(p!==null)}eI(n)}catch(Se){t=Se,Jn===n&&n!==null&&(Jn=n=n.return);continue}break}while(!0)}function Qk(){var e=$_.current;return $_.current=V_,e===null?V_:e}function c2(){(li===0||li===3||li===2)&&(li=4),yi===null||!(Au&268435455)&&!(kv&268435455)||Bl(yi,Ei)}function H_(e,t){var n=Ar;Ar|=2;var s=Qk();(yi!==e||Ei!==t)&&($a=null,Cu(e,t));do try{LF();break}catch(u){Yk(e,u)}while(!0);if(Gw(),Ar=n,$_.current=s,Jn!==null)throw Error(mt(261));return yi=null,Ei=0,li}function LF(){for(;Jn!==null;)Jk(Jn)}function NF(){for(;Jn!==null&&!lO();)Jk(Jn)}function Jk(e){var t=rI(e.alternate,e,Fs);e.memoizedProps=e.pendingProps,t===null?eI(e):Jn=t,i2.current=null}function eI(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=IF(n,t),n!==null){n.flags&=32767,Jn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{li=6,Jn=null;return}}else if(n=kF(n,t,Fs),n!==null){Jn=n;return}if(t=t.sibling,t!==null){Jn=t;return}Jn=t=e}while(t!==null);li===0&&(li=5)}function cu(e,t,n){var s=Zr,u=fo.transition;try{fo.transition=null,Zr=1,OF(e,t,n,s)}finally{fo.transition=u,Zr=s}return null}function OF(e,t,n,s){do fh();while(Xl!==null);if(Ar&6)throw Error(mt(327));n=e.finishedWork;var u=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(mt(177));e.callbackNode=null,e.callbackPriority=0;var p=n.lanes|n.childLanes;if(_O(e,p),e===yi&&(Jn=yi=null,Ei=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zy||(Zy=!0,nI(E_,function(){return fh(),null})),p=(n.flags&15990)!==0,n.subtreeFlags&15990||p){p=fo.transition,fo.transition=null;var f=Zr;Zr=1;var c=Ar;Ar|=4,i2.current=null,AF(e,n),Wk(n,e),iF(n1),k_=!!r1,n1=r1=null,e.current=n,DF(n),cO(),Ar=c,Zr=f,fo.transition=p}else e.current=n;if(Zy&&(Zy=!1,Xl=e,G_=u),p=e.pendingLanes,p===0&&(rc=null),hO(n.stateNode),bs(e,Vn()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)u=t[n],s(u.value,{componentStack:u.stack,digest:u.digest});if(Z_)throw Z_=!1,e=S1,S1=null,e;return G_&1&&e.tag!==0&&fh(),p=e.pendingLanes,p&1?e===T1?cm++:(cm=0,T1=e):cm=0,_c(),null}function fh(){if(Xl!==null){var e=zM(G_),t=fo.transition,n=Zr;try{if(fo.transition=null,Zr=16>e?16:e,Xl===null)var s=!1;else{if(e=Xl,Xl=null,G_=0,Ar&6)throw Error(mt(331));var u=Ar;for(Ar|=4,Ot=e.current;Ot!==null;){var p=Ot,f=p.child;if(Ot.flags&16){var c=p.deletions;if(c!==null){for(var S=0;S<c.length;S++){var E=c[S];for(Ot=E;Ot!==null;){var A=Ot;switch(A.tag){case 0:case 11:case 15:am(8,A,p)}var z=A.child;if(z!==null)z.return=A,Ot=z;else for(;Ot!==null;){A=Ot;var L=A.sibling,I=A.return;if(Gk(A),A===E){Ot=null;break}if(L!==null){L.return=I,Ot=L;break}Ot=I}}}var F=p.alternate;if(F!==null){var B=F.child;if(B!==null){F.child=null;do{var X=B.sibling;B.sibling=null,B=X}while(B!==null)}}Ot=p}}if(p.subtreeFlags&2064&&f!==null)f.return=p,Ot=f;else e:for(;Ot!==null;){if(p=Ot,p.flags&2048)switch(p.tag){case 0:case 11:case 15:am(9,p,p.return)}var q=p.sibling;if(q!==null){q.return=p.return,Ot=q;break e}Ot=p.return}}var V=e.current;for(Ot=V;Ot!==null;){f=Ot;var Y=f.child;if(f.subtreeFlags&2064&&Y!==null)Y.return=f,Ot=Y;else e:for(f=V;Ot!==null;){if(c=Ot,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Mv(9,c)}}catch(Se){An(c,c.return,Se)}if(c===f){Ot=null;break e}var de=c.sibling;if(de!==null){de.return=c.return,Ot=de;break e}Ot=c.return}}if(Ar=u,_c(),aa&&typeof aa.onPostCommitFiberRoot=="function")try{aa.onPostCommitFiberRoot(xv,e)}catch{}s=!0}return s}finally{Zr=n,fo.transition=t}}return!1}function iP(e,t,n){t=Oh(n,t),t=zk(e,t,1),e=tc(e,t,1),t=ss(),e!==null&&(ng(e,1,t),bs(e,t))}function An(e,t,n){if(e.tag===3)iP(e,e,n);else for(;t!==null;){if(t.tag===3){iP(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(rc===null||!rc.has(s))){e=Oh(n,e),e=jk(t,e,1),t=tc(t,e,1),e=ss(),t!==null&&(ng(t,1,e),bs(t,e));break}}t=t.return}}function FF(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=ss(),e.pingedLanes|=e.suspendedLanes&n,yi===e&&(Ei&n)===n&&(li===4||li===3&&(Ei&130023424)===Ei&&500>Vn()-o2?Cu(e,0):s2|=n),bs(e,t)}function tI(e,t){t===0&&(e.mode&1?(t=zy,zy<<=1,!(zy&130023424)&&(zy=4194304)):t=1);var n=ss();e=Ja(e,t),e!==null&&(ng(e,t,n),bs(e,n))}function BF(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),tI(e,n)}function UF(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,u=e.memoizedState;u!==null&&(n=u.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(mt(314))}s!==null&&s.delete(t),tI(e,n)}var rI;rI=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||vs.current)_s=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return _s=!1,MF(e,t,n);_s=!!(e.flags&131072)}else _s=!1,xn&&t.flags&1048576&&ok(t,L_,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;u_(e,t),e=t.pendingProps;var u=zh(t,Hi.current);ph(t,n),u=Jw(null,t,s,e,u,n);var p=e2();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xs(s)?(p=!0,z_(t)):p=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,Ww(t),u.updater=Ev,t.stateNode=u,u._reactInternals=t,h1(t,s,e,n),t=m1(null,t,s,!0,p,n)):(t.tag=0,xn&&p&&Uw(t),is(null,t,u,n),t=t.child),t;case 16:s=t.elementType;e:{switch(u_(e,t),e=t.pendingProps,u=s._init,s=u(s._payload),t.type=s,u=t.tag=$F(s),e=Eo(s,e),u){case 0:t=f1(null,t,s,e,n);break e;case 1:t=WC(null,t,s,e,n);break e;case 11:t=HC(null,t,s,e,n);break e;case 14:t=qC(null,t,s,Eo(s.type,e),n);break e}throw Error(mt(306,s,""))}return t;case 0:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:Eo(s,u),f1(e,t,s,u,n);case 1:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:Eo(s,u),WC(e,t,s,u,n);case 3:e:{if(Fk(t),e===null)throw Error(mt(387));s=t.pendingProps,p=t.memoizedState,u=p.element,hk(e,t),F_(t,s,null,n);var f=t.memoizedState;if(s=f.element,p.isDehydrated)if(p={element:s,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=p,t.memoizedState=p,t.flags&256){u=Oh(Error(mt(423)),t),t=XC(e,t,s,n,u);break e}else if(s!==u){u=Oh(Error(mt(424)),t),t=XC(e,t,s,n,u);break e}else for(Vs=ec(t.stateNode.containerInfo.firstChild),$s=t,xn=!0,Ao=null,n=uk(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jh(),s===u){t=el(e,t,n);break e}is(e,t,s,n)}t=t.child}return t;case 5:return pk(t),e===null&&c1(t),s=t.type,u=t.pendingProps,p=e!==null?e.memoizedProps:null,f=u.children,i1(s,u)?f=null:p!==null&&i1(s,p)&&(t.flags|=32),Ok(e,t),is(e,t,f,n),t.child;case 6:return e===null&&c1(t),null;case 13:return Bk(e,t,n);case 4:return Xw(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Lh(t,null,s,n):is(e,t,s,n),t.child;case 11:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:Eo(s,u),HC(e,t,s,u,n);case 7:return is(e,t,t.pendingProps,n),t.child;case 8:return is(e,t,t.pendingProps.children,n),t.child;case 12:return is(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,u=t.pendingProps,p=t.memoizedProps,f=u.value,an(N_,s._currentValue),s._currentValue=f,p!==null)if(Fo(p.value,f)){if(p.children===u.children&&!vs.current){t=el(e,t,n);break e}}else for(p=t.child,p!==null&&(p.return=t);p!==null;){var c=p.dependencies;if(c!==null){f=p.child;for(var S=c.firstContext;S!==null;){if(S.context===s){if(p.tag===1){S=Xa(-1,n&-n),S.tag=2;var E=p.updateQueue;if(E!==null){E=E.shared;var A=E.pending;A===null?S.next=S:(S.next=A.next,A.next=S),E.pending=S}}p.lanes|=n,S=p.alternate,S!==null&&(S.lanes|=n),u1(p.return,n,t),c.lanes|=n;break}S=S.next}}else if(p.tag===10)f=p.type===t.type?null:p.child;else if(p.tag===18){if(f=p.return,f===null)throw Error(mt(341));f.lanes|=n,c=f.alternate,c!==null&&(c.lanes|=n),u1(f,n,t),f=p.sibling}else f=p.child;if(f!==null)f.return=p;else for(f=p;f!==null;){if(f===t){f=null;break}if(p=f.sibling,p!==null){p.return=f.return,f=p;break}f=f.return}p=f}is(e,t,u.children,n),t=t.child}return t;case 9:return u=t.type,s=t.pendingProps.children,ph(t,n),u=yo(u),s=s(u),t.flags|=1,is(e,t,s,n),t.child;case 14:return s=t.type,u=Eo(s,t.pendingProps),u=Eo(s.type,u),qC(e,t,s,u,n);case 15:return Lk(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:Eo(s,u),u_(e,t),t.tag=1,xs(s)?(e=!0,z_(t)):e=!1,ph(t,n),Dk(t,s,u),h1(t,s,u,n),m1(null,t,s,!0,e,n);case 19:return Uk(e,t,n);case 22:return Nk(e,t,n)}throw Error(mt(156,t.tag))};function nI(e,t){return IM(e,t)}function VF(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function po(e,t,n,s){return new VF(e,t,n,s)}function u2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $F(e){if(typeof e=="function")return u2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===kw)return 11;if(e===Iw)return 14}return 2}function ic(e,t){var n=e.alternate;return n===null?(n=po(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function p_(e,t,n,s,u,p){var f=2;if(s=e,typeof e=="function")u2(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case Yd:return Pu(n.children,u,p,t);case Mw:f=8,u|=8;break;case Lb:return e=po(12,n,t,u|2),e.elementType=Lb,e.lanes=p,e;case Nb:return e=po(13,n,t,u),e.elementType=Nb,e.lanes=p,e;case Ob:return e=po(19,n,t,u),e.elementType=Ob,e.lanes=p,e;case pM:return Iv(n,u,p,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case dM:f=10;break e;case hM:f=9;break e;case kw:f=11;break e;case Iw:f=14;break e;case Nl:f=16,s=null;break e}throw Error(mt(130,e==null?e:typeof e,""))}return t=po(f,n,t,u),t.elementType=e,t.type=s,t.lanes=p,t}function Pu(e,t,n,s){return e=po(7,e,s,t),e.lanes=n,e}function Iv(e,t,n,s){return e=po(22,e,s,t),e.elementType=pM,e.lanes=n,e.stateNode={isHidden:!1},e}function ob(e,t,n){return e=po(6,e,null,t),e.lanes=n,e}function ab(e,t,n){return t=po(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ZF(e,t,n,s,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ux(0),this.expirationTimes=Ux(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ux(0),this.identifierPrefix=s,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function d2(e,t,n,s,u,p,f,c,S){return e=new ZF(e,t,n,c,S),t===1?(t=1,p===!0&&(t|=8)):t=0,p=po(3,null,null,t),e.current=p,p.stateNode=e,p.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ww(p),e}function GF(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kd,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function iI(e){if(!e)return ac;e=e._reactInternals;e:{if(Gu(e)!==e||e.tag!==1)throw Error(mt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(mt(171))}if(e.tag===1){var n=e.type;if(xs(n))return ik(e,n,t)}return t}function sI(e,t,n,s,u,p,f,c,S){return e=d2(n,s,!0,e,u,p,f,c,S),e.context=iI(null),n=e.current,s=ss(),u=nc(n),p=Xa(s,u),p.callback=t??null,tc(n,p,u),e.current.lanes=u,ng(e,u,s),bs(e,s),e}function Rv(e,t,n,s){var u=t.current,p=ss(),f=nc(u);return n=iI(n),t.context===null?t.context=n:t.pendingContext=n,t=Xa(p,f),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=tc(u,t,f),e!==null&&(No(e,u,f,p),a_(e,u,f)),f}function q_(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function sP(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function h2(e,t){sP(e,t),(e=e.alternate)&&sP(e,t)}function HF(){return null}var oI=typeof reportError=="function"?reportError:function(e){console.error(e)};function p2(e){this._internalRoot=e}Av.prototype.render=p2.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(mt(409));Rv(e,t,null,null)};Av.prototype.unmount=p2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Du(function(){Rv(null,e,null,null)}),t[Qa]=null}};function Av(e){this._internalRoot=e}Av.prototype.unstable_scheduleHydration=function(e){if(e){var t=NM();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Fl.length&&t!==0&&t<Fl[n].priority;n++);Fl.splice(n,0,e),n===0&&FM(e)}};function f2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Dv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function oP(){}function qF(e,t,n,s,u){if(u){if(typeof s=="function"){var p=s;s=function(){var E=q_(f);p.call(E)}}var f=sI(t,s,e,0,null,!1,!1,"",oP);return e._reactRootContainer=f,e[Qa]=f.current,vm(e.nodeType===8?e.parentNode:e),Du(),f}for(;u=e.lastChild;)e.removeChild(u);if(typeof s=="function"){var c=s;s=function(){var E=q_(S);c.call(E)}}var S=d2(e,0,!1,null,null,!1,!1,"",oP);return e._reactRootContainer=S,e[Qa]=S.current,vm(e.nodeType===8?e.parentNode:e),Du(function(){Rv(t,S,n,s)}),S}function zv(e,t,n,s,u){var p=n._reactRootContainer;if(p){var f=p;if(typeof u=="function"){var c=u;u=function(){var S=q_(f);c.call(S)}}Rv(t,f,e,u)}else f=qF(n,t,e,u,s);return q_(f)}jM=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Hf(t.pendingLanes);n!==0&&(Dw(t,n|1),bs(t,Vn()),!(Ar&6)&&(Fh=Vn()+500,_c()))}break;case 13:Du(function(){var s=Ja(e,1);if(s!==null){var u=ss();No(s,e,1,u)}}),h2(e,1)}};zw=function(e){if(e.tag===13){var t=Ja(e,134217728);if(t!==null){var n=ss();No(t,e,134217728,n)}h2(e,134217728)}};LM=function(e){if(e.tag===13){var t=nc(e),n=Ja(e,t);if(n!==null){var s=ss();No(n,e,t,s)}h2(e,t)}};NM=function(){return Zr};OM=function(e,t){var n=Zr;try{return Zr=e,t()}finally{Zr=n}};Wb=function(e,t,n){switch(t){case"input":if(Ub(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var u=Tv(s);if(!u)throw Error(mt(90));mM(s),Ub(s,u)}}}break;case"textarea":yM(e,n);break;case"select":t=n.value,t!=null&&ch(e,!!n.multiple,t,!1)}};TM=a2;CM=Du;var WF={usingClientEntryPoint:!1,Events:[sg,th,Tv,wM,SM,a2]},Nf={findFiberByHostInstance:pu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},XF={bundleType:Nf.bundleType,version:Nf.version,rendererPackageName:Nf.rendererPackageName,rendererConfig:Nf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=MM(e),e===null?null:e.stateNode},findFiberByHostInstance:Nf.findFiberByHostInstance||HF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gy.isDisabled&&Gy.supportsFiber)try{xv=Gy.inject(XF),aa=Gy}catch{}}Xs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WF;Xs.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f2(t))throw Error(mt(200));return GF(e,t,null,n)};Xs.createRoot=function(e,t){if(!f2(e))throw Error(mt(299));var n=!1,s="",u=oI;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=d2(e,1,!1,null,null,n,!1,s,u),e[Qa]=t.current,vm(e.nodeType===8?e.parentNode:e),new p2(t)};Xs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(mt(188)):(e=Object.keys(e).join(","),Error(mt(268,e)));return e=MM(t),e=e===null?null:e.stateNode,e};Xs.flushSync=function(e){return Du(e)};Xs.hydrate=function(e,t,n){if(!Dv(t))throw Error(mt(200));return zv(null,e,t,!0,n)};Xs.hydrateRoot=function(e,t,n){if(!f2(e))throw Error(mt(405));var s=n!=null&&n.hydratedSources||null,u=!1,p="",f=oI;if(n!=null&&(n.unstable_strictMode===!0&&(u=!0),n.identifierPrefix!==void 0&&(p=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),t=sI(t,null,e,1,n??null,u,!1,p,f),e[Qa]=t.current,vm(e),s)for(e=0;e<s.length;e++)n=s[e],u=n._getVersion,u=u(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,u]:t.mutableSourceEagerHydrationData.push(n,u);return new Av(t)};Xs.render=function(e,t,n){if(!Dv(t))throw Error(mt(200));return zv(null,e,t,!1,n)};Xs.unmountComponentAtNode=function(e){if(!Dv(e))throw Error(mt(40));return e._reactRootContainer?(Du(function(){zv(null,null,e,!1,function(){e._reactRootContainer=null,e[Qa]=null})}),!0):!1};Xs.unstable_batchedUpdates=a2;Xs.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Dv(n))throw Error(mt(200));if(e==null||e._reactInternals===void 0)throw Error(mt(38));return zv(e,t,n,!1,s)};Xs.version="18.3.1-next-f1338f8080-20240426";function aI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aI)}catch(e){console.error(e)}}aI(),aM.exports=Xs;var Hu=aM.exports;const m2=_v(Hu),KF=WE({__proto__:null,default:m2},[Hu]);var lI,aP=Hu;lI=aP.createRoot,aP.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vn(){return vn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},vn.apply(this,arguments)}var Qn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Qn||(Qn={}));const lP="popstate";function YF(e){e===void 0&&(e={});function t(s,u){let{pathname:p,search:f,hash:c}=s.location;return Mm("",{pathname:p,search:f,hash:c},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(s,u){return typeof u=="string"?u:zu(u)}return JF(t,n,null,e)}function Sr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Bh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function QF(){return Math.random().toString(36).substr(2,8)}function cP(e,t){return{usr:e.state,key:e.key,idx:t}}function Mm(e,t,n,s){return n===void 0&&(n=null),vn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?vc(t):t,{state:n,key:t&&t.key||s||QF()})}function zu(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function vc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function JF(e,t,n,s){s===void 0&&(s={});let{window:u=document.defaultView,v5Compat:p=!1}=s,f=u.history,c=Qn.Pop,S=null,E=A();E==null&&(E=0,f.replaceState(vn({},f.state,{idx:E}),""));function A(){return(f.state||{idx:null}).idx}function z(){c=Qn.Pop;let X=A(),q=X==null?null:X-E;E=X,S&&S({action:c,location:B.location,delta:q})}function L(X,q){c=Qn.Push;let V=Mm(B.location,X,q);E=A()+1;let Y=cP(V,E),de=B.createHref(V);try{f.pushState(Y,"",de)}catch(Se){if(Se instanceof DOMException&&Se.name==="DataCloneError")throw Se;u.location.assign(de)}p&&S&&S({action:c,location:B.location,delta:1})}function I(X,q){c=Qn.Replace;let V=Mm(B.location,X,q);E=A();let Y=cP(V,E),de=B.createHref(V);f.replaceState(Y,"",de),p&&S&&S({action:c,location:B.location,delta:0})}function F(X){let q=u.location.origin!=="null"?u.location.origin:u.location.href,V=typeof X=="string"?X:zu(X);return V=V.replace(/ $/,"%20"),Sr(q,"No window.location.(origin|href) available to create URL for href: "+V),new URL(V,q)}let B={get action(){return c},get location(){return e(u,f)},listen(X){if(S)throw new Error("A history only accepts one active listener");return u.addEventListener(lP,z),S=X,()=>{u.removeEventListener(lP,z),S=null}},createHref(X){return t(u,X)},createURL:F,encodeLocation(X){let q=F(X);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:L,replace:I,go(X){return f.go(X)}};return B}var Kr;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Kr||(Kr={}));const e5=new Set(["lazy","caseSensitive","path","id","index","children"]);function t5(e){return e.index===!0}function W_(e,t,n,s){return n===void 0&&(n=[]),s===void 0&&(s={}),e.map((u,p)=>{let f=[...n,String(p)],c=typeof u.id=="string"?u.id:f.join("-");if(Sr(u.index!==!0||!u.children,"Cannot specify children on an index route"),Sr(!s[c],'Found a route id collision on id "'+c+`".  Route id's must be globally unique within Data Router usages`),t5(u)){let S=vn({},u,t(u),{id:c});return s[c]=S,S}else{let S=vn({},u,t(u),{id:c,children:void 0});return s[c]=S,u.children&&(S.children=W_(u.children,t,f,s)),S}})}function du(e,t,n){return n===void 0&&(n="/"),f_(e,t,n,!1)}function f_(e,t,n,s){let u=typeof t=="string"?vc(t):t,p=Kh(u.pathname||"/",n);if(p==null)return null;let f=cI(e);n5(f);let c=null;for(let S=0;c==null&&S<f.length;++S){let E=f5(p);c=h5(f[S],E,s)}return c}function r5(e,t){let{route:n,pathname:s,params:u}=e;return{id:n.id,pathname:s,params:u,data:t[n.id],handle:n.handle}}function cI(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let u=(p,f,c)=>{let S={relativePath:c===void 0?p.path||"":c,caseSensitive:p.caseSensitive===!0,childrenIndex:f,route:p};S.relativePath.startsWith("/")&&(Sr(S.relativePath.startsWith(s),'Absolute route path "'+S.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),S.relativePath=S.relativePath.slice(s.length));let E=Ka([s,S.relativePath]),A=n.concat(S);p.children&&p.children.length>0&&(Sr(p.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+E+'".')),cI(p.children,t,A,E)),!(p.path==null&&!p.index)&&t.push({path:E,score:u5(E,p.index),routesMeta:A})};return e.forEach((p,f)=>{var c;if(p.path===""||!((c=p.path)!=null&&c.includes("?")))u(p,f);else for(let S of uI(p.path))u(p,f,S)}),t}function uI(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,u=n.endsWith("?"),p=n.replace(/\?$/,"");if(s.length===0)return u?[p,""]:[p];let f=uI(s.join("/")),c=[];return c.push(...f.map(S=>S===""?p:[p,S].join("/"))),u&&c.push(...f),c.map(S=>e.startsWith("/")&&S===""?"/":S)}function n5(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:d5(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const i5=/^:[\w-]+$/,s5=3,o5=2,a5=1,l5=10,c5=-2,uP=e=>e==="*";function u5(e,t){let n=e.split("/"),s=n.length;return n.some(uP)&&(s+=c5),t&&(s+=o5),n.filter(u=>!uP(u)).reduce((u,p)=>u+(i5.test(p)?s5:p===""?a5:l5),s)}function d5(e,t){return e.length===t.length&&e.slice(0,-1).every((s,u)=>s===t[u])?e[e.length-1]-t[t.length-1]:0}function h5(e,t,n){n===void 0&&(n=!1);let{routesMeta:s}=e,u={},p="/",f=[];for(let c=0;c<s.length;++c){let S=s[c],E=c===s.length-1,A=p==="/"?t:t.slice(p.length)||"/",z=dP({path:S.relativePath,caseSensitive:S.caseSensitive,end:E},A),L=S.route;if(!z&&E&&n&&!s[s.length-1].route.index&&(z=dP({path:S.relativePath,caseSensitive:S.caseSensitive,end:!1},A)),!z)return null;Object.assign(u,z.params),f.push({params:u,pathname:Ka([p,z.pathname]),pathnameBase:y5(Ka([p,z.pathnameBase])),route:L}),z.pathnameBase!=="/"&&(p=Ka([p,z.pathnameBase]))}return f}function dP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=p5(e.path,e.caseSensitive,e.end),u=t.match(n);if(!u)return null;let p=u[0],f=p.replace(/(.)\/+$/,"$1"),c=u.slice(1);return{params:s.reduce((E,A,z)=>{let{paramName:L,isOptional:I}=A;if(L==="*"){let B=c[z]||"";f=p.slice(0,p.length-B.length).replace(/(.)\/+$/,"$1")}const F=c[z];return I&&!F?E[L]=void 0:E[L]=(F||"").replace(/%2F/g,"/"),E},{}),pathname:p,pathnameBase:f,pattern:e}}function p5(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Bh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],u="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,c,S)=>(s.push({paramName:c,isOptional:S!=null}),S?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),u+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?u+="\\/*$":e!==""&&e!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,t?void 0:"i"),s]}function f5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Bh(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Kh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function m5(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:u=""}=typeof e=="string"?vc(e):e;return{pathname:n?n.startsWith("/")?n:g5(n,t):t,search:_5(s),hash:v5(u)}}function g5(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(u=>{u===".."?n.length>1&&n.pop():u!=="."&&n.push(u)}),n.length>1?n.join("/"):"/"}function lb(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dI(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function jv(e,t){let n=dI(e);return t?n.map((s,u)=>u===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Lv(e,t,n,s){s===void 0&&(s=!1);let u;typeof e=="string"?u=vc(e):(u=vn({},e),Sr(!u.pathname||!u.pathname.includes("?"),lb("?","pathname","search",u)),Sr(!u.pathname||!u.pathname.includes("#"),lb("#","pathname","hash",u)),Sr(!u.search||!u.search.includes("#"),lb("#","search","hash",u)));let p=e===""||u.pathname==="",f=p?"/":u.pathname,c;if(f==null)c=n;else{let z=t.length-1;if(!s&&f.startsWith("..")){let L=f.split("/");for(;L[0]==="..";)L.shift(),z-=1;u.pathname=L.join("/")}c=z>=0?t[z]:"/"}let S=m5(u,c),E=f&&f!=="/"&&f.endsWith("/"),A=(p||f===".")&&n.endsWith("/");return!S.pathname.endsWith("/")&&(E||A)&&(S.pathname+="/"),S}const Ka=e=>e.join("/").replace(/\/\/+/g,"/"),y5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,v5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class X_{constructor(t,n,s,u){u===void 0&&(u=!1),this.status=t,this.statusText=n||"",this.internal=u,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}}function Nv(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const hI=["post","put","patch","delete"],x5=new Set(hI),b5=["get",...hI],w5=new Set(b5),S5=new Set([301,302,303,307,308]),T5=new Set([307,308]),cb={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},C5={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Of={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},g2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,P5=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),pI="remix-router-transitions";function E5(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",s=!n;Sr(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let u;if(e.mapRouteProperties)u=e.mapRouteProperties;else if(e.detectErrorBoundary){let me=e.detectErrorBoundary;u=Ce=>({hasErrorBoundary:me(Ce)})}else u=P5;let p={},f=W_(e.routes,u,void 0,p),c,S=e.basename||"/",E=e.dataStrategy||R5,A=e.patchRoutesOnNavigation,z=vn({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),L=null,I=new Set,F=null,B=null,X=null,q=e.hydrationData!=null,V=du(f,e.history.location,S),Y=null;if(V==null&&!A){let me=gs(404,{pathname:e.history.location.pathname}),{matches:Ce,route:he}=wP(f);V=Ce,Y={[he.id]:me}}V&&!e.hydrationData&&ze(V,f,e.history.location.pathname).active&&(V=null);let de;if(V)if(V.some(me=>me.route.lazy))de=!1;else if(!V.some(me=>me.route.loader))de=!0;else if(z.v7_partialHydration){let me=e.hydrationData?e.hydrationData.loaderData:null,Ce=e.hydrationData?e.hydrationData.errors:null;if(Ce){let he=V.findIndex(De=>Ce[De.route.id]!==void 0);de=V.slice(0,he+1).every(De=>!M1(De.route,me,Ce))}else de=V.every(he=>!M1(he.route,me,Ce))}else de=e.hydrationData!=null;else if(de=!1,V=[],z.v7_partialHydration){let me=ze(null,f,e.history.location.pathname);me.active&&me.matches&&(V=me.matches)}let Se,ce={historyAction:e.history.action,location:e.history.location,matches:V,initialized:de,navigation:cb,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||Y,fetchers:new Map,blockers:new Map},Re=Qn.Pop,Ie=!1,We,tt=!1,vt=new Map,st=null,Tt=!1,_t=!1,Kt=[],ct=new Set,Pt=new Map,Xe=0,Oe=-1,at=new Map,Et=new Set,wt=new Map,Lt=new Map,It=new Set,Wt=new Map,tr=new Map,gt;function or(){if(L=e.history.listen(me=>{let{action:Ce,location:he,delta:De}=me;if(gt){gt(),gt=void 0;return}Bh(tr.size===0||De!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let He=pe({currentLocation:ce.location,nextLocation:he,historyAction:Ce});if(He&&De!=null){let lt=new Promise(bt=>{gt=bt});e.history.go(De*-1),re(He,{state:"blocked",location:he,proceed(){re(He,{state:"proceeding",proceed:void 0,reset:void 0,location:he}),lt.then(()=>e.history.go(De))},reset(){let bt=new Map(ce.blockers);bt.set(He,Of),At({blockers:bt})}});return}return Qr(Ce,he)}),n){G5(t,vt);let me=()=>H5(t,vt);t.addEventListener("pagehide",me),st=()=>t.removeEventListener("pagehide",me)}return ce.initialized||Qr(Qn.Pop,ce.location,{initialHydration:!0}),Se}function Yt(){L&&L(),st&&st(),I.clear(),We&&We.abort(),ce.fetchers.forEach((me,Ce)=>kn(Ce)),ce.blockers.forEach((me,Ce)=>te(Ce))}function ir(me){return I.add(me),()=>I.delete(me)}function At(me,Ce){Ce===void 0&&(Ce={}),ce=vn({},ce,me);let he=[],De=[];z.v7_fetcherPersist&&ce.fetchers.forEach((He,lt)=>{He.state==="idle"&&(It.has(lt)?De.push(lt):he.push(lt))}),[...I].forEach(He=>He(ce,{deletedFetchers:De,viewTransitionOpts:Ce.viewTransitionOpts,flushSync:Ce.flushSync===!0})),z.v7_fetcherPersist&&(he.forEach(He=>ce.fetchers.delete(He)),De.forEach(He=>kn(He)))}function Zt(me,Ce,he){var De,He;let{flushSync:lt}=he===void 0?{}:he,bt=ce.actionData!=null&&ce.navigation.formMethod!=null&&Ro(ce.navigation.formMethod)&&ce.navigation.state==="loading"&&((De=me.state)==null?void 0:De._isRedirect)!==!0,et;Ce.actionData?Object.keys(Ce.actionData).length>0?et=Ce.actionData:et=null:bt?et=ce.actionData:et=null;let Ge=Ce.loaderData?xP(ce.loaderData,Ce.loaderData,Ce.matches||[],Ce.errors):ce.loaderData,yt=ce.blockers;yt.size>0&&(yt=new Map(yt),yt.forEach((Xt,sr)=>yt.set(sr,Of)));let Nt=Ie===!0||ce.navigation.formMethod!=null&&Ro(ce.navigation.formMethod)&&((He=me.state)==null?void 0:He._isRedirect)!==!0;c&&(f=c,c=void 0),Tt||Re===Qn.Pop||(Re===Qn.Push?e.history.push(me,me.state):Re===Qn.Replace&&e.history.replace(me,me.state));let qt;if(Re===Qn.Pop){let Xt=vt.get(ce.location.pathname);Xt&&Xt.has(me.pathname)?qt={currentLocation:ce.location,nextLocation:me}:vt.has(me.pathname)&&(qt={currentLocation:me,nextLocation:ce.location})}else if(tt){let Xt=vt.get(ce.location.pathname);Xt?Xt.add(me.pathname):(Xt=new Set([me.pathname]),vt.set(ce.location.pathname,Xt)),qt={currentLocation:ce.location,nextLocation:me}}At(vn({},Ce,{actionData:et,loaderData:Ge,historyAction:Re,location:me,initialized:!0,navigation:cb,revalidation:"idle",restoreScrollPosition:Be(me,Ce.matches||ce.matches),preventScrollReset:Nt,blockers:yt}),{viewTransitionOpts:qt,flushSync:lt===!0}),Re=Qn.Pop,Ie=!1,tt=!1,Tt=!1,_t=!1,Kt=[]}async function Lr(me,Ce){if(typeof me=="number"){e.history.go(me);return}let he=E1(ce.location,ce.matches,S,z.v7_prependBasename,me,z.v7_relativeSplatPath,Ce==null?void 0:Ce.fromRouteId,Ce==null?void 0:Ce.relative),{path:De,submission:He,error:lt}=hP(z.v7_normalizeFormMethod,!1,he,Ce),bt=ce.location,et=Mm(ce.location,De,Ce&&Ce.state);et=vn({},et,e.history.encodeLocation(et));let Ge=Ce&&Ce.replace!=null?Ce.replace:void 0,yt=Qn.Push;Ge===!0?yt=Qn.Replace:Ge===!1||He!=null&&Ro(He.formMethod)&&He.formAction===ce.location.pathname+ce.location.search&&(yt=Qn.Replace);let Nt=Ce&&"preventScrollReset"in Ce?Ce.preventScrollReset===!0:void 0,qt=(Ce&&Ce.flushSync)===!0,Xt=pe({currentLocation:bt,nextLocation:et,historyAction:yt});if(Xt){re(Xt,{state:"blocked",location:et,proceed(){re(Xt,{state:"proceeding",proceed:void 0,reset:void 0,location:et}),Lr(me,Ce)},reset(){let sr=new Map(ce.blockers);sr.set(Xt,Of),At({blockers:sr})}});return}return await Qr(yt,et,{submission:He,pendingError:lt,preventScrollReset:Nt,replace:Ce&&Ce.replace,enableViewTransition:Ce&&Ce.viewTransition,flushSync:qt})}function vr(){if(_i(),At({revalidation:"loading"}),ce.navigation.state!=="submitting"){if(ce.navigation.state==="idle"){Qr(ce.historyAction,ce.location,{startUninterruptedRevalidation:!0});return}Qr(Re||ce.historyAction,ce.navigation.location,{overrideNavigation:ce.navigation,enableViewTransition:tt===!0})}}async function Qr(me,Ce,he){We&&We.abort(),We=null,Re=me,Tt=(he&&he.startUninterruptedRevalidation)===!0,Ve(ce.location,ce.matches),Ie=(he&&he.preventScrollReset)===!0,tt=(he&&he.enableViewTransition)===!0;let De=c||f,He=he&&he.overrideNavigation,lt=du(De,Ce,S),bt=(he&&he.flushSync)===!0,et=ze(lt,De,Ce.pathname);if(et.active&&et.matches&&(lt=et.matches),!lt){let{error:ur,notFoundMatches:Gt,route:Fr}=Te(Ce.pathname);Zt(Ce,{matches:Gt,loaderData:{},errors:{[Fr.id]:ur}},{flushSync:bt});return}if(ce.initialized&&!_t&&N5(ce.location,Ce)&&!(he&&he.submission&&Ro(he.submission.formMethod))){Zt(Ce,{matches:lt},{flushSync:bt});return}We=new AbortController;let Ge=Zd(e.history,Ce,We.signal,he&&he.submission),yt;if(he&&he.pendingError)yt=[hu(lt).route.id,{type:Kr.error,error:he.pendingError}];else if(he&&he.submission&&Ro(he.submission.formMethod)){let ur=await ei(Ge,Ce,he.submission,lt,et.active,{replace:he.replace,flushSync:bt});if(ur.shortCircuited)return;if(ur.pendingActionResult){let[Gt,Fr]=ur.pendingActionResult;if(Bs(Fr)&&Nv(Fr.error)&&Fr.error.status===404){We=null,Zt(Ce,{matches:ur.matches,loaderData:{},errors:{[Gt]:Fr.error}});return}}lt=ur.matches||lt,yt=ur.pendingActionResult,He=ub(Ce,he.submission),bt=!1,et.active=!1,Ge=Zd(e.history,Ge.url,Ge.signal)}let{shortCircuited:Nt,matches:qt,loaderData:Xt,errors:sr}=await fn(Ge,Ce,lt,et.active,He,he&&he.submission,he&&he.fetcherSubmission,he&&he.replace,he&&he.initialHydration===!0,bt,yt);Nt||(We=null,Zt(Ce,vn({matches:qt||lt},bP(yt),{loaderData:Xt,errors:sr})))}async function ei(me,Ce,he,De,He,lt){lt===void 0&&(lt={}),_i();let bt=$5(Ce,he);if(At({navigation:bt},{flushSync:lt.flushSync===!0}),He){let yt=await Ee(De,Ce.pathname,me.signal);if(yt.type==="aborted")return{shortCircuited:!0};if(yt.type==="error"){let Nt=hu(yt.partialMatches).route.id;return{matches:yt.partialMatches,pendingActionResult:[Nt,{type:Kr.error,error:yt.error}]}}else if(yt.matches)De=yt.matches;else{let{notFoundMatches:Nt,error:qt,route:Xt}=Te(Ce.pathname);return{matches:Nt,pendingActionResult:[Xt.id,{type:Kr.error,error:qt}]}}}let et,Ge=Wf(De,Ce);if(!Ge.route.action&&!Ge.route.lazy)et={type:Kr.error,error:gs(405,{method:me.method,pathname:Ce.pathname,routeId:Ge.route.id})};else if(et=(await Gn("action",ce,me,[Ge],De,null))[Ge.route.id],me.signal.aborted)return{shortCircuited:!0};if(gu(et)){let yt;return lt&&lt.replace!=null?yt=lt.replace:yt=yP(et.response.headers.get("Location"),new URL(me.url),S)===ce.location.pathname+ce.location.search,await Nr(me,et,!0,{submission:he,replace:yt}),{shortCircuited:!0}}if(Kl(et))throw gs(400,{type:"defer-action"});if(Bs(et)){let yt=hu(De,Ge.route.id);return(lt&&lt.replace)!==!0&&(Re=Qn.Push),{matches:De,pendingActionResult:[yt.route.id,et]}}return{matches:De,pendingActionResult:[Ge.route.id,et]}}async function fn(me,Ce,he,De,He,lt,bt,et,Ge,yt,Nt){let qt=He||ub(Ce,lt),Xt=lt||bt||TP(qt),sr=!Tt&&(!z.v7_partialHydration||!Ge);if(De){if(sr){let tn=$n(Nt);At(vn({navigation:qt},tn!==void 0?{actionData:tn}:{}),{flushSync:yt})}let Cr=await Ee(he,Ce.pathname,me.signal);if(Cr.type==="aborted")return{shortCircuited:!0};if(Cr.type==="error"){let tn=hu(Cr.partialMatches).route.id;return{matches:Cr.partialMatches,loaderData:{},errors:{[tn]:Cr.error}}}else if(Cr.matches)he=Cr.matches;else{let{error:tn,notFoundMatches:Ho,route:qo}=Te(Ce.pathname);return{matches:Ho,loaderData:{},errors:{[qo.id]:tn}}}}let ur=c||f,[Gt,Fr]=fP(e.history,ce,he,Xt,Ce,z.v7_partialHydration&&Ge===!0,z.v7_skipActionErrorRevalidation,_t,Kt,ct,It,wt,Et,ur,S,Nt);if(ve(Cr=>!(he&&he.some(tn=>tn.route.id===Cr))||Gt&&Gt.some(tn=>tn.route.id===Cr)),Oe=++Xe,Gt.length===0&&Fr.length===0){let Cr=Wi();return Zt(Ce,vn({matches:he,loaderData:{},errors:Nt&&Bs(Nt[1])?{[Nt[0]]:Nt[1].error}:null},bP(Nt),Cr?{fetchers:new Map(ce.fetchers)}:{}),{flushSync:yt}),{shortCircuited:!0}}if(sr){let Cr={};if(!De){Cr.navigation=qt;let tn=$n(Nt);tn!==void 0&&(Cr.actionData=tn)}Fr.length>0&&(Cr.fetchers=Zn(Fr)),At(Cr,{flushSync:yt})}Fr.forEach(Cr=>{In(Cr.key),Cr.controller&&Pt.set(Cr.key,Cr.controller)});let Xi=()=>Fr.forEach(Cr=>In(Cr.key));We&&We.signal.addEventListener("abort",Xi);let{loaderResults:vo,fetcherResults:ti}=await ds(ce,he,Gt,Fr,me);if(me.signal.aborted)return{shortCircuited:!0};We&&We.signal.removeEventListener("abort",Xi),Fr.forEach(Cr=>Pt.delete(Cr.key));let Hn=Hy(vo);if(Hn)return await Nr(me,Hn.result,!0,{replace:et}),{shortCircuited:!0};if(Hn=Hy(ti),Hn)return Et.add(Hn.key),await Nr(me,Hn.result,!0,{replace:et}),{shortCircuited:!0};let{loaderData:al,errors:xo}=vP(ce,he,vo,Nt,Fr,ti,Wt);Wt.forEach((Cr,tn)=>{Cr.subscribe(Ho=>{(Ho||Cr.done)&&Wt.delete(tn)})}),z.v7_partialHydration&&Ge&&ce.errors&&(xo=vn({},ce.errors,xo));let Ys=Wi(),Es=se(Oe),ya=Ys||Es||Fr.length>0;return vn({matches:he,loaderData:al,errors:xo},ya?{fetchers:new Map(ce.fetchers)}:{})}function $n(me){if(me&&!Bs(me[1]))return{[me[0]]:me[1].data};if(ce.actionData)return Object.keys(ce.actionData).length===0?null:ce.actionData}function Zn(me){return me.forEach(Ce=>{let he=ce.fetchers.get(Ce.key),De=Ff(void 0,he?he.data:void 0);ce.fetchers.set(Ce.key,De)}),new Map(ce.fetchers)}function mn(me,Ce,he,De){if(s)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");In(me);let He=(De&&De.flushSync)===!0,lt=c||f,bt=E1(ce.location,ce.matches,S,z.v7_prependBasename,he,z.v7_relativeSplatPath,Ce,De==null?void 0:De.relative),et=du(lt,bt,S),Ge=ze(et,lt,bt);if(Ge.active&&Ge.matches&&(et=Ge.matches),!et){wn(me,Ce,gs(404,{pathname:bt}),{flushSync:He});return}let{path:yt,submission:Nt,error:qt}=hP(z.v7_normalizeFormMethod,!0,bt,De);if(qt){wn(me,Ce,qt,{flushSync:He});return}let Xt=Wf(et,yt),sr=(De&&De.preventScrollReset)===!0;if(Nt&&Ro(Nt.formMethod)){Ss(me,Ce,yt,Xt,et,Ge.active,He,sr,Nt);return}wt.set(me,{routeId:Ce,path:yt}),Ts(me,Ce,yt,Xt,et,Ge.active,He,sr,Nt)}async function Ss(me,Ce,he,De,He,lt,bt,et,Ge){_i(),wt.delete(me);function yt(rn){if(!rn.route.action&&!rn.route.lazy){let Ri=gs(405,{method:Ge.formMethod,pathname:he,routeId:Ce});return wn(me,Ce,Ri,{flushSync:bt}),!0}return!1}if(!lt&&yt(De))return;let Nt=ce.fetchers.get(me);bn(me,Z5(Ge,Nt),{flushSync:bt});let qt=new AbortController,Xt=Zd(e.history,he,qt.signal,Ge);if(lt){let rn=await Ee(He,he,Xt.signal);if(rn.type==="aborted")return;if(rn.type==="error"){wn(me,Ce,rn.error,{flushSync:bt});return}else if(rn.matches){if(He=rn.matches,De=Wf(He,he),yt(De))return}else{wn(me,Ce,gs(404,{pathname:he}),{flushSync:bt});return}}Pt.set(me,qt);let sr=Xe,Gt=(await Gn("action",ce,Xt,[De],He,me))[De.route.id];if(Xt.signal.aborted){Pt.get(me)===qt&&Pt.delete(me);return}if(z.v7_fetcherPersist&&It.has(me)){if(gu(Gt)||Bs(Gt)){bn(me,zl(void 0));return}}else{if(gu(Gt))if(Pt.delete(me),Oe>sr){bn(me,zl(void 0));return}else return Et.add(me),bn(me,Ff(Ge)),Nr(Xt,Gt,!1,{fetcherSubmission:Ge,preventScrollReset:et});if(Bs(Gt)){wn(me,Ce,Gt.error);return}}if(Kl(Gt))throw gs(400,{type:"defer-action"});let Fr=ce.navigation.location||ce.location,Xi=Zd(e.history,Fr,qt.signal),vo=c||f,ti=ce.navigation.state!=="idle"?du(vo,ce.navigation.location,S):ce.matches;Sr(ti,"Didn't find any matches after fetcher action");let Hn=++Xe;at.set(me,Hn);let al=Ff(Ge,Gt.data);ce.fetchers.set(me,al);let[xo,Ys]=fP(e.history,ce,ti,Ge,Fr,!1,z.v7_skipActionErrorRevalidation,_t,Kt,ct,It,wt,Et,vo,S,[De.route.id,Gt]);Ys.filter(rn=>rn.key!==me).forEach(rn=>{let Ri=rn.key,ll=ce.fetchers.get(Ri),Ku=Ff(void 0,ll?ll.data:void 0);ce.fetchers.set(Ri,Ku),In(Ri),rn.controller&&Pt.set(Ri,rn.controller)}),At({fetchers:new Map(ce.fetchers)});let Es=()=>Ys.forEach(rn=>In(rn.key));qt.signal.addEventListener("abort",Es);let{loaderResults:ya,fetcherResults:Cr}=await ds(ce,ti,xo,Ys,Xi);if(qt.signal.aborted)return;qt.signal.removeEventListener("abort",Es),at.delete(me),Pt.delete(me),Ys.forEach(rn=>Pt.delete(rn.key));let tn=Hy(ya);if(tn)return Nr(Xi,tn.result,!1,{preventScrollReset:et});if(tn=Hy(Cr),tn)return Et.add(tn.key),Nr(Xi,tn.result,!1,{preventScrollReset:et});let{loaderData:Ho,errors:qo}=vP(ce,ti,ya,void 0,Ys,Cr,Wt);if(ce.fetchers.has(me)){let rn=zl(Gt.data);ce.fetchers.set(me,rn)}se(Hn),ce.navigation.state==="loading"&&Hn>Oe?(Sr(Re,"Expected pending action"),We&&We.abort(),Zt(ce.navigation.location,{matches:ti,loaderData:Ho,errors:qo,fetchers:new Map(ce.fetchers)})):(At({errors:qo,loaderData:xP(ce.loaderData,Ho,ti,qo),fetchers:new Map(ce.fetchers)}),_t=!1)}async function Ts(me,Ce,he,De,He,lt,bt,et,Ge){let yt=ce.fetchers.get(me);bn(me,Ff(Ge,yt?yt.data:void 0),{flushSync:bt});let Nt=new AbortController,qt=Zd(e.history,he,Nt.signal);if(lt){let Gt=await Ee(He,he,qt.signal);if(Gt.type==="aborted")return;if(Gt.type==="error"){wn(me,Ce,Gt.error,{flushSync:bt});return}else if(Gt.matches)He=Gt.matches,De=Wf(He,he);else{wn(me,Ce,gs(404,{pathname:he}),{flushSync:bt});return}}Pt.set(me,Nt);let Xt=Xe,ur=(await Gn("loader",ce,qt,[De],He,me))[De.route.id];if(Kl(ur)&&(ur=await y2(ur,qt.signal,!0)||ur),Pt.get(me)===Nt&&Pt.delete(me),!qt.signal.aborted){if(It.has(me)){bn(me,zl(void 0));return}if(gu(ur))if(Oe>Xt){bn(me,zl(void 0));return}else{Et.add(me),await Nr(qt,ur,!1,{preventScrollReset:et});return}if(Bs(ur)){wn(me,Ce,ur.error);return}Sr(!Kl(ur),"Unhandled fetcher deferred data"),bn(me,zl(ur.data))}}async function Nr(me,Ce,he,De){let{submission:He,fetcherSubmission:lt,preventScrollReset:bt,replace:et}=De===void 0?{}:De;Ce.response.headers.has("X-Remix-Revalidate")&&(_t=!0);let Ge=Ce.response.headers.get("Location");Sr(Ge,"Expected a Location header on the redirect Response"),Ge=yP(Ge,new URL(me.url),S);let yt=Mm(ce.location,Ge,{_isRedirect:!0});if(n){let Gt=!1;if(Ce.response.headers.has("X-Remix-Reload-Document"))Gt=!0;else if(g2.test(Ge)){const Fr=e.history.createURL(Ge);Gt=Fr.origin!==t.location.origin||Kh(Fr.pathname,S)==null}if(Gt){et?t.location.replace(Ge):t.location.assign(Ge);return}}We=null;let Nt=et===!0||Ce.response.headers.has("X-Remix-Replace")?Qn.Replace:Qn.Push,{formMethod:qt,formAction:Xt,formEncType:sr}=ce.navigation;!He&&!lt&&qt&&Xt&&sr&&(He=TP(ce.navigation));let ur=He||lt;if(T5.has(Ce.response.status)&&ur&&Ro(ur.formMethod))await Qr(Nt,yt,{submission:vn({},ur,{formAction:Ge}),preventScrollReset:bt||Ie,enableViewTransition:he?tt:void 0});else{let Gt=ub(yt,He);await Qr(Nt,yt,{overrideNavigation:Gt,fetcherSubmission:lt,preventScrollReset:bt||Ie,enableViewTransition:he?tt:void 0})}}async function Gn(me,Ce,he,De,He,lt){let bt,et={};try{bt=await A5(E,me,Ce,he,De,He,lt,p,u)}catch(Ge){return De.forEach(yt=>{et[yt.route.id]={type:Kr.error,error:Ge}}),et}for(let[Ge,yt]of Object.entries(bt))if(O5(yt)){let Nt=yt.result;et[Ge]={type:Kr.redirect,response:j5(Nt,he,Ge,He,S,z.v7_relativeSplatPath)}}else et[Ge]=await z5(yt);return et}async function ds(me,Ce,he,De,He){let lt=me.matches,bt=Gn("loader",me,He,he,Ce,null),et=Promise.all(De.map(async Nt=>{if(Nt.matches&&Nt.match&&Nt.controller){let Xt=(await Gn("loader",me,Zd(e.history,Nt.path,Nt.controller.signal),[Nt.match],Nt.matches,Nt.key))[Nt.match.route.id];return{[Nt.key]:Xt}}else return Promise.resolve({[Nt.key]:{type:Kr.error,error:gs(404,{pathname:Nt.path})}})})),Ge=await bt,yt=(await et).reduce((Nt,qt)=>Object.assign(Nt,qt),{});return await Promise.all([U5(Ce,Ge,He.signal,lt,me.loaderData),V5(Ce,yt,De)]),{loaderResults:Ge,fetcherResults:yt}}function _i(){_t=!0,Kt.push(...ve()),wt.forEach((me,Ce)=>{Pt.has(Ce)&&ct.add(Ce),In(Ce)})}function bn(me,Ce,he){he===void 0&&(he={}),ce.fetchers.set(me,Ce),At({fetchers:new Map(ce.fetchers)},{flushSync:(he&&he.flushSync)===!0})}function wn(me,Ce,he,De){De===void 0&&(De={});let He=hu(ce.matches,Ce);kn(me),At({errors:{[He.route.id]:he},fetchers:new Map(ce.fetchers)},{flushSync:(De&&De.flushSync)===!0})}function Ii(me){return z.v7_fetcherPersist&&(Lt.set(me,(Lt.get(me)||0)+1),It.has(me)&&It.delete(me)),ce.fetchers.get(me)||C5}function kn(me){let Ce=ce.fetchers.get(me);Pt.has(me)&&!(Ce&&Ce.state==="loading"&&at.has(me))&&In(me),wt.delete(me),at.delete(me),Et.delete(me),It.delete(me),ct.delete(me),ce.fetchers.delete(me)}function Cs(me){if(z.v7_fetcherPersist){let Ce=(Lt.get(me)||0)-1;Ce<=0?(Lt.delete(me),It.add(me)):Lt.set(me,Ce)}else kn(me);At({fetchers:new Map(ce.fetchers)})}function In(me){let Ce=Pt.get(me);Ce&&(Ce.abort(),Pt.delete(me))}function Ps(me){for(let Ce of me){let he=Ii(Ce),De=zl(he.data);ce.fetchers.set(Ce,De)}}function Wi(){let me=[],Ce=!1;for(let he of Et){let De=ce.fetchers.get(he);Sr(De,"Expected fetcher: "+he),De.state==="loading"&&(Et.delete(he),me.push(he),Ce=!0)}return Ps(me),Ce}function se(me){let Ce=[];for(let[he,De]of at)if(De<me){let He=ce.fetchers.get(he);Sr(He,"Expected fetcher: "+he),He.state==="loading"&&(In(he),at.delete(he),Ce.push(he))}return Ps(Ce),Ce.length>0}function Q(me,Ce){let he=ce.blockers.get(me)||Of;return tr.get(me)!==Ce&&tr.set(me,Ce),he}function te(me){ce.blockers.delete(me),tr.delete(me)}function re(me,Ce){let he=ce.blockers.get(me)||Of;Sr(he.state==="unblocked"&&Ce.state==="blocked"||he.state==="blocked"&&Ce.state==="blocked"||he.state==="blocked"&&Ce.state==="proceeding"||he.state==="blocked"&&Ce.state==="unblocked"||he.state==="proceeding"&&Ce.state==="unblocked","Invalid blocker state transition: "+he.state+" -> "+Ce.state);let De=new Map(ce.blockers);De.set(me,Ce),At({blockers:De})}function pe(me){let{currentLocation:Ce,nextLocation:he,historyAction:De}=me;if(tr.size===0)return;tr.size>1&&Bh(!1,"A router only supports one blocker at a time");let He=Array.from(tr.entries()),[lt,bt]=He[He.length-1],et=ce.blockers.get(lt);if(!(et&&et.state==="proceeding")&&bt({currentLocation:Ce,nextLocation:he,historyAction:De}))return lt}function Te(me){let Ce=gs(404,{pathname:me}),he=c||f,{matches:De,route:He}=wP(he);return ve(),{notFoundMatches:De,route:He,error:Ce}}function ve(me){let Ce=[];return Wt.forEach((he,De)=>{(!me||me(De))&&(he.cancel(),Ce.push(De),Wt.delete(De))}),Ce}function Ae(me,Ce,he){if(F=me,X=Ce,B=he||null,!q&&ce.navigation===cb){q=!0;let De=Be(ce.location,ce.matches);De!=null&&At({restoreScrollPosition:De})}return()=>{F=null,X=null,B=null}}function we(me,Ce){return B&&B(me,Ce.map(De=>r5(De,ce.loaderData)))||me.key}function Ve(me,Ce){if(F&&X){let he=we(me,Ce);F[he]=X()}}function Be(me,Ce){if(F){let he=we(me,Ce),De=F[he];if(typeof De=="number")return De}return null}function ze(me,Ce,he){if(A)if(me){if(Object.keys(me[0].params).length>0)return{active:!0,matches:f_(Ce,he,S,!0)}}else return{active:!0,matches:f_(Ce,he,S,!0)||[]};return{active:!1,matches:null}}async function Ee(me,Ce,he){if(!A)return{type:"success",matches:me};let De=me;for(;;){let He=c==null,lt=c||f,bt=p;try{await A({path:Ce,matches:De,patch:(yt,Nt)=>{he.aborted||gP(yt,Nt,lt,bt,u)}})}catch(yt){return{type:"error",error:yt,partialMatches:De}}finally{He&&!he.aborted&&(f=[...f])}if(he.aborted)return{type:"aborted"};let et=du(lt,Ce,S);if(et)return{type:"success",matches:et};let Ge=f_(lt,Ce,S,!0);if(!Ge||De.length===Ge.length&&De.every((yt,Nt)=>yt.route.id===Ge[Nt].route.id))return{type:"success",matches:null};De=Ge}}function ht(me){p={},c=W_(me,u,void 0,p)}function dt(me,Ce){let he=c==null;gP(me,Ce,c||f,p,u),he&&(f=[...f],At({}))}return Se={get basename(){return S},get future(){return z},get state(){return ce},get routes(){return f},get window(){return t},initialize:or,subscribe:ir,enableScrollRestoration:Ae,navigate:Lr,fetch:mn,revalidate:vr,createHref:me=>e.history.createHref(me),encodeLocation:me=>e.history.encodeLocation(me),getFetcher:Ii,deleteFetcher:Cs,dispose:Yt,getBlocker:Q,deleteBlocker:te,patchRoutes:dt,_internalFetchControllers:Pt,_internalActiveDeferreds:Wt,_internalSetRoutes:ht},Se}function M5(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function E1(e,t,n,s,u,p,f,c){let S,E;if(f){S=[];for(let z of t)if(S.push(z),z.route.id===f){E=z;break}}else S=t,E=t[t.length-1];let A=Lv(u||".",jv(S,p),Kh(e.pathname,n)||e.pathname,c==="path");if(u==null&&(A.search=e.search,A.hash=e.hash),(u==null||u===""||u===".")&&E){let z=_2(A.search);if(E.route.index&&!z)A.search=A.search?A.search.replace(/^\?/,"?index&"):"?index";else if(!E.route.index&&z){let L=new URLSearchParams(A.search),I=L.getAll("index");L.delete("index"),I.filter(B=>B).forEach(B=>L.append("index",B));let F=L.toString();A.search=F?"?"+F:""}}return s&&n!=="/"&&(A.pathname=A.pathname==="/"?n:Ka([n,A.pathname])),zu(A)}function hP(e,t,n,s){if(!s||!M5(s))return{path:n};if(s.formMethod&&!B5(s.formMethod))return{path:n,error:gs(405,{method:s.formMethod})};let u=()=>({path:n,error:gs(400,{type:"invalid-body"})}),p=s.formMethod||"get",f=e?p.toUpperCase():p.toLowerCase(),c=gI(n);if(s.body!==void 0){if(s.formEncType==="text/plain"){if(!Ro(f))return u();let L=typeof s.body=="string"?s.body:s.body instanceof FormData||s.body instanceof URLSearchParams?Array.from(s.body.entries()).reduce((I,F)=>{let[B,X]=F;return""+I+B+"="+X+`
`},""):String(s.body);return{path:n,submission:{formMethod:f,formAction:c,formEncType:s.formEncType,formData:void 0,json:void 0,text:L}}}else if(s.formEncType==="application/json"){if(!Ro(f))return u();try{let L=typeof s.body=="string"?JSON.parse(s.body):s.body;return{path:n,submission:{formMethod:f,formAction:c,formEncType:s.formEncType,formData:void 0,json:L,text:void 0}}}catch{return u()}}}Sr(typeof FormData=="function","FormData is not available in this environment");let S,E;if(s.formData)S=k1(s.formData),E=s.formData;else if(s.body instanceof FormData)S=k1(s.body),E=s.body;else if(s.body instanceof URLSearchParams)S=s.body,E=_P(S);else if(s.body==null)S=new URLSearchParams,E=new FormData;else try{S=new URLSearchParams(s.body),E=_P(S)}catch{return u()}let A={formMethod:f,formAction:c,formEncType:s&&s.formEncType||"application/x-www-form-urlencoded",formData:E,json:void 0,text:void 0};if(Ro(A.formMethod))return{path:n,submission:A};let z=vc(n);return t&&z.search&&_2(z.search)&&S.append("index",""),z.search="?"+S,{path:zu(z),submission:A}}function pP(e,t,n){n===void 0&&(n=!1);let s=e.findIndex(u=>u.route.id===t);return s>=0?e.slice(0,n?s+1:s):e}function fP(e,t,n,s,u,p,f,c,S,E,A,z,L,I,F,B){let X=B?Bs(B[1])?B[1].error:B[1].data:void 0,q=e.createURL(t.location),V=e.createURL(u),Y=n;p&&t.errors?Y=pP(n,Object.keys(t.errors)[0],!0):B&&Bs(B[1])&&(Y=pP(n,B[0]));let de=B?B[1].statusCode:void 0,Se=f&&de&&de>=400,ce=Y.filter((Ie,We)=>{let{route:tt}=Ie;if(tt.lazy)return!0;if(tt.loader==null)return!1;if(p)return M1(tt,t.loaderData,t.errors);if(k5(t.loaderData,t.matches[We],Ie)||S.some(Tt=>Tt===Ie.route.id))return!0;let vt=t.matches[We],st=Ie;return mP(Ie,vn({currentUrl:q,currentParams:vt.params,nextUrl:V,nextParams:st.params},s,{actionResult:X,actionStatus:de,defaultShouldRevalidate:Se?!1:c||q.pathname+q.search===V.pathname+V.search||q.search!==V.search||fI(vt,st)}))}),Re=[];return z.forEach((Ie,We)=>{if(p||!n.some(_t=>_t.route.id===Ie.routeId)||A.has(We))return;let tt=du(I,Ie.path,F);if(!tt){Re.push({key:We,routeId:Ie.routeId,path:Ie.path,matches:null,match:null,controller:null});return}let vt=t.fetchers.get(We),st=Wf(tt,Ie.path),Tt=!1;L.has(We)?Tt=!1:E.has(We)?(E.delete(We),Tt=!0):vt&&vt.state!=="idle"&&vt.data===void 0?Tt=c:Tt=mP(st,vn({currentUrl:q,currentParams:t.matches[t.matches.length-1].params,nextUrl:V,nextParams:n[n.length-1].params},s,{actionResult:X,actionStatus:de,defaultShouldRevalidate:Se?!1:c})),Tt&&Re.push({key:We,routeId:Ie.routeId,path:Ie.path,matches:tt,match:st,controller:new AbortController})}),[ce,Re]}function M1(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let s=t!=null&&t[e.id]!==void 0,u=n!=null&&n[e.id]!==void 0;return!s&&u?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!s&&!u}function k5(e,t,n){let s=!t||n.route.id!==t.route.id,u=e[n.route.id]===void 0;return s||u}function fI(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function mP(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}function gP(e,t,n,s,u){var p;let f;if(e){let E=s[e];Sr(E,"No route found to patch children into: routeId = "+e),E.children||(E.children=[]),f=E.children}else f=n;let c=t.filter(E=>!f.some(A=>mI(E,A))),S=W_(c,u,[e||"_","patch",String(((p=f)==null?void 0:p.length)||"0")],s);f.push(...S)}function mI(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((n,s)=>{var u;return(u=t.children)==null?void 0:u.some(p=>mI(n,p))}):!1}async function I5(e,t,n){if(!e.lazy)return;let s=await e.lazy();if(!e.lazy)return;let u=n[e.id];Sr(u,"No route found in manifest");let p={};for(let f in s){let S=u[f]!==void 0&&f!=="hasErrorBoundary";Bh(!S,'Route "'+u.id+'" has a static property "'+f+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+f+'" will be ignored.')),!S&&!e5.has(f)&&(p[f]=s[f])}Object.assign(u,p),Object.assign(u,vn({},t(u),{lazy:void 0}))}async function R5(e){let{matches:t}=e,n=t.filter(u=>u.shouldLoad);return(await Promise.all(n.map(u=>u.resolve()))).reduce((u,p,f)=>Object.assign(u,{[n[f].route.id]:p}),{})}async function A5(e,t,n,s,u,p,f,c,S,E){let A=p.map(I=>I.route.lazy?I5(I.route,S,c):void 0),z=p.map((I,F)=>{let B=A[F],X=u.some(V=>V.route.id===I.route.id);return vn({},I,{shouldLoad:X,resolve:async V=>(V&&s.method==="GET"&&(I.route.lazy||I.route.loader)&&(X=!0),X?D5(t,s,I,B,V,E):Promise.resolve({type:Kr.data,result:void 0}))})}),L=await e({matches:z,request:s,params:p[0].params,fetcherKey:f,context:E});try{await Promise.all(A)}catch{}return L}async function D5(e,t,n,s,u,p){let f,c,S=E=>{let A,z=new Promise((F,B)=>A=B);c=()=>A(),t.signal.addEventListener("abort",c);let L=F=>typeof E!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+n.route.id+"]"))):E({request:t,params:n.params,context:p},...F!==void 0?[F]:[]),I=(async()=>{try{return{type:"data",result:await(u?u(B=>L(B)):L())}}catch(F){return{type:"error",result:F}}})();return Promise.race([I,z])};try{let E=n.route[e];if(s)if(E){let A,[z]=await Promise.all([S(E).catch(L=>{A=L}),s]);if(A!==void 0)throw A;f=z}else if(await s,E=n.route[e],E)f=await S(E);else if(e==="action"){let A=new URL(t.url),z=A.pathname+A.search;throw gs(405,{method:t.method,pathname:z,routeId:n.route.id})}else return{type:Kr.data,result:void 0};else if(E)f=await S(E);else{let A=new URL(t.url),z=A.pathname+A.search;throw gs(404,{pathname:z})}Sr(f.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(E){return{type:Kr.error,result:E}}finally{c&&t.signal.removeEventListener("abort",c)}return f}async function z5(e){let{result:t,type:n}=e;if(yI(t)){let E;try{let A=t.headers.get("Content-Type");A&&/\bapplication\/json\b/.test(A)?t.body==null?E=null:E=await t.json():E=await t.text()}catch(A){return{type:Kr.error,error:A}}return n===Kr.error?{type:Kr.error,error:new X_(t.status,t.statusText,E),statusCode:t.status,headers:t.headers}:{type:Kr.data,data:E,statusCode:t.status,headers:t.headers}}if(n===Kr.error){if(SP(t)){var s;if(t.data instanceof Error){var u;return{type:Kr.error,error:t.data,statusCode:(u=t.init)==null?void 0:u.status}}t=new X_(((s=t.init)==null?void 0:s.status)||500,void 0,t.data)}return{type:Kr.error,error:t,statusCode:Nv(t)?t.status:void 0}}if(F5(t)){var p,f;return{type:Kr.deferred,deferredData:t,statusCode:(p=t.init)==null?void 0:p.status,headers:((f=t.init)==null?void 0:f.headers)&&new Headers(t.init.headers)}}if(SP(t)){var c,S;return{type:Kr.data,data:t.data,statusCode:(c=t.init)==null?void 0:c.status,headers:(S=t.init)!=null&&S.headers?new Headers(t.init.headers):void 0}}return{type:Kr.data,data:t}}function j5(e,t,n,s,u,p){let f=e.headers.get("Location");if(Sr(f,"Redirects returned/thrown from loaders/actions must have a Location header"),!g2.test(f)){let c=s.slice(0,s.findIndex(S=>S.route.id===n)+1);f=E1(new URL(t.url),c,u,!0,f,p),e.headers.set("Location",f)}return e}function yP(e,t,n){if(g2.test(e)){let s=e,u=s.startsWith("//")?new URL(t.protocol+s):new URL(s),p=Kh(u.pathname,n)!=null;if(u.origin===t.origin&&p)return u.pathname+u.search+u.hash}return e}function Zd(e,t,n,s){let u=e.createURL(gI(t)).toString(),p={signal:n};if(s&&Ro(s.formMethod)){let{formMethod:f,formEncType:c}=s;p.method=f.toUpperCase(),c==="application/json"?(p.headers=new Headers({"Content-Type":c}),p.body=JSON.stringify(s.json)):c==="text/plain"?p.body=s.text:c==="application/x-www-form-urlencoded"&&s.formData?p.body=k1(s.formData):p.body=s.formData}return new Request(u,p)}function k1(e){let t=new URLSearchParams;for(let[n,s]of e.entries())t.append(n,typeof s=="string"?s:s.name);return t}function _P(e){let t=new FormData;for(let[n,s]of e.entries())t.append(n,s);return t}function L5(e,t,n,s,u){let p={},f=null,c,S=!1,E={},A=n&&Bs(n[1])?n[1].error:void 0;return e.forEach(z=>{if(!(z.route.id in t))return;let L=z.route.id,I=t[L];if(Sr(!gu(I),"Cannot handle redirect results in processLoaderData"),Bs(I)){let F=I.error;A!==void 0&&(F=A,A=void 0),f=f||{};{let B=hu(e,L);f[B.route.id]==null&&(f[B.route.id]=F)}p[L]=void 0,S||(S=!0,c=Nv(I.error)?I.error.status:500),I.headers&&(E[L]=I.headers)}else Kl(I)?(s.set(L,I.deferredData),p[L]=I.deferredData.data,I.statusCode!=null&&I.statusCode!==200&&!S&&(c=I.statusCode),I.headers&&(E[L]=I.headers)):(p[L]=I.data,I.statusCode&&I.statusCode!==200&&!S&&(c=I.statusCode),I.headers&&(E[L]=I.headers))}),A!==void 0&&n&&(f={[n[0]]:A},p[n[0]]=void 0),{loaderData:p,errors:f,statusCode:c||200,loaderHeaders:E}}function vP(e,t,n,s,u,p,f){let{loaderData:c,errors:S}=L5(t,n,s,f);return u.forEach(E=>{let{key:A,match:z,controller:L}=E,I=p[A];if(Sr(I,"Did not find corresponding fetcher result"),!(L&&L.signal.aborted))if(Bs(I)){let F=hu(e.matches,z==null?void 0:z.route.id);S&&S[F.route.id]||(S=vn({},S,{[F.route.id]:I.error})),e.fetchers.delete(A)}else if(gu(I))Sr(!1,"Unhandled fetcher revalidation redirect");else if(Kl(I))Sr(!1,"Unhandled fetcher deferred data");else{let F=zl(I.data);e.fetchers.set(A,F)}}),{loaderData:c,errors:S}}function xP(e,t,n,s){let u=vn({},t);for(let p of n){let f=p.route.id;if(t.hasOwnProperty(f)?t[f]!==void 0&&(u[f]=t[f]):e[f]!==void 0&&p.route.loader&&(u[f]=e[f]),s&&s.hasOwnProperty(f))break}return u}function bP(e){return e?Bs(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function hu(e,t){return(t?e.slice(0,e.findIndex(s=>s.route.id===t)+1):[...e]).reverse().find(s=>s.route.hasErrorBoundary===!0)||e[0]}function wP(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function gs(e,t){let{pathname:n,routeId:s,method:u,type:p,message:f}=t===void 0?{}:t,c="Unknown Server Error",S="Unknown @remix-run/router error";return e===400?(c="Bad Request",u&&n&&s?S="You made a "+u+' request to "'+n+'" but '+('did not provide a `loader` for route "'+s+'", ')+"so there is no way to handle the request.":p==="defer-action"?S="defer() is not supported in actions":p==="invalid-body"&&(S="Unable to encode submission body")):e===403?(c="Forbidden",S='Route "'+s+'" does not match URL "'+n+'"'):e===404?(c="Not Found",S='No route matches URL "'+n+'"'):e===405&&(c="Method Not Allowed",u&&n&&s?S="You made a "+u.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+s+'", ')+"so there is no way to handle the request.":u&&(S='Invalid request method "'+u.toUpperCase()+'"')),new X_(e||500,c,new Error(S),!0)}function Hy(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[s,u]=t[n];if(gu(u))return{key:s,result:u}}}function gI(e){let t=typeof e=="string"?vc(e):e;return zu(vn({},t,{hash:""}))}function N5(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function O5(e){return yI(e.result)&&S5.has(e.result.status)}function Kl(e){return e.type===Kr.deferred}function Bs(e){return e.type===Kr.error}function gu(e){return(e&&e.type)===Kr.redirect}function SP(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function F5(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function yI(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function B5(e){return w5.has(e.toLowerCase())}function Ro(e){return x5.has(e.toLowerCase())}async function U5(e,t,n,s,u){let p=Object.entries(t);for(let f=0;f<p.length;f++){let[c,S]=p[f],E=e.find(L=>(L==null?void 0:L.route.id)===c);if(!E)continue;let A=s.find(L=>L.route.id===E.route.id),z=A!=null&&!fI(A,E)&&(u&&u[E.route.id])!==void 0;Kl(S)&&z&&await y2(S,n,!1).then(L=>{L&&(t[c]=L)})}}async function V5(e,t,n){for(let s=0;s<n.length;s++){let{key:u,routeId:p,controller:f}=n[s],c=t[u];e.find(E=>(E==null?void 0:E.route.id)===p)&&Kl(c)&&(Sr(f,"Expected an AbortController for revalidating fetcher deferred result"),await y2(c,f.signal,!0).then(E=>{E&&(t[u]=E)}))}}async function y2(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:Kr.data,data:e.deferredData.unwrappedData}}catch(u){return{type:Kr.error,error:u}}return{type:Kr.data,data:e.deferredData.data}}}function _2(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Wf(e,t){let n=typeof t=="string"?vc(t).search:t.search;if(e[e.length-1].route.index&&_2(n||""))return e[e.length-1];let s=dI(e);return s[s.length-1]}function TP(e){let{formMethod:t,formAction:n,formEncType:s,text:u,formData:p,json:f}=e;if(!(!t||!n||!s)){if(u!=null)return{formMethod:t,formAction:n,formEncType:s,formData:void 0,json:void 0,text:u};if(p!=null)return{formMethod:t,formAction:n,formEncType:s,formData:p,json:void 0,text:void 0};if(f!==void 0)return{formMethod:t,formAction:n,formEncType:s,formData:void 0,json:f,text:void 0}}}function ub(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function $5(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Ff(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Z5(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function zl(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function G5(e,t){try{let n=e.sessionStorage.getItem(pI);if(n){let s=JSON.parse(n);for(let[u,p]of Object.entries(s||{}))p&&Array.isArray(p)&&t.set(u,new Set(p||[]))}}catch{}}function H5(e,t){if(t.size>0){let n={};for(let[s,u]of t)n[s]=[...u];try{e.sessionStorage.setItem(pI,JSON.stringify(n))}catch(s){Bh(!1,"Failed to save applied view transitions in sessionStorage ("+s+").")}}}/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function K_(){return K_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},K_.apply(this,arguments)}const Ov=N.createContext(null),_I=N.createContext(null),xc=N.createContext(null),v2=N.createContext(null),fa=N.createContext({outlet:null,matches:[],isDataRoute:!1}),vI=N.createContext(null);function q5(e,t){let{relative:n}=t===void 0?{}:t;Yh()||Sr(!1);let{basename:s,navigator:u}=N.useContext(xc),{hash:p,pathname:f,search:c}=wI(e,{relative:n}),S=f;return s!=="/"&&(S=f==="/"?s:Ka([s,f])),u.createHref({pathname:S,search:c,hash:p})}function Yh(){return N.useContext(v2)!=null}function ag(){return Yh()||Sr(!1),N.useContext(v2).location}function xI(e){N.useContext(xc).static||N.useLayoutEffect(e)}function Qh(){let{isDataRoute:e}=N.useContext(fa);return e?a3():W5()}function W5(){Yh()||Sr(!1);let e=N.useContext(Ov),{basename:t,future:n,navigator:s}=N.useContext(xc),{matches:u}=N.useContext(fa),{pathname:p}=ag(),f=JSON.stringify(jv(u,n.v7_relativeSplatPath)),c=N.useRef(!1);return xI(()=>{c.current=!0}),N.useCallback(function(E,A){if(A===void 0&&(A={}),!c.current)return;if(typeof E=="number"){s.go(E);return}let z=Lv(E,JSON.parse(f),p,A.relative==="path");e==null&&t!=="/"&&(z.pathname=z.pathname==="/"?t:Ka([t,z.pathname])),(A.replace?s.replace:s.push)(z,A.state,A)},[t,s,f,p,e])}const X5=N.createContext(null);function K5(e){let t=N.useContext(fa).outlet;return t&&N.createElement(X5.Provider,{value:e},t)}function bI(){let{matches:e}=N.useContext(fa),t=e[e.length-1];return t?t.params:{}}function wI(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=N.useContext(xc),{matches:u}=N.useContext(fa),{pathname:p}=ag(),f=JSON.stringify(jv(u,s.v7_relativeSplatPath));return N.useMemo(()=>Lv(e,JSON.parse(f),p,n==="path"),[e,f,p,n])}function Y5(e,t,n,s){Yh()||Sr(!1);let{navigator:u}=N.useContext(xc),{matches:p}=N.useContext(fa),f=p[p.length-1],c=f?f.params:{};f&&f.pathname;let S=f?f.pathnameBase:"/";f&&f.route;let E=ag(),A;A=E;let z=A.pathname||"/",L=z;if(S!=="/"){let B=S.replace(/^\//,"").split("/");L="/"+z.replace(/^\//,"").split("/").slice(B.length).join("/")}let I=du(e,{pathname:L});return r3(I&&I.map(B=>Object.assign({},B,{params:Object.assign({},c,B.params),pathname:Ka([S,u.encodeLocation?u.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?S:Ka([S,u.encodeLocation?u.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),p,n,s)}function Q5(){let e=o3(),t=Nv(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),n?N.createElement("pre",{style:u},n):null,null)}const J5=N.createElement(Q5,null);class e3 extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?N.createElement(fa.Provider,{value:this.props.routeContext},N.createElement(vI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function t3(e){let{routeContext:t,match:n,children:s}=e,u=N.useContext(Ov);return u&&u.static&&u.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(fa.Provider,{value:t},s)}function r3(e,t,n,s){var u;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var p;if(!n)return null;if(n.errors)e=n.matches;else if((p=s)!=null&&p.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let f=e,c=(u=n)==null?void 0:u.errors;if(c!=null){let A=f.findIndex(z=>z.route.id&&(c==null?void 0:c[z.route.id])!==void 0);A>=0||Sr(!1),f=f.slice(0,Math.min(f.length,A+1))}let S=!1,E=-1;if(n&&s&&s.v7_partialHydration)for(let A=0;A<f.length;A++){let z=f[A];if((z.route.HydrateFallback||z.route.hydrateFallbackElement)&&(E=A),z.route.id){let{loaderData:L,errors:I}=n,F=z.route.loader&&L[z.route.id]===void 0&&(!I||I[z.route.id]===void 0);if(z.route.lazy||F){S=!0,E>=0?f=f.slice(0,E+1):f=[f[0]];break}}}return f.reduceRight((A,z,L)=>{let I,F=!1,B=null,X=null;n&&(I=c&&z.route.id?c[z.route.id]:void 0,B=z.route.errorElement||J5,S&&(E<0&&L===0?(F=!0,X=null):E===L&&(F=!0,X=z.route.hydrateFallbackElement||null)));let q=t.concat(f.slice(0,L+1)),V=()=>{let Y;return I?Y=B:F?Y=X:z.route.Component?Y=N.createElement(z.route.Component,null):z.route.element?Y=z.route.element:Y=A,N.createElement(t3,{match:z,routeContext:{outlet:A,matches:q,isDataRoute:n!=null},children:Y})};return n&&(z.route.ErrorBoundary||z.route.errorElement||L===0)?N.createElement(e3,{location:n.location,revalidation:n.revalidation,component:B,error:I,children:V(),routeContext:{outlet:null,matches:q,isDataRoute:!0}}):V()},null)}var SI=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(SI||{}),Y_=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Y_||{});function n3(e){let t=N.useContext(Ov);return t||Sr(!1),t}function i3(e){let t=N.useContext(_I);return t||Sr(!1),t}function s3(e){let t=N.useContext(fa);return t||Sr(!1),t}function TI(e){let t=s3(),n=t.matches[t.matches.length-1];return n.route.id||Sr(!1),n.route.id}function o3(){var e;let t=N.useContext(vI),n=i3(Y_.UseRouteError),s=TI(Y_.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function a3(){let{router:e}=n3(SI.UseNavigateStable),t=TI(Y_.UseNavigateStable),n=N.useRef(!1);return xI(()=>{n.current=!0}),N.useCallback(function(u,p){p===void 0&&(p={}),n.current&&(typeof u=="number"?e.navigate(u):e.navigate(u,K_({fromRouteId:t},p)))},[e,t])}const CP={};function l3(e,t){CP[t]||(CP[t]=!0,console.warn(t))}const Gd=(e,t,n)=>l3(e," React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function c3(e,t){e!=null&&e.v7_startTransition||Gd("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&(!t||!t.v7_relativeSplatPath)&&Gd("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),t&&(t.v7_fetcherPersist||Gd("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),t.v7_normalizeFormMethod||Gd("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),t.v7_partialHydration||Gd("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),t.v7_skipActionErrorRevalidation||Gd("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function Uh(e){let{to:t,replace:n,state:s,relative:u}=e;Yh()||Sr(!1);let{future:p,static:f}=N.useContext(xc),{matches:c}=N.useContext(fa),{pathname:S}=ag(),E=Qh(),A=Lv(t,jv(c,p.v7_relativeSplatPath),S,u==="path"),z=JSON.stringify(A);return N.useEffect(()=>E(JSON.parse(z),{replace:n,state:s,relative:u}),[E,z,u,n,s]),null}function u3(e){return K5(e.context)}function d3(e){let{basename:t="/",children:n=null,location:s,navigationType:u=Qn.Pop,navigator:p,static:f=!1,future:c}=e;Yh()&&Sr(!1);let S=t.replace(/^\/*/,"/"),E=N.useMemo(()=>({basename:S,navigator:p,static:f,future:K_({v7_relativeSplatPath:!1},c)}),[S,c,p,f]);typeof s=="string"&&(s=vc(s));let{pathname:A="/",search:z="",hash:L="",state:I=null,key:F="default"}=s,B=N.useMemo(()=>{let X=Kh(A,S);return X==null?null:{location:{pathname:X,search:z,hash:L,state:I,key:F},navigationType:u}},[S,A,z,L,I,F,u]);return B==null?null:N.createElement(xc.Provider,{value:E},N.createElement(v2.Provider,{children:n,value:B}))}new Promise(()=>{});function h3(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:N.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:N.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:N.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function km(){return km=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},km.apply(this,arguments)}function p3(e,t){if(e==null)return{};var n={},s=Object.keys(e),u,p;for(p=0;p<s.length;p++)u=s[p],!(t.indexOf(u)>=0)&&(n[u]=e[u]);return n}function f3(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function m3(e,t){return e.button===0&&(!t||t==="_self")&&!f3(e)}const g3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],y3="6";try{window.__reactRouterVersion=y3}catch{}function _3(e,t){return E5({basename:void 0,future:km({},void 0,{v7_prependBasename:!0}),history:YF({window:void 0}),hydrationData:v3(),routes:e,mapRouteProperties:h3,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function v3(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=km({},t,{errors:x3(t.errors)})),t}function x3(e){if(!e)return null;let t=Object.entries(e),n={};for(let[s,u]of t)if(u&&u.__type==="RouteErrorResponse")n[s]=new X_(u.status,u.statusText,u.data,u.internal===!0);else if(u&&u.__type==="Error"){if(u.__subType){let p=window[u.__subType];if(typeof p=="function")try{let f=new p(u.message);f.stack="",n[s]=f}catch{}}if(n[s]==null){let p=new Error(u.message);p.stack="",n[s]=p}}else n[s]=u;return n}const b3=N.createContext({isTransitioning:!1}),w3=N.createContext(new Map),S3="startTransition",PP=sM[S3],T3="flushSync",EP=KF[T3];function C3(e){PP?PP(e):e()}function Bf(e){EP?EP(e):e()}class P3{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=s=>{this.status==="pending"&&(this.status="resolved",t(s))},this.reject=s=>{this.status==="pending"&&(this.status="rejected",n(s))}})}}function E3(e){let{fallbackElement:t,router:n,future:s}=e,[u,p]=N.useState(n.state),[f,c]=N.useState(),[S,E]=N.useState({isTransitioning:!1}),[A,z]=N.useState(),[L,I]=N.useState(),[F,B]=N.useState(),X=N.useRef(new Map),{v7_startTransition:q}=s||{},V=N.useCallback(Ie=>{q?C3(Ie):Ie()},[q]),Y=N.useCallback((Ie,We)=>{let{deletedFetchers:tt,flushSync:vt,viewTransitionOpts:st}=We;tt.forEach(_t=>X.current.delete(_t)),Ie.fetchers.forEach((_t,Kt)=>{_t.data!==void 0&&X.current.set(Kt,_t.data)});let Tt=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!st||Tt){vt?Bf(()=>p(Ie)):V(()=>p(Ie));return}if(vt){Bf(()=>{L&&(A&&A.resolve(),L.skipTransition()),E({isTransitioning:!0,flushSync:!0,currentLocation:st.currentLocation,nextLocation:st.nextLocation})});let _t=n.window.document.startViewTransition(()=>{Bf(()=>p(Ie))});_t.finished.finally(()=>{Bf(()=>{z(void 0),I(void 0),c(void 0),E({isTransitioning:!1})})}),Bf(()=>I(_t));return}L?(A&&A.resolve(),L.skipTransition(),B({state:Ie,currentLocation:st.currentLocation,nextLocation:st.nextLocation})):(c(Ie),E({isTransitioning:!0,flushSync:!1,currentLocation:st.currentLocation,nextLocation:st.nextLocation}))},[n.window,L,A,X,V]);N.useLayoutEffect(()=>n.subscribe(Y),[n,Y]),N.useEffect(()=>{S.isTransitioning&&!S.flushSync&&z(new P3)},[S]),N.useEffect(()=>{if(A&&f&&n.window){let Ie=f,We=A.promise,tt=n.window.document.startViewTransition(async()=>{V(()=>p(Ie)),await We});tt.finished.finally(()=>{z(void 0),I(void 0),c(void 0),E({isTransitioning:!1})}),I(tt)}},[V,f,A,n.window]),N.useEffect(()=>{A&&f&&u.location.key===f.location.key&&A.resolve()},[A,L,u.location,f]),N.useEffect(()=>{!S.isTransitioning&&F&&(c(F.state),E({isTransitioning:!0,flushSync:!1,currentLocation:F.currentLocation,nextLocation:F.nextLocation}),B(void 0))},[S.isTransitioning,F]),N.useEffect(()=>{},[]);let de=N.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:Ie=>n.navigate(Ie),push:(Ie,We,tt)=>n.navigate(Ie,{state:We,preventScrollReset:tt==null?void 0:tt.preventScrollReset}),replace:(Ie,We,tt)=>n.navigate(Ie,{replace:!0,state:We,preventScrollReset:tt==null?void 0:tt.preventScrollReset})}),[n]),Se=n.basename||"/",ce=N.useMemo(()=>({router:n,navigator:de,static:!1,basename:Se}),[n,de,Se]),Re=N.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return N.useEffect(()=>c3(s,n.future),[s,n.future]),N.createElement(N.Fragment,null,N.createElement(Ov.Provider,{value:ce},N.createElement(_I.Provider,{value:u},N.createElement(w3.Provider,{value:X.current},N.createElement(b3.Provider,{value:S},N.createElement(d3,{basename:Se,location:u.location,navigationType:u.historyAction,navigator:de,future:Re},u.initialized||n.future.v7_partialHydration?N.createElement(M3,{routes:n.routes,future:n.future,state:u}):t))))),null)}const M3=N.memo(k3);function k3(e){let{routes:t,future:n,state:s}=e;return Y5(t,void 0,s,n)}const I3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",R3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dn=N.forwardRef(function(t,n){let{onClick:s,relative:u,reloadDocument:p,replace:f,state:c,target:S,to:E,preventScrollReset:A,viewTransition:z}=t,L=p3(t,g3),{basename:I}=N.useContext(xc),F,B=!1;if(typeof E=="string"&&R3.test(E)&&(F=E,I3))try{let Y=new URL(window.location.href),de=E.startsWith("//")?new URL(Y.protocol+E):new URL(E),Se=Kh(de.pathname,I);de.origin===Y.origin&&Se!=null?E=Se+de.search+de.hash:B=!0}catch{}let X=q5(E,{relative:u}),q=A3(E,{replace:f,state:c,target:S,preventScrollReset:A,relative:u,viewTransition:z});function V(Y){s&&s(Y),Y.defaultPrevented||q(Y)}return N.createElement("a",km({},L,{href:F||X,onClick:B||p?s:V,ref:n,target:S}))});var MP;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(MP||(MP={}));var kP;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(kP||(kP={}));function A3(e,t){let{target:n,replace:s,state:u,preventScrollReset:p,relative:f,viewTransition:c}=t===void 0?{}:t,S=Qh(),E=ag(),A=wI(e,{relative:f});return N.useCallback(z=>{if(m3(z,n)){z.preventDefault();let L=s!==void 0?s:zu(E)===zu(A);S(e,{replace:L,state:u,preventScrollReset:p,relative:f,viewTransition:c})}},[E,S,A,s,u,n,e,p,f,c])}function IP(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Fv(...e){return t=>{let n=!1;const s=e.map(u=>{const p=IP(u,t);return!n&&typeof p=="function"&&(n=!0),p});if(n)return()=>{for(let u=0;u<s.length;u++){const p=s[u];typeof p=="function"?p():IP(e[u],null)}}}}function Gr(...e){return N.useCallback(Fv(...e),e)}var lc=N.forwardRef((e,t)=>{const{children:n,...s}=e,u=N.Children.toArray(n),p=u.find(z3);if(p){const f=p.props.children,c=u.map(S=>S===p?N.Children.count(f)>1?N.Children.only(null):N.isValidElement(f)?f.props.children:null:S);return C.jsx(I1,{...s,ref:t,children:N.isValidElement(f)?N.cloneElement(f,void 0,c):null})}return C.jsx(I1,{...s,ref:t,children:n})});lc.displayName="Slot";var I1=N.forwardRef((e,t)=>{const{children:n,...s}=e;if(N.isValidElement(n)){const u=L3(n);return N.cloneElement(n,{...j3(s,n.props),ref:t?Fv(t,u):u})}return N.Children.count(n)>1?N.Children.only(null):null});I1.displayName="SlotClone";var D3=({children:e})=>C.jsx(C.Fragment,{children:e});function z3(e){return N.isValidElement(e)&&e.type===D3}function j3(e,t){const n={...t};for(const s in t){const u=e[s],p=t[s];/^on[A-Z]/.test(s)?u&&p?n[s]=(...c)=>{p(...c),u(...c)}:u&&(n[s]=u):s==="style"?n[s]={...u,...p}:s==="className"&&(n[s]=[u,p].filter(Boolean).join(" "))}return{...e,...n}}function L3(e){var s,u;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(u=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:u.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function CI(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(n=CI(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function PI(){for(var e,t,n=0,s="",u=arguments.length;n<u;n++)(e=arguments[n])&&(t=CI(e))&&(s&&(s+=" "),s+=t);return s}const RP=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,AP=PI,Bv=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return AP(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:u,defaultVariants:p}=t,f=Object.keys(u).map(E=>{const A=n==null?void 0:n[E],z=p==null?void 0:p[E];if(A===null)return null;const L=RP(A)||RP(z);return u[E][L]}),c=n&&Object.entries(n).reduce((E,A)=>{let[z,L]=A;return L===void 0||(E[z]=L),E},{}),S=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((E,A)=>{let{class:z,className:L,...I}=A;return Object.entries(I).every(F=>{let[B,X]=F;return Array.isArray(X)?X.includes({...p,...c}[B]):{...p,...c}[B]===X})?[...E,z,L]:E},[]);return AP(e,f,S,n==null?void 0:n.class,n==null?void 0:n.className)},x2="-",N3=e=>{const t=F3(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:f=>{const c=f.split(x2);return c[0]===""&&c.length!==1&&c.shift(),EI(c,t)||O3(f)},getConflictingClassGroupIds:(f,c)=>{const S=n[f]||[];return c&&s[f]?[...S,...s[f]]:S}}},EI=(e,t)=>{var f;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),u=s?EI(e.slice(1),s):void 0;if(u)return u;if(t.validators.length===0)return;const p=e.join(x2);return(f=t.validators.find(({validator:c})=>c(p)))==null?void 0:f.classGroupId},DP=/^\[(.+)\]$/,O3=e=>{if(DP.test(e)){const t=DP.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},F3=e=>{const{theme:t,prefix:n}=e,s={nextPart:new Map,validators:[]};return U3(Object.entries(e.classGroups),n).forEach(([p,f])=>{R1(f,s,p,t)}),s},R1=(e,t,n,s)=>{e.forEach(u=>{if(typeof u=="string"){const p=u===""?t:zP(t,u);p.classGroupId=n;return}if(typeof u=="function"){if(B3(u)){R1(u(s),t,n,s);return}t.validators.push({validator:u,classGroupId:n});return}Object.entries(u).forEach(([p,f])=>{R1(f,zP(t,p),n,s)})})},zP=(e,t)=>{let n=e;return t.split(x2).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},B3=e=>e.isThemeGetter,U3=(e,t)=>t?e.map(([n,s])=>{const u=s.map(p=>typeof p=="string"?t+p:typeof p=="object"?Object.fromEntries(Object.entries(p).map(([f,c])=>[t+f,c])):p);return[n,u]}):e,V3=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const u=(p,f)=>{n.set(p,f),t++,t>e&&(t=0,s=n,n=new Map)};return{get(p){let f=n.get(p);if(f!==void 0)return f;if((f=s.get(p))!==void 0)return u(p,f),f},set(p,f){n.has(p)?n.set(p,f):u(p,f)}}},MI="!",$3=e=>{const{separator:t,experimentalParseClassName:n}=e,s=t.length===1,u=t[0],p=t.length,f=c=>{const S=[];let E=0,A=0,z;for(let X=0;X<c.length;X++){let q=c[X];if(E===0){if(q===u&&(s||c.slice(X,X+p)===t)){S.push(c.slice(A,X)),A=X+p;continue}if(q==="/"){z=X;continue}}q==="["?E++:q==="]"&&E--}const L=S.length===0?c:c.substring(A),I=L.startsWith(MI),F=I?L.substring(1):L,B=z&&z>A?z-A:void 0;return{modifiers:S,hasImportantModifier:I,baseClassName:F,maybePostfixModifierPosition:B}};return n?c=>n({className:c,parseClassName:f}):f},Z3=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(s=>{s[0]==="["?(t.push(...n.sort(),s),n=[]):n.push(s)}),t.push(...n.sort()),t},G3=e=>({cache:V3(e.cacheSize),parseClassName:$3(e),...N3(e)}),H3=/\s+/,q3=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:u}=t,p=[],f=e.trim().split(H3);let c="";for(let S=f.length-1;S>=0;S-=1){const E=f[S],{modifiers:A,hasImportantModifier:z,baseClassName:L,maybePostfixModifierPosition:I}=n(E);let F=!!I,B=s(F?L.substring(0,I):L);if(!B){if(!F){c=E+(c.length>0?" "+c:c);continue}if(B=s(L),!B){c=E+(c.length>0?" "+c:c);continue}F=!1}const X=Z3(A).join(":"),q=z?X+MI:X,V=q+B;if(p.includes(V))continue;p.push(V);const Y=u(B,F);for(let de=0;de<Y.length;++de){const Se=Y[de];p.push(q+Se)}c=E+(c.length>0?" "+c:c)}return c};function W3(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=kI(t))&&(s&&(s+=" "),s+=n);return s}const kI=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=kI(e[s]))&&(n&&(n+=" "),n+=t);return n};function X3(e,...t){let n,s,u,p=f;function f(S){const E=t.reduce((A,z)=>z(A),e());return n=G3(E),s=n.cache.get,u=n.cache.set,p=c,c(S)}function c(S){const E=s(S);if(E)return E;const A=q3(S,n);return u(S,A),A}return function(){return p(W3.apply(null,arguments))}}const dn=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},II=/^\[(?:([a-z-]+):)?(.+)\]$/i,K3=/^\d+\/\d+$/,Y3=new Set(["px","full","screen"]),Q3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,J3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,e4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,t4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,r4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Fa=e=>mh(e)||Y3.has(e)||K3.test(e),Rl=e=>Jh(e,"length",u4),mh=e=>!!e&&!Number.isNaN(Number(e)),db=e=>Jh(e,"number",mh),Uf=e=>!!e&&Number.isInteger(Number(e)),n4=e=>e.endsWith("%")&&mh(e.slice(0,-1)),fr=e=>II.test(e),Al=e=>Q3.test(e),i4=new Set(["length","size","percentage"]),s4=e=>Jh(e,i4,RI),o4=e=>Jh(e,"position",RI),a4=new Set(["image","url"]),l4=e=>Jh(e,a4,h4),c4=e=>Jh(e,"",d4),Vf=()=>!0,Jh=(e,t,n)=>{const s=II.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):n(s[2]):!1},u4=e=>J3.test(e)&&!e4.test(e),RI=()=>!1,d4=e=>t4.test(e),h4=e=>r4.test(e),p4=()=>{const e=dn("colors"),t=dn("spacing"),n=dn("blur"),s=dn("brightness"),u=dn("borderColor"),p=dn("borderRadius"),f=dn("borderSpacing"),c=dn("borderWidth"),S=dn("contrast"),E=dn("grayscale"),A=dn("hueRotate"),z=dn("invert"),L=dn("gap"),I=dn("gradientColorStops"),F=dn("gradientColorStopPositions"),B=dn("inset"),X=dn("margin"),q=dn("opacity"),V=dn("padding"),Y=dn("saturate"),de=dn("scale"),Se=dn("sepia"),ce=dn("skew"),Re=dn("space"),Ie=dn("translate"),We=()=>["auto","contain","none"],tt=()=>["auto","hidden","clip","visible","scroll"],vt=()=>["auto",fr,t],st=()=>[fr,t],Tt=()=>["",Fa,Rl],_t=()=>["auto",mh,fr],Kt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ct=()=>["solid","dashed","dotted","double","none"],Pt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Xe=()=>["start","end","center","between","around","evenly","stretch"],Oe=()=>["","0",fr],at=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Et=()=>[mh,fr];return{cacheSize:500,separator:":",theme:{colors:[Vf],spacing:[Fa,Rl],blur:["none","",Al,fr],brightness:Et(),borderColor:[e],borderRadius:["none","","full",Al,fr],borderSpacing:st(),borderWidth:Tt(),contrast:Et(),grayscale:Oe(),hueRotate:Et(),invert:Oe(),gap:st(),gradientColorStops:[e],gradientColorStopPositions:[n4,Rl],inset:vt(),margin:vt(),opacity:Et(),padding:st(),saturate:Et(),scale:Et(),sepia:Oe(),skew:Et(),space:st(),translate:st()},classGroups:{aspect:[{aspect:["auto","square","video",fr]}],container:["container"],columns:[{columns:[Al]}],"break-after":[{"break-after":at()}],"break-before":[{"break-before":at()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Kt(),fr]}],overflow:[{overflow:tt()}],"overflow-x":[{"overflow-x":tt()}],"overflow-y":[{"overflow-y":tt()}],overscroll:[{overscroll:We()}],"overscroll-x":[{"overscroll-x":We()}],"overscroll-y":[{"overscroll-y":We()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[B]}],"inset-x":[{"inset-x":[B]}],"inset-y":[{"inset-y":[B]}],start:[{start:[B]}],end:[{end:[B]}],top:[{top:[B]}],right:[{right:[B]}],bottom:[{bottom:[B]}],left:[{left:[B]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Uf,fr]}],basis:[{basis:vt()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",fr]}],grow:[{grow:Oe()}],shrink:[{shrink:Oe()}],order:[{order:["first","last","none",Uf,fr]}],"grid-cols":[{"grid-cols":[Vf]}],"col-start-end":[{col:["auto",{span:["full",Uf,fr]},fr]}],"col-start":[{"col-start":_t()}],"col-end":[{"col-end":_t()}],"grid-rows":[{"grid-rows":[Vf]}],"row-start-end":[{row:["auto",{span:[Uf,fr]},fr]}],"row-start":[{"row-start":_t()}],"row-end":[{"row-end":_t()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",fr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",fr]}],gap:[{gap:[L]}],"gap-x":[{"gap-x":[L]}],"gap-y":[{"gap-y":[L]}],"justify-content":[{justify:["normal",...Xe()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Xe(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Xe(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[V]}],px:[{px:[V]}],py:[{py:[V]}],ps:[{ps:[V]}],pe:[{pe:[V]}],pt:[{pt:[V]}],pr:[{pr:[V]}],pb:[{pb:[V]}],pl:[{pl:[V]}],m:[{m:[X]}],mx:[{mx:[X]}],my:[{my:[X]}],ms:[{ms:[X]}],me:[{me:[X]}],mt:[{mt:[X]}],mr:[{mr:[X]}],mb:[{mb:[X]}],ml:[{ml:[X]}],"space-x":[{"space-x":[Re]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Re]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",fr,t]}],"min-w":[{"min-w":[fr,t,"min","max","fit"]}],"max-w":[{"max-w":[fr,t,"none","full","min","max","fit","prose",{screen:[Al]},Al]}],h:[{h:[fr,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[fr,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[fr,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[fr,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Al,Rl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",db]}],"font-family":[{font:[Vf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",fr]}],"line-clamp":[{"line-clamp":["none",mh,db]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Fa,fr]}],"list-image":[{"list-image":["none",fr]}],"list-style-type":[{list:["none","disc","decimal",fr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[q]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[q]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ct(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Fa,Rl]}],"underline-offset":[{"underline-offset":["auto",Fa,fr]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:st()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[q]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Kt(),o4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",s4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},l4]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[F]}],"gradient-via-pos":[{via:[F]}],"gradient-to-pos":[{to:[F]}],"gradient-from":[{from:[I]}],"gradient-via":[{via:[I]}],"gradient-to":[{to:[I]}],rounded:[{rounded:[p]}],"rounded-s":[{"rounded-s":[p]}],"rounded-e":[{"rounded-e":[p]}],"rounded-t":[{"rounded-t":[p]}],"rounded-r":[{"rounded-r":[p]}],"rounded-b":[{"rounded-b":[p]}],"rounded-l":[{"rounded-l":[p]}],"rounded-ss":[{"rounded-ss":[p]}],"rounded-se":[{"rounded-se":[p]}],"rounded-ee":[{"rounded-ee":[p]}],"rounded-es":[{"rounded-es":[p]}],"rounded-tl":[{"rounded-tl":[p]}],"rounded-tr":[{"rounded-tr":[p]}],"rounded-br":[{"rounded-br":[p]}],"rounded-bl":[{"rounded-bl":[p]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[q]}],"border-style":[{border:[...ct(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[q]}],"divide-style":[{divide:ct()}],"border-color":[{border:[u]}],"border-color-x":[{"border-x":[u]}],"border-color-y":[{"border-y":[u]}],"border-color-s":[{"border-s":[u]}],"border-color-e":[{"border-e":[u]}],"border-color-t":[{"border-t":[u]}],"border-color-r":[{"border-r":[u]}],"border-color-b":[{"border-b":[u]}],"border-color-l":[{"border-l":[u]}],"divide-color":[{divide:[u]}],"outline-style":[{outline:["",...ct()]}],"outline-offset":[{"outline-offset":[Fa,fr]}],"outline-w":[{outline:[Fa,Rl]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Tt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[q]}],"ring-offset-w":[{"ring-offset":[Fa,Rl]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Al,c4]}],"shadow-color":[{shadow:[Vf]}],opacity:[{opacity:[q]}],"mix-blend":[{"mix-blend":[...Pt(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Pt()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[S]}],"drop-shadow":[{"drop-shadow":["","none",Al,fr]}],grayscale:[{grayscale:[E]}],"hue-rotate":[{"hue-rotate":[A]}],invert:[{invert:[z]}],saturate:[{saturate:[Y]}],sepia:[{sepia:[Se]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[S]}],"backdrop-grayscale":[{"backdrop-grayscale":[E]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[A]}],"backdrop-invert":[{"backdrop-invert":[z]}],"backdrop-opacity":[{"backdrop-opacity":[q]}],"backdrop-saturate":[{"backdrop-saturate":[Y]}],"backdrop-sepia":[{"backdrop-sepia":[Se]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[f]}],"border-spacing-x":[{"border-spacing-x":[f]}],"border-spacing-y":[{"border-spacing-y":[f]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",fr]}],duration:[{duration:Et()}],ease:[{ease:["linear","in","out","in-out",fr]}],delay:[{delay:Et()}],animate:[{animate:["none","spin","ping","pulse","bounce",fr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[de]}],"scale-x":[{"scale-x":[de]}],"scale-y":[{"scale-y":[de]}],rotate:[{rotate:[Uf,fr]}],"translate-x":[{"translate-x":[Ie]}],"translate-y":[{"translate-y":[Ie]}],"skew-x":[{"skew-x":[ce]}],"skew-y":[{"skew-y":[ce]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",fr]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fr]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":st()}],"scroll-mx":[{"scroll-mx":st()}],"scroll-my":[{"scroll-my":st()}],"scroll-ms":[{"scroll-ms":st()}],"scroll-me":[{"scroll-me":st()}],"scroll-mt":[{"scroll-mt":st()}],"scroll-mr":[{"scroll-mr":st()}],"scroll-mb":[{"scroll-mb":st()}],"scroll-ml":[{"scroll-ml":st()}],"scroll-p":[{"scroll-p":st()}],"scroll-px":[{"scroll-px":st()}],"scroll-py":[{"scroll-py":st()}],"scroll-ps":[{"scroll-ps":st()}],"scroll-pe":[{"scroll-pe":st()}],"scroll-pt":[{"scroll-pt":st()}],"scroll-pr":[{"scroll-pr":st()}],"scroll-pb":[{"scroll-pb":st()}],"scroll-pl":[{"scroll-pl":st()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fr]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Fa,Rl,db]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},f4=X3(p4);function Ut(...e){return f4(PI(e))}const m4=Bv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),jr=N.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...u},p)=>{const f=s?lc:"button";return C.jsx(f,{className:Ut(m4({variant:t,size:n,className:e})),ref:p,...u})});jr.displayName="Button";const zr=N.forwardRef(({className:e,type:t,...n},s)=>C.jsx("input",{type:t,className:Ut("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...n}));zr.displayName="Input";var g4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],cr=g4.reduce((e,t)=>{const n=N.forwardRef((s,u)=>{const{asChild:p,...f}=s,c=p?lc:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),C.jsx(c,{...f,ref:u})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function AI(e,t){e&&Hu.flushSync(()=>e.dispatchEvent(t))}var y4="Separator",jP="horizontal",_4=["horizontal","vertical"],DI=N.forwardRef((e,t)=>{const{decorative:n,orientation:s=jP,...u}=e,p=v4(s)?s:jP,c=n?{role:"none"}:{"aria-orientation":p==="vertical"?p:void 0,role:"separator"};return C.jsx(cr.div,{"data-orientation":p,...c,...u,ref:t})});DI.displayName=y4;function v4(e){return _4.includes(e)}var zI=DI;const lg=N.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...s},u)=>C.jsx(zI,{ref:u,decorative:n,orientation:t,className:Ut("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));lg.displayName=zI.displayName;var Rr;(function(e){e.assertEqual=u=>u;function t(u){}e.assertIs=t;function n(u){throw new Error}e.assertNever=n,e.arrayToEnum=u=>{const p={};for(const f of u)p[f]=f;return p},e.getValidEnumValues=u=>{const p=e.objectKeys(u).filter(c=>typeof u[u[c]]!="number"),f={};for(const c of p)f[c]=u[c];return e.objectValues(f)},e.objectValues=u=>e.objectKeys(u).map(function(p){return u[p]}),e.objectKeys=typeof Object.keys=="function"?u=>Object.keys(u):u=>{const p=[];for(const f in u)Object.prototype.hasOwnProperty.call(u,f)&&p.push(f);return p},e.find=(u,p)=>{for(const f of u)if(p(f))return f},e.isInteger=typeof Number.isInteger=="function"?u=>Number.isInteger(u):u=>typeof u=="number"&&isFinite(u)&&Math.floor(u)===u;function s(u,p=" | "){return u.map(f=>typeof f=="string"?`'${f}'`:f).join(p)}e.joinValues=s,e.jsonStringifyReplacer=(u,p)=>typeof p=="bigint"?p.toString():p})(Rr||(Rr={}));var A1;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(A1||(A1={}));const zt=Rr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ga=e=>{switch(typeof e){case"undefined":return zt.undefined;case"string":return zt.string;case"number":return isNaN(e)?zt.nan:zt.number;case"boolean":return zt.boolean;case"function":return zt.function;case"bigint":return zt.bigint;case"symbol":return zt.symbol;case"object":return Array.isArray(e)?zt.array:e===null?zt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?zt.promise:typeof Map<"u"&&e instanceof Map?zt.map:typeof Set<"u"&&e instanceof Set?zt.set:typeof Date<"u"&&e instanceof Date?zt.date:zt.object;default:return zt.unknown}},pt=Rr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),x4=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Zs extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(p){return p.message},s={_errors:[]},u=p=>{for(const f of p.issues)if(f.code==="invalid_union")f.unionErrors.map(u);else if(f.code==="invalid_return_type")u(f.returnTypeError);else if(f.code==="invalid_arguments")u(f.argumentsError);else if(f.path.length===0)s._errors.push(n(f));else{let c=s,S=0;for(;S<f.path.length;){const E=f.path[S];S===f.path.length-1?(c[E]=c[E]||{_errors:[]},c[E]._errors.push(n(f))):c[E]=c[E]||{_errors:[]},c=c[E],S++}}};return u(this),s}static assert(t){if(!(t instanceof Zs))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Rr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},s=[];for(const u of this.issues)u.path.length>0?(n[u.path[0]]=n[u.path[0]]||[],n[u.path[0]].push(t(u))):s.push(t(u));return{formErrors:s,fieldErrors:n}}get formErrors(){return this.flatten()}}Zs.create=e=>new Zs(e);const Vh=(e,t)=>{let n;switch(e.code){case pt.invalid_type:e.received===zt.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case pt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Rr.jsonStringifyReplacer)}`;break;case pt.unrecognized_keys:n=`Unrecognized key(s) in object: ${Rr.joinValues(e.keys,", ")}`;break;case pt.invalid_union:n="Invalid input";break;case pt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Rr.joinValues(e.options)}`;break;case pt.invalid_enum_value:n=`Invalid enum value. Expected ${Rr.joinValues(e.options)}, received '${e.received}'`;break;case pt.invalid_arguments:n="Invalid function arguments";break;case pt.invalid_return_type:n="Invalid function return type";break;case pt.invalid_date:n="Invalid date";break;case pt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Rr.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case pt.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case pt.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case pt.custom:n="Invalid input";break;case pt.invalid_intersection_types:n="Intersection results could not be merged";break;case pt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case pt.not_finite:n="Number must be finite";break;default:n=t.defaultError,Rr.assertNever(e)}return{message:n}};let jI=Vh;function b4(e){jI=e}function Q_(){return jI}const J_=e=>{const{data:t,path:n,errorMaps:s,issueData:u}=e,p=[...n,...u.path||[]],f={...u,path:p};if(u.message!==void 0)return{...u,path:p,message:u.message};let c="";const S=s.filter(E=>!!E).slice().reverse();for(const E of S)c=E(f,{data:t,defaultError:c}).message;return{...u,path:p,message:c}},w4=[];function Mt(e,t){const n=Q_(),s=J_({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Vh?void 0:Vh].filter(u=>!!u)});e.common.issues.push(s)}class qi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const s=[];for(const u of n){if(u.status==="aborted")return er;u.status==="dirty"&&t.dirty(),s.push(u.value)}return{status:t.value,value:s}}static async mergeObjectAsync(t,n){const s=[];for(const u of n){const p=await u.key,f=await u.value;s.push({key:p,value:f})}return qi.mergeObjectSync(t,s)}static mergeObjectSync(t,n){const s={};for(const u of n){const{key:p,value:f}=u;if(p.status==="aborted"||f.status==="aborted")return er;p.status==="dirty"&&t.dirty(),f.status==="dirty"&&t.dirty(),p.value!=="__proto__"&&(typeof f.value<"u"||u.alwaysSet)&&(s[p.value]=f.value)}return{status:t.value,value:s}}}const er=Object.freeze({status:"aborted"}),lh=e=>({status:"dirty",value:e}),os=e=>({status:"valid",value:e}),D1=e=>e.status==="aborted",z1=e=>e.status==="dirty",ju=e=>e.status==="valid",Im=e=>typeof Promise<"u"&&e instanceof Promise;function ev(e,t,n,s){if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function LI(e,t,n,s,u){if(typeof t=="function"?e!==t||!u:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var $t;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})($t||($t={}));var Xf,Kf;class da{constructor(t,n,s,u){this._cachedPath=[],this.parent=t,this.data=n,this._path=s,this._key=u}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const LP=(e,t)=>{if(ju(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Zs(e.common.issues);return this._error=n,this._error}}};function hr(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:s,description:u}=e;if(t&&(n||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:u}:{errorMap:(f,c)=>{var S,E;const{message:A}=e;return f.code==="invalid_enum_value"?{message:A??c.defaultError}:typeof c.data>"u"?{message:(S=A??s)!==null&&S!==void 0?S:c.defaultError}:f.code!=="invalid_type"?{message:c.defaultError}:{message:(E=A??n)!==null&&E!==void 0?E:c.defaultError}},description:u}}class gr{get description(){return this._def.description}_getType(t){return Ga(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Ga(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new qi,ctx:{common:t.parent.common,data:t.data,parsedType:Ga(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Im(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const s=this.safeParse(t,n);if(s.success)return s.data;throw s.error}safeParse(t,n){var s;const u={common:{issues:[],async:(s=n==null?void 0:n.async)!==null&&s!==void 0?s:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ga(t)},p=this._parseSync({data:t,path:u.path,parent:u});return LP(u,p)}"~validate"(t){var n,s;const u={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ga(t)};if(!this["~standard"].async)try{const p=this._parseSync({data:t,path:[],parent:u});return ju(p)?{value:p.value}:{issues:u.common.issues}}catch(p){!((s=(n=p==null?void 0:p.message)===null||n===void 0?void 0:n.toLowerCase())===null||s===void 0)&&s.includes("encountered")&&(this["~standard"].async=!0),u.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:u}).then(p=>ju(p)?{value:p.value}:{issues:u.common.issues})}async parseAsync(t,n){const s=await this.safeParseAsync(t,n);if(s.success)return s.data;throw s.error}async safeParseAsync(t,n){const s={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ga(t)},u=this._parse({data:t,path:s.path,parent:s}),p=await(Im(u)?u:Promise.resolve(u));return LP(s,p)}refine(t,n){const s=u=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(u):n;return this._refinement((u,p)=>{const f=t(u),c=()=>p.addIssue({code:pt.custom,...s(u)});return typeof Promise<"u"&&f instanceof Promise?f.then(S=>S?!0:(c(),!1)):f?!0:(c(),!1)})}refinement(t,n){return this._refinement((s,u)=>t(s)?!0:(u.addIssue(typeof n=="function"?n(s,u):n),!1))}_refinement(t){return new Bo({schema:this,typeName:Jt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ca.create(this,this._def)}nullable(){return hc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Oo.create(this)}promise(){return Zh.create(this,this._def)}or(t){return zm.create([this,t],this._def)}and(t){return jm.create(this,t,this._def)}transform(t){return new Bo({...hr(this._def),schema:this,typeName:Jt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Bm({...hr(this._def),innerType:this,defaultValue:n,typeName:Jt.ZodDefault})}brand(){return new b2({typeName:Jt.ZodBranded,type:this,...hr(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new Um({...hr(this._def),innerType:this,catchValue:n,typeName:Jt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return cg.create(this,t)}readonly(){return Vm.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const S4=/^c[^\s-]{8,}$/i,T4=/^[0-9a-z]+$/,C4=/^[0-9A-HJKMNP-TV-Z]{26}$/i,P4=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,E4=/^[a-z0-9_-]{21}$/i,M4=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,k4=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,I4=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,R4="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let hb;const A4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,D4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,z4=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,j4=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,L4=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,N4=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,NI="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",O4=new RegExp(`^${NI}$`);function OI(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function F4(e){return new RegExp(`^${OI(e)}$`)}function FI(e){let t=`${NI}T${OI(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function B4(e,t){return!!((t==="v4"||!t)&&A4.test(e)||(t==="v6"||!t)&&z4.test(e))}function U4(e,t){if(!M4.test(e))return!1;try{const[n]=e.split("."),s=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),u=JSON.parse(atob(s));return!(typeof u!="object"||u===null||!u.typ||!u.alg||t&&u.alg!==t)}catch{return!1}}function V4(e,t){return!!((t==="v4"||!t)&&D4.test(e)||(t==="v6"||!t)&&j4.test(e))}class jo extends gr{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==zt.string){const p=this._getOrReturnCtx(t);return Mt(p,{code:pt.invalid_type,expected:zt.string,received:p.parsedType}),er}const s=new qi;let u;for(const p of this._def.checks)if(p.kind==="min")t.data.length<p.value&&(u=this._getOrReturnCtx(t,u),Mt(u,{code:pt.too_small,minimum:p.value,type:"string",inclusive:!0,exact:!1,message:p.message}),s.dirty());else if(p.kind==="max")t.data.length>p.value&&(u=this._getOrReturnCtx(t,u),Mt(u,{code:pt.too_big,maximum:p.value,type:"string",inclusive:!0,exact:!1,message:p.message}),s.dirty());else if(p.kind==="length"){const f=t.data.length>p.value,c=t.data.length<p.value;(f||c)&&(u=this._getOrReturnCtx(t,u),f?Mt(u,{code:pt.too_big,maximum:p.value,type:"string",inclusive:!0,exact:!0,message:p.message}):c&&Mt(u,{code:pt.too_small,minimum:p.value,type:"string",inclusive:!0,exact:!0,message:p.message}),s.dirty())}else if(p.kind==="email")I4.test(t.data)||(u=this._getOrReturnCtx(t,u),Mt(u,{validation:"email",code:pt.invalid_string,message:p.message}),s.dirty());else if(p.kind==="emoji")hb||(hb=new RegExp(R4,"u")),hb.test(t.data)||(u=this._getOrReturnCtx(t,u),Mt(u,{validation:"emoji",code:pt.invalid_string,message:p.message}),s.dirty());else if(p.kind==="uuid")P4.test(t.data)||(u=this._getOrReturnCtx(t,u),Mt(u,{validation:"uuid",code:pt.invalid_string,message:p.message}),s.dirty());else if(p.kind==="nanoid")E4.test(t.data)||(u=this._getOrReturnCtx(t,u),Mt(u,{validation:"nanoid",code:pt.invalid_string,message:p.message}),s.dirty());else if(p.kind==="cuid")S4.test(t.data)||(u=this._getOrReturnCtx(t,u),Mt(u,{validation:"cuid",code:pt.invalid_string,message:p.message}),s.dirty());else if(p.kind==="cuid2")T4.test(t.data)||(u=this._getOrReturnCtx(t,u),Mt(u,{validation:"cuid2",code:pt.invalid_string,message:p.message}),s.dirty());else if(p.kind==="ulid")C4.test(t.data)||(u=this._getOrReturnCtx(t,u),Mt(u,{validation:"ulid",code:pt.invalid_string,message:p.message}),s.dirty());else if(p.kind==="url")try{new URL(t.data)}catch{u=this._getOrReturnCtx(t,u),Mt(u,{validation:"url",code:pt.invalid_string,message:p.message}),s.dirty()}else p.kind==="regex"?(p.regex.lastIndex=0,p.regex.test(t.data)||(u=this._getOrReturnCtx(t,u),Mt(u,{validation:"regex",code:pt.invalid_string,message:p.message}),s.dirty())):p.kind==="trim"?t.data=t.data.trim():p.kind==="includes"?t.data.includes(p.value,p.position)||(u=this._getOrReturnCtx(t,u),Mt(u,{code:pt.invalid_string,validation:{includes:p.value,position:p.position},message:p.message}),s.dirty()):p.kind==="toLowerCase"?t.data=t.data.toLowerCase():p.kind==="toUpperCase"?t.data=t.data.toUpperCase():p.kind==="startsWith"?t.data.startsWith(p.value)||(u=this._getOrReturnCtx(t,u),Mt(u,{code:pt.invalid_string,validation:{startsWith:p.value},message:p.message}),s.dirty()):p.kind==="endsWith"?t.data.endsWith(p.value)||(u=this._getOrReturnCtx(t,u),Mt(u,{code:pt.invalid_string,validation:{endsWith:p.value},message:p.message}),s.dirty()):p.kind==="datetime"?FI(p).test(t.data)||(u=this._getOrReturnCtx(t,u),Mt(u,{code:pt.invalid_string,validation:"datetime",message:p.message}),s.dirty()):p.kind==="date"?O4.test(t.data)||(u=this._getOrReturnCtx(t,u),Mt(u,{code:pt.invalid_string,validation:"date",message:p.message}),s.dirty()):p.kind==="time"?F4(p).test(t.data)||(u=this._getOrReturnCtx(t,u),Mt(u,{code:pt.invalid_string,validation:"time",message:p.message}),s.dirty()):p.kind==="duration"?k4.test(t.data)||(u=this._getOrReturnCtx(t,u),Mt(u,{validation:"duration",code:pt.invalid_string,message:p.message}),s.dirty()):p.kind==="ip"?B4(t.data,p.version)||(u=this._getOrReturnCtx(t,u),Mt(u,{validation:"ip",code:pt.invalid_string,message:p.message}),s.dirty()):p.kind==="jwt"?U4(t.data,p.alg)||(u=this._getOrReturnCtx(t,u),Mt(u,{validation:"jwt",code:pt.invalid_string,message:p.message}),s.dirty()):p.kind==="cidr"?V4(t.data,p.version)||(u=this._getOrReturnCtx(t,u),Mt(u,{validation:"cidr",code:pt.invalid_string,message:p.message}),s.dirty()):p.kind==="base64"?L4.test(t.data)||(u=this._getOrReturnCtx(t,u),Mt(u,{validation:"base64",code:pt.invalid_string,message:p.message}),s.dirty()):p.kind==="base64url"?N4.test(t.data)||(u=this._getOrReturnCtx(t,u),Mt(u,{validation:"base64url",code:pt.invalid_string,message:p.message}),s.dirty()):Rr.assertNever(p);return{status:s.value,value:t.data}}_regex(t,n,s){return this.refinement(u=>t.test(u),{validation:n,code:pt.invalid_string,...$t.errToObj(s)})}_addCheck(t){return new jo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...$t.errToObj(t)})}url(t){return this._addCheck({kind:"url",...$t.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...$t.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...$t.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...$t.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...$t.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...$t.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...$t.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...$t.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...$t.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...$t.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...$t.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...$t.errToObj(t)})}datetime(t){var n,s;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(s=t==null?void 0:t.local)!==null&&s!==void 0?s:!1,...$t.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...$t.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...$t.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...$t.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...$t.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...$t.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...$t.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...$t.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...$t.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...$t.errToObj(n)})}nonempty(t){return this.min(1,$t.errToObj(t))}trim(){return new jo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new jo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new jo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}jo.create=e=>{var t;return new jo({checks:[],typeName:Jt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...hr(e)})};function $4(e,t){const n=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,u=n>s?n:s,p=parseInt(e.toFixed(u).replace(".","")),f=parseInt(t.toFixed(u).replace(".",""));return p%f/Math.pow(10,u)}class cc extends gr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==zt.number){const p=this._getOrReturnCtx(t);return Mt(p,{code:pt.invalid_type,expected:zt.number,received:p.parsedType}),er}let s;const u=new qi;for(const p of this._def.checks)p.kind==="int"?Rr.isInteger(t.data)||(s=this._getOrReturnCtx(t,s),Mt(s,{code:pt.invalid_type,expected:"integer",received:"float",message:p.message}),u.dirty()):p.kind==="min"?(p.inclusive?t.data<p.value:t.data<=p.value)&&(s=this._getOrReturnCtx(t,s),Mt(s,{code:pt.too_small,minimum:p.value,type:"number",inclusive:p.inclusive,exact:!1,message:p.message}),u.dirty()):p.kind==="max"?(p.inclusive?t.data>p.value:t.data>=p.value)&&(s=this._getOrReturnCtx(t,s),Mt(s,{code:pt.too_big,maximum:p.value,type:"number",inclusive:p.inclusive,exact:!1,message:p.message}),u.dirty()):p.kind==="multipleOf"?$4(t.data,p.value)!==0&&(s=this._getOrReturnCtx(t,s),Mt(s,{code:pt.not_multiple_of,multipleOf:p.value,message:p.message}),u.dirty()):p.kind==="finite"?Number.isFinite(t.data)||(s=this._getOrReturnCtx(t,s),Mt(s,{code:pt.not_finite,message:p.message}),u.dirty()):Rr.assertNever(p);return{status:u.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,$t.toString(n))}gt(t,n){return this.setLimit("min",t,!1,$t.toString(n))}lte(t,n){return this.setLimit("max",t,!0,$t.toString(n))}lt(t,n){return this.setLimit("max",t,!1,$t.toString(n))}setLimit(t,n,s,u){return new cc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:s,message:$t.toString(u)}]})}_addCheck(t){return new cc({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:$t.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:$t.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:$t.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:$t.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:$t.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:$t.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:$t.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:$t.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:$t.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Rr.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(n===null||s.value>n)&&(n=s.value):s.kind==="max"&&(t===null||s.value<t)&&(t=s.value)}return Number.isFinite(n)&&Number.isFinite(t)}}cc.create=e=>new cc({checks:[],typeName:Jt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...hr(e)});class uc extends gr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==zt.bigint)return this._getInvalidInput(t);let s;const u=new qi;for(const p of this._def.checks)p.kind==="min"?(p.inclusive?t.data<p.value:t.data<=p.value)&&(s=this._getOrReturnCtx(t,s),Mt(s,{code:pt.too_small,type:"bigint",minimum:p.value,inclusive:p.inclusive,message:p.message}),u.dirty()):p.kind==="max"?(p.inclusive?t.data>p.value:t.data>=p.value)&&(s=this._getOrReturnCtx(t,s),Mt(s,{code:pt.too_big,type:"bigint",maximum:p.value,inclusive:p.inclusive,message:p.message}),u.dirty()):p.kind==="multipleOf"?t.data%p.value!==BigInt(0)&&(s=this._getOrReturnCtx(t,s),Mt(s,{code:pt.not_multiple_of,multipleOf:p.value,message:p.message}),u.dirty()):Rr.assertNever(p);return{status:u.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Mt(n,{code:pt.invalid_type,expected:zt.bigint,received:n.parsedType}),er}gte(t,n){return this.setLimit("min",t,!0,$t.toString(n))}gt(t,n){return this.setLimit("min",t,!1,$t.toString(n))}lte(t,n){return this.setLimit("max",t,!0,$t.toString(n))}lt(t,n){return this.setLimit("max",t,!1,$t.toString(n))}setLimit(t,n,s,u){return new uc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:s,message:$t.toString(u)}]})}_addCheck(t){return new uc({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:$t.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:$t.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:$t.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:$t.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:$t.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}uc.create=e=>{var t;return new uc({checks:[],typeName:Jt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...hr(e)})};class Rm extends gr{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==zt.boolean){const s=this._getOrReturnCtx(t);return Mt(s,{code:pt.invalid_type,expected:zt.boolean,received:s.parsedType}),er}return os(t.data)}}Rm.create=e=>new Rm({typeName:Jt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...hr(e)});class Lu extends gr{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==zt.date){const p=this._getOrReturnCtx(t);return Mt(p,{code:pt.invalid_type,expected:zt.date,received:p.parsedType}),er}if(isNaN(t.data.getTime())){const p=this._getOrReturnCtx(t);return Mt(p,{code:pt.invalid_date}),er}const s=new qi;let u;for(const p of this._def.checks)p.kind==="min"?t.data.getTime()<p.value&&(u=this._getOrReturnCtx(t,u),Mt(u,{code:pt.too_small,message:p.message,inclusive:!0,exact:!1,minimum:p.value,type:"date"}),s.dirty()):p.kind==="max"?t.data.getTime()>p.value&&(u=this._getOrReturnCtx(t,u),Mt(u,{code:pt.too_big,message:p.message,inclusive:!0,exact:!1,maximum:p.value,type:"date"}),s.dirty()):Rr.assertNever(p);return{status:s.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Lu({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:$t.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:$t.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Lu.create=e=>new Lu({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Jt.ZodDate,...hr(e)});class tv extends gr{_parse(t){if(this._getType(t)!==zt.symbol){const s=this._getOrReturnCtx(t);return Mt(s,{code:pt.invalid_type,expected:zt.symbol,received:s.parsedType}),er}return os(t.data)}}tv.create=e=>new tv({typeName:Jt.ZodSymbol,...hr(e)});class Am extends gr{_parse(t){if(this._getType(t)!==zt.undefined){const s=this._getOrReturnCtx(t);return Mt(s,{code:pt.invalid_type,expected:zt.undefined,received:s.parsedType}),er}return os(t.data)}}Am.create=e=>new Am({typeName:Jt.ZodUndefined,...hr(e)});class Dm extends gr{_parse(t){if(this._getType(t)!==zt.null){const s=this._getOrReturnCtx(t);return Mt(s,{code:pt.invalid_type,expected:zt.null,received:s.parsedType}),er}return os(t.data)}}Dm.create=e=>new Dm({typeName:Jt.ZodNull,...hr(e)});class $h extends gr{constructor(){super(...arguments),this._any=!0}_parse(t){return os(t.data)}}$h.create=e=>new $h({typeName:Jt.ZodAny,...hr(e)});class Eu extends gr{constructor(){super(...arguments),this._unknown=!0}_parse(t){return os(t.data)}}Eu.create=e=>new Eu({typeName:Jt.ZodUnknown,...hr(e)});class tl extends gr{_parse(t){const n=this._getOrReturnCtx(t);return Mt(n,{code:pt.invalid_type,expected:zt.never,received:n.parsedType}),er}}tl.create=e=>new tl({typeName:Jt.ZodNever,...hr(e)});class rv extends gr{_parse(t){if(this._getType(t)!==zt.undefined){const s=this._getOrReturnCtx(t);return Mt(s,{code:pt.invalid_type,expected:zt.void,received:s.parsedType}),er}return os(t.data)}}rv.create=e=>new rv({typeName:Jt.ZodVoid,...hr(e)});class Oo extends gr{_parse(t){const{ctx:n,status:s}=this._processInputParams(t),u=this._def;if(n.parsedType!==zt.array)return Mt(n,{code:pt.invalid_type,expected:zt.array,received:n.parsedType}),er;if(u.exactLength!==null){const f=n.data.length>u.exactLength.value,c=n.data.length<u.exactLength.value;(f||c)&&(Mt(n,{code:f?pt.too_big:pt.too_small,minimum:c?u.exactLength.value:void 0,maximum:f?u.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:u.exactLength.message}),s.dirty())}if(u.minLength!==null&&n.data.length<u.minLength.value&&(Mt(n,{code:pt.too_small,minimum:u.minLength.value,type:"array",inclusive:!0,exact:!1,message:u.minLength.message}),s.dirty()),u.maxLength!==null&&n.data.length>u.maxLength.value&&(Mt(n,{code:pt.too_big,maximum:u.maxLength.value,type:"array",inclusive:!0,exact:!1,message:u.maxLength.message}),s.dirty()),n.common.async)return Promise.all([...n.data].map((f,c)=>u.type._parseAsync(new da(n,f,n.path,c)))).then(f=>qi.mergeArray(s,f));const p=[...n.data].map((f,c)=>u.type._parseSync(new da(n,f,n.path,c)));return qi.mergeArray(s,p)}get element(){return this._def.type}min(t,n){return new Oo({...this._def,minLength:{value:t,message:$t.toString(n)}})}max(t,n){return new Oo({...this._def,maxLength:{value:t,message:$t.toString(n)}})}length(t,n){return new Oo({...this._def,exactLength:{value:t,message:$t.toString(n)}})}nonempty(t){return this.min(1,t)}}Oo.create=(e,t)=>new Oo({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Jt.ZodArray,...hr(t)});function Xd(e){if(e instanceof Cn){const t={};for(const n in e.shape){const s=e.shape[n];t[n]=ca.create(Xd(s))}return new Cn({...e._def,shape:()=>t})}else return e instanceof Oo?new Oo({...e._def,type:Xd(e.element)}):e instanceof ca?ca.create(Xd(e.unwrap())):e instanceof hc?hc.create(Xd(e.unwrap())):e instanceof ha?ha.create(e.items.map(t=>Xd(t))):e}class Cn extends gr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Rr.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==zt.object){const E=this._getOrReturnCtx(t);return Mt(E,{code:pt.invalid_type,expected:zt.object,received:E.parsedType}),er}const{status:s,ctx:u}=this._processInputParams(t),{shape:p,keys:f}=this._getCached(),c=[];if(!(this._def.catchall instanceof tl&&this._def.unknownKeys==="strip"))for(const E in u.data)f.includes(E)||c.push(E);const S=[];for(const E of f){const A=p[E],z=u.data[E];S.push({key:{status:"valid",value:E},value:A._parse(new da(u,z,u.path,E)),alwaysSet:E in u.data})}if(this._def.catchall instanceof tl){const E=this._def.unknownKeys;if(E==="passthrough")for(const A of c)S.push({key:{status:"valid",value:A},value:{status:"valid",value:u.data[A]}});else if(E==="strict")c.length>0&&(Mt(u,{code:pt.unrecognized_keys,keys:c}),s.dirty());else if(E!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const E=this._def.catchall;for(const A of c){const z=u.data[A];S.push({key:{status:"valid",value:A},value:E._parse(new da(u,z,u.path,A)),alwaysSet:A in u.data})}}return u.common.async?Promise.resolve().then(async()=>{const E=[];for(const A of S){const z=await A.key,L=await A.value;E.push({key:z,value:L,alwaysSet:A.alwaysSet})}return E}).then(E=>qi.mergeObjectSync(s,E)):qi.mergeObjectSync(s,S)}get shape(){return this._def.shape()}strict(t){return $t.errToObj,new Cn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,s)=>{var u,p,f,c;const S=(f=(p=(u=this._def).errorMap)===null||p===void 0?void 0:p.call(u,n,s).message)!==null&&f!==void 0?f:s.defaultError;return n.code==="unrecognized_keys"?{message:(c=$t.errToObj(t).message)!==null&&c!==void 0?c:S}:{message:S}}}:{}})}strip(){return new Cn({...this._def,unknownKeys:"strip"})}passthrough(){return new Cn({...this._def,unknownKeys:"passthrough"})}extend(t){return new Cn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Cn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Jt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Cn({...this._def,catchall:t})}pick(t){const n={};return Rr.objectKeys(t).forEach(s=>{t[s]&&this.shape[s]&&(n[s]=this.shape[s])}),new Cn({...this._def,shape:()=>n})}omit(t){const n={};return Rr.objectKeys(this.shape).forEach(s=>{t[s]||(n[s]=this.shape[s])}),new Cn({...this._def,shape:()=>n})}deepPartial(){return Xd(this)}partial(t){const n={};return Rr.objectKeys(this.shape).forEach(s=>{const u=this.shape[s];t&&!t[s]?n[s]=u:n[s]=u.optional()}),new Cn({...this._def,shape:()=>n})}required(t){const n={};return Rr.objectKeys(this.shape).forEach(s=>{if(t&&!t[s])n[s]=this.shape[s];else{let p=this.shape[s];for(;p instanceof ca;)p=p._def.innerType;n[s]=p}}),new Cn({...this._def,shape:()=>n})}keyof(){return BI(Rr.objectKeys(this.shape))}}Cn.create=(e,t)=>new Cn({shape:()=>e,unknownKeys:"strip",catchall:tl.create(),typeName:Jt.ZodObject,...hr(t)});Cn.strictCreate=(e,t)=>new Cn({shape:()=>e,unknownKeys:"strict",catchall:tl.create(),typeName:Jt.ZodObject,...hr(t)});Cn.lazycreate=(e,t)=>new Cn({shape:e,unknownKeys:"strip",catchall:tl.create(),typeName:Jt.ZodObject,...hr(t)});class zm extends gr{_parse(t){const{ctx:n}=this._processInputParams(t),s=this._def.options;function u(p){for(const c of p)if(c.result.status==="valid")return c.result;for(const c of p)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const f=p.map(c=>new Zs(c.ctx.common.issues));return Mt(n,{code:pt.invalid_union,unionErrors:f}),er}if(n.common.async)return Promise.all(s.map(async p=>{const f={...n,common:{...n.common,issues:[]},parent:null};return{result:await p._parseAsync({data:n.data,path:n.path,parent:f}),ctx:f}})).then(u);{let p;const f=[];for(const S of s){const E={...n,common:{...n.common,issues:[]},parent:null},A=S._parseSync({data:n.data,path:n.path,parent:E});if(A.status==="valid")return A;A.status==="dirty"&&!p&&(p={result:A,ctx:E}),E.common.issues.length&&f.push(E.common.issues)}if(p)return n.common.issues.push(...p.ctx.common.issues),p.result;const c=f.map(S=>new Zs(S));return Mt(n,{code:pt.invalid_union,unionErrors:c}),er}}get options(){return this._def.options}}zm.create=(e,t)=>new zm({options:e,typeName:Jt.ZodUnion,...hr(t)});const Ba=e=>e instanceof Nm?Ba(e.schema):e instanceof Bo?Ba(e.innerType()):e instanceof Om?[e.value]:e instanceof dc?e.options:e instanceof Fm?Rr.objectValues(e.enum):e instanceof Bm?Ba(e._def.innerType):e instanceof Am?[void 0]:e instanceof Dm?[null]:e instanceof ca?[void 0,...Ba(e.unwrap())]:e instanceof hc?[null,...Ba(e.unwrap())]:e instanceof b2||e instanceof Vm?Ba(e.unwrap()):e instanceof Um?Ba(e._def.innerType):[];class Uv extends gr{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==zt.object)return Mt(n,{code:pt.invalid_type,expected:zt.object,received:n.parsedType}),er;const s=this.discriminator,u=n.data[s],p=this.optionsMap.get(u);return p?n.common.async?p._parseAsync({data:n.data,path:n.path,parent:n}):p._parseSync({data:n.data,path:n.path,parent:n}):(Mt(n,{code:pt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),er)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,s){const u=new Map;for(const p of n){const f=Ba(p.shape[t]);if(!f.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const c of f){if(u.has(c))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(c)}`);u.set(c,p)}}return new Uv({typeName:Jt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:u,...hr(s)})}}function j1(e,t){const n=Ga(e),s=Ga(t);if(e===t)return{valid:!0,data:e};if(n===zt.object&&s===zt.object){const u=Rr.objectKeys(t),p=Rr.objectKeys(e).filter(c=>u.indexOf(c)!==-1),f={...e,...t};for(const c of p){const S=j1(e[c],t[c]);if(!S.valid)return{valid:!1};f[c]=S.data}return{valid:!0,data:f}}else if(n===zt.array&&s===zt.array){if(e.length!==t.length)return{valid:!1};const u=[];for(let p=0;p<e.length;p++){const f=e[p],c=t[p],S=j1(f,c);if(!S.valid)return{valid:!1};u.push(S.data)}return{valid:!0,data:u}}else return n===zt.date&&s===zt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class jm extends gr{_parse(t){const{status:n,ctx:s}=this._processInputParams(t),u=(p,f)=>{if(D1(p)||D1(f))return er;const c=j1(p.value,f.value);return c.valid?((z1(p)||z1(f))&&n.dirty(),{status:n.value,value:c.data}):(Mt(s,{code:pt.invalid_intersection_types}),er)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([p,f])=>u(p,f)):u(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}jm.create=(e,t,n)=>new jm({left:e,right:t,typeName:Jt.ZodIntersection,...hr(n)});class ha extends gr{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==zt.array)return Mt(s,{code:pt.invalid_type,expected:zt.array,received:s.parsedType}),er;if(s.data.length<this._def.items.length)return Mt(s,{code:pt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),er;!this._def.rest&&s.data.length>this._def.items.length&&(Mt(s,{code:pt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const p=[...s.data].map((f,c)=>{const S=this._def.items[c]||this._def.rest;return S?S._parse(new da(s,f,s.path,c)):null}).filter(f=>!!f);return s.common.async?Promise.all(p).then(f=>qi.mergeArray(n,f)):qi.mergeArray(n,p)}get items(){return this._def.items}rest(t){return new ha({...this._def,rest:t})}}ha.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ha({items:e,typeName:Jt.ZodTuple,rest:null,...hr(t)})};class Lm extends gr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==zt.object)return Mt(s,{code:pt.invalid_type,expected:zt.object,received:s.parsedType}),er;const u=[],p=this._def.keyType,f=this._def.valueType;for(const c in s.data)u.push({key:p._parse(new da(s,c,s.path,c)),value:f._parse(new da(s,s.data[c],s.path,c)),alwaysSet:c in s.data});return s.common.async?qi.mergeObjectAsync(n,u):qi.mergeObjectSync(n,u)}get element(){return this._def.valueType}static create(t,n,s){return n instanceof gr?new Lm({keyType:t,valueType:n,typeName:Jt.ZodRecord,...hr(s)}):new Lm({keyType:jo.create(),valueType:t,typeName:Jt.ZodRecord,...hr(n)})}}class nv extends gr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==zt.map)return Mt(s,{code:pt.invalid_type,expected:zt.map,received:s.parsedType}),er;const u=this._def.keyType,p=this._def.valueType,f=[...s.data.entries()].map(([c,S],E)=>({key:u._parse(new da(s,c,s.path,[E,"key"])),value:p._parse(new da(s,S,s.path,[E,"value"]))}));if(s.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const S of f){const E=await S.key,A=await S.value;if(E.status==="aborted"||A.status==="aborted")return er;(E.status==="dirty"||A.status==="dirty")&&n.dirty(),c.set(E.value,A.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const S of f){const E=S.key,A=S.value;if(E.status==="aborted"||A.status==="aborted")return er;(E.status==="dirty"||A.status==="dirty")&&n.dirty(),c.set(E.value,A.value)}return{status:n.value,value:c}}}}nv.create=(e,t,n)=>new nv({valueType:t,keyType:e,typeName:Jt.ZodMap,...hr(n)});class Nu extends gr{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==zt.set)return Mt(s,{code:pt.invalid_type,expected:zt.set,received:s.parsedType}),er;const u=this._def;u.minSize!==null&&s.data.size<u.minSize.value&&(Mt(s,{code:pt.too_small,minimum:u.minSize.value,type:"set",inclusive:!0,exact:!1,message:u.minSize.message}),n.dirty()),u.maxSize!==null&&s.data.size>u.maxSize.value&&(Mt(s,{code:pt.too_big,maximum:u.maxSize.value,type:"set",inclusive:!0,exact:!1,message:u.maxSize.message}),n.dirty());const p=this._def.valueType;function f(S){const E=new Set;for(const A of S){if(A.status==="aborted")return er;A.status==="dirty"&&n.dirty(),E.add(A.value)}return{status:n.value,value:E}}const c=[...s.data.values()].map((S,E)=>p._parse(new da(s,S,s.path,E)));return s.common.async?Promise.all(c).then(S=>f(S)):f(c)}min(t,n){return new Nu({...this._def,minSize:{value:t,message:$t.toString(n)}})}max(t,n){return new Nu({...this._def,maxSize:{value:t,message:$t.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Nu.create=(e,t)=>new Nu({valueType:e,minSize:null,maxSize:null,typeName:Jt.ZodSet,...hr(t)});class gh extends gr{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==zt.function)return Mt(n,{code:pt.invalid_type,expected:zt.function,received:n.parsedType}),er;function s(c,S){return J_({data:c,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Q_(),Vh].filter(E=>!!E),issueData:{code:pt.invalid_arguments,argumentsError:S}})}function u(c,S){return J_({data:c,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Q_(),Vh].filter(E=>!!E),issueData:{code:pt.invalid_return_type,returnTypeError:S}})}const p={errorMap:n.common.contextualErrorMap},f=n.data;if(this._def.returns instanceof Zh){const c=this;return os(async function(...S){const E=new Zs([]),A=await c._def.args.parseAsync(S,p).catch(I=>{throw E.addIssue(s(S,I)),E}),z=await Reflect.apply(f,this,A);return await c._def.returns._def.type.parseAsync(z,p).catch(I=>{throw E.addIssue(u(z,I)),E})})}else{const c=this;return os(function(...S){const E=c._def.args.safeParse(S,p);if(!E.success)throw new Zs([s(S,E.error)]);const A=Reflect.apply(f,this,E.data),z=c._def.returns.safeParse(A,p);if(!z.success)throw new Zs([u(A,z.error)]);return z.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new gh({...this._def,args:ha.create(t).rest(Eu.create())})}returns(t){return new gh({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,s){return new gh({args:t||ha.create([]).rest(Eu.create()),returns:n||Eu.create(),typeName:Jt.ZodFunction,...hr(s)})}}class Nm extends gr{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Nm.create=(e,t)=>new Nm({getter:e,typeName:Jt.ZodLazy,...hr(t)});class Om extends gr{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Mt(n,{received:n.data,code:pt.invalid_literal,expected:this._def.value}),er}return{status:"valid",value:t.data}}get value(){return this._def.value}}Om.create=(e,t)=>new Om({value:e,typeName:Jt.ZodLiteral,...hr(t)});function BI(e,t){return new dc({values:e,typeName:Jt.ZodEnum,...hr(t)})}class dc extends gr{constructor(){super(...arguments),Xf.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),s=this._def.values;return Mt(n,{expected:Rr.joinValues(s),received:n.parsedType,code:pt.invalid_type}),er}if(ev(this,Xf)||LI(this,Xf,new Set(this._def.values)),!ev(this,Xf).has(t.data)){const n=this._getOrReturnCtx(t),s=this._def.values;return Mt(n,{received:n.data,code:pt.invalid_enum_value,options:s}),er}return os(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return dc.create(t,{...this._def,...n})}exclude(t,n=this._def){return dc.create(this.options.filter(s=>!t.includes(s)),{...this._def,...n})}}Xf=new WeakMap;dc.create=BI;class Fm extends gr{constructor(){super(...arguments),Kf.set(this,void 0)}_parse(t){const n=Rr.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(t);if(s.parsedType!==zt.string&&s.parsedType!==zt.number){const u=Rr.objectValues(n);return Mt(s,{expected:Rr.joinValues(u),received:s.parsedType,code:pt.invalid_type}),er}if(ev(this,Kf)||LI(this,Kf,new Set(Rr.getValidEnumValues(this._def.values))),!ev(this,Kf).has(t.data)){const u=Rr.objectValues(n);return Mt(s,{received:s.data,code:pt.invalid_enum_value,options:u}),er}return os(t.data)}get enum(){return this._def.values}}Kf=new WeakMap;Fm.create=(e,t)=>new Fm({values:e,typeName:Jt.ZodNativeEnum,...hr(t)});class Zh extends gr{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==zt.promise&&n.common.async===!1)return Mt(n,{code:pt.invalid_type,expected:zt.promise,received:n.parsedType}),er;const s=n.parsedType===zt.promise?n.data:Promise.resolve(n.data);return os(s.then(u=>this._def.type.parseAsync(u,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Zh.create=(e,t)=>new Zh({type:e,typeName:Jt.ZodPromise,...hr(t)});class Bo extends gr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Jt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:s}=this._processInputParams(t),u=this._def.effect||null,p={addIssue:f=>{Mt(s,f),f.fatal?n.abort():n.dirty()},get path(){return s.path}};if(p.addIssue=p.addIssue.bind(p),u.type==="preprocess"){const f=u.transform(s.data,p);if(s.common.async)return Promise.resolve(f).then(async c=>{if(n.value==="aborted")return er;const S=await this._def.schema._parseAsync({data:c,path:s.path,parent:s});return S.status==="aborted"?er:S.status==="dirty"||n.value==="dirty"?lh(S.value):S});{if(n.value==="aborted")return er;const c=this._def.schema._parseSync({data:f,path:s.path,parent:s});return c.status==="aborted"?er:c.status==="dirty"||n.value==="dirty"?lh(c.value):c}}if(u.type==="refinement"){const f=c=>{const S=u.refinement(c,p);if(s.common.async)return Promise.resolve(S);if(S instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(s.common.async===!1){const c=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return c.status==="aborted"?er:(c.status==="dirty"&&n.dirty(),f(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(c=>c.status==="aborted"?er:(c.status==="dirty"&&n.dirty(),f(c.value).then(()=>({status:n.value,value:c.value}))))}if(u.type==="transform")if(s.common.async===!1){const f=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!ju(f))return f;const c=u.transform(f.value,p);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(f=>ju(f)?Promise.resolve(u.transform(f.value,p)).then(c=>({status:n.value,value:c})):f);Rr.assertNever(u)}}Bo.create=(e,t,n)=>new Bo({schema:e,typeName:Jt.ZodEffects,effect:t,...hr(n)});Bo.createWithPreprocess=(e,t,n)=>new Bo({schema:t,effect:{type:"preprocess",transform:e},typeName:Jt.ZodEffects,...hr(n)});class ca extends gr{_parse(t){return this._getType(t)===zt.undefined?os(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ca.create=(e,t)=>new ca({innerType:e,typeName:Jt.ZodOptional,...hr(t)});class hc extends gr{_parse(t){return this._getType(t)===zt.null?os(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}hc.create=(e,t)=>new hc({innerType:e,typeName:Jt.ZodNullable,...hr(t)});class Bm extends gr{_parse(t){const{ctx:n}=this._processInputParams(t);let s=n.data;return n.parsedType===zt.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Bm.create=(e,t)=>new Bm({innerType:e,typeName:Jt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...hr(t)});class Um extends gr{_parse(t){const{ctx:n}=this._processInputParams(t),s={...n,common:{...n.common,issues:[]}},u=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Im(u)?u.then(p=>({status:"valid",value:p.status==="valid"?p.value:this._def.catchValue({get error(){return new Zs(s.common.issues)},input:s.data})})):{status:"valid",value:u.status==="valid"?u.value:this._def.catchValue({get error(){return new Zs(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Um.create=(e,t)=>new Um({innerType:e,typeName:Jt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...hr(t)});class iv extends gr{_parse(t){if(this._getType(t)!==zt.nan){const s=this._getOrReturnCtx(t);return Mt(s,{code:pt.invalid_type,expected:zt.nan,received:s.parsedType}),er}return{status:"valid",value:t.data}}}iv.create=e=>new iv({typeName:Jt.ZodNaN,...hr(e)});const Z4=Symbol("zod_brand");class b2 extends gr{_parse(t){const{ctx:n}=this._processInputParams(t),s=n.data;return this._def.type._parse({data:s,path:n.path,parent:n})}unwrap(){return this._def.type}}class cg extends gr{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.common.async)return(async()=>{const p=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return p.status==="aborted"?er:p.status==="dirty"?(n.dirty(),lh(p.value)):this._def.out._parseAsync({data:p.value,path:s.path,parent:s})})();{const u=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return u.status==="aborted"?er:u.status==="dirty"?(n.dirty(),{status:"dirty",value:u.value}):this._def.out._parseSync({data:u.value,path:s.path,parent:s})}}static create(t,n){return new cg({in:t,out:n,typeName:Jt.ZodPipeline})}}class Vm extends gr{_parse(t){const n=this._def.innerType._parse(t),s=u=>(ju(u)&&(u.value=Object.freeze(u.value)),u);return Im(n)?n.then(u=>s(u)):s(n)}unwrap(){return this._def.innerType}}Vm.create=(e,t)=>new Vm({innerType:e,typeName:Jt.ZodReadonly,...hr(t)});function UI(e,t={},n){return e?$h.create().superRefine((s,u)=>{var p,f;if(!e(s)){const c=typeof t=="function"?t(s):typeof t=="string"?{message:t}:t,S=(f=(p=c.fatal)!==null&&p!==void 0?p:n)!==null&&f!==void 0?f:!0,E=typeof c=="string"?{message:c}:c;u.addIssue({code:"custom",...E,fatal:S})}}):$h.create()}const G4={object:Cn.lazycreate};var Jt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Jt||(Jt={}));const H4=(e,t={message:`Input not instance of ${e.name}`})=>UI(n=>n instanceof e,t),VI=jo.create,$I=cc.create,q4=iv.create,W4=uc.create,ZI=Rm.create,X4=Lu.create,K4=tv.create,Y4=Am.create,Q4=Dm.create,J4=$h.create,eB=Eu.create,tB=tl.create,rB=rv.create,nB=Oo.create,iB=Cn.create,sB=Cn.strictCreate,oB=zm.create,aB=Uv.create,lB=jm.create,cB=ha.create,uB=Lm.create,dB=nv.create,hB=Nu.create,pB=gh.create,fB=Nm.create,mB=Om.create,gB=dc.create,yB=Fm.create,_B=Zh.create,NP=Bo.create,vB=ca.create,xB=hc.create,bB=Bo.createWithPreprocess,wB=cg.create,SB=()=>VI().optional(),TB=()=>$I().optional(),CB=()=>ZI().optional(),PB={string:e=>jo.create({...e,coerce:!0}),number:e=>cc.create({...e,coerce:!0}),boolean:e=>Rm.create({...e,coerce:!0}),bigint:e=>uc.create({...e,coerce:!0}),date:e=>Lu.create({...e,coerce:!0})},EB=er;var Un=Object.freeze({__proto__:null,defaultErrorMap:Vh,setErrorMap:b4,getErrorMap:Q_,makeIssue:J_,EMPTY_PATH:w4,addIssueToContext:Mt,ParseStatus:qi,INVALID:er,DIRTY:lh,OK:os,isAborted:D1,isDirty:z1,isValid:ju,isAsync:Im,get util(){return Rr},get objectUtil(){return A1},ZodParsedType:zt,getParsedType:Ga,ZodType:gr,datetimeRegex:FI,ZodString:jo,ZodNumber:cc,ZodBigInt:uc,ZodBoolean:Rm,ZodDate:Lu,ZodSymbol:tv,ZodUndefined:Am,ZodNull:Dm,ZodAny:$h,ZodUnknown:Eu,ZodNever:tl,ZodVoid:rv,ZodArray:Oo,ZodObject:Cn,ZodUnion:zm,ZodDiscriminatedUnion:Uv,ZodIntersection:jm,ZodTuple:ha,ZodRecord:Lm,ZodMap:nv,ZodSet:Nu,ZodFunction:gh,ZodLazy:Nm,ZodLiteral:Om,ZodEnum:dc,ZodNativeEnum:Fm,ZodPromise:Zh,ZodEffects:Bo,ZodTransformer:Bo,ZodOptional:ca,ZodNullable:hc,ZodDefault:Bm,ZodCatch:Um,ZodNaN:iv,BRAND:Z4,ZodBranded:b2,ZodPipeline:cg,ZodReadonly:Vm,custom:UI,Schema:gr,ZodSchema:gr,late:G4,get ZodFirstPartyTypeKind(){return Jt},coerce:PB,any:J4,array:nB,bigint:W4,boolean:ZI,date:X4,discriminatedUnion:aB,effect:NP,enum:gB,function:pB,instanceof:H4,intersection:lB,lazy:fB,literal:mB,map:dB,nan:q4,nativeEnum:yB,never:tB,null:Q4,nullable:xB,number:$I,object:iB,oboolean:CB,onumber:TB,optional:vB,ostring:SB,pipeline:wB,preprocess:bB,promise:_B,record:uB,set:hB,strictObject:sB,string:VI,symbol:K4,transformer:NP,tuple:cB,undefined:Y4,union:oB,unknown:eB,void:rB,NEVER:EB,ZodIssueCode:pt,quotelessJson:x4,ZodError:Zs});const MB=Un.object({fullname:Un.string().min(2,"Fullname is required"),email:Un.string().email("Invalid email address"),password:Un.string().min(8,"Password must be at least 8 characters.").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/,"Password must contain at least one lowercase letter, one uppercase letter, and one number"),contact:Un.string().min(11,{message:"Contact number at least 11 digits"}).max(11,"Contact number at most 11 digits")}),kB=Un.object({email:Un.string().email("Invalid email address"),password:Un.string().min(8,"Password must be at least 8 characters.")}),IB={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},OP=e=>{let t;const n=new Set,s=(A,z)=>{const L=typeof A=="function"?A(t):A;if(!Object.is(L,t)){const I=t;t=z??(typeof L!="object"||L===null)?L:Object.assign({},t,L),n.forEach(F=>F(t,I))}},u=()=>t,S={setState:s,getState:u,getInitialState:()=>E,subscribe:A=>(n.add(A),()=>n.delete(A)),destroy:()=>{(IB?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},E=t=e(s,u,S);return S},RB=e=>e?OP(e):OP;var GI={exports:{}},HI={},qI={exports:{}},WI={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gh=N;function AB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var DB=typeof Object.is=="function"?Object.is:AB,zB=Gh.useState,jB=Gh.useEffect,LB=Gh.useLayoutEffect,NB=Gh.useDebugValue;function OB(e,t){var n=t(),s=zB({inst:{value:n,getSnapshot:t}}),u=s[0].inst,p=s[1];return LB(function(){u.value=n,u.getSnapshot=t,pb(u)&&p({inst:u})},[e,n,t]),jB(function(){return pb(u)&&p({inst:u}),e(function(){pb(u)&&p({inst:u})})},[e]),NB(n),n}function pb(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!DB(e,n)}catch{return!0}}function FB(e,t){return t()}var BB=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?FB:OB;WI.useSyncExternalStore=Gh.useSyncExternalStore!==void 0?Gh.useSyncExternalStore:BB;qI.exports=WI;var UB=qI.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv=N,VB=UB;function $B(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ZB=typeof Object.is=="function"?Object.is:$B,GB=VB.useSyncExternalStore,HB=Vv.useRef,qB=Vv.useEffect,WB=Vv.useMemo,XB=Vv.useDebugValue;HI.useSyncExternalStoreWithSelector=function(e,t,n,s,u){var p=HB(null);if(p.current===null){var f={hasValue:!1,value:null};p.current=f}else f=p.current;p=WB(function(){function S(I){if(!E){if(E=!0,A=I,I=s(I),u!==void 0&&f.hasValue){var F=f.value;if(u(F,I))return z=F}return z=I}if(F=z,ZB(A,I))return F;var B=s(I);return u!==void 0&&u(F,B)?F:(A=I,z=B)}var E=!1,A,z,L=n===void 0?null:n;return[function(){return S(t())},L===null?void 0:function(){return S(L())}]},[t,n,s,u]);var c=GB(e,p[0],p[1]);return qB(function(){f.hasValue=!0,f.value=c},[c]),XB(c),c};GI.exports=HI;var KB=GI.exports;const YB=_v(KB),XI={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:QB}=xt,{useSyncExternalStoreWithSelector:JB}=YB;let FP=!1;const e6=e=>e;function t6(e,t=e6,n){(XI?"production":void 0)!=="production"&&n&&!FP&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),FP=!0);const s=JB(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return QB(s),s}const r6=e=>{(XI?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?RB(e):e,n=(s,u)=>t6(t,s,u);return Object.assign(n,t),n},ep=e=>r6,n6={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function qu(e,t){let n;try{n=e()}catch{return}return{getItem:u=>{var p;const f=S=>S===null?null:JSON.parse(S,void 0),c=(p=n.getItem(u))!=null?p:null;return c instanceof Promise?c.then(f):f(c)},setItem:(u,p)=>n.setItem(u,JSON.stringify(p,void 0)),removeItem:u=>n.removeItem(u)}}const $m=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(s){return $m(s)(n)},catch(s){return this}}}catch(n){return{then(s){return this},catch(s){return $m(s)(n)}}}},i6=(e,t)=>(n,s,u)=>{let p={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:X=>X,version:0,merge:(X,q)=>({...q,...X}),...t},f=!1;const c=new Set,S=new Set;let E;try{E=p.getStorage()}catch{}if(!E)return e((...X)=>{console.warn(`[zustand persist middleware] Unable to update item '${p.name}', the given storage is currently unavailable.`),n(...X)},s,u);const A=$m(p.serialize),z=()=>{const X=p.partialize({...s()});let q;const V=A({state:X,version:p.version}).then(Y=>E.setItem(p.name,Y)).catch(Y=>{q=Y});if(q)throw q;return V},L=u.setState;u.setState=(X,q)=>{L(X,q),z()};const I=e((...X)=>{n(...X),z()},s,u);let F;const B=()=>{var X;if(!E)return;f=!1,c.forEach(V=>V(s()));const q=((X=p.onRehydrateStorage)==null?void 0:X.call(p,s()))||void 0;return $m(E.getItem.bind(E))(p.name).then(V=>{if(V)return p.deserialize(V)}).then(V=>{if(V)if(typeof V.version=="number"&&V.version!==p.version){if(p.migrate)return p.migrate(V.state,V.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return V.state}).then(V=>{var Y;return F=p.merge(V,(Y=s())!=null?Y:I),n(F,!0),z()}).then(()=>{q==null||q(F,void 0),f=!0,S.forEach(V=>V(F))}).catch(V=>{q==null||q(void 0,V)})};return u.persist={setOptions:X=>{p={...p,...X},X.getStorage&&(E=X.getStorage())},clearStorage:()=>{E==null||E.removeItem(p.name)},getOptions:()=>p,rehydrate:()=>B(),hasHydrated:()=>f,onHydrate:X=>(c.add(X),()=>{c.delete(X)}),onFinishHydration:X=>(S.add(X),()=>{S.delete(X)})},B(),F||I},s6=(e,t)=>(n,s,u)=>{let p={storage:qu(()=>localStorage),partialize:B=>B,version:0,merge:(B,X)=>({...X,...B}),...t},f=!1;const c=new Set,S=new Set;let E=p.storage;if(!E)return e((...B)=>{console.warn(`[zustand persist middleware] Unable to update item '${p.name}', the given storage is currently unavailable.`),n(...B)},s,u);const A=()=>{const B=p.partialize({...s()});return E.setItem(p.name,{state:B,version:p.version})},z=u.setState;u.setState=(B,X)=>{z(B,X),A()};const L=e((...B)=>{n(...B),A()},s,u);u.getInitialState=()=>L;let I;const F=()=>{var B,X;if(!E)return;f=!1,c.forEach(V=>{var Y;return V((Y=s())!=null?Y:L)});const q=((X=p.onRehydrateStorage)==null?void 0:X.call(p,(B=s())!=null?B:L))||void 0;return $m(E.getItem.bind(E))(p.name).then(V=>{if(V)if(typeof V.version=="number"&&V.version!==p.version){if(p.migrate)return[!0,p.migrate(V.state,V.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,V.state];return[!1,void 0]}).then(V=>{var Y;const[de,Se]=V;if(I=p.merge(Se,(Y=s())!=null?Y:L),n(I,!0),de)return A()}).then(()=>{q==null||q(I,void 0),I=s(),f=!0,S.forEach(V=>V(I))}).catch(V=>{q==null||q(void 0,V)})};return u.persist={setOptions:B=>{p={...p,...B},B.storage&&(E=B.storage)},clearStorage:()=>{E==null||E.removeItem(p.name)},getOptions:()=>p,rehydrate:()=>F(),hasHydrated:()=>f,onHydrate:B=>(c.add(B),()=>{c.delete(B)}),onFinishHydration:B=>(S.add(B),()=>{S.delete(B)})},p.skipHydration||F(),I||L},o6=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((n6?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),i6(e,t)):s6(e,t),tp=o6;function KI(e,t){return function(){return e.apply(t,arguments)}}const{toString:a6}=Object.prototype,{getPrototypeOf:w2}=Object,$v=(e=>t=>{const n=a6.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),$o=e=>(e=e.toLowerCase(),t=>$v(t)===e),Zv=e=>t=>typeof t===e,{isArray:rp}=Array,Zm=Zv("undefined");function l6(e){return e!==null&&!Zm(e)&&e.constructor!==null&&!Zm(e.constructor)&&Gs(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const YI=$o("ArrayBuffer");function c6(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&YI(e.buffer),t}const u6=Zv("string"),Gs=Zv("function"),QI=Zv("number"),Gv=e=>e!==null&&typeof e=="object",d6=e=>e===!0||e===!1,m_=e=>{if($v(e)!=="object")return!1;const t=w2(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},h6=$o("Date"),p6=$o("File"),f6=$o("Blob"),m6=$o("FileList"),g6=e=>Gv(e)&&Gs(e.pipe),y6=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Gs(e.append)&&((t=$v(e))==="formdata"||t==="object"&&Gs(e.toString)&&e.toString()==="[object FormData]"))},_6=$o("URLSearchParams"),[v6,x6,b6,w6]=["ReadableStream","Request","Response","Headers"].map($o),S6=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ug(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,u;if(typeof e!="object"&&(e=[e]),rp(e))for(s=0,u=e.length;s<u;s++)t.call(null,e[s],s,e);else{const p=n?Object.getOwnPropertyNames(e):Object.keys(e),f=p.length;let c;for(s=0;s<f;s++)c=p[s],t.call(null,e[c],c,e)}}function JI(e,t){t=t.toLowerCase();const n=Object.keys(e);let s=n.length,u;for(;s-- >0;)if(u=n[s],t===u.toLowerCase())return u;return null}const yu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,eR=e=>!Zm(e)&&e!==yu;function L1(){const{caseless:e}=eR(this)&&this||{},t={},n=(s,u)=>{const p=e&&JI(t,u)||u;m_(t[p])&&m_(s)?t[p]=L1(t[p],s):m_(s)?t[p]=L1({},s):rp(s)?t[p]=s.slice():t[p]=s};for(let s=0,u=arguments.length;s<u;s++)arguments[s]&&ug(arguments[s],n);return t}const T6=(e,t,n,{allOwnKeys:s}={})=>(ug(t,(u,p)=>{n&&Gs(u)?e[p]=KI(u,n):e[p]=u},{allOwnKeys:s}),e),C6=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),P6=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},E6=(e,t,n,s)=>{let u,p,f;const c={};if(t=t||{},e==null)return t;do{for(u=Object.getOwnPropertyNames(e),p=u.length;p-- >0;)f=u[p],(!s||s(f,e,t))&&!c[f]&&(t[f]=e[f],c[f]=!0);e=n!==!1&&w2(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},M6=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},k6=e=>{if(!e)return null;if(rp(e))return e;let t=e.length;if(!QI(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},I6=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&w2(Uint8Array)),R6=(e,t)=>{const s=(e&&e[Symbol.iterator]).call(e);let u;for(;(u=s.next())&&!u.done;){const p=u.value;t.call(e,p[0],p[1])}},A6=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},D6=$o("HTMLFormElement"),z6=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,u){return s.toUpperCase()+u}),BP=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),j6=$o("RegExp"),tR=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};ug(n,(u,p)=>{let f;(f=t(u,p,e))!==!1&&(s[p]=f||u)}),Object.defineProperties(e,s)},L6=e=>{tR(e,(t,n)=>{if(Gs(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(Gs(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},N6=(e,t)=>{const n={},s=u=>{u.forEach(p=>{n[p]=!0})};return rp(e)?s(e):s(String(e).split(t)),n},O6=()=>{},F6=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,fb="abcdefghijklmnopqrstuvwxyz",UP="0123456789",rR={DIGIT:UP,ALPHA:fb,ALPHA_DIGIT:fb+fb.toUpperCase()+UP},B6=(e=16,t=rR.ALPHA_DIGIT)=>{let n="";const{length:s}=t;for(;e--;)n+=t[Math.random()*s|0];return n};function U6(e){return!!(e&&Gs(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const V6=e=>{const t=new Array(10),n=(s,u)=>{if(Gv(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[u]=s;const p=rp(s)?[]:{};return ug(s,(f,c)=>{const S=n(f,u+1);!Zm(S)&&(p[c]=S)}),t[u]=void 0,p}}return s};return n(e,0)},$6=$o("AsyncFunction"),Z6=e=>e&&(Gv(e)||Gs(e))&&Gs(e.then)&&Gs(e.catch),nR=((e,t)=>e?setImmediate:t?((n,s)=>(yu.addEventListener("message",({source:u,data:p})=>{u===yu&&p===n&&s.length&&s.shift()()},!1),u=>{s.push(u),yu.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Gs(yu.postMessage)),G6=typeof queueMicrotask<"u"?queueMicrotask.bind(yu):typeof process<"u"&&process.nextTick||nR,Je={isArray:rp,isArrayBuffer:YI,isBuffer:l6,isFormData:y6,isArrayBufferView:c6,isString:u6,isNumber:QI,isBoolean:d6,isObject:Gv,isPlainObject:m_,isReadableStream:v6,isRequest:x6,isResponse:b6,isHeaders:w6,isUndefined:Zm,isDate:h6,isFile:p6,isBlob:f6,isRegExp:j6,isFunction:Gs,isStream:g6,isURLSearchParams:_6,isTypedArray:I6,isFileList:m6,forEach:ug,merge:L1,extend:T6,trim:S6,stripBOM:C6,inherits:P6,toFlatObject:E6,kindOf:$v,kindOfTest:$o,endsWith:M6,toArray:k6,forEachEntry:R6,matchAll:A6,isHTMLForm:D6,hasOwnProperty:BP,hasOwnProp:BP,reduceDescriptors:tR,freezeMethods:L6,toObjectSet:N6,toCamelCase:z6,noop:O6,toFiniteNumber:F6,findKey:JI,global:yu,isContextDefined:eR,ALPHABET:rR,generateString:B6,isSpecCompliantForm:U6,toJSONObject:V6,isAsyncFn:$6,isThenable:Z6,setImmediate:nR,asap:G6};function dr(e,t,n,s,u){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),u&&(this.response=u,this.status=u.status?u.status:null)}Je.inherits(dr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Je.toJSONObject(this.config),code:this.code,status:this.status}}});const iR=dr.prototype,sR={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{sR[e]={value:e}});Object.defineProperties(dr,sR);Object.defineProperty(iR,"isAxiosError",{value:!0});dr.from=(e,t,n,s,u,p)=>{const f=Object.create(iR);return Je.toFlatObject(e,f,function(S){return S!==Error.prototype},c=>c!=="isAxiosError"),dr.call(f,e.message,t,n,s,u),f.cause=e,f.name=e.name,p&&Object.assign(f,p),f};const H6=null;function N1(e){return Je.isPlainObject(e)||Je.isArray(e)}function oR(e){return Je.endsWith(e,"[]")?e.slice(0,-2):e}function VP(e,t,n){return e?e.concat(t).map(function(u,p){return u=oR(u),!n&&p?"["+u+"]":u}).join(n?".":""):t}function q6(e){return Je.isArray(e)&&!e.some(N1)}const W6=Je.toFlatObject(Je,{},null,function(t){return/^is[A-Z]/.test(t)});function Hv(e,t,n){if(!Je.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Je.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(B,X){return!Je.isUndefined(X[B])});const s=n.metaTokens,u=n.visitor||A,p=n.dots,f=n.indexes,S=(n.Blob||typeof Blob<"u"&&Blob)&&Je.isSpecCompliantForm(t);if(!Je.isFunction(u))throw new TypeError("visitor must be a function");function E(F){if(F===null)return"";if(Je.isDate(F))return F.toISOString();if(!S&&Je.isBlob(F))throw new dr("Blob is not supported. Use a Buffer instead.");return Je.isArrayBuffer(F)||Je.isTypedArray(F)?S&&typeof Blob=="function"?new Blob([F]):Buffer.from(F):F}function A(F,B,X){let q=F;if(F&&!X&&typeof F=="object"){if(Je.endsWith(B,"{}"))B=s?B:B.slice(0,-2),F=JSON.stringify(F);else if(Je.isArray(F)&&q6(F)||(Je.isFileList(F)||Je.endsWith(B,"[]"))&&(q=Je.toArray(F)))return B=oR(B),q.forEach(function(Y,de){!(Je.isUndefined(Y)||Y===null)&&t.append(f===!0?VP([B],de,p):f===null?B:B+"[]",E(Y))}),!1}return N1(F)?!0:(t.append(VP(X,B,p),E(F)),!1)}const z=[],L=Object.assign(W6,{defaultVisitor:A,convertValue:E,isVisitable:N1});function I(F,B){if(!Je.isUndefined(F)){if(z.indexOf(F)!==-1)throw Error("Circular reference detected in "+B.join("."));z.push(F),Je.forEach(F,function(q,V){(!(Je.isUndefined(q)||q===null)&&u.call(t,q,Je.isString(V)?V.trim():V,B,L))===!0&&I(q,B?B.concat(V):[V])}),z.pop()}}if(!Je.isObject(e))throw new TypeError("data must be an object");return I(e),t}function $P(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function S2(e,t){this._pairs=[],e&&Hv(e,this,t)}const aR=S2.prototype;aR.append=function(t,n){this._pairs.push([t,n])};aR.toString=function(t){const n=t?function(s){return t.call(this,s,$P)}:$P;return this._pairs.map(function(u){return n(u[0])+"="+n(u[1])},"").join("&")};function X6(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function lR(e,t,n){if(!t)return e;const s=n&&n.encode||X6;Je.isFunction(n)&&(n={serialize:n});const u=n&&n.serialize;let p;if(u?p=u(t,n):p=Je.isURLSearchParams(t)?t.toString():new S2(t,n).toString(s),p){const f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+p}return e}class ZP{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Je.forEach(this.handlers,function(s){s!==null&&t(s)})}}const cR={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},K6=typeof URLSearchParams<"u"?URLSearchParams:S2,Y6=typeof FormData<"u"?FormData:null,Q6=typeof Blob<"u"?Blob:null,J6={isBrowser:!0,classes:{URLSearchParams:K6,FormData:Y6,Blob:Q6},protocols:["http","https","file","blob","url","data"]},T2=typeof window<"u"&&typeof document<"u",O1=typeof navigator=="object"&&navigator||void 0,e8=T2&&(!O1||["ReactNative","NativeScript","NS"].indexOf(O1.product)<0),t8=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",r8=T2&&window.location.href||"http://localhost",n8=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:T2,hasStandardBrowserEnv:e8,hasStandardBrowserWebWorkerEnv:t8,navigator:O1,origin:r8},Symbol.toStringTag,{value:"Module"})),Gi={...n8,...J6};function i8(e,t){return Hv(e,new Gi.classes.URLSearchParams,Object.assign({visitor:function(n,s,u,p){return Gi.isNode&&Je.isBuffer(n)?(this.append(s,n.toString("base64")),!1):p.defaultVisitor.apply(this,arguments)}},t))}function s8(e){return Je.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function o8(e){const t={},n=Object.keys(e);let s;const u=n.length;let p;for(s=0;s<u;s++)p=n[s],t[p]=e[p];return t}function uR(e){function t(n,s,u,p){let f=n[p++];if(f==="__proto__")return!0;const c=Number.isFinite(+f),S=p>=n.length;return f=!f&&Je.isArray(u)?u.length:f,S?(Je.hasOwnProp(u,f)?u[f]=[u[f],s]:u[f]=s,!c):((!u[f]||!Je.isObject(u[f]))&&(u[f]=[]),t(n,s,u[f],p)&&Je.isArray(u[f])&&(u[f]=o8(u[f])),!c)}if(Je.isFormData(e)&&Je.isFunction(e.entries)){const n={};return Je.forEachEntry(e,(s,u)=>{t(s8(s),u,n,0)}),n}return null}function a8(e,t,n){if(Je.isString(e))try{return(t||JSON.parse)(e),Je.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(0,JSON.stringify)(e)}const dg={transitional:cR,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",u=s.indexOf("application/json")>-1,p=Je.isObject(t);if(p&&Je.isHTMLForm(t)&&(t=new FormData(t)),Je.isFormData(t))return u?JSON.stringify(uR(t)):t;if(Je.isArrayBuffer(t)||Je.isBuffer(t)||Je.isStream(t)||Je.isFile(t)||Je.isBlob(t)||Je.isReadableStream(t))return t;if(Je.isArrayBufferView(t))return t.buffer;if(Je.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(p){if(s.indexOf("application/x-www-form-urlencoded")>-1)return i8(t,this.formSerializer).toString();if((c=Je.isFileList(t))||s.indexOf("multipart/form-data")>-1){const S=this.env&&this.env.FormData;return Hv(c?{"files[]":t}:t,S&&new S,this.formSerializer)}}return p||u?(n.setContentType("application/json",!1),a8(t)):t}],transformResponse:[function(t){const n=this.transitional||dg.transitional,s=n&&n.forcedJSONParsing,u=this.responseType==="json";if(Je.isResponse(t)||Je.isReadableStream(t))return t;if(t&&Je.isString(t)&&(s&&!this.responseType||u)){const f=!(n&&n.silentJSONParsing)&&u;try{return JSON.parse(t)}catch(c){if(f)throw c.name==="SyntaxError"?dr.from(c,dr.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gi.classes.FormData,Blob:Gi.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Je.forEach(["delete","get","head","post","put","patch"],e=>{dg.headers[e]={}});const l8=Je.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),c8=e=>{const t={};let n,s,u;return e&&e.split(`
`).forEach(function(f){u=f.indexOf(":"),n=f.substring(0,u).trim().toLowerCase(),s=f.substring(u+1).trim(),!(!n||t[n]&&l8[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},GP=Symbol("internals");function $f(e){return e&&String(e).trim().toLowerCase()}function g_(e){return e===!1||e==null?e:Je.isArray(e)?e.map(g_):String(e)}function u8(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const d8=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function mb(e,t,n,s,u){if(Je.isFunction(s))return s.call(this,t,n);if(u&&(t=n),!!Je.isString(t)){if(Je.isString(s))return t.indexOf(s)!==-1;if(Je.isRegExp(s))return s.test(t)}}function h8(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function p8(e,t){const n=Je.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(u,p,f){return this[s].call(this,t,u,p,f)},configurable:!0})})}class ws{constructor(t){t&&this.set(t)}set(t,n,s){const u=this;function p(c,S,E){const A=$f(S);if(!A)throw new Error("header name must be a non-empty string");const z=Je.findKey(u,A);(!z||u[z]===void 0||E===!0||E===void 0&&u[z]!==!1)&&(u[z||S]=g_(c))}const f=(c,S)=>Je.forEach(c,(E,A)=>p(E,A,S));if(Je.isPlainObject(t)||t instanceof this.constructor)f(t,n);else if(Je.isString(t)&&(t=t.trim())&&!d8(t))f(c8(t),n);else if(Je.isHeaders(t))for(const[c,S]of t.entries())p(S,c,s);else t!=null&&p(n,t,s);return this}get(t,n){if(t=$f(t),t){const s=Je.findKey(this,t);if(s){const u=this[s];if(!n)return u;if(n===!0)return u8(u);if(Je.isFunction(n))return n.call(this,u,s);if(Je.isRegExp(n))return n.exec(u);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=$f(t),t){const s=Je.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||mb(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let u=!1;function p(f){if(f=$f(f),f){const c=Je.findKey(s,f);c&&(!n||mb(s,s[c],c,n))&&(delete s[c],u=!0)}}return Je.isArray(t)?t.forEach(p):p(t),u}clear(t){const n=Object.keys(this);let s=n.length,u=!1;for(;s--;){const p=n[s];(!t||mb(this,this[p],p,t,!0))&&(delete this[p],u=!0)}return u}normalize(t){const n=this,s={};return Je.forEach(this,(u,p)=>{const f=Je.findKey(s,p);if(f){n[f]=g_(u),delete n[p];return}const c=t?h8(p):String(p).trim();c!==p&&delete n[p],n[c]=g_(u),s[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Je.forEach(this,(s,u)=>{s!=null&&s!==!1&&(n[u]=t&&Je.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(u=>s.set(u)),s}static accessor(t){const s=(this[GP]=this[GP]={accessors:{}}).accessors,u=this.prototype;function p(f){const c=$f(f);s[c]||(p8(u,f),s[c]=!0)}return Je.isArray(t)?t.forEach(p):p(t),this}}ws.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Je.reduceDescriptors(ws.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});Je.freezeMethods(ws);function gb(e,t){const n=this||dg,s=t||n,u=ws.from(s.headers);let p=s.data;return Je.forEach(e,function(c){p=c.call(n,p,u.normalize(),t?t.status:void 0)}),u.normalize(),p}function dR(e){return!!(e&&e.__CANCEL__)}function np(e,t,n){dr.call(this,e??"canceled",dr.ERR_CANCELED,t,n),this.name="CanceledError"}Je.inherits(np,dr,{__CANCEL__:!0});function hR(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new dr("Request failed with status code "+n.status,[dr.ERR_BAD_REQUEST,dr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function f8(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function m8(e,t){e=e||10;const n=new Array(e),s=new Array(e);let u=0,p=0,f;return t=t!==void 0?t:1e3,function(S){const E=Date.now(),A=s[p];f||(f=E),n[u]=S,s[u]=E;let z=p,L=0;for(;z!==u;)L+=n[z++],z=z%e;if(u=(u+1)%e,u===p&&(p=(p+1)%e),E-f<t)return;const I=A&&E-A;return I?Math.round(L*1e3/I):void 0}}function g8(e,t){let n=0,s=1e3/t,u,p;const f=(E,A=Date.now())=>{n=A,u=null,p&&(clearTimeout(p),p=null),e.apply(null,E)};return[(...E)=>{const A=Date.now(),z=A-n;z>=s?f(E,A):(u=E,p||(p=setTimeout(()=>{p=null,f(u)},s-z)))},()=>u&&f(u)]}const sv=(e,t,n=3)=>{let s=0;const u=m8(50,250);return g8(p=>{const f=p.loaded,c=p.lengthComputable?p.total:void 0,S=f-s,E=u(S),A=f<=c;s=f;const z={loaded:f,total:c,progress:c?f/c:void 0,bytes:S,rate:E||void 0,estimated:E&&c&&A?(c-f)/E:void 0,event:p,lengthComputable:c!=null,[t?"download":"upload"]:!0};e(z)},n)},HP=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},qP=e=>(...t)=>Je.asap(()=>e(...t)),y8=Gi.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Gi.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Gi.origin),Gi.navigator&&/(msie|trident)/i.test(Gi.navigator.userAgent)):()=>!0,_8=Gi.hasStandardBrowserEnv?{write(e,t,n,s,u,p){const f=[e+"="+encodeURIComponent(t)];Je.isNumber(n)&&f.push("expires="+new Date(n).toGMTString()),Je.isString(s)&&f.push("path="+s),Je.isString(u)&&f.push("domain="+u),p===!0&&f.push("secure"),document.cookie=f.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function v8(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function x8(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function pR(e,t){return e&&!v8(t)?x8(e,t):t}const WP=e=>e instanceof ws?{...e}:e;function Ou(e,t){t=t||{};const n={};function s(E,A,z,L){return Je.isPlainObject(E)&&Je.isPlainObject(A)?Je.merge.call({caseless:L},E,A):Je.isPlainObject(A)?Je.merge({},A):Je.isArray(A)?A.slice():A}function u(E,A,z,L){if(Je.isUndefined(A)){if(!Je.isUndefined(E))return s(void 0,E,z,L)}else return s(E,A,z,L)}function p(E,A){if(!Je.isUndefined(A))return s(void 0,A)}function f(E,A){if(Je.isUndefined(A)){if(!Je.isUndefined(E))return s(void 0,E)}else return s(void 0,A)}function c(E,A,z){if(z in t)return s(E,A);if(z in e)return s(void 0,E)}const S={url:p,method:p,data:p,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:c,headers:(E,A,z)=>u(WP(E),WP(A),z,!0)};return Je.forEach(Object.keys(Object.assign({},e,t)),function(A){const z=S[A]||u,L=z(e[A],t[A],A);Je.isUndefined(L)&&z!==c||(n[A]=L)}),n}const fR=e=>{const t=Ou({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:u,xsrfCookieName:p,headers:f,auth:c}=t;t.headers=f=ws.from(f),t.url=lR(pR(t.baseURL,t.url),e.params,e.paramsSerializer),c&&f.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let S;if(Je.isFormData(n)){if(Gi.hasStandardBrowserEnv||Gi.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if((S=f.getContentType())!==!1){const[E,...A]=S?S.split(";").map(z=>z.trim()).filter(Boolean):[];f.setContentType([E||"multipart/form-data",...A].join("; "))}}if(Gi.hasStandardBrowserEnv&&(s&&Je.isFunction(s)&&(s=s(t)),s||s!==!1&&y8(t.url))){const E=u&&p&&_8.read(p);E&&f.set(u,E)}return t},b8=typeof XMLHttpRequest<"u",w8=b8&&function(e){return new Promise(function(n,s){const u=fR(e);let p=u.data;const f=ws.from(u.headers).normalize();let{responseType:c,onUploadProgress:S,onDownloadProgress:E}=u,A,z,L,I,F;function B(){I&&I(),F&&F(),u.cancelToken&&u.cancelToken.unsubscribe(A),u.signal&&u.signal.removeEventListener("abort",A)}let X=new XMLHttpRequest;X.open(u.method.toUpperCase(),u.url,!0),X.timeout=u.timeout;function q(){if(!X)return;const Y=ws.from("getAllResponseHeaders"in X&&X.getAllResponseHeaders()),Se={data:!c||c==="text"||c==="json"?X.responseText:X.response,status:X.status,statusText:X.statusText,headers:Y,config:e,request:X};hR(function(Re){n(Re),B()},function(Re){s(Re),B()},Se),X=null}"onloadend"in X?X.onloadend=q:X.onreadystatechange=function(){!X||X.readyState!==4||X.status===0&&!(X.responseURL&&X.responseURL.indexOf("file:")===0)||setTimeout(q)},X.onabort=function(){X&&(s(new dr("Request aborted",dr.ECONNABORTED,e,X)),X=null)},X.onerror=function(){s(new dr("Network Error",dr.ERR_NETWORK,e,X)),X=null},X.ontimeout=function(){let de=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded";const Se=u.transitional||cR;u.timeoutErrorMessage&&(de=u.timeoutErrorMessage),s(new dr(de,Se.clarifyTimeoutError?dr.ETIMEDOUT:dr.ECONNABORTED,e,X)),X=null},p===void 0&&f.setContentType(null),"setRequestHeader"in X&&Je.forEach(f.toJSON(),function(de,Se){X.setRequestHeader(Se,de)}),Je.isUndefined(u.withCredentials)||(X.withCredentials=!!u.withCredentials),c&&c!=="json"&&(X.responseType=u.responseType),E&&([L,F]=sv(E,!0),X.addEventListener("progress",L)),S&&X.upload&&([z,I]=sv(S),X.upload.addEventListener("progress",z),X.upload.addEventListener("loadend",I)),(u.cancelToken||u.signal)&&(A=Y=>{X&&(s(!Y||Y.type?new np(null,e,X):Y),X.abort(),X=null)},u.cancelToken&&u.cancelToken.subscribe(A),u.signal&&(u.signal.aborted?A():u.signal.addEventListener("abort",A)));const V=f8(u.url);if(V&&Gi.protocols.indexOf(V)===-1){s(new dr("Unsupported protocol "+V+":",dr.ERR_BAD_REQUEST,e));return}X.send(p||null)})},S8=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let s=new AbortController,u;const p=function(E){if(!u){u=!0,c();const A=E instanceof Error?E:this.reason;s.abort(A instanceof dr?A:new np(A instanceof Error?A.message:A))}};let f=t&&setTimeout(()=>{f=null,p(new dr(`timeout ${t} of ms exceeded`,dr.ETIMEDOUT))},t);const c=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(E=>{E.unsubscribe?E.unsubscribe(p):E.removeEventListener("abort",p)}),e=null)};e.forEach(E=>E.addEventListener("abort",p));const{signal:S}=s;return S.unsubscribe=()=>Je.asap(c),S}},T8=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let s=0,u;for(;s<n;)u=s+t,yield e.slice(s,u),s=u},C8=async function*(e,t){for await(const n of P8(e))yield*T8(n,t)},P8=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:s}=await t.read();if(n)break;yield s}}finally{await t.cancel()}},XP=(e,t,n,s)=>{const u=C8(e,t);let p=0,f,c=S=>{f||(f=!0,s&&s(S))};return new ReadableStream({async pull(S){try{const{done:E,value:A}=await u.next();if(E){c(),S.close();return}let z=A.byteLength;if(n){let L=p+=z;n(L)}S.enqueue(new Uint8Array(A))}catch(E){throw c(E),E}},cancel(S){return c(S),u.return()}},{highWaterMark:2})},qv=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",mR=qv&&typeof ReadableStream=="function",E8=qv&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),gR=(e,...t)=>{try{return!!e(...t)}catch{return!1}},M8=mR&&gR(()=>{let e=!1;const t=new Request(Gi.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),KP=64*1024,F1=mR&&gR(()=>Je.isReadableStream(new Response("").body)),ov={stream:F1&&(e=>e.body)};qv&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ov[t]&&(ov[t]=Je.isFunction(e[t])?n=>n[t]():(n,s)=>{throw new dr(`Response type '${t}' is not supported`,dr.ERR_NOT_SUPPORT,s)})})})(new Response);const k8=async e=>{if(e==null)return 0;if(Je.isBlob(e))return e.size;if(Je.isSpecCompliantForm(e))return(await new Request(Gi.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Je.isArrayBufferView(e)||Je.isArrayBuffer(e))return e.byteLength;if(Je.isURLSearchParams(e)&&(e=e+""),Je.isString(e))return(await E8(e)).byteLength},I8=async(e,t)=>{const n=Je.toFiniteNumber(e.getContentLength());return n??k8(t)},R8=qv&&(async e=>{let{url:t,method:n,data:s,signal:u,cancelToken:p,timeout:f,onDownloadProgress:c,onUploadProgress:S,responseType:E,headers:A,withCredentials:z="same-origin",fetchOptions:L}=fR(e);E=E?(E+"").toLowerCase():"text";let I=S8([u,p&&p.toAbortSignal()],f),F;const B=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let X;try{if(S&&M8&&n!=="get"&&n!=="head"&&(X=await I8(A,s))!==0){let Se=new Request(t,{method:"POST",body:s,duplex:"half"}),ce;if(Je.isFormData(s)&&(ce=Se.headers.get("content-type"))&&A.setContentType(ce),Se.body){const[Re,Ie]=HP(X,sv(qP(S)));s=XP(Se.body,KP,Re,Ie)}}Je.isString(z)||(z=z?"include":"omit");const q="credentials"in Request.prototype;F=new Request(t,{...L,signal:I,method:n.toUpperCase(),headers:A.normalize().toJSON(),body:s,duplex:"half",credentials:q?z:void 0});let V=await fetch(F);const Y=F1&&(E==="stream"||E==="response");if(F1&&(c||Y&&B)){const Se={};["status","statusText","headers"].forEach(We=>{Se[We]=V[We]});const ce=Je.toFiniteNumber(V.headers.get("content-length")),[Re,Ie]=c&&HP(ce,sv(qP(c),!0))||[];V=new Response(XP(V.body,KP,Re,()=>{Ie&&Ie(),B&&B()}),Se)}E=E||"text";let de=await ov[Je.findKey(ov,E)||"text"](V,e);return!Y&&B&&B(),await new Promise((Se,ce)=>{hR(Se,ce,{data:de,headers:ws.from(V.headers),status:V.status,statusText:V.statusText,config:e,request:F})})}catch(q){throw B&&B(),q&&q.name==="TypeError"&&/fetch/i.test(q.message)?Object.assign(new dr("Network Error",dr.ERR_NETWORK,e,F),{cause:q.cause||q}):dr.from(q,q&&q.code,e,F)}}),B1={http:H6,xhr:w8,fetch:R8};Je.forEach(B1,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const YP=e=>`- ${e}`,A8=e=>Je.isFunction(e)||e===null||e===!1,yR={getAdapter:e=>{e=Je.isArray(e)?e:[e];const{length:t}=e;let n,s;const u={};for(let p=0;p<t;p++){n=e[p];let f;if(s=n,!A8(n)&&(s=B1[(f=String(n)).toLowerCase()],s===void 0))throw new dr(`Unknown adapter '${f}'`);if(s)break;u[f||"#"+p]=s}if(!s){const p=Object.entries(u).map(([c,S])=>`adapter ${c} `+(S===!1?"is not supported by the environment":"is not available in the build"));let f=t?p.length>1?`since :
`+p.map(YP).join(`
`):" "+YP(p[0]):"as no adapter specified";throw new dr("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return s},adapters:B1};function yb(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new np(null,e)}function QP(e){return yb(e),e.headers=ws.from(e.headers),e.data=gb.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),yR.getAdapter(e.adapter||dg.adapter)(e).then(function(s){return yb(e),s.data=gb.call(e,e.transformResponse,s),s.headers=ws.from(s.headers),s},function(s){return dR(s)||(yb(e),s&&s.response&&(s.response.data=gb.call(e,e.transformResponse,s.response),s.response.headers=ws.from(s.response.headers))),Promise.reject(s)})}const _R="1.7.9",Wv={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Wv[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const JP={};Wv.transitional=function(t,n,s){function u(p,f){return"[Axios v"+_R+"] Transitional option '"+p+"'"+f+(s?". "+s:"")}return(p,f,c)=>{if(t===!1)throw new dr(u(f," has been removed"+(n?" in "+n:"")),dr.ERR_DEPRECATED);return n&&!JP[f]&&(JP[f]=!0,console.warn(u(f," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(p,f,c):!0}};Wv.spelling=function(t){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function D8(e,t,n){if(typeof e!="object")throw new dr("options must be an object",dr.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let u=s.length;for(;u-- >0;){const p=s[u],f=t[p];if(f){const c=e[p],S=c===void 0||f(c,p,e);if(S!==!0)throw new dr("option "+p+" must be "+S,dr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new dr("Unknown option "+p,dr.ERR_BAD_OPTION)}}const y_={assertOptions:D8,validators:Wv},Jo=y_.validators;class Mu{constructor(t){this.defaults=t,this.interceptors={request:new ZP,response:new ZP}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let u={};Error.captureStackTrace?Error.captureStackTrace(u):u=new Error;const p=u.stack?u.stack.replace(/^.+\n/,""):"";try{s.stack?p&&!String(s.stack).endsWith(p.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+p):s.stack=p}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Ou(this.defaults,n);const{transitional:s,paramsSerializer:u,headers:p}=n;s!==void 0&&y_.assertOptions(s,{silentJSONParsing:Jo.transitional(Jo.boolean),forcedJSONParsing:Jo.transitional(Jo.boolean),clarifyTimeoutError:Jo.transitional(Jo.boolean)},!1),u!=null&&(Je.isFunction(u)?n.paramsSerializer={serialize:u}:y_.assertOptions(u,{encode:Jo.function,serialize:Jo.function},!0)),y_.assertOptions(n,{baseUrl:Jo.spelling("baseURL"),withXsrfToken:Jo.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let f=p&&Je.merge(p.common,p[n.method]);p&&Je.forEach(["delete","get","head","post","put","patch","common"],F=>{delete p[F]}),n.headers=ws.concat(f,p);const c=[];let S=!0;this.interceptors.request.forEach(function(B){typeof B.runWhen=="function"&&B.runWhen(n)===!1||(S=S&&B.synchronous,c.unshift(B.fulfilled,B.rejected))});const E=[];this.interceptors.response.forEach(function(B){E.push(B.fulfilled,B.rejected)});let A,z=0,L;if(!S){const F=[QP.bind(this),void 0];for(F.unshift.apply(F,c),F.push.apply(F,E),L=F.length,A=Promise.resolve(n);z<L;)A=A.then(F[z++],F[z++]);return A}L=c.length;let I=n;for(z=0;z<L;){const F=c[z++],B=c[z++];try{I=F(I)}catch(X){B.call(this,X);break}}try{A=QP.call(this,I)}catch(F){return Promise.reject(F)}for(z=0,L=E.length;z<L;)A=A.then(E[z++],E[z++]);return A}getUri(t){t=Ou(this.defaults,t);const n=pR(t.baseURL,t.url);return lR(n,t.params,t.paramsSerializer)}}Je.forEach(["delete","get","head","options"],function(t){Mu.prototype[t]=function(n,s){return this.request(Ou(s||{},{method:t,url:n,data:(s||{}).data}))}});Je.forEach(["post","put","patch"],function(t){function n(s){return function(p,f,c){return this.request(Ou(c||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:p,data:f}))}}Mu.prototype[t]=n(),Mu.prototype[t+"Form"]=n(!0)});class C2{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(p){n=p});const s=this;this.promise.then(u=>{if(!s._listeners)return;let p=s._listeners.length;for(;p-- >0;)s._listeners[p](u);s._listeners=null}),this.promise.then=u=>{let p;const f=new Promise(c=>{s.subscribe(c),p=c}).then(u);return f.cancel=function(){s.unsubscribe(p)},f},t(function(p,f,c){s.reason||(s.reason=new np(p,f,c),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=s=>{t.abort(s)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new C2(function(u){t=u}),cancel:t}}}function z8(e){return function(n){return e.apply(null,n)}}function j8(e){return Je.isObject(e)&&e.isAxiosError===!0}const U1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(U1).forEach(([e,t])=>{U1[t]=e});function vR(e){const t=new Mu(e),n=KI(Mu.prototype.request,t);return Je.extend(n,Mu.prototype,t,{allOwnKeys:!0}),Je.extend(n,t,null,{allOwnKeys:!0}),n.create=function(u){return vR(Ou(e,u))},n}const xr=vR(dg);xr.Axios=Mu;xr.CanceledError=np;xr.CancelToken=C2;xr.isCancel=dR;xr.VERSION=_R;xr.toFormData=Hv;xr.AxiosError=dr;xr.Cancel=xr.CanceledError;xr.all=function(t){return Promise.all(t)};xr.spread=z8;xr.isAxiosError=j8;xr.mergeConfig=Ou;xr.AxiosHeaders=ws;xr.formToJSON=e=>uR(Je.isHTMLForm(e)?new FormData(e):e);xr.getAdapter=yR.getAdapter;xr.HttpStatusCode=U1;xr.default=xr;var L8=e=>{switch(e){case"success":return F8;case"info":return U8;case"warning":return B8;case"error":return V8;default:return null}},N8=Array(12).fill(0),O8=({visible:e,className:t})=>xt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},xt.createElement("div",{className:"sonner-spinner"},N8.map((n,s)=>xt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),F8=xt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},xt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),B8=xt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},xt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),U8=xt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},xt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),V8=xt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},xt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),$8=xt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},xt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),xt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Z8=()=>{let[e,t]=xt.useState(document.hidden);return xt.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},V1=1,G8=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...s}=e,u=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:V1++,p=this.toasts.find(c=>c.id===u),f=e.dismissible===void 0?!0:e.dismissible;return p?this.toasts=this.toasts.map(c=>c.id===u?(this.publish({...c,...e,id:u,title:n}),{...c,...e,id:u,dismissible:f,title:n}):c):this.addToast({title:n,...s,dismissible:f,id:u}),u},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),u=n!==void 0,p,f=s.then(async S=>{if(p=["resolve",S],xt.isValidElement(S))u=!1,this.create({id:n,type:"default",message:S});else if(q8(S)&&!S.ok){u=!1;let E=typeof t.error=="function"?await t.error(`HTTP error! status: ${S.status}`):t.error,A=typeof t.description=="function"?await t.description(`HTTP error! status: ${S.status}`):t.description;this.create({id:n,type:"error",message:E,description:A})}else if(t.success!==void 0){u=!1;let E=typeof t.success=="function"?await t.success(S):t.success,A=typeof t.description=="function"?await t.description(S):t.description;this.create({id:n,type:"success",message:E,description:A})}}).catch(async S=>{if(p=["reject",S],t.error!==void 0){u=!1;let E=typeof t.error=="function"?await t.error(S):t.error,A=typeof t.description=="function"?await t.description(S):t.description;this.create({id:n,type:"error",message:E,description:A})}}).finally(()=>{var S;u&&(this.dismiss(n),n=void 0),(S=t.finally)==null||S.call(t)}),c=()=>new Promise((S,E)=>f.then(()=>p[0]==="reject"?E(p[1]):S(p[1])).catch(E));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||V1++;return this.create({jsx:e(n),id:n,...t}),n},this.subscribers=[],this.toasts=[]}},Os=new G8,H8=(e,t)=>{let n=(t==null?void 0:t.id)||V1++;return Os.addToast({title:e,...t,id:n}),n},q8=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",W8=H8,X8=()=>Os.toasts,_n=Object.assign(W8,{success:Os.success,info:Os.info,warning:Os.warning,error:Os.error,custom:Os.custom,message:Os.message,promise:Os.promise,dismiss:Os.dismiss,loading:Os.loading},{getHistory:X8});function K8(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&n.firstChild?n.insertBefore(s,n.firstChild):n.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}K8(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function qy(e){return e.label!==void 0}var Y8=3,Q8="32px",eE=4e3,J8=356,eU=14,tU=20,rU=200;function nU(...e){return e.filter(Boolean).join(" ")}var iU=e=>{var t,n,s,u,p,f,c,S,E,A,z;let{invert:L,toast:I,unstyled:F,interacting:B,setHeights:X,visibleToasts:q,heights:V,index:Y,toasts:de,expanded:Se,removeToast:ce,defaultRichColors:Re,closeButton:Ie,style:We,cancelButtonStyle:tt,actionButtonStyle:vt,className:st="",descriptionClassName:Tt="",duration:_t,position:Kt,gap:ct,loadingIcon:Pt,expandByDefault:Xe,classNames:Oe,icons:at,closeButtonAriaLabel:Et="Close toast",pauseWhenPageIsHidden:wt,cn:Lt}=e,[It,Wt]=xt.useState(!1),[tr,gt]=xt.useState(!1),[or,Yt]=xt.useState(!1),[ir,At]=xt.useState(!1),[Zt,Lr]=xt.useState(!1),[vr,Qr]=xt.useState(0),[ei,fn]=xt.useState(0),$n=xt.useRef(I.duration||_t||eE),Zn=xt.useRef(null),mn=xt.useRef(null),Ss=Y===0,Ts=Y+1<=q,Nr=I.type,Gn=I.dismissible!==!1,ds=I.className||"",_i=I.descriptionClassName||"",bn=xt.useMemo(()=>V.findIndex(ve=>ve.toastId===I.id)||0,[V,I.id]),wn=xt.useMemo(()=>{var ve;return(ve=I.closeButton)!=null?ve:Ie},[I.closeButton,Ie]);xt.useMemo(()=>I.duration||_t||eE,[I.duration,_t]);let Ii=xt.useRef(0),kn=xt.useRef(0),Cs=xt.useRef(0),In=xt.useRef(null),[Ps,Wi]=Kt.split("-"),se=xt.useMemo(()=>V.reduce((ve,Ae,we)=>we>=bn?ve:ve+Ae.height,0),[V,bn]),Q=Z8(),te=I.invert||L,re=Nr==="loading";kn.current=xt.useMemo(()=>bn*ct+se,[bn,se]),xt.useEffect(()=>{Wt(!0)},[]),xt.useEffect(()=>{let ve=mn.current;if(ve){let Ae=ve.getBoundingClientRect().height;return fn(Ae),X(we=>[{toastId:I.id,height:Ae,position:I.position},...we]),()=>X(we=>we.filter(Ve=>Ve.toastId!==I.id))}},[X,I.id]),xt.useLayoutEffect(()=>{if(!It)return;let ve=mn.current,Ae=ve.style.height;ve.style.height="auto";let we=ve.getBoundingClientRect().height;ve.style.height=Ae,fn(we),X(Ve=>Ve.find(Be=>Be.toastId===I.id)?Ve.map(Be=>Be.toastId===I.id?{...Be,height:we}:Be):[{toastId:I.id,height:we,position:I.position},...Ve])},[It,I.title,I.description,X,I.id]);let pe=xt.useCallback(()=>{gt(!0),Qr(kn.current),X(ve=>ve.filter(Ae=>Ae.toastId!==I.id)),setTimeout(()=>{ce(I)},rU)},[I,ce,X,kn]);xt.useEffect(()=>{if(I.promise&&Nr==="loading"||I.duration===1/0||I.type==="loading")return;let ve;return Se||B||wt&&Q?(()=>{if(Cs.current<Ii.current){let Ae=new Date().getTime()-Ii.current;$n.current=$n.current-Ae}Cs.current=new Date().getTime()})():$n.current!==1/0&&(Ii.current=new Date().getTime(),ve=setTimeout(()=>{var Ae;(Ae=I.onAutoClose)==null||Ae.call(I,I),pe()},$n.current)),()=>clearTimeout(ve)},[Se,B,I,Nr,wt,Q,pe]),xt.useEffect(()=>{I.delete&&pe()},[pe,I.delete]);function Te(){var ve,Ae,we;return at!=null&&at.loading?xt.createElement("div",{className:Lt(Oe==null?void 0:Oe.loader,(ve=I==null?void 0:I.classNames)==null?void 0:ve.loader,"sonner-loader"),"data-visible":Nr==="loading"},at.loading):Pt?xt.createElement("div",{className:Lt(Oe==null?void 0:Oe.loader,(Ae=I==null?void 0:I.classNames)==null?void 0:Ae.loader,"sonner-loader"),"data-visible":Nr==="loading"},Pt):xt.createElement(O8,{className:Lt(Oe==null?void 0:Oe.loader,(we=I==null?void 0:I.classNames)==null?void 0:we.loader),visible:Nr==="loading"})}return xt.createElement("li",{tabIndex:0,ref:mn,className:Lt(st,ds,Oe==null?void 0:Oe.toast,(t=I==null?void 0:I.classNames)==null?void 0:t.toast,Oe==null?void 0:Oe.default,Oe==null?void 0:Oe[Nr],(n=I==null?void 0:I.classNames)==null?void 0:n[Nr]),"data-sonner-toast":"","data-rich-colors":(s=I.richColors)!=null?s:Re,"data-styled":!(I.jsx||I.unstyled||F),"data-mounted":It,"data-promise":!!I.promise,"data-swiped":Zt,"data-removed":tr,"data-visible":Ts,"data-y-position":Ps,"data-x-position":Wi,"data-index":Y,"data-front":Ss,"data-swiping":or,"data-dismissible":Gn,"data-type":Nr,"data-invert":te,"data-swipe-out":ir,"data-expanded":!!(Se||Xe&&It),style:{"--index":Y,"--toasts-before":Y,"--z-index":de.length-Y,"--offset":`${tr?vr:kn.current}px`,"--initial-height":Xe?"auto":`${ei}px`,...We,...I.style},onPointerDown:ve=>{re||!Gn||(Zn.current=new Date,Qr(kn.current),ve.target.setPointerCapture(ve.pointerId),ve.target.tagName!=="BUTTON"&&(Yt(!0),In.current={x:ve.clientX,y:ve.clientY}))},onPointerUp:()=>{var ve,Ae,we,Ve;if(ir||!Gn)return;In.current=null;let Be=Number(((ve=mn.current)==null?void 0:ve.style.getPropertyValue("--swipe-amount").replace("px",""))||0),ze=new Date().getTime()-((Ae=Zn.current)==null?void 0:Ae.getTime()),Ee=Math.abs(Be)/ze;if(Math.abs(Be)>=tU||Ee>.11){Qr(kn.current),(we=I.onDismiss)==null||we.call(I,I),pe(),At(!0),Lr(!1);return}(Ve=mn.current)==null||Ve.style.setProperty("--swipe-amount","0px"),Yt(!1)},onPointerMove:ve=>{var Ae,we;if(!In.current||!Gn)return;let Ve=ve.clientY-In.current.y,Be=((Ae=window.getSelection())==null?void 0:Ae.toString().length)>0,ze=Ps==="top"?Math.min(0,Ve):Math.max(0,Ve);Math.abs(ze)>0&&Lr(!0),!Be&&((we=mn.current)==null||we.style.setProperty("--swipe-amount",`${ze}px`))}},wn&&!I.jsx?xt.createElement("button",{"aria-label":Et,"data-disabled":re,"data-close-button":!0,onClick:re||!Gn?()=>{}:()=>{var ve;pe(),(ve=I.onDismiss)==null||ve.call(I,I)},className:Lt(Oe==null?void 0:Oe.closeButton,(u=I==null?void 0:I.classNames)==null?void 0:u.closeButton)},(p=at==null?void 0:at.close)!=null?p:$8):null,I.jsx||xt.isValidElement(I.title)?I.jsx?I.jsx:typeof I.title=="function"?I.title():I.title:xt.createElement(xt.Fragment,null,Nr||I.icon||I.promise?xt.createElement("div",{"data-icon":"",className:Lt(Oe==null?void 0:Oe.icon,(f=I==null?void 0:I.classNames)==null?void 0:f.icon)},I.promise||I.type==="loading"&&!I.icon?I.icon||Te():null,I.type!=="loading"?I.icon||(at==null?void 0:at[Nr])||L8(Nr):null):null,xt.createElement("div",{"data-content":"",className:Lt(Oe==null?void 0:Oe.content,(c=I==null?void 0:I.classNames)==null?void 0:c.content)},xt.createElement("div",{"data-title":"",className:Lt(Oe==null?void 0:Oe.title,(S=I==null?void 0:I.classNames)==null?void 0:S.title)},typeof I.title=="function"?I.title():I.title),I.description?xt.createElement("div",{"data-description":"",className:Lt(Tt,_i,Oe==null?void 0:Oe.description,(E=I==null?void 0:I.classNames)==null?void 0:E.description)},typeof I.description=="function"?I.description():I.description):null),xt.isValidElement(I.cancel)?I.cancel:I.cancel&&qy(I.cancel)?xt.createElement("button",{"data-button":!0,"data-cancel":!0,style:I.cancelButtonStyle||tt,onClick:ve=>{var Ae,we;qy(I.cancel)&&Gn&&((we=(Ae=I.cancel).onClick)==null||we.call(Ae,ve),pe())},className:Lt(Oe==null?void 0:Oe.cancelButton,(A=I==null?void 0:I.classNames)==null?void 0:A.cancelButton)},I.cancel.label):null,xt.isValidElement(I.action)?I.action:I.action&&qy(I.action)?xt.createElement("button",{"data-button":!0,"data-action":!0,style:I.actionButtonStyle||vt,onClick:ve=>{var Ae,we;qy(I.action)&&((we=(Ae=I.action).onClick)==null||we.call(Ae,ve),!ve.defaultPrevented&&pe())},className:Lt(Oe==null?void 0:Oe.actionButton,(z=I==null?void 0:I.classNames)==null?void 0:z.actionButton)},I.action.label):null))};function tE(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var sU=N.forwardRef(function(e,t){let{invert:n,position:s="bottom-right",hotkey:u=["altKey","KeyT"],expand:p,closeButton:f,className:c,offset:S,theme:E="light",richColors:A,duration:z,style:L,visibleToasts:I=Y8,toastOptions:F,dir:B=tE(),gap:X=eU,loadingIcon:q,icons:V,containerAriaLabel:Y="Notifications",pauseWhenPageIsHidden:de,cn:Se=nU}=e,[ce,Re]=xt.useState([]),Ie=xt.useMemo(()=>Array.from(new Set([s].concat(ce.filter(wt=>wt.position).map(wt=>wt.position)))),[ce,s]),[We,tt]=xt.useState([]),[vt,st]=xt.useState(!1),[Tt,_t]=xt.useState(!1),[Kt,ct]=xt.useState(E!=="system"?E:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Pt=xt.useRef(null),Xe=u.join("+").replace(/Key/g,"").replace(/Digit/g,""),Oe=xt.useRef(null),at=xt.useRef(!1),Et=xt.useCallback(wt=>{Re(Lt=>{var It;return(It=Lt.find(Wt=>Wt.id===wt.id))!=null&&It.delete||Os.dismiss(wt.id),Lt.filter(({id:Wt})=>Wt!==wt.id)})},[]);return xt.useEffect(()=>Os.subscribe(wt=>{if(wt.dismiss){Re(Lt=>Lt.map(It=>It.id===wt.id?{...It,delete:!0}:It));return}setTimeout(()=>{m2.flushSync(()=>{Re(Lt=>{let It=Lt.findIndex(Wt=>Wt.id===wt.id);return It!==-1?[...Lt.slice(0,It),{...Lt[It],...wt},...Lt.slice(It+1)]:[wt,...Lt]})})})}),[]),xt.useEffect(()=>{if(E!=="system"){ct(E);return}if(E==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ct("dark"):ct("light")),typeof window>"u")return;let wt=window.matchMedia("(prefers-color-scheme: dark)");try{wt.addEventListener("change",({matches:Lt})=>{ct(Lt?"dark":"light")})}catch{wt.addListener(({matches:It})=>{try{ct(It?"dark":"light")}catch(Wt){console.error(Wt)}})}},[E]),xt.useEffect(()=>{ce.length<=1&&st(!1)},[ce]),xt.useEffect(()=>{let wt=Lt=>{var It,Wt;u.every(tr=>Lt[tr]||Lt.code===tr)&&(st(!0),(It=Pt.current)==null||It.focus()),Lt.code==="Escape"&&(document.activeElement===Pt.current||(Wt=Pt.current)!=null&&Wt.contains(document.activeElement))&&st(!1)};return document.addEventListener("keydown",wt),()=>document.removeEventListener("keydown",wt)},[u]),xt.useEffect(()=>{if(Pt.current)return()=>{Oe.current&&(Oe.current.focus({preventScroll:!0}),Oe.current=null,at.current=!1)}},[Pt.current]),xt.createElement("section",{"aria-label":`${Y} ${Xe}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false"},Ie.map((wt,Lt)=>{var It;let[Wt,tr]=wt.split("-");return ce.length?xt.createElement("ol",{key:wt,dir:B==="auto"?tE():B,tabIndex:-1,ref:Pt,className:c,"data-sonner-toaster":!0,"data-theme":Kt,"data-y-position":Wt,"data-lifted":vt&&ce.length>1&&!p,"data-x-position":tr,style:{"--front-toast-height":`${((It=We[0])==null?void 0:It.height)||0}px`,"--offset":typeof S=="number"?`${S}px`:S||Q8,"--width":`${J8}px`,"--gap":`${X}px`,...L},onBlur:gt=>{at.current&&!gt.currentTarget.contains(gt.relatedTarget)&&(at.current=!1,Oe.current&&(Oe.current.focus({preventScroll:!0}),Oe.current=null))},onFocus:gt=>{gt.target instanceof HTMLElement&&gt.target.dataset.dismissible==="false"||at.current||(at.current=!0,Oe.current=gt.relatedTarget)},onMouseEnter:()=>st(!0),onMouseMove:()=>st(!0),onMouseLeave:()=>{Tt||st(!1)},onPointerDown:gt=>{gt.target instanceof HTMLElement&&gt.target.dataset.dismissible==="false"||_t(!0)},onPointerUp:()=>_t(!1)},ce.filter(gt=>!gt.position&&Lt===0||gt.position===wt).map((gt,or)=>{var Yt,ir;return xt.createElement(iU,{key:gt.id,icons:V,index:or,toast:gt,defaultRichColors:A,duration:(Yt=F==null?void 0:F.duration)!=null?Yt:z,className:F==null?void 0:F.className,descriptionClassName:F==null?void 0:F.descriptionClassName,invert:n,visibleToasts:I,closeButton:(ir=F==null?void 0:F.closeButton)!=null?ir:f,interacting:Tt,position:wt,style:F==null?void 0:F.style,unstyled:F==null?void 0:F.unstyled,classNames:F==null?void 0:F.classNames,cancelButtonStyle:F==null?void 0:F.cancelButtonStyle,actionButtonStyle:F==null?void 0:F.actionButtonStyle,removeToast:Et,toasts:ce.filter(At=>At.position==gt.position),heights:We.filter(At=>At.position==gt.position),setHeights:tt,expandByDefault:p,gap:X,loadingIcon:q,expanded:vt,pauseWhenPageIsHidden:de,cn:Se})})):null}))});const Xv="https://food-app-2atv.onrender.com",ou=Xv+"/api/v1/user",Zo=ep()(tp(e=>({user:null,isAuthenticated:!1,isCheckingAuth:!0,loading:!1,signup:async t=>{try{e({loading:!0});const n=await xr.post(`${ou}/signup`,t,{headers:{"Content-Type":"application/json"}});n.data.success&&(_n.success(n.data.message),e({loading:!1,user:n.data.user,isAuthenticated:!0}))}catch(n){_n.error(n.response.data.message),e({loading:!1})}},login:async t=>{try{e({loading:!0});const n=await xr.post(`${ou}/login`,t,{headers:{"Content-Type":"application/json"}});n.data.success&&(_n.success(n.data.message),e({loading:!1,user:n.data.user,isAuthenticated:!0}))}catch(n){_n.error(n.response.data.message),e({loading:!1})}},verifyEmail:async t=>{try{e({loading:!0});const n=await xr.post(`${ou}/verify-email`,{verificationCode:t},{headers:{"Content-Type":"application/json"}});n.data.success&&(_n.success(n.data.message),e({loading:!1,user:n.data.user,isAuthenticated:!0}))}catch(n){_n.success(n.response.data.message),e({loading:!1})}},checkAuthentication:async()=>{var t;try{e({isCheckingAuth:!0});const n=(t=JSON.parse(localStorage.getItem("user-name")||"{}").state)==null?void 0:t.user;e(n?{user:n,isAuthenticated:!0,isCheckingAuth:!1}:{isAuthenticated:!1,isCheckingAuth:!1})}catch{e({isAuthenticated:!1,isCheckingAuth:!1})}},logout:async()=>{try{e({loading:!0});const t=await xr.post(`${ou}/logout`);t.data.success&&(_n.success(t.data.message),e({loading:!1,user:null,isAuthenticated:!1}))}catch(t){_n.error(t.response.data.message),e({loading:!1})}},forgotPassword:async t=>{try{e({loading:!0});const n=await xr.post(`${ou}/forgot-password`,{email:t});n.data.success&&(_n.success(n.data.message),e({loading:!1}))}catch(n){_n.error(n.response.data.message),e({loading:!1})}},resetPassword:async(t,n)=>{try{e({loading:!0});const s=await xr.post(`${ou}/reset-password/${t}`,{newPassword:n});s.data.success&&(_n.success(s.data.message),e({loading:!1}))}catch(s){_n.error(s.response.data.message),e({loading:!1})}},updateProfile:async t=>{try{const n=await xr.put(`${ou}/profile/update`,t,{headers:{"Content-Type":"application/json"}});n.data.success&&(_n.success(n.data.message),e({user:n.data.user,isAuthenticated:!0}))}catch(n){_n.error(n.response.data.message)}}}),{name:"user-name",storage:qu(()=>localStorage)}));/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xR=(...e)=>e.filter((t,n,s)=>!!t&&s.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var aU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:u="",children:p,iconNode:f,...c},S)=>N.createElement("svg",{ref:S,...aU,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:xR("lucide",u),...c},[...f.map(([E,A])=>N.createElement(E,A)),...Array.isArray(p)?p:[p]]));/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=(e,t)=>{const n=N.forwardRef(({className:s,...u},p)=>N.createElement(lU,{ref:p,iconNode:t,className:xR(`lucide-${oU(e)}`,s),...u}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=br("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=br("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=br("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=br("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=br("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=br("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=br("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=br("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=br("Construction",[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=br("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=br("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=br("HandPlatter",[["path",{d:"M12 3V2",key:"ar7q03"}],["path",{d:"M5 10a7.1 7.1 0 0 1 14 0",key:"1t9y3n"}],["path",{d:"M4 10h16",key:"img6z1"}],["path",{d:"M2 14h12a2 2 0 1 1 0 4h-2",key:"loyjft"}],["path",{d:"m15.4 17.4 3.2-2.8a2 2 0 0 1 2.8 2.9l-3.6 3.3c-.7.8-1.7 1.2-2.8 1.2h-4c-1.1 0-2.1-.4-2.8-1.2L5 18",key:"1rixiy"}],["path",{d:"M5 14v7H2",key:"3mujks"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=br("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=br("Locate",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=br("LockKeyhole",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=br("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=br("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=br("MapPinned",[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=br("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=br("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=br("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=br("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=br("PackageCheck",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=br("PhoneOutgoing",[["polyline",{points:"22 8 22 2 16 2",key:"1g204g"}],["line",{x1:"16",x2:"22",y1:"8",y2:"2",key:"1ggias"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=br("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=br("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=br("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=br("SquareMenu",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 8h10",key:"1jw688"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=br("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=br("ThermometerSun",[["path",{d:"M12 9a4 4 0 0 0-2 7.5",key:"1jvsq6"}],["path",{d:"M12 3v2",key:"1w22ol"}],["path",{d:"m6.6 18.4-1.4 1.4",key:"w2yidj"}],["path",{d:"M20 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"iof6y5"}],["path",{d:"M4 13H2",key:"118le4"}],["path",{d:"M6.34 7.34 4.93 5.93",key:"1brd51"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=br("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=br("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=br("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=br("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=br("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=br("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=br("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=br("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),zU=()=>{const[e,t]=N.useState({fullname:"",email:"",password:"",contact:""}),[n,s]=N.useState({}),{signup:u,loading:p}=Zo();Qh();const f=S=>{const{name:E,value:A}=S.target;t({...e,[E]:A})},c=async S=>{S.preventDefault();const E=MB.safeParse(e);if(!E.success){const A=E.error.formErrors.fieldErrors;s(A);return}try{await u(e)}catch(A){console.log(A)}};return C.jsx("div",{className:"flex items-center justify-center min-h-screen",children:C.jsxs("form",{onSubmit:c,className:"md:p-8 w-full max-w-md rounded-lg md:border border-gray-200 mx-4",children:[C.jsx("div",{className:"mb-4",children:C.jsx("h1",{className:"font-bold text-2xl",children:"FoodTiger"})}),C.jsx("div",{className:"mb-4",children:C.jsxs("div",{className:"relative",children:[C.jsx(zr,{type:"text",placeholder:"Full Name",name:"fullname",value:e.fullname,onChange:f,className:"pl-10 focus-visible:ring-1"}),C.jsx(MR,{className:"absolute inset-y-2 left-2 text-gray-500 pointer-events-none"}),n&&C.jsx("span",{className:"text-xs text-red-500",children:n.fullname})]})}),C.jsx("div",{className:"mb-4",children:C.jsxs("div",{className:"relative",children:[C.jsx(zr,{type:"email",placeholder:"Email",name:"email",value:e.email,onChange:f,className:"pl-10 focus-visible:ring-1"}),C.jsx(Yv,{className:"absolute inset-y-2 left-2 text-gray-500 pointer-events-none"}),n&&C.jsx("span",{className:"text-xs text-red-500",children:n.email})]})}),C.jsx("div",{className:"mb-4",children:C.jsxs("div",{className:"relative",children:[C.jsx(zr,{type:"password",placeholder:"Password",name:"password",value:e.password,onChange:f,className:"pl-10 focus-visible:ring-1"}),C.jsx(P2,{className:"absolute inset-y-2 left-2 text-gray-500 pointer-events-none"}),n&&C.jsx("span",{className:"text-xs text-red-500",children:n.password})]})}),C.jsx("div",{className:"mb-4",children:C.jsxs("div",{className:"relative",children:[C.jsx(zr,{type:"text",placeholder:"Contact",name:"contact",value:e.contact,onChange:f,className:"pl-10 focus-visible:ring-1"}),C.jsx(TU,{className:"absolute inset-y-2 left-2 text-gray-500 pointer-events-none"}),n&&C.jsx("span",{className:"text-xs text-red-500",children:n.contact})]})}),C.jsx("div",{className:"mb-10",children:C.jsx(jr,{type:"submit",className:"w-full bg-orange hover:bg-hoverOrange",children:"Signup"})}),C.jsx(lg,{}),C.jsxs("p",{className:"mt-2",children:["Already have an account?"," ",C.jsx(Dn,{to:"/login",className:"text-blue-500",children:"Login"})]})]})})},jU=()=>{const[e,t]=N.useState("");return C.jsx("div",{className:"flex items-center justify-center min-h-screen w-full",children:C.jsxs("form",{className:"flex flex-col gap-5 md:p-8 w-full max-w-md rounded-lg mx-4",children:[C.jsxs("div",{className:"text-center",children:[C.jsx("h1",{className:"font-extrabold text-2xl mb-2",children:"Reset Password"}),C.jsx("p",{className:"text-sm text-gray-600",children:"Enter your new password to reset old one"})]}),C.jsxs("div",{className:"relative w-full",children:[C.jsx(zr,{type:"password",value:e,onChange:n=>t(n.target.value),placeholder:"Enter your new password",className:"pl-10"}),C.jsx(P2,{className:"absolute inset-y-2 left-2 text-gray-600 pointer-events-none"})]}),C.jsx(jr,{className:"bg-orange hover:bg-hoverOrange",children:"Reset Password"}),C.jsxs("span",{className:"text-center",children:["Back to"," ",C.jsx(Dn,{to:"/login",className:"text-blue-500",children:"Login"})]})]})})},LU="/assets/hero_pizza-S9W1AY4K.png",NU=()=>{const[e,t]=N.useState(""),n=Qh();return C.jsxs("div",{className:"flex flex-col md:flex-row max-w-7xl mx-auto md:p-10 rounded-lg items-center justify-center m-4 gap-20",children:[C.jsxs("div",{className:"flex flex-col gap-10 md:w-[40%]",children:[C.jsxs("div",{className:"flex flex-col gap-5",children:[C.jsx("h1",{className:"font-bold md:font-extrabold md:text-5xl text-4xl",children:"Order Food anytime & anywhere"}),C.jsx("p",{className:"text-gray-500",children:"Hey! Our Delicious food is waiting for you, we are always near to you."})]}),C.jsxs("div",{className:"relative flex items-center gap-2",children:[C.jsx(zr,{type:"text",value:e,placeholder:"Search restaurant by name, city & country",onChange:s=>t(s.target.value),className:"pl-10 shadow-lg"}),C.jsx(CU,{className:"text-gray-500 absolute inset-y-2 left-2"}),C.jsx(jr,{onClick:()=>n(`/search/${e}`),className:"bg-orange hover:bg-hoverOrange",children:"Search"})]})]}),C.jsx("div",{children:C.jsx("img",{src:LU,alt:"",className:"object-cover w-full max-h-[500px]"})})]})},OU=()=>C.jsx("footer",{className:"bg-gray-800 text-center text-gray-300 py-8 px-4",children:C.jsx("p",{className:"text-sm",children:" 2024 FoodTiger. All rights reserved."})});function FU(e,t){const n=N.createContext(t),s=p=>{const{children:f,...c}=p,S=N.useMemo(()=>c,Object.values(c));return C.jsx(n.Provider,{value:S,children:f})};s.displayName=e+"Provider";function u(p){const f=N.useContext(n);if(f)return f;if(t!==void 0)return t;throw new Error(`\`${p}\` must be used within \`${e}\``)}return[s,u]}function ma(e,t=[]){let n=[];function s(p,f){const c=N.createContext(f),S=n.length;n=[...n,f];const E=z=>{var q;const{scope:L,children:I,...F}=z,B=((q=L==null?void 0:L[e])==null?void 0:q[S])||c,X=N.useMemo(()=>F,Object.values(F));return C.jsx(B.Provider,{value:X,children:I})};E.displayName=p+"Provider";function A(z,L){var B;const I=((B=L==null?void 0:L[e])==null?void 0:B[S])||c,F=N.useContext(I);if(F)return F;if(f!==void 0)return f;throw new Error(`\`${z}\` must be used within \`${p}\``)}return[E,A]}const u=()=>{const p=n.map(f=>N.createContext(f));return function(c){const S=(c==null?void 0:c[e])||p;return N.useMemo(()=>({[`__scope${e}`]:{...c,[e]:S}}),[c,S])}};return u.scopeName=e,[s,BU(u,...t)]}function BU(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(p){const f=s.reduce((c,{useScope:S,scopeName:E})=>{const z=S(p)[`__scope${E}`];return{...c,...z}},{});return N.useMemo(()=>({[`__scope${t.scopeName}`]:f}),[f])}};return n.scopeName=t.scopeName,n}function Qv(e){const t=e+"CollectionProvider",[n,s]=ma(t),[u,p]=n(t,{collectionRef:{current:null},itemMap:new Map}),f=I=>{const{scope:F,children:B}=I,X=xt.useRef(null),q=xt.useRef(new Map).current;return C.jsx(u,{scope:F,itemMap:q,collectionRef:X,children:B})};f.displayName=t;const c=e+"CollectionSlot",S=xt.forwardRef((I,F)=>{const{scope:B,children:X}=I,q=p(c,B),V=Gr(F,q.collectionRef);return C.jsx(lc,{ref:V,children:X})});S.displayName=c;const E=e+"CollectionItemSlot",A="data-radix-collection-item",z=xt.forwardRef((I,F)=>{const{scope:B,children:X,...q}=I,V=xt.useRef(null),Y=Gr(F,V),de=p(E,B);return xt.useEffect(()=>(de.itemMap.set(V,{ref:V,...q}),()=>void de.itemMap.delete(V))),C.jsx(lc,{[A]:"",ref:Y,children:X})});z.displayName=E;function L(I){const F=p(e+"CollectionConsumer",I);return xt.useCallback(()=>{const X=F.collectionRef.current;if(!X)return[];const q=Array.from(X.querySelectorAll(`[${A}]`));return Array.from(F.itemMap.values()).sort((de,Se)=>q.indexOf(de.ref.current)-q.indexOf(Se.ref.current))},[F.collectionRef,F.itemMap])}return[{Provider:f,Slot:S,ItemSlot:z},L,s]}var UU=N.createContext(void 0);function Jv(e){const t=N.useContext(UU);return e||t||"ltr"}function jt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(u){if(e==null||e(u),n===!1||!u.defaultPrevented)return t==null?void 0:t(u)}}var ki=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},VU=sM.useId||(()=>{}),$U=0;function mo(e){const[t,n]=N.useState(VU());return ki(()=>{n(s=>s??String($U++))},[e]),t?`radix-${t}`:""}function Ws(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function ZU(e,t=globalThis==null?void 0:globalThis.document){const n=Ws(e);N.useEffect(()=>{const s=u=>{u.key==="Escape"&&n(u)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var GU="DismissableLayer",$1="dismissableLayer.update",HU="dismissableLayer.pointerDownOutside",qU="dismissableLayer.focusOutside",rE,kR=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),e0=N.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:p,onInteractOutside:f,onDismiss:c,...S}=e,E=N.useContext(kR),[A,z]=N.useState(null),L=(A==null?void 0:A.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,I]=N.useState({}),F=Gr(t,Re=>z(Re)),B=Array.from(E.layers),[X]=[...E.layersWithOutsidePointerEventsDisabled].slice(-1),q=B.indexOf(X),V=A?B.indexOf(A):-1,Y=E.layersWithOutsidePointerEventsDisabled.size>0,de=V>=q,Se=KU(Re=>{const Ie=Re.target,We=[...E.branches].some(tt=>tt.contains(Ie));!de||We||(u==null||u(Re),f==null||f(Re),Re.defaultPrevented||c==null||c())},L),ce=YU(Re=>{const Ie=Re.target;[...E.branches].some(tt=>tt.contains(Ie))||(p==null||p(Re),f==null||f(Re),Re.defaultPrevented||c==null||c())},L);return ZU(Re=>{V===E.layers.size-1&&(s==null||s(Re),!Re.defaultPrevented&&c&&(Re.preventDefault(),c()))},L),N.useEffect(()=>{if(A)return n&&(E.layersWithOutsidePointerEventsDisabled.size===0&&(rE=L.body.style.pointerEvents,L.body.style.pointerEvents="none"),E.layersWithOutsidePointerEventsDisabled.add(A)),E.layers.add(A),nE(),()=>{n&&E.layersWithOutsidePointerEventsDisabled.size===1&&(L.body.style.pointerEvents=rE)}},[A,L,n,E]),N.useEffect(()=>()=>{A&&(E.layers.delete(A),E.layersWithOutsidePointerEventsDisabled.delete(A),nE())},[A,E]),N.useEffect(()=>{const Re=()=>I({});return document.addEventListener($1,Re),()=>document.removeEventListener($1,Re)},[]),C.jsx(cr.div,{...S,ref:F,style:{pointerEvents:Y?de?"auto":"none":void 0,...e.style},onFocusCapture:jt(e.onFocusCapture,ce.onFocusCapture),onBlurCapture:jt(e.onBlurCapture,ce.onBlurCapture),onPointerDownCapture:jt(e.onPointerDownCapture,Se.onPointerDownCapture)})});e0.displayName=GU;var WU="DismissableLayerBranch",XU=N.forwardRef((e,t)=>{const n=N.useContext(kR),s=N.useRef(null),u=Gr(t,s);return N.useEffect(()=>{const p=s.current;if(p)return n.branches.add(p),()=>{n.branches.delete(p)}},[n.branches]),C.jsx(cr.div,{...e,ref:u})});XU.displayName=WU;function KU(e,t=globalThis==null?void 0:globalThis.document){const n=Ws(e),s=N.useRef(!1),u=N.useRef(()=>{});return N.useEffect(()=>{const p=c=>{if(c.target&&!s.current){let S=function(){IR(HU,n,E,{discrete:!0})};const E={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",u.current),u.current=S,t.addEventListener("click",u.current,{once:!0})):S()}else t.removeEventListener("click",u.current);s.current=!1},f=window.setTimeout(()=>{t.addEventListener("pointerdown",p)},0);return()=>{window.clearTimeout(f),t.removeEventListener("pointerdown",p),t.removeEventListener("click",u.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function YU(e,t=globalThis==null?void 0:globalThis.document){const n=Ws(e),s=N.useRef(!1);return N.useEffect(()=>{const u=p=>{p.target&&!s.current&&IR(qU,n,{originalEvent:p},{discrete:!1})};return t.addEventListener("focusin",u),()=>t.removeEventListener("focusin",u)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function nE(){const e=new CustomEvent($1);document.dispatchEvent(e)}function IR(e,t,n,{discrete:s}){const u=n.originalEvent.target,p=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&u.addEventListener(e,t,{once:!0}),s?AI(u,p):u.dispatchEvent(p)}var _b=0;function k2(){N.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??iE()),document.body.insertAdjacentElement("beforeend",e[1]??iE()),_b++,()=>{_b===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),_b--}},[])}function iE(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var vb="focusScope.autoFocusOnMount",xb="focusScope.autoFocusOnUnmount",sE={bubbles:!1,cancelable:!0},QU="FocusScope",t0=N.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:u,onUnmountAutoFocus:p,...f}=e,[c,S]=N.useState(null),E=Ws(u),A=Ws(p),z=N.useRef(null),L=Gr(t,B=>S(B)),I=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(s){let B=function(Y){if(I.paused||!c)return;const de=Y.target;c.contains(de)?z.current=de:jl(z.current,{select:!0})},X=function(Y){if(I.paused||!c)return;const de=Y.relatedTarget;de!==null&&(c.contains(de)||jl(z.current,{select:!0}))},q=function(Y){if(document.activeElement===document.body)for(const Se of Y)Se.removedNodes.length>0&&jl(c)};document.addEventListener("focusin",B),document.addEventListener("focusout",X);const V=new MutationObserver(q);return c&&V.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",B),document.removeEventListener("focusout",X),V.disconnect()}}},[s,c,I.paused]),N.useEffect(()=>{if(c){aE.add(I);const B=document.activeElement;if(!c.contains(B)){const q=new CustomEvent(vb,sE);c.addEventListener(vb,E),c.dispatchEvent(q),q.defaultPrevented||(JU(iV(RR(c)),{select:!0}),document.activeElement===B&&jl(c))}return()=>{c.removeEventListener(vb,E),setTimeout(()=>{const q=new CustomEvent(xb,sE);c.addEventListener(xb,A),c.dispatchEvent(q),q.defaultPrevented||jl(B??document.body,{select:!0}),c.removeEventListener(xb,A),aE.remove(I)},0)}}},[c,E,A,I]);const F=N.useCallback(B=>{if(!n&&!s||I.paused)return;const X=B.key==="Tab"&&!B.altKey&&!B.ctrlKey&&!B.metaKey,q=document.activeElement;if(X&&q){const V=B.currentTarget,[Y,de]=eV(V);Y&&de?!B.shiftKey&&q===de?(B.preventDefault(),n&&jl(Y,{select:!0})):B.shiftKey&&q===Y&&(B.preventDefault(),n&&jl(de,{select:!0})):q===V&&B.preventDefault()}},[n,s,I.paused]);return C.jsx(cr.div,{tabIndex:-1,...f,ref:L,onKeyDown:F})});t0.displayName=QU;function JU(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(jl(s,{select:t}),document.activeElement!==n)return}function eV(e){const t=RR(e),n=oE(t,e),s=oE(t.reverse(),e);return[n,s]}function RR(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const u=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||u?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function oE(e,t){for(const n of e)if(!tV(n,{upTo:t}))return n}function tV(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function rV(e){return e instanceof HTMLInputElement&&"select"in e}function jl(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&rV(e)&&t&&e.select()}}var aE=nV();function nV(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=lE(e,t),e.unshift(t)},remove(t){var n;e=lE(e,t),(n=e[0])==null||n.resume()}}}function lE(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function iV(e){return e.filter(t=>t.tagName!=="A")}const sV=["top","right","bottom","left"],pc=Math.min,Us=Math.max,av=Math.round,Wy=Math.floor,ua=e=>({x:e,y:e}),oV={left:"right",right:"left",bottom:"top",top:"bottom"},aV={start:"end",end:"start"};function Z1(e,t,n){return Us(e,pc(t,n))}function rl(e,t){return typeof e=="function"?e(t):e}function nl(e){return e.split("-")[0]}function ip(e){return e.split("-")[1]}function I2(e){return e==="x"?"y":"x"}function R2(e){return e==="y"?"height":"width"}function fc(e){return["top","bottom"].includes(nl(e))?"y":"x"}function A2(e){return I2(fc(e))}function lV(e,t,n){n===void 0&&(n=!1);const s=ip(e),u=A2(e),p=R2(u);let f=u==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[p]>t.floating[p]&&(f=lv(f)),[f,lv(f)]}function cV(e){const t=lv(e);return[G1(e),t,G1(t)]}function G1(e){return e.replace(/start|end/g,t=>aV[t])}function uV(e,t,n){const s=["left","right"],u=["right","left"],p=["top","bottom"],f=["bottom","top"];switch(e){case"top":case"bottom":return n?t?u:s:t?s:u;case"left":case"right":return t?p:f;default:return[]}}function dV(e,t,n,s){const u=ip(e);let p=uV(nl(e),n==="start",s);return u&&(p=p.map(f=>f+"-"+u),t&&(p=p.concat(p.map(G1)))),p}function lv(e){return e.replace(/left|right|bottom|top/g,t=>oV[t])}function hV(e){return{top:0,right:0,bottom:0,left:0,...e}}function AR(e){return typeof e!="number"?hV(e):{top:e,right:e,bottom:e,left:e}}function cv(e){const{x:t,y:n,width:s,height:u}=e;return{width:s,height:u,top:n,left:t,right:t+s,bottom:n+u,x:t,y:n}}function cE(e,t,n){let{reference:s,floating:u}=e;const p=fc(t),f=A2(t),c=R2(f),S=nl(t),E=p==="y",A=s.x+s.width/2-u.width/2,z=s.y+s.height/2-u.height/2,L=s[c]/2-u[c]/2;let I;switch(S){case"top":I={x:A,y:s.y-u.height};break;case"bottom":I={x:A,y:s.y+s.height};break;case"right":I={x:s.x+s.width,y:z};break;case"left":I={x:s.x-u.width,y:z};break;default:I={x:s.x,y:s.y}}switch(ip(t)){case"start":I[f]-=L*(n&&E?-1:1);break;case"end":I[f]+=L*(n&&E?-1:1);break}return I}const pV=async(e,t,n)=>{const{placement:s="bottom",strategy:u="absolute",middleware:p=[],platform:f}=n,c=p.filter(Boolean),S=await(f.isRTL==null?void 0:f.isRTL(t));let E=await f.getElementRects({reference:e,floating:t,strategy:u}),{x:A,y:z}=cE(E,s,S),L=s,I={},F=0;for(let B=0;B<c.length;B++){const{name:X,fn:q}=c[B],{x:V,y:Y,data:de,reset:Se}=await q({x:A,y:z,initialPlacement:s,placement:L,strategy:u,middlewareData:I,rects:E,platform:f,elements:{reference:e,floating:t}});A=V??A,z=Y??z,I={...I,[X]:{...I[X],...de}},Se&&F<=50&&(F++,typeof Se=="object"&&(Se.placement&&(L=Se.placement),Se.rects&&(E=Se.rects===!0?await f.getElementRects({reference:e,floating:t,strategy:u}):Se.rects),{x:A,y:z}=cE(E,L,S)),B=-1)}return{x:A,y:z,placement:L,strategy:u,middlewareData:I}};async function Gm(e,t){var n;t===void 0&&(t={});const{x:s,y:u,platform:p,rects:f,elements:c,strategy:S}=e,{boundary:E="clippingAncestors",rootBoundary:A="viewport",elementContext:z="floating",altBoundary:L=!1,padding:I=0}=rl(t,e),F=AR(I),X=c[L?z==="floating"?"reference":"floating":z],q=cv(await p.getClippingRect({element:(n=await(p.isElement==null?void 0:p.isElement(X)))==null||n?X:X.contextElement||await(p.getDocumentElement==null?void 0:p.getDocumentElement(c.floating)),boundary:E,rootBoundary:A,strategy:S})),V=z==="floating"?{x:s,y:u,width:f.floating.width,height:f.floating.height}:f.reference,Y=await(p.getOffsetParent==null?void 0:p.getOffsetParent(c.floating)),de=await(p.isElement==null?void 0:p.isElement(Y))?await(p.getScale==null?void 0:p.getScale(Y))||{x:1,y:1}:{x:1,y:1},Se=cv(p.convertOffsetParentRelativeRectToViewportRelativeRect?await p.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:V,offsetParent:Y,strategy:S}):V);return{top:(q.top-Se.top+F.top)/de.y,bottom:(Se.bottom-q.bottom+F.bottom)/de.y,left:(q.left-Se.left+F.left)/de.x,right:(Se.right-q.right+F.right)/de.x}}const fV=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:u,rects:p,platform:f,elements:c,middlewareData:S}=t,{element:E,padding:A=0}=rl(e,t)||{};if(E==null)return{};const z=AR(A),L={x:n,y:s},I=A2(u),F=R2(I),B=await f.getDimensions(E),X=I==="y",q=X?"top":"left",V=X?"bottom":"right",Y=X?"clientHeight":"clientWidth",de=p.reference[F]+p.reference[I]-L[I]-p.floating[F],Se=L[I]-p.reference[I],ce=await(f.getOffsetParent==null?void 0:f.getOffsetParent(E));let Re=ce?ce[Y]:0;(!Re||!await(f.isElement==null?void 0:f.isElement(ce)))&&(Re=c.floating[Y]||p.floating[F]);const Ie=de/2-Se/2,We=Re/2-B[F]/2-1,tt=pc(z[q],We),vt=pc(z[V],We),st=tt,Tt=Re-B[F]-vt,_t=Re/2-B[F]/2+Ie,Kt=Z1(st,_t,Tt),ct=!S.arrow&&ip(u)!=null&&_t!==Kt&&p.reference[F]/2-(_t<st?tt:vt)-B[F]/2<0,Pt=ct?_t<st?_t-st:_t-Tt:0;return{[I]:L[I]+Pt,data:{[I]:Kt,centerOffset:_t-Kt-Pt,...ct&&{alignmentOffset:Pt}},reset:ct}}}),mV=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:u,middlewareData:p,rects:f,initialPlacement:c,platform:S,elements:E}=t,{mainAxis:A=!0,crossAxis:z=!0,fallbackPlacements:L,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:F="none",flipAlignment:B=!0,...X}=rl(e,t);if((n=p.arrow)!=null&&n.alignmentOffset)return{};const q=nl(u),V=fc(c),Y=nl(c)===c,de=await(S.isRTL==null?void 0:S.isRTL(E.floating)),Se=L||(Y||!B?[lv(c)]:cV(c)),ce=F!=="none";!L&&ce&&Se.push(...dV(c,B,F,de));const Re=[c,...Se],Ie=await Gm(t,X),We=[];let tt=((s=p.flip)==null?void 0:s.overflows)||[];if(A&&We.push(Ie[q]),z){const _t=lV(u,f,de);We.push(Ie[_t[0]],Ie[_t[1]])}if(tt=[...tt,{placement:u,overflows:We}],!We.every(_t=>_t<=0)){var vt,st;const _t=(((vt=p.flip)==null?void 0:vt.index)||0)+1,Kt=Re[_t];if(Kt)return{data:{index:_t,overflows:tt},reset:{placement:Kt}};let ct=(st=tt.filter(Pt=>Pt.overflows[0]<=0).sort((Pt,Xe)=>Pt.overflows[1]-Xe.overflows[1])[0])==null?void 0:st.placement;if(!ct)switch(I){case"bestFit":{var Tt;const Pt=(Tt=tt.filter(Xe=>{if(ce){const Oe=fc(Xe.placement);return Oe===V||Oe==="y"}return!0}).map(Xe=>[Xe.placement,Xe.overflows.filter(Oe=>Oe>0).reduce((Oe,at)=>Oe+at,0)]).sort((Xe,Oe)=>Xe[1]-Oe[1])[0])==null?void 0:Tt[0];Pt&&(ct=Pt);break}case"initialPlacement":ct=c;break}if(u!==ct)return{reset:{placement:ct}}}return{}}}};function uE(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function dE(e){return sV.some(t=>e[t]>=0)}const gV=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...u}=rl(e,t);switch(s){case"referenceHidden":{const p=await Gm(t,{...u,elementContext:"reference"}),f=uE(p,n.reference);return{data:{referenceHiddenOffsets:f,referenceHidden:dE(f)}}}case"escaped":{const p=await Gm(t,{...u,altBoundary:!0}),f=uE(p,n.floating);return{data:{escapedOffsets:f,escaped:dE(f)}}}default:return{}}}}};async function yV(e,t){const{placement:n,platform:s,elements:u}=e,p=await(s.isRTL==null?void 0:s.isRTL(u.floating)),f=nl(n),c=ip(n),S=fc(n)==="y",E=["left","top"].includes(f)?-1:1,A=p&&S?-1:1,z=rl(t,e);let{mainAxis:L,crossAxis:I,alignmentAxis:F}=typeof z=="number"?{mainAxis:z,crossAxis:0,alignmentAxis:null}:{mainAxis:z.mainAxis||0,crossAxis:z.crossAxis||0,alignmentAxis:z.alignmentAxis};return c&&typeof F=="number"&&(I=c==="end"?F*-1:F),S?{x:I*A,y:L*E}:{x:L*E,y:I*A}}const _V=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:u,y:p,placement:f,middlewareData:c}=t,S=await yV(t,e);return f===((n=c.offset)==null?void 0:n.placement)&&(s=c.arrow)!=null&&s.alignmentOffset?{}:{x:u+S.x,y:p+S.y,data:{...S,placement:f}}}}},vV=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:u}=t,{mainAxis:p=!0,crossAxis:f=!1,limiter:c={fn:X=>{let{x:q,y:V}=X;return{x:q,y:V}}},...S}=rl(e,t),E={x:n,y:s},A=await Gm(t,S),z=fc(nl(u)),L=I2(z);let I=E[L],F=E[z];if(p){const X=L==="y"?"top":"left",q=L==="y"?"bottom":"right",V=I+A[X],Y=I-A[q];I=Z1(V,I,Y)}if(f){const X=z==="y"?"top":"left",q=z==="y"?"bottom":"right",V=F+A[X],Y=F-A[q];F=Z1(V,F,Y)}const B=c.fn({...t,[L]:I,[z]:F});return{...B,data:{x:B.x-n,y:B.y-s,enabled:{[L]:p,[z]:f}}}}}},xV=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:u,rects:p,middlewareData:f}=t,{offset:c=0,mainAxis:S=!0,crossAxis:E=!0}=rl(e,t),A={x:n,y:s},z=fc(u),L=I2(z);let I=A[L],F=A[z];const B=rl(c,t),X=typeof B=="number"?{mainAxis:B,crossAxis:0}:{mainAxis:0,crossAxis:0,...B};if(S){const Y=L==="y"?"height":"width",de=p.reference[L]-p.floating[Y]+X.mainAxis,Se=p.reference[L]+p.reference[Y]-X.mainAxis;I<de?I=de:I>Se&&(I=Se)}if(E){var q,V;const Y=L==="y"?"width":"height",de=["top","left"].includes(nl(u)),Se=p.reference[z]-p.floating[Y]+(de&&((q=f.offset)==null?void 0:q[z])||0)+(de?0:X.crossAxis),ce=p.reference[z]+p.reference[Y]+(de?0:((V=f.offset)==null?void 0:V[z])||0)-(de?X.crossAxis:0);F<Se?F=Se:F>ce&&(F=ce)}return{[L]:I,[z]:F}}}},bV=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:u,rects:p,platform:f,elements:c}=t,{apply:S=()=>{},...E}=rl(e,t),A=await Gm(t,E),z=nl(u),L=ip(u),I=fc(u)==="y",{width:F,height:B}=p.floating;let X,q;z==="top"||z==="bottom"?(X=z,q=L===(await(f.isRTL==null?void 0:f.isRTL(c.floating))?"start":"end")?"left":"right"):(q=z,X=L==="end"?"top":"bottom");const V=B-A.top-A.bottom,Y=F-A.left-A.right,de=pc(B-A[X],V),Se=pc(F-A[q],Y),ce=!t.middlewareData.shift;let Re=de,Ie=Se;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(Ie=Y),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(Re=V),ce&&!L){const tt=Us(A.left,0),vt=Us(A.right,0),st=Us(A.top,0),Tt=Us(A.bottom,0);I?Ie=F-2*(tt!==0||vt!==0?tt+vt:Us(A.left,A.right)):Re=B-2*(st!==0||Tt!==0?st+Tt:Us(A.top,A.bottom))}await S({...t,availableWidth:Ie,availableHeight:Re});const We=await f.getDimensions(c.floating);return F!==We.width||B!==We.height?{reset:{rects:!0}}:{}}}};function r0(){return typeof window<"u"}function sp(e){return DR(e)?(e.nodeName||"").toLowerCase():"#document"}function Hs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ga(e){var t;return(t=(DR(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function DR(e){return r0()?e instanceof Node||e instanceof Hs(e).Node:!1}function Uo(e){return r0()?e instanceof Element||e instanceof Hs(e).Element:!1}function pa(e){return r0()?e instanceof HTMLElement||e instanceof Hs(e).HTMLElement:!1}function hE(e){return!r0()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Hs(e).ShadowRoot}function hg(e){const{overflow:t,overflowX:n,overflowY:s,display:u}=Vo(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(u)}function wV(e){return["table","td","th"].includes(sp(e))}function n0(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function D2(e){const t=z2(),n=Uo(e)?Vo(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(s=>(n.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(n.contain||"").includes(s))}function SV(e){let t=mc(e);for(;pa(t)&&!Hh(t);){if(D2(t))return t;if(n0(t))return null;t=mc(t)}return null}function z2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Hh(e){return["html","body","#document"].includes(sp(e))}function Vo(e){return Hs(e).getComputedStyle(e)}function i0(e){return Uo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function mc(e){if(sp(e)==="html")return e;const t=e.assignedSlot||e.parentNode||hE(e)&&e.host||ga(e);return hE(t)?t.host:t}function zR(e){const t=mc(e);return Hh(t)?e.ownerDocument?e.ownerDocument.body:e.body:pa(t)&&hg(t)?t:zR(t)}function Hm(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const u=zR(e),p=u===((s=e.ownerDocument)==null?void 0:s.body),f=Hs(u);if(p){const c=H1(f);return t.concat(f,f.visualViewport||[],hg(u)?u:[],c&&n?Hm(c):[])}return t.concat(u,Hm(u,[],n))}function H1(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function jR(e){const t=Vo(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const u=pa(e),p=u?e.offsetWidth:n,f=u?e.offsetHeight:s,c=av(n)!==p||av(s)!==f;return c&&(n=p,s=f),{width:n,height:s,$:c}}function j2(e){return Uo(e)?e:e.contextElement}function yh(e){const t=j2(e);if(!pa(t))return ua(1);const n=t.getBoundingClientRect(),{width:s,height:u,$:p}=jR(t);let f=(p?av(n.width):n.width)/s,c=(p?av(n.height):n.height)/u;return(!f||!Number.isFinite(f))&&(f=1),(!c||!Number.isFinite(c))&&(c=1),{x:f,y:c}}const TV=ua(0);function LR(e){const t=Hs(e);return!z2()||!t.visualViewport?TV:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function CV(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Hs(e)?!1:t}function Fu(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const u=e.getBoundingClientRect(),p=j2(e);let f=ua(1);t&&(s?Uo(s)&&(f=yh(s)):f=yh(e));const c=CV(p,n,s)?LR(p):ua(0);let S=(u.left+c.x)/f.x,E=(u.top+c.y)/f.y,A=u.width/f.x,z=u.height/f.y;if(p){const L=Hs(p),I=s&&Uo(s)?Hs(s):s;let F=L,B=H1(F);for(;B&&s&&I!==F;){const X=yh(B),q=B.getBoundingClientRect(),V=Vo(B),Y=q.left+(B.clientLeft+parseFloat(V.paddingLeft))*X.x,de=q.top+(B.clientTop+parseFloat(V.paddingTop))*X.y;S*=X.x,E*=X.y,A*=X.x,z*=X.y,S+=Y,E+=de,F=Hs(B),B=H1(F)}}return cv({width:A,height:z,x:S,y:E})}function L2(e,t){const n=i0(e).scrollLeft;return t?t.left+n:Fu(ga(e)).left+n}function NR(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),u=s.left+t.scrollLeft-(n?0:L2(e,s)),p=s.top+t.scrollTop;return{x:u,y:p}}function PV(e){let{elements:t,rect:n,offsetParent:s,strategy:u}=e;const p=u==="fixed",f=ga(s),c=t?n0(t.floating):!1;if(s===f||c&&p)return n;let S={scrollLeft:0,scrollTop:0},E=ua(1);const A=ua(0),z=pa(s);if((z||!z&&!p)&&((sp(s)!=="body"||hg(f))&&(S=i0(s)),pa(s))){const I=Fu(s);E=yh(s),A.x=I.x+s.clientLeft,A.y=I.y+s.clientTop}const L=f&&!z&&!p?NR(f,S,!0):ua(0);return{width:n.width*E.x,height:n.height*E.y,x:n.x*E.x-S.scrollLeft*E.x+A.x+L.x,y:n.y*E.y-S.scrollTop*E.y+A.y+L.y}}function EV(e){return Array.from(e.getClientRects())}function MV(e){const t=ga(e),n=i0(e),s=e.ownerDocument.body,u=Us(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),p=Us(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let f=-n.scrollLeft+L2(e);const c=-n.scrollTop;return Vo(s).direction==="rtl"&&(f+=Us(t.clientWidth,s.clientWidth)-u),{width:u,height:p,x:f,y:c}}function kV(e,t){const n=Hs(e),s=ga(e),u=n.visualViewport;let p=s.clientWidth,f=s.clientHeight,c=0,S=0;if(u){p=u.width,f=u.height;const E=z2();(!E||E&&t==="fixed")&&(c=u.offsetLeft,S=u.offsetTop)}return{width:p,height:f,x:c,y:S}}function IV(e,t){const n=Fu(e,!0,t==="fixed"),s=n.top+e.clientTop,u=n.left+e.clientLeft,p=pa(e)?yh(e):ua(1),f=e.clientWidth*p.x,c=e.clientHeight*p.y,S=u*p.x,E=s*p.y;return{width:f,height:c,x:S,y:E}}function pE(e,t,n){let s;if(t==="viewport")s=kV(e,n);else if(t==="document")s=MV(ga(e));else if(Uo(t))s=IV(t,n);else{const u=LR(e);s={x:t.x-u.x,y:t.y-u.y,width:t.width,height:t.height}}return cv(s)}function OR(e,t){const n=mc(e);return n===t||!Uo(n)||Hh(n)?!1:Vo(n).position==="fixed"||OR(n,t)}function RV(e,t){const n=t.get(e);if(n)return n;let s=Hm(e,[],!1).filter(c=>Uo(c)&&sp(c)!=="body"),u=null;const p=Vo(e).position==="fixed";let f=p?mc(e):e;for(;Uo(f)&&!Hh(f);){const c=Vo(f),S=D2(f);!S&&c.position==="fixed"&&(u=null),(p?!S&&!u:!S&&c.position==="static"&&!!u&&["absolute","fixed"].includes(u.position)||hg(f)&&!S&&OR(e,f))?s=s.filter(A=>A!==f):u=c,f=mc(f)}return t.set(e,s),s}function AV(e){let{element:t,boundary:n,rootBoundary:s,strategy:u}=e;const f=[...n==="clippingAncestors"?n0(t)?[]:RV(t,this._c):[].concat(n),s],c=f[0],S=f.reduce((E,A)=>{const z=pE(t,A,u);return E.top=Us(z.top,E.top),E.right=pc(z.right,E.right),E.bottom=pc(z.bottom,E.bottom),E.left=Us(z.left,E.left),E},pE(t,c,u));return{width:S.right-S.left,height:S.bottom-S.top,x:S.left,y:S.top}}function DV(e){const{width:t,height:n}=jR(e);return{width:t,height:n}}function zV(e,t,n){const s=pa(t),u=ga(t),p=n==="fixed",f=Fu(e,!0,p,t);let c={scrollLeft:0,scrollTop:0};const S=ua(0);if(s||!s&&!p)if((sp(t)!=="body"||hg(u))&&(c=i0(t)),s){const L=Fu(t,!0,p,t);S.x=L.x+t.clientLeft,S.y=L.y+t.clientTop}else u&&(S.x=L2(u));const E=u&&!s&&!p?NR(u,c):ua(0),A=f.left+c.scrollLeft-S.x-E.x,z=f.top+c.scrollTop-S.y-E.y;return{x:A,y:z,width:f.width,height:f.height}}function bb(e){return Vo(e).position==="static"}function fE(e,t){if(!pa(e)||Vo(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ga(e)===n&&(n=n.ownerDocument.body),n}function FR(e,t){const n=Hs(e);if(n0(e))return n;if(!pa(e)){let u=mc(e);for(;u&&!Hh(u);){if(Uo(u)&&!bb(u))return u;u=mc(u)}return n}let s=fE(e,t);for(;s&&wV(s)&&bb(s);)s=fE(s,t);return s&&Hh(s)&&bb(s)&&!D2(s)?n:s||SV(e)||n}const jV=async function(e){const t=this.getOffsetParent||FR,n=this.getDimensions,s=await n(e.floating);return{reference:zV(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function LV(e){return Vo(e).direction==="rtl"}const NV={convertOffsetParentRelativeRectToViewportRelativeRect:PV,getDocumentElement:ga,getClippingRect:AV,getOffsetParent:FR,getElementRects:jV,getClientRects:EV,getDimensions:DV,getScale:yh,isElement:Uo,isRTL:LV};function OV(e,t){let n=null,s;const u=ga(e);function p(){var c;clearTimeout(s),(c=n)==null||c.disconnect(),n=null}function f(c,S){c===void 0&&(c=!1),S===void 0&&(S=1),p();const{left:E,top:A,width:z,height:L}=e.getBoundingClientRect();if(c||t(),!z||!L)return;const I=Wy(A),F=Wy(u.clientWidth-(E+z)),B=Wy(u.clientHeight-(A+L)),X=Wy(E),V={rootMargin:-I+"px "+-F+"px "+-B+"px "+-X+"px",threshold:Us(0,pc(1,S))||1};let Y=!0;function de(Se){const ce=Se[0].intersectionRatio;if(ce!==S){if(!Y)return f();ce?f(!1,ce):s=setTimeout(()=>{f(!1,1e-7)},1e3)}Y=!1}try{n=new IntersectionObserver(de,{...V,root:u.ownerDocument})}catch{n=new IntersectionObserver(de,V)}n.observe(e)}return f(!0),p}function FV(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:u=!0,ancestorResize:p=!0,elementResize:f=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:S=!1}=s,E=j2(e),A=u||p?[...E?Hm(E):[],...Hm(t)]:[];A.forEach(q=>{u&&q.addEventListener("scroll",n,{passive:!0}),p&&q.addEventListener("resize",n)});const z=E&&c?OV(E,n):null;let L=-1,I=null;f&&(I=new ResizeObserver(q=>{let[V]=q;V&&V.target===E&&I&&(I.unobserve(t),cancelAnimationFrame(L),L=requestAnimationFrame(()=>{var Y;(Y=I)==null||Y.observe(t)})),n()}),E&&!S&&I.observe(E),I.observe(t));let F,B=S?Fu(e):null;S&&X();function X(){const q=Fu(e);B&&(q.x!==B.x||q.y!==B.y||q.width!==B.width||q.height!==B.height)&&n(),B=q,F=requestAnimationFrame(X)}return n(),()=>{var q;A.forEach(V=>{u&&V.removeEventListener("scroll",n),p&&V.removeEventListener("resize",n)}),z==null||z(),(q=I)==null||q.disconnect(),I=null,S&&cancelAnimationFrame(F)}}const BV=_V,UV=vV,VV=mV,$V=bV,ZV=gV,mE=fV,GV=xV,HV=(e,t,n)=>{const s=new Map,u={platform:NV,...n},p={...u.platform,_c:s};return pV(e,t,{...u,platform:p})};var __=typeof document<"u"?N.useLayoutEffect:N.useEffect;function uv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,u;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!uv(e[s],t[s]))return!1;return!0}if(u=Object.keys(e),n=u.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,u[s]))return!1;for(s=n;s--!==0;){const p=u[s];if(!(p==="_owner"&&e.$$typeof)&&!uv(e[p],t[p]))return!1}return!0}return e!==e&&t!==t}function BR(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function gE(e,t){const n=BR(e);return Math.round(t*n)/n}function wb(e){const t=N.useRef(e);return __(()=>{t.current=e}),t}function qV(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:u,elements:{reference:p,floating:f}={},transform:c=!0,whileElementsMounted:S,open:E}=e,[A,z]=N.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[L,I]=N.useState(s);uv(L,s)||I(s);const[F,B]=N.useState(null),[X,q]=N.useState(null),V=N.useCallback(Xe=>{Xe!==ce.current&&(ce.current=Xe,B(Xe))},[]),Y=N.useCallback(Xe=>{Xe!==Re.current&&(Re.current=Xe,q(Xe))},[]),de=p||F,Se=f||X,ce=N.useRef(null),Re=N.useRef(null),Ie=N.useRef(A),We=S!=null,tt=wb(S),vt=wb(u),st=wb(E),Tt=N.useCallback(()=>{if(!ce.current||!Re.current)return;const Xe={placement:t,strategy:n,middleware:L};vt.current&&(Xe.platform=vt.current),HV(ce.current,Re.current,Xe).then(Oe=>{const at={...Oe,isPositioned:st.current!==!1};_t.current&&!uv(Ie.current,at)&&(Ie.current=at,Hu.flushSync(()=>{z(at)}))})},[L,t,n,vt,st]);__(()=>{E===!1&&Ie.current.isPositioned&&(Ie.current.isPositioned=!1,z(Xe=>({...Xe,isPositioned:!1})))},[E]);const _t=N.useRef(!1);__(()=>(_t.current=!0,()=>{_t.current=!1}),[]),__(()=>{if(de&&(ce.current=de),Se&&(Re.current=Se),de&&Se){if(tt.current)return tt.current(de,Se,Tt);Tt()}},[de,Se,Tt,tt,We]);const Kt=N.useMemo(()=>({reference:ce,floating:Re,setReference:V,setFloating:Y}),[V,Y]),ct=N.useMemo(()=>({reference:de,floating:Se}),[de,Se]),Pt=N.useMemo(()=>{const Xe={position:n,left:0,top:0};if(!ct.floating)return Xe;const Oe=gE(ct.floating,A.x),at=gE(ct.floating,A.y);return c?{...Xe,transform:"translate("+Oe+"px, "+at+"px)",...BR(ct.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Oe,top:at}},[n,c,ct.floating,A.x,A.y]);return N.useMemo(()=>({...A,update:Tt,refs:Kt,elements:ct,floatingStyles:Pt}),[A,Tt,Kt,ct,Pt])}const WV=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:u}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?mE({element:s.current,padding:u}).fn(n):{}:s?mE({element:s,padding:u}).fn(n):{}}}},XV=(e,t)=>({...BV(e),options:[e,t]}),KV=(e,t)=>({...UV(e),options:[e,t]}),YV=(e,t)=>({...GV(e),options:[e,t]}),QV=(e,t)=>({...VV(e),options:[e,t]}),JV=(e,t)=>({...$V(e),options:[e,t]}),e$=(e,t)=>({...ZV(e),options:[e,t]}),t$=(e,t)=>({...WV(e),options:[e,t]});var r$="Arrow",UR=N.forwardRef((e,t)=>{const{children:n,width:s=10,height:u=5,...p}=e;return C.jsx(cr.svg,{...p,ref:t,width:s,height:u,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:C.jsx("polygon",{points:"0,0 30,0 15,10"})})});UR.displayName=r$;var n$=UR;function VR(e){const[t,n]=N.useState(void 0);return ki(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(u=>{if(!Array.isArray(u)||!u.length)return;const p=u[0];let f,c;if("borderBoxSize"in p){const S=p.borderBoxSize,E=Array.isArray(S)?S[0]:S;f=E.inlineSize,c=E.blockSize}else f=e.offsetWidth,c=e.offsetHeight;n({width:f,height:c})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var N2="Popper",[$R,s0]=ma(N2),[i$,ZR]=$R(N2),GR=e=>{const{__scopePopper:t,children:n}=e,[s,u]=N.useState(null);return C.jsx(i$,{scope:t,anchor:s,onAnchorChange:u,children:n})};GR.displayName=N2;var HR="PopperAnchor",qR=N.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...u}=e,p=ZR(HR,n),f=N.useRef(null),c=Gr(t,f);return N.useEffect(()=>{p.onAnchorChange((s==null?void 0:s.current)||f.current)}),s?null:C.jsx(cr.div,{...u,ref:c})});qR.displayName=HR;var O2="PopperContent",[s$,o$]=$R(O2),WR=N.forwardRef((e,t)=>{var gt,or,Yt,ir,At,Zt;const{__scopePopper:n,side:s="bottom",sideOffset:u=0,align:p="center",alignOffset:f=0,arrowPadding:c=0,avoidCollisions:S=!0,collisionBoundary:E=[],collisionPadding:A=0,sticky:z="partial",hideWhenDetached:L=!1,updatePositionStrategy:I="optimized",onPlaced:F,...B}=e,X=ZR(O2,n),[q,V]=N.useState(null),Y=Gr(t,Lr=>V(Lr)),[de,Se]=N.useState(null),ce=VR(de),Re=(ce==null?void 0:ce.width)??0,Ie=(ce==null?void 0:ce.height)??0,We=s+(p!=="center"?"-"+p:""),tt=typeof A=="number"?A:{top:0,right:0,bottom:0,left:0,...A},vt=Array.isArray(E)?E:[E],st=vt.length>0,Tt={padding:tt,boundary:vt.filter(l$),altBoundary:st},{refs:_t,floatingStyles:Kt,placement:ct,isPositioned:Pt,middlewareData:Xe}=qV({strategy:"fixed",placement:We,whileElementsMounted:(...Lr)=>FV(...Lr,{animationFrame:I==="always"}),elements:{reference:X.anchor},middleware:[XV({mainAxis:u+Ie,alignmentAxis:f}),S&&KV({mainAxis:!0,crossAxis:!1,limiter:z==="partial"?YV():void 0,...Tt}),S&&QV({...Tt}),JV({...Tt,apply:({elements:Lr,rects:vr,availableWidth:Qr,availableHeight:ei})=>{const{width:fn,height:$n}=vr.reference,Zn=Lr.floating.style;Zn.setProperty("--radix-popper-available-width",`${Qr}px`),Zn.setProperty("--radix-popper-available-height",`${ei}px`),Zn.setProperty("--radix-popper-anchor-width",`${fn}px`),Zn.setProperty("--radix-popper-anchor-height",`${$n}px`)}}),de&&t$({element:de,padding:c}),c$({arrowWidth:Re,arrowHeight:Ie}),L&&e$({strategy:"referenceHidden",...Tt})]}),[Oe,at]=YR(ct),Et=Ws(F);ki(()=>{Pt&&(Et==null||Et())},[Pt,Et]);const wt=(gt=Xe.arrow)==null?void 0:gt.x,Lt=(or=Xe.arrow)==null?void 0:or.y,It=((Yt=Xe.arrow)==null?void 0:Yt.centerOffset)!==0,[Wt,tr]=N.useState();return ki(()=>{q&&tr(window.getComputedStyle(q).zIndex)},[q]),C.jsx("div",{ref:_t.setFloating,"data-radix-popper-content-wrapper":"",style:{...Kt,transform:Pt?Kt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Wt,"--radix-popper-transform-origin":[(ir=Xe.transformOrigin)==null?void 0:ir.x,(At=Xe.transformOrigin)==null?void 0:At.y].join(" "),...((Zt=Xe.hide)==null?void 0:Zt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:C.jsx(s$,{scope:n,placedSide:Oe,onArrowChange:Se,arrowX:wt,arrowY:Lt,shouldHideArrow:It,children:C.jsx(cr.div,{"data-side":Oe,"data-align":at,...B,ref:Y,style:{...B.style,animation:Pt?void 0:"none"}})})})});WR.displayName=O2;var XR="PopperArrow",a$={top:"bottom",right:"left",bottom:"top",left:"right"},KR=N.forwardRef(function(t,n){const{__scopePopper:s,...u}=t,p=o$(XR,s),f=a$[p.placedSide];return C.jsx("span",{ref:p.onArrowChange,style:{position:"absolute",left:p.arrowX,top:p.arrowY,[f]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[p.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[p.placedSide],visibility:p.shouldHideArrow?"hidden":void 0},children:C.jsx(n$,{...u,ref:n,style:{...u.style,display:"block"}})})});KR.displayName=XR;function l$(e){return e!==null}var c$=e=>({name:"transformOrigin",options:e,fn(t){var X,q,V;const{placement:n,rects:s,middlewareData:u}=t,f=((X=u.arrow)==null?void 0:X.centerOffset)!==0,c=f?0:e.arrowWidth,S=f?0:e.arrowHeight,[E,A]=YR(n),z={start:"0%",center:"50%",end:"100%"}[A],L=(((q=u.arrow)==null?void 0:q.x)??0)+c/2,I=(((V=u.arrow)==null?void 0:V.y)??0)+S/2;let F="",B="";return E==="bottom"?(F=f?z:`${L}px`,B=`${-S}px`):E==="top"?(F=f?z:`${L}px`,B=`${s.floating.height+S}px`):E==="right"?(F=`${-S}px`,B=f?z:`${I}px`):E==="left"&&(F=`${s.floating.width+S}px`,B=f?z:`${I}px`),{data:{x:F,y:B}}}});function YR(e){const[t,n="center"]=e.split("-");return[t,n]}var QR=GR,JR=qR,eA=WR,tA=KR,u$="Portal",o0=N.forwardRef((e,t)=>{var c;const{container:n,...s}=e,[u,p]=N.useState(!1);ki(()=>p(!0),[]);const f=n||u&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return f?m2.createPortal(C.jsx(cr.div,{...s,ref:t}),f):null});o0.displayName=u$;function d$(e,t){return N.useReducer((n,s)=>t[n][s]??n,e)}var ol=e=>{const{present:t,children:n}=e,s=h$(t),u=typeof n=="function"?n({present:s.isPresent}):N.Children.only(n),p=Gr(s.ref,p$(u));return typeof n=="function"||s.isPresent?N.cloneElement(u,{ref:p}):null};ol.displayName="Presence";function h$(e){const[t,n]=N.useState(),s=N.useRef({}),u=N.useRef(e),p=N.useRef("none"),f=e?"mounted":"unmounted",[c,S]=d$(f,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const E=Xy(s.current);p.current=c==="mounted"?E:"none"},[c]),ki(()=>{const E=s.current,A=u.current;if(A!==e){const L=p.current,I=Xy(E);e?S("MOUNT"):I==="none"||(E==null?void 0:E.display)==="none"?S("UNMOUNT"):S(A&&L!==I?"ANIMATION_OUT":"UNMOUNT"),u.current=e}},[e,S]),ki(()=>{if(t){let E;const A=t.ownerDocument.defaultView??window,z=I=>{const B=Xy(s.current).includes(I.animationName);if(I.target===t&&B&&(S("ANIMATION_END"),!u.current)){const X=t.style.animationFillMode;t.style.animationFillMode="forwards",E=A.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=X)})}},L=I=>{I.target===t&&(p.current=Xy(s.current))};return t.addEventListener("animationstart",L),t.addEventListener("animationcancel",z),t.addEventListener("animationend",z),()=>{A.clearTimeout(E),t.removeEventListener("animationstart",L),t.removeEventListener("animationcancel",z),t.removeEventListener("animationend",z)}}else S("ANIMATION_END")},[t,S]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:N.useCallback(E=>{E&&(s.current=getComputedStyle(E)),n(E)},[])}}function Xy(e){return(e==null?void 0:e.animationName)||"none"}function p$(e){var s,u;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(u=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:u.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Bu({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,u]=f$({defaultProp:t,onChange:n}),p=e!==void 0,f=p?e:s,c=Ws(n),S=N.useCallback(E=>{if(p){const z=typeof E=="function"?E(e):E;z!==e&&c(z)}else u(E)},[p,e,u,c]);return[f,S]}function f$({defaultProp:e,onChange:t}){const n=N.useState(e),[s]=n,u=N.useRef(s),p=Ws(t);return N.useEffect(()=>{u.current!==s&&(p(s),u.current=s)},[s,u,p]),n}var Sb="rovingFocusGroup.onEntryFocus",m$={bubbles:!1,cancelable:!0},a0="RovingFocusGroup",[q1,rA,g$]=Qv(a0),[y$,l0]=ma(a0,[g$]),[_$,v$]=y$(a0),nA=N.forwardRef((e,t)=>C.jsx(q1.Provider,{scope:e.__scopeRovingFocusGroup,children:C.jsx(q1.Slot,{scope:e.__scopeRovingFocusGroup,children:C.jsx(x$,{...e,ref:t})})}));nA.displayName=a0;var x$=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:u=!1,dir:p,currentTabStopId:f,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:S,onEntryFocus:E,preventScrollOnEntryFocus:A=!1,...z}=e,L=N.useRef(null),I=Gr(t,L),F=Jv(p),[B=null,X]=Bu({prop:f,defaultProp:c,onChange:S}),[q,V]=N.useState(!1),Y=Ws(E),de=rA(n),Se=N.useRef(!1),[ce,Re]=N.useState(0);return N.useEffect(()=>{const Ie=L.current;if(Ie)return Ie.addEventListener(Sb,Y),()=>Ie.removeEventListener(Sb,Y)},[Y]),C.jsx(_$,{scope:n,orientation:s,dir:F,loop:u,currentTabStopId:B,onItemFocus:N.useCallback(Ie=>X(Ie),[X]),onItemShiftTab:N.useCallback(()=>V(!0),[]),onFocusableItemAdd:N.useCallback(()=>Re(Ie=>Ie+1),[]),onFocusableItemRemove:N.useCallback(()=>Re(Ie=>Ie-1),[]),children:C.jsx(cr.div,{tabIndex:q||ce===0?-1:0,"data-orientation":s,...z,ref:I,style:{outline:"none",...e.style},onMouseDown:jt(e.onMouseDown,()=>{Se.current=!0}),onFocus:jt(e.onFocus,Ie=>{const We=!Se.current;if(Ie.target===Ie.currentTarget&&We&&!q){const tt=new CustomEvent(Sb,m$);if(Ie.currentTarget.dispatchEvent(tt),!tt.defaultPrevented){const vt=de().filter(ct=>ct.focusable),st=vt.find(ct=>ct.active),Tt=vt.find(ct=>ct.id===B),Kt=[st,Tt,...vt].filter(Boolean).map(ct=>ct.ref.current);oA(Kt,A)}}Se.current=!1}),onBlur:jt(e.onBlur,()=>V(!1))})})}),iA="RovingFocusGroupItem",sA=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:u=!1,tabStopId:p,...f}=e,c=mo(),S=p||c,E=v$(iA,n),A=E.currentTabStopId===S,z=rA(n),{onFocusableItemAdd:L,onFocusableItemRemove:I}=E;return N.useEffect(()=>{if(s)return L(),()=>I()},[s,L,I]),C.jsx(q1.ItemSlot,{scope:n,id:S,focusable:s,active:u,children:C.jsx(cr.span,{tabIndex:A?0:-1,"data-orientation":E.orientation,...f,ref:t,onMouseDown:jt(e.onMouseDown,F=>{s?E.onItemFocus(S):F.preventDefault()}),onFocus:jt(e.onFocus,()=>E.onItemFocus(S)),onKeyDown:jt(e.onKeyDown,F=>{if(F.key==="Tab"&&F.shiftKey){E.onItemShiftTab();return}if(F.target!==F.currentTarget)return;const B=S$(F,E.orientation,E.dir);if(B!==void 0){if(F.metaKey||F.ctrlKey||F.altKey||F.shiftKey)return;F.preventDefault();let q=z().filter(V=>V.focusable).map(V=>V.ref.current);if(B==="last")q.reverse();else if(B==="prev"||B==="next"){B==="prev"&&q.reverse();const V=q.indexOf(F.currentTarget);q=E.loop?T$(q,V+1):q.slice(V+1)}setTimeout(()=>oA(q))}})})})});sA.displayName=iA;var b$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function w$(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function S$(e,t,n){const s=w$(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return b$[s]}function oA(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function T$(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var aA=nA,lA=sA,C$=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Hd=new WeakMap,Ky=new WeakMap,Yy={},Tb=0,cA=function(e){return e&&(e.host||cA(e.parentNode))},P$=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=cA(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},E$=function(e,t,n,s){var u=P$(t,Array.isArray(e)?e:[e]);Yy[n]||(Yy[n]=new WeakMap);var p=Yy[n],f=[],c=new Set,S=new Set(u),E=function(z){!z||c.has(z)||(c.add(z),E(z.parentNode))};u.forEach(E);var A=function(z){!z||S.has(z)||Array.prototype.forEach.call(z.children,function(L){if(c.has(L))A(L);else try{var I=L.getAttribute(s),F=I!==null&&I!=="false",B=(Hd.get(L)||0)+1,X=(p.get(L)||0)+1;Hd.set(L,B),p.set(L,X),f.push(L),B===1&&F&&Ky.set(L,!0),X===1&&L.setAttribute(n,"true"),F||L.setAttribute(s,"true")}catch(q){console.error("aria-hidden: cannot operate on ",L,q)}})};return A(t),c.clear(),Tb++,function(){f.forEach(function(z){var L=Hd.get(z)-1,I=p.get(z)-1;Hd.set(z,L),p.set(z,I),L||(Ky.has(z)||z.removeAttribute(s),Ky.delete(z)),I||z.removeAttribute(n)}),Tb--,Tb||(Hd=new WeakMap,Hd=new WeakMap,Ky=new WeakMap,Yy={})}},F2=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),u=C$(e);return u?(s.push.apply(s,Array.from(u.querySelectorAll("[aria-live]"))),E$(s,u,n,"aria-hidden")):function(){return null}},oa=function(){return oa=Object.assign||function(t){for(var n,s=1,u=arguments.length;s<u;s++){n=arguments[s];for(var p in n)Object.prototype.hasOwnProperty.call(n,p)&&(t[p]=n[p])}return t},oa.apply(this,arguments)};function uA(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,s=Object.getOwnPropertySymbols(e);u<s.length;u++)t.indexOf(s[u])<0&&Object.prototype.propertyIsEnumerable.call(e,s[u])&&(n[s[u]]=e[s[u]]);return n}function M$(e,t,n){if(n||arguments.length===2)for(var s=0,u=t.length,p;s<u;s++)(p||!(s in t))&&(p||(p=Array.prototype.slice.call(t,0,s)),p[s]=t[s]);return e.concat(p||Array.prototype.slice.call(t))}var v_="right-scroll-bar-position",x_="width-before-scroll-bar",k$="with-scroll-bars-hidden",I$="--removed-body-scroll-bar-size";function Cb(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function R$(e,t){var n=N.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var u=n.value;u!==s&&(n.value=s,n.callback(s,u))}}}})[0];return n.callback=t,n.facade}var A$=typeof window<"u"?N.useLayoutEffect:N.useEffect,yE=new WeakMap;function D$(e,t){var n=R$(null,function(s){return e.forEach(function(u){return Cb(u,s)})});return A$(function(){var s=yE.get(n);if(s){var u=new Set(s),p=new Set(e),f=n.current;u.forEach(function(c){p.has(c)||Cb(c,null)}),p.forEach(function(c){u.has(c)||Cb(c,f)})}yE.set(n,e)},[e]),n}function z$(e){return e}function j$(e,t){t===void 0&&(t=z$);var n=[],s=!1,u={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(p){var f=t(p,s);return n.push(f),function(){n=n.filter(function(c){return c!==f})}},assignSyncMedium:function(p){for(s=!0;n.length;){var f=n;n=[],f.forEach(p)}n={push:function(c){return p(c)},filter:function(){return n}}},assignMedium:function(p){s=!0;var f=[];if(n.length){var c=n;n=[],c.forEach(p),f=n}var S=function(){var A=f;f=[],A.forEach(p)},E=function(){return Promise.resolve().then(S)};E(),n={push:function(A){f.push(A),E()},filter:function(A){return f=f.filter(A),n}}}};return u}function L$(e){e===void 0&&(e={});var t=j$(null);return t.options=oa({async:!0,ssr:!1},e),t}var dA=function(e){var t=e.sideCar,n=uA(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return N.createElement(s,oa({},n))};dA.isSideCarExport=!0;function N$(e,t){return e.useMedium(t),dA}var hA=L$(),Pb=function(){},c0=N.forwardRef(function(e,t){var n=N.useRef(null),s=N.useState({onScrollCapture:Pb,onWheelCapture:Pb,onTouchMoveCapture:Pb}),u=s[0],p=s[1],f=e.forwardProps,c=e.children,S=e.className,E=e.removeScrollBar,A=e.enabled,z=e.shards,L=e.sideCar,I=e.noIsolation,F=e.inert,B=e.allowPinchZoom,X=e.as,q=X===void 0?"div":X,V=e.gapMode,Y=uA(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),de=L,Se=D$([n,t]),ce=oa(oa({},Y),u);return N.createElement(N.Fragment,null,A&&N.createElement(de,{sideCar:hA,removeScrollBar:E,shards:z,noIsolation:I,inert:F,setCallbacks:p,allowPinchZoom:!!B,lockRef:n,gapMode:V}),f?N.cloneElement(N.Children.only(c),oa(oa({},ce),{ref:Se})):N.createElement(q,oa({},ce,{className:S,ref:Se}),c))});c0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};c0.classNames={fullWidth:x_,zeroRight:v_};var O$=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function F$(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=O$();return t&&e.setAttribute("nonce",t),e}function B$(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function U$(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var V$=function(){var e=0,t=null;return{add:function(n){e==0&&(t=F$())&&(B$(t,n),U$(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},$$=function(){var e=V$();return function(t,n){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},pA=function(){var e=$$(),t=function(n){var s=n.styles,u=n.dynamic;return e(s,u),null};return t},Z$={left:0,top:0,right:0,gap:0},Eb=function(e){return parseInt(e||"",10)||0},G$=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],u=t[e==="padding"?"paddingRight":"marginRight"];return[Eb(n),Eb(s),Eb(u)]},H$=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Z$;var t=G$(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},q$=pA(),_h="data-scroll-locked",W$=function(e,t,n,s){var u=e.left,p=e.top,f=e.right,c=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(k$,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(c,"px ").concat(s,`;
  }
  body[`).concat(_h,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(u,`px;
    padding-top: `).concat(p,`px;
    padding-right: `).concat(f,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(v_,` {
    right: `).concat(c,"px ").concat(s,`;
  }
  
  .`).concat(x_,` {
    margin-right: `).concat(c,"px ").concat(s,`;
  }
  
  .`).concat(v_," .").concat(v_,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(x_," .").concat(x_,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(_h,`] {
    `).concat(I$,": ").concat(c,`px;
  }
`)},_E=function(){var e=parseInt(document.body.getAttribute(_h)||"0",10);return isFinite(e)?e:0},X$=function(){N.useEffect(function(){return document.body.setAttribute(_h,(_E()+1).toString()),function(){var e=_E()-1;e<=0?document.body.removeAttribute(_h):document.body.setAttribute(_h,e.toString())}},[])},K$=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,u=s===void 0?"margin":s;X$();var p=N.useMemo(function(){return H$(u)},[u]);return N.createElement(q$,{styles:W$(p,!t,u,n?"":"!important")})},W1=!1;if(typeof window<"u")try{var Qy=Object.defineProperty({},"passive",{get:function(){return W1=!0,!0}});window.addEventListener("test",Qy,Qy),window.removeEventListener("test",Qy,Qy)}catch{W1=!1}var qd=W1?{passive:!1}:!1,Y$=function(e){return e.tagName==="TEXTAREA"},fA=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Y$(e)&&n[t]==="visible")},Q$=function(e){return fA(e,"overflowY")},J$=function(e){return fA(e,"overflowX")},vE=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var u=mA(e,s);if(u){var p=gA(e,s),f=p[1],c=p[2];if(f>c)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},e9=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},t9=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},mA=function(e,t){return e==="v"?Q$(t):J$(t)},gA=function(e,t){return e==="v"?e9(t):t9(t)},r9=function(e,t){return e==="h"&&t==="rtl"?-1:1},n9=function(e,t,n,s,u){var p=r9(e,window.getComputedStyle(t).direction),f=p*s,c=n.target,S=t.contains(c),E=!1,A=f>0,z=0,L=0;do{var I=gA(e,c),F=I[0],B=I[1],X=I[2],q=B-X-p*F;(F||q)&&mA(e,c)&&(z+=q,L+=F),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!S&&c!==document.body||S&&(t.contains(c)||t===c));return(A&&(Math.abs(z)<1||!u)||!A&&(Math.abs(L)<1||!u))&&(E=!0),E},Jy=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},xE=function(e){return[e.deltaX,e.deltaY]},bE=function(e){return e&&"current"in e?e.current:e},i9=function(e,t){return e[0]===t[0]&&e[1]===t[1]},s9=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},o9=0,Wd=[];function a9(e){var t=N.useRef([]),n=N.useRef([0,0]),s=N.useRef(),u=N.useState(o9++)[0],p=N.useState(pA)[0],f=N.useRef(e);N.useEffect(function(){f.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(u));var B=M$([e.lockRef.current],(e.shards||[]).map(bE),!0).filter(Boolean);return B.forEach(function(X){return X.classList.add("allow-interactivity-".concat(u))}),function(){document.body.classList.remove("block-interactivity-".concat(u)),B.forEach(function(X){return X.classList.remove("allow-interactivity-".concat(u))})}}},[e.inert,e.lockRef.current,e.shards]);var c=N.useCallback(function(B,X){if("touches"in B&&B.touches.length===2||B.type==="wheel"&&B.ctrlKey)return!f.current.allowPinchZoom;var q=Jy(B),V=n.current,Y="deltaX"in B?B.deltaX:V[0]-q[0],de="deltaY"in B?B.deltaY:V[1]-q[1],Se,ce=B.target,Re=Math.abs(Y)>Math.abs(de)?"h":"v";if("touches"in B&&Re==="h"&&ce.type==="range")return!1;var Ie=vE(Re,ce);if(!Ie)return!0;if(Ie?Se=Re:(Se=Re==="v"?"h":"v",Ie=vE(Re,ce)),!Ie)return!1;if(!s.current&&"changedTouches"in B&&(Y||de)&&(s.current=Se),!Se)return!0;var We=s.current||Se;return n9(We,X,B,We==="h"?Y:de,!0)},[]),S=N.useCallback(function(B){var X=B;if(!(!Wd.length||Wd[Wd.length-1]!==p)){var q="deltaY"in X?xE(X):Jy(X),V=t.current.filter(function(Se){return Se.name===X.type&&(Se.target===X.target||X.target===Se.shadowParent)&&i9(Se.delta,q)})[0];if(V&&V.should){X.cancelable&&X.preventDefault();return}if(!V){var Y=(f.current.shards||[]).map(bE).filter(Boolean).filter(function(Se){return Se.contains(X.target)}),de=Y.length>0?c(X,Y[0]):!f.current.noIsolation;de&&X.cancelable&&X.preventDefault()}}},[]),E=N.useCallback(function(B,X,q,V){var Y={name:B,delta:X,target:q,should:V,shadowParent:l9(q)};t.current.push(Y),setTimeout(function(){t.current=t.current.filter(function(de){return de!==Y})},1)},[]),A=N.useCallback(function(B){n.current=Jy(B),s.current=void 0},[]),z=N.useCallback(function(B){E(B.type,xE(B),B.target,c(B,e.lockRef.current))},[]),L=N.useCallback(function(B){E(B.type,Jy(B),B.target,c(B,e.lockRef.current))},[]);N.useEffect(function(){return Wd.push(p),e.setCallbacks({onScrollCapture:z,onWheelCapture:z,onTouchMoveCapture:L}),document.addEventListener("wheel",S,qd),document.addEventListener("touchmove",S,qd),document.addEventListener("touchstart",A,qd),function(){Wd=Wd.filter(function(B){return B!==p}),document.removeEventListener("wheel",S,qd),document.removeEventListener("touchmove",S,qd),document.removeEventListener("touchstart",A,qd)}},[]);var I=e.removeScrollBar,F=e.inert;return N.createElement(N.Fragment,null,F?N.createElement(p,{styles:s9(u)}):null,I?N.createElement(K$,{gapMode:e.gapMode}):null)}function l9(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const c9=N$(hA,a9);var u0=N.forwardRef(function(e,t){return N.createElement(c0,oa({},e,{ref:t,sideCar:c9}))});u0.classNames=c0.classNames;var X1=["Enter"," "],u9=["ArrowDown","PageUp","Home"],yA=["ArrowUp","PageDown","End"],d9=[...u9,...yA],h9={ltr:[...X1,"ArrowRight"],rtl:[...X1,"ArrowLeft"]},p9={ltr:["ArrowLeft"],rtl:["ArrowRight"]},pg="Menu",[qm,f9,m9]=Qv(pg),[Wu,B2]=ma(pg,[m9,s0,l0]),d0=s0(),_A=l0(),[g9,Xu]=Wu(pg),[y9,fg]=Wu(pg),vA=e=>{const{__scopeMenu:t,open:n=!1,children:s,dir:u,onOpenChange:p,modal:f=!0}=e,c=d0(t),[S,E]=N.useState(null),A=N.useRef(!1),z=Ws(p),L=Jv(u);return N.useEffect(()=>{const I=()=>{A.current=!0,document.addEventListener("pointerdown",F,{capture:!0,once:!0}),document.addEventListener("pointermove",F,{capture:!0,once:!0})},F=()=>A.current=!1;return document.addEventListener("keydown",I,{capture:!0}),()=>{document.removeEventListener("keydown",I,{capture:!0}),document.removeEventListener("pointerdown",F,{capture:!0}),document.removeEventListener("pointermove",F,{capture:!0})}},[]),C.jsx(QR,{...c,children:C.jsx(g9,{scope:t,open:n,onOpenChange:z,content:S,onContentChange:E,children:C.jsx(y9,{scope:t,onClose:N.useCallback(()=>z(!1),[z]),isUsingKeyboardRef:A,dir:L,modal:f,children:s})})})};vA.displayName=pg;var _9="MenuAnchor",U2=N.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,u=d0(n);return C.jsx(JR,{...u,...s,ref:t})});U2.displayName=_9;var V2="MenuPortal",[v9,xA]=Wu(V2,{forceMount:void 0}),bA=e=>{const{__scopeMenu:t,forceMount:n,children:s,container:u}=e,p=Xu(V2,t);return C.jsx(v9,{scope:t,forceMount:n,children:C.jsx(ol,{present:n||p.open,children:C.jsx(o0,{asChild:!0,container:u,children:s})})})};bA.displayName=V2;var go="MenuContent",[x9,$2]=Wu(go),wA=N.forwardRef((e,t)=>{const n=xA(go,e.__scopeMenu),{forceMount:s=n.forceMount,...u}=e,p=Xu(go,e.__scopeMenu),f=fg(go,e.__scopeMenu);return C.jsx(qm.Provider,{scope:e.__scopeMenu,children:C.jsx(ol,{present:s||p.open,children:C.jsx(qm.Slot,{scope:e.__scopeMenu,children:f.modal?C.jsx(b9,{...u,ref:t}):C.jsx(w9,{...u,ref:t})})})})}),b9=N.forwardRef((e,t)=>{const n=Xu(go,e.__scopeMenu),s=N.useRef(null),u=Gr(t,s);return N.useEffect(()=>{const p=s.current;if(p)return F2(p)},[]),C.jsx(Z2,{...e,ref:u,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:jt(e.onFocusOutside,p=>p.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),w9=N.forwardRef((e,t)=>{const n=Xu(go,e.__scopeMenu);return C.jsx(Z2,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Z2=N.forwardRef((e,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:u,onOpenAutoFocus:p,onCloseAutoFocus:f,disableOutsidePointerEvents:c,onEntryFocus:S,onEscapeKeyDown:E,onPointerDownOutside:A,onFocusOutside:z,onInteractOutside:L,onDismiss:I,disableOutsideScroll:F,...B}=e,X=Xu(go,n),q=fg(go,n),V=d0(n),Y=_A(n),de=f9(n),[Se,ce]=N.useState(null),Re=N.useRef(null),Ie=Gr(t,Re,X.onContentChange),We=N.useRef(0),tt=N.useRef(""),vt=N.useRef(0),st=N.useRef(null),Tt=N.useRef("right"),_t=N.useRef(0),Kt=F?u0:N.Fragment,ct=F?{as:lc,allowPinchZoom:!0}:void 0,Pt=Oe=>{var gt,or;const at=tt.current+Oe,Et=de().filter(Yt=>!Yt.disabled),wt=document.activeElement,Lt=(gt=Et.find(Yt=>Yt.ref.current===wt))==null?void 0:gt.textValue,It=Et.map(Yt=>Yt.textValue),Wt=z9(It,at,Lt),tr=(or=Et.find(Yt=>Yt.textValue===Wt))==null?void 0:or.ref.current;(function Yt(ir){tt.current=ir,window.clearTimeout(We.current),ir!==""&&(We.current=window.setTimeout(()=>Yt(""),1e3))})(at),tr&&setTimeout(()=>tr.focus())};N.useEffect(()=>()=>window.clearTimeout(We.current),[]),k2();const Xe=N.useCallback(Oe=>{var Et,wt;return Tt.current===((Et=st.current)==null?void 0:Et.side)&&L9(Oe,(wt=st.current)==null?void 0:wt.area)},[]);return C.jsx(x9,{scope:n,searchRef:tt,onItemEnter:N.useCallback(Oe=>{Xe(Oe)&&Oe.preventDefault()},[Xe]),onItemLeave:N.useCallback(Oe=>{var at;Xe(Oe)||((at=Re.current)==null||at.focus(),ce(null))},[Xe]),onTriggerLeave:N.useCallback(Oe=>{Xe(Oe)&&Oe.preventDefault()},[Xe]),pointerGraceTimerRef:vt,onPointerGraceIntentChange:N.useCallback(Oe=>{st.current=Oe},[]),children:C.jsx(Kt,{...ct,children:C.jsx(t0,{asChild:!0,trapped:u,onMountAutoFocus:jt(p,Oe=>{var at;Oe.preventDefault(),(at=Re.current)==null||at.focus({preventScroll:!0})}),onUnmountAutoFocus:f,children:C.jsx(e0,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:E,onPointerDownOutside:A,onFocusOutside:z,onInteractOutside:L,onDismiss:I,children:C.jsx(aA,{asChild:!0,...Y,dir:q.dir,orientation:"vertical",loop:s,currentTabStopId:Se,onCurrentTabStopIdChange:ce,onEntryFocus:jt(S,Oe=>{q.isUsingKeyboardRef.current||Oe.preventDefault()}),preventScrollOnEntryFocus:!0,children:C.jsx(eA,{role:"menu","aria-orientation":"vertical","data-state":OA(X.open),"data-radix-menu-content":"",dir:q.dir,...V,...B,ref:Ie,style:{outline:"none",...B.style},onKeyDown:jt(B.onKeyDown,Oe=>{const Et=Oe.target.closest("[data-radix-menu-content]")===Oe.currentTarget,wt=Oe.ctrlKey||Oe.altKey||Oe.metaKey,Lt=Oe.key.length===1;Et&&(Oe.key==="Tab"&&Oe.preventDefault(),!wt&&Lt&&Pt(Oe.key));const It=Re.current;if(Oe.target!==It||!d9.includes(Oe.key))return;Oe.preventDefault();const tr=de().filter(gt=>!gt.disabled).map(gt=>gt.ref.current);yA.includes(Oe.key)&&tr.reverse(),A9(tr)}),onBlur:jt(e.onBlur,Oe=>{Oe.currentTarget.contains(Oe.target)||(window.clearTimeout(We.current),tt.current="")}),onPointerMove:jt(e.onPointerMove,Wm(Oe=>{const at=Oe.target,Et=_t.current!==Oe.clientX;if(Oe.currentTarget.contains(at)&&Et){const wt=Oe.clientX>_t.current?"right":"left";Tt.current=wt,_t.current=Oe.clientX}}))})})})})})})});wA.displayName=go;var S9="MenuGroup",G2=N.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return C.jsx(cr.div,{role:"group",...s,ref:t})});G2.displayName=S9;var T9="MenuLabel",SA=N.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return C.jsx(cr.div,{...s,ref:t})});SA.displayName=T9;var dv="MenuItem",wE="menu.itemSelect",h0=N.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:s,...u}=e,p=N.useRef(null),f=fg(dv,e.__scopeMenu),c=$2(dv,e.__scopeMenu),S=Gr(t,p),E=N.useRef(!1),A=()=>{const z=p.current;if(!n&&z){const L=new CustomEvent(wE,{bubbles:!0,cancelable:!0});z.addEventListener(wE,I=>s==null?void 0:s(I),{once:!0}),AI(z,L),L.defaultPrevented?E.current=!1:f.onClose()}};return C.jsx(TA,{...u,ref:S,disabled:n,onClick:jt(e.onClick,A),onPointerDown:z=>{var L;(L=e.onPointerDown)==null||L.call(e,z),E.current=!0},onPointerUp:jt(e.onPointerUp,z=>{var L;E.current||(L=z.currentTarget)==null||L.click()}),onKeyDown:jt(e.onKeyDown,z=>{const L=c.searchRef.current!=="";n||L&&z.key===" "||X1.includes(z.key)&&(z.currentTarget.click(),z.preventDefault())})})});h0.displayName=dv;var TA=N.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:u,...p}=e,f=$2(dv,n),c=_A(n),S=N.useRef(null),E=Gr(t,S),[A,z]=N.useState(!1),[L,I]=N.useState("");return N.useEffect(()=>{const F=S.current;F&&I((F.textContent??"").trim())},[p.children]),C.jsx(qm.ItemSlot,{scope:n,disabled:s,textValue:u??L,children:C.jsx(lA,{asChild:!0,...c,focusable:!s,children:C.jsx(cr.div,{role:"menuitem","data-highlighted":A?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...p,ref:E,onPointerMove:jt(e.onPointerMove,Wm(F=>{s?f.onItemLeave(F):(f.onItemEnter(F),F.defaultPrevented||F.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:jt(e.onPointerLeave,Wm(F=>f.onItemLeave(F))),onFocus:jt(e.onFocus,()=>z(!0)),onBlur:jt(e.onBlur,()=>z(!1))})})})}),C9="MenuCheckboxItem",CA=N.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:s,...u}=e;return C.jsx(IA,{scope:e.__scopeMenu,checked:n,children:C.jsx(h0,{role:"menuitemcheckbox","aria-checked":hv(n)?"mixed":n,...u,ref:t,"data-state":q2(n),onSelect:jt(u.onSelect,()=>s==null?void 0:s(hv(n)?!0:!n),{checkForDefaultPrevented:!1})})})});CA.displayName=C9;var PA="MenuRadioGroup",[P9,E9]=Wu(PA,{value:void 0,onValueChange:()=>{}}),EA=N.forwardRef((e,t)=>{const{value:n,onValueChange:s,...u}=e,p=Ws(s);return C.jsx(P9,{scope:e.__scopeMenu,value:n,onValueChange:p,children:C.jsx(G2,{...u,ref:t})})});EA.displayName=PA;var MA="MenuRadioItem",kA=N.forwardRef((e,t)=>{const{value:n,...s}=e,u=E9(MA,e.__scopeMenu),p=n===u.value;return C.jsx(IA,{scope:e.__scopeMenu,checked:p,children:C.jsx(h0,{role:"menuitemradio","aria-checked":p,...s,ref:t,"data-state":q2(p),onSelect:jt(s.onSelect,()=>{var f;return(f=u.onValueChange)==null?void 0:f.call(u,n)},{checkForDefaultPrevented:!1})})})});kA.displayName=MA;var H2="MenuItemIndicator",[IA,M9]=Wu(H2,{checked:!1}),RA=N.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:s,...u}=e,p=M9(H2,n);return C.jsx(ol,{present:s||hv(p.checked)||p.checked===!0,children:C.jsx(cr.span,{...u,ref:t,"data-state":q2(p.checked)})})});RA.displayName=H2;var k9="MenuSeparator",AA=N.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return C.jsx(cr.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});AA.displayName=k9;var I9="MenuArrow",DA=N.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,u=d0(n);return C.jsx(tA,{...u,...s,ref:t})});DA.displayName=I9;var R9="MenuSub",[mH,zA]=Wu(R9),Yf="MenuSubTrigger",jA=N.forwardRef((e,t)=>{const n=Xu(Yf,e.__scopeMenu),s=fg(Yf,e.__scopeMenu),u=zA(Yf,e.__scopeMenu),p=$2(Yf,e.__scopeMenu),f=N.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:S}=p,E={__scopeMenu:e.__scopeMenu},A=N.useCallback(()=>{f.current&&window.clearTimeout(f.current),f.current=null},[]);return N.useEffect(()=>A,[A]),N.useEffect(()=>{const z=c.current;return()=>{window.clearTimeout(z),S(null)}},[c,S]),C.jsx(U2,{asChild:!0,...E,children:C.jsx(TA,{id:u.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":u.contentId,"data-state":OA(n.open),...e,ref:Fv(t,u.onTriggerChange),onClick:z=>{var L;(L=e.onClick)==null||L.call(e,z),!(e.disabled||z.defaultPrevented)&&(z.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:jt(e.onPointerMove,Wm(z=>{p.onItemEnter(z),!z.defaultPrevented&&!e.disabled&&!n.open&&!f.current&&(p.onPointerGraceIntentChange(null),f.current=window.setTimeout(()=>{n.onOpenChange(!0),A()},100))})),onPointerLeave:jt(e.onPointerLeave,Wm(z=>{var I,F;A();const L=(I=n.content)==null?void 0:I.getBoundingClientRect();if(L){const B=(F=n.content)==null?void 0:F.dataset.side,X=B==="right",q=X?-5:5,V=L[X?"left":"right"],Y=L[X?"right":"left"];p.onPointerGraceIntentChange({area:[{x:z.clientX+q,y:z.clientY},{x:V,y:L.top},{x:Y,y:L.top},{x:Y,y:L.bottom},{x:V,y:L.bottom}],side:B}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>p.onPointerGraceIntentChange(null),300)}else{if(p.onTriggerLeave(z),z.defaultPrevented)return;p.onPointerGraceIntentChange(null)}})),onKeyDown:jt(e.onKeyDown,z=>{var I;const L=p.searchRef.current!=="";e.disabled||L&&z.key===" "||h9[s.dir].includes(z.key)&&(n.onOpenChange(!0),(I=n.content)==null||I.focus(),z.preventDefault())})})})});jA.displayName=Yf;var LA="MenuSubContent",NA=N.forwardRef((e,t)=>{const n=xA(go,e.__scopeMenu),{forceMount:s=n.forceMount,...u}=e,p=Xu(go,e.__scopeMenu),f=fg(go,e.__scopeMenu),c=zA(LA,e.__scopeMenu),S=N.useRef(null),E=Gr(t,S);return C.jsx(qm.Provider,{scope:e.__scopeMenu,children:C.jsx(ol,{present:s||p.open,children:C.jsx(qm.Slot,{scope:e.__scopeMenu,children:C.jsx(Z2,{id:c.contentId,"aria-labelledby":c.triggerId,...u,ref:E,align:"start",side:f.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:A=>{var z;f.isUsingKeyboardRef.current&&((z=S.current)==null||z.focus()),A.preventDefault()},onCloseAutoFocus:A=>A.preventDefault(),onFocusOutside:jt(e.onFocusOutside,A=>{A.target!==c.trigger&&p.onOpenChange(!1)}),onEscapeKeyDown:jt(e.onEscapeKeyDown,A=>{f.onClose(),A.preventDefault()}),onKeyDown:jt(e.onKeyDown,A=>{var I;const z=A.currentTarget.contains(A.target),L=p9[f.dir].includes(A.key);z&&L&&(p.onOpenChange(!1),(I=c.trigger)==null||I.focus(),A.preventDefault())})})})})})});NA.displayName=LA;function OA(e){return e?"open":"closed"}function hv(e){return e==="indeterminate"}function q2(e){return hv(e)?"indeterminate":e?"checked":"unchecked"}function A9(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function D9(e,t){return e.map((n,s)=>e[(t+s)%e.length])}function z9(e,t,n){const u=t.length>1&&Array.from(t).every(E=>E===t[0])?t[0]:t,p=n?e.indexOf(n):-1;let f=D9(e,Math.max(p,0));u.length===1&&(f=f.filter(E=>E!==n));const S=f.find(E=>E.toLowerCase().startsWith(u.toLowerCase()));return S!==n?S:void 0}function j9(e,t){const{x:n,y:s}=e;let u=!1;for(let p=0,f=t.length-1;p<t.length;f=p++){const c=t[p].x,S=t[p].y,E=t[f].x,A=t[f].y;S>s!=A>s&&n<(E-c)*(s-S)/(A-S)+c&&(u=!u)}return u}function L9(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return j9(n,t)}function Wm(e){return t=>t.pointerType==="mouse"?e(t):void 0}var FA=vA,BA=U2,UA=bA,VA=wA,$A=G2,ZA=SA,GA=h0,HA=CA,qA=EA,WA=kA,XA=RA,KA=AA,YA=DA,QA=jA,JA=NA,p0="Menubar",[K1,N9,O9]=Qv(p0),[eD,gH]=ma(p0,[O9,l0]),cs=B2(),tD=l0(),[F9,W2]=eD(p0),rD=N.forwardRef((e,t)=>{const{__scopeMenubar:n,value:s,onValueChange:u,defaultValue:p,loop:f=!0,dir:c,...S}=e,E=Jv(c),A=tD(n),[z="",L]=Bu({prop:s,onChange:u,defaultProp:p}),[I,F]=N.useState(null);return C.jsx(F9,{scope:n,value:z,onMenuOpen:N.useCallback(B=>{L(B),F(B)},[L]),onMenuClose:N.useCallback(()=>L(""),[L]),onMenuToggle:N.useCallback(B=>{L(X=>X?"":B),F(B)},[L]),dir:E,loop:f,children:C.jsx(K1.Provider,{scope:n,children:C.jsx(K1.Slot,{scope:n,children:C.jsx(aA,{asChild:!0,...A,orientation:"horizontal",loop:f,dir:E,currentTabStopId:I,onCurrentTabStopIdChange:F,children:C.jsx(cr.div,{role:"menubar",...S,ref:t})})})})})});rD.displayName=p0;var X2="MenubarMenu",[B9,nD]=eD(X2),iD=e=>{const{__scopeMenubar:t,value:n,...s}=e,u=mo(),p=n||u||"LEGACY_REACT_AUTO_VALUE",f=W2(X2,t),c=cs(t),S=N.useRef(null),E=N.useRef(!1),A=f.value===p;return N.useEffect(()=>{A||(E.current=!1)},[A]),C.jsx(B9,{scope:t,value:p,triggerId:mo(),triggerRef:S,contentId:mo(),wasKeyboardTriggerOpenRef:E,children:C.jsx(FA,{...c,open:A,onOpenChange:z=>{z||f.onMenuClose()},modal:!1,dir:f.dir,...s})})};iD.displayName=X2;var Y1="MenubarTrigger",sD=N.forwardRef((e,t)=>{const{__scopeMenubar:n,disabled:s=!1,...u}=e,p=tD(n),f=cs(n),c=W2(Y1,n),S=nD(Y1,n),E=N.useRef(null),A=Gr(t,E,S.triggerRef),[z,L]=N.useState(!1),I=c.value===S.value;return C.jsx(K1.ItemSlot,{scope:n,value:S.value,disabled:s,children:C.jsx(lA,{asChild:!0,...p,focusable:!s,tabStopId:S.value,children:C.jsx(BA,{asChild:!0,...f,children:C.jsx(cr.button,{type:"button",role:"menuitem",id:S.triggerId,"aria-haspopup":"menu","aria-expanded":I,"aria-controls":I?S.contentId:void 0,"data-highlighted":z?"":void 0,"data-state":I?"open":"closed","data-disabled":s?"":void 0,disabled:s,...u,ref:A,onPointerDown:jt(e.onPointerDown,F=>{!s&&F.button===0&&F.ctrlKey===!1&&(c.onMenuOpen(S.value),I||F.preventDefault())}),onPointerEnter:jt(e.onPointerEnter,()=>{var B;!!c.value&&!I&&(c.onMenuOpen(S.value),(B=E.current)==null||B.focus())}),onKeyDown:jt(e.onKeyDown,F=>{s||(["Enter"," "].includes(F.key)&&c.onMenuToggle(S.value),F.key==="ArrowDown"&&c.onMenuOpen(S.value),["Enter"," ","ArrowDown"].includes(F.key)&&(S.wasKeyboardTriggerOpenRef.current=!0,F.preventDefault()))}),onFocus:jt(e.onFocus,()=>L(!0)),onBlur:jt(e.onBlur,()=>L(!1))})})})})});sD.displayName=Y1;var U9="MenubarPortal",oD=e=>{const{__scopeMenubar:t,...n}=e,s=cs(t);return C.jsx(UA,{...s,...n})};oD.displayName=U9;var Q1="MenubarContent",aD=N.forwardRef((e,t)=>{const{__scopeMenubar:n,align:s="start",...u}=e,p=cs(n),f=W2(Q1,n),c=nD(Q1,n),S=N9(n),E=N.useRef(!1);return C.jsx(VA,{id:c.contentId,"aria-labelledby":c.triggerId,"data-radix-menubar-content":"",...p,...u,ref:t,align:s,onCloseAutoFocus:jt(e.onCloseAutoFocus,A=>{var L;!!!f.value&&!E.current&&((L=c.triggerRef.current)==null||L.focus()),E.current=!1,A.preventDefault()}),onFocusOutside:jt(e.onFocusOutside,A=>{const z=A.target;S().some(I=>{var F;return(F=I.ref.current)==null?void 0:F.contains(z)})&&A.preventDefault()}),onInteractOutside:jt(e.onInteractOutside,()=>{E.current=!0}),onEntryFocus:A=>{c.wasKeyboardTriggerOpenRef.current||A.preventDefault()},onKeyDown:jt(e.onKeyDown,A=>{if(["ArrowRight","ArrowLeft"].includes(A.key)){const z=A.target,L=z.hasAttribute("data-radix-menubar-subtrigger"),I=z.closest("[data-radix-menubar-content]")!==A.currentTarget,B=(f.dir==="rtl"?"ArrowRight":"ArrowLeft")===A.key;if(!B&&L||I&&B)return;let V=S().filter(Se=>!Se.disabled).map(Se=>Se.value);B&&V.reverse();const Y=V.indexOf(c.value);V=f.loop?rZ(V,Y+1):V.slice(Y+1);const[de]=V;de&&f.onMenuOpen(de)}},{checkForDefaultPrevented:!1}),style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});aD.displayName=Q1;var V9="MenubarGroup",$9=N.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,u=cs(n);return C.jsx($A,{...u,...s,ref:t})});$9.displayName=V9;var Z9="MenubarLabel",lD=N.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,u=cs(n);return C.jsx(ZA,{...u,...s,ref:t})});lD.displayName=Z9;var G9="MenubarItem",cD=N.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,u=cs(n);return C.jsx(GA,{...u,...s,ref:t})});cD.displayName=G9;var H9="MenubarCheckboxItem",uD=N.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,u=cs(n);return C.jsx(HA,{...u,...s,ref:t})});uD.displayName=H9;var q9="MenubarRadioGroup",W9=N.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,u=cs(n);return C.jsx(qA,{...u,...s,ref:t})});W9.displayName=q9;var X9="MenubarRadioItem",dD=N.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,u=cs(n);return C.jsx(WA,{...u,...s,ref:t})});dD.displayName=X9;var K9="MenubarItemIndicator",hD=N.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,u=cs(n);return C.jsx(XA,{...u,...s,ref:t})});hD.displayName=K9;var Y9="MenubarSeparator",pD=N.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,u=cs(n);return C.jsx(KA,{...u,...s,ref:t})});pD.displayName=Y9;var Q9="MenubarArrow",J9=N.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,u=cs(n);return C.jsx(YA,{...u,...s,ref:t})});J9.displayName=Q9;var eZ="MenubarSubTrigger",fD=N.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,u=cs(n);return C.jsx(QA,{"data-radix-menubar-subtrigger":"",...u,...s,ref:t})});fD.displayName=eZ;var tZ="MenubarSubContent",mD=N.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,u=cs(n);return C.jsx(JA,{...u,"data-radix-menubar-content":"",...s,ref:t,style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});mD.displayName=tZ;function rZ(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var gD=rD,nZ=iD,yD=sD,iZ=oD,_D=aD,vD=lD,xD=cD,bD=uD,wD=dD,SD=hD,TD=pD,CD=fD,PD=mD;const SE=nZ,J1=N.forwardRef(({className:e,...t},n)=>C.jsx(gD,{ref:n,className:Ut("flex h-9 items-center space-x-1 rounded-md border bg-background p-1 shadow-sm",e),...t}));J1.displayName=gD.displayName;const ew=N.forwardRef(({className:e,...t},n)=>C.jsx(yD,{ref:n,className:Ut("flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e),...t}));ew.displayName=yD.displayName;const sZ=N.forwardRef(({className:e,inset:t,children:n,...s},u)=>C.jsxs(CD,{ref:u,className:Ut("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t&&"pl-8",e),...s,children:[n,C.jsx(wR,{className:"ml-auto h-4 w-4"})]}));sZ.displayName=CD.displayName;const oZ=N.forwardRef(({className:e,...t},n)=>C.jsx(PD,{ref:n,className:Ut("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));oZ.displayName=PD.displayName;const tw=N.forwardRef(({className:e,align:t="start",alignOffset:n=-4,sideOffset:s=8,...u},p)=>C.jsx(iZ,{children:C.jsx(_D,{ref:p,align:t,alignOffset:n,sideOffset:s,className:Ut("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...u})}));tw.displayName=_D.displayName;const Qf=N.forwardRef(({className:e,inset:t,...n},s)=>C.jsx(xD,{ref:s,className:Ut("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));Qf.displayName=xD.displayName;const aZ=N.forwardRef(({className:e,children:t,checked:n,...s},u)=>C.jsxs(bD,{ref:u,className:Ut("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[C.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:C.jsx(SD,{children:C.jsx(Kv,{className:"h-4 w-4"})})}),t]}));aZ.displayName=bD.displayName;const lZ=N.forwardRef(({className:e,children:t,...n},s)=>C.jsxs(wD,{ref:s,className:Ut("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[C.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:C.jsx(SD,{children:C.jsx(SR,{className:"h-4 w-4 fill-current"})})}),t]}));lZ.displayName=wD.displayName;const cZ=N.forwardRef(({className:e,inset:t,...n},s)=>C.jsx(vD,{ref:s,className:Ut("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));cZ.displayName=vD.displayName;const uZ=N.forwardRef(({className:e,...t},n)=>C.jsx(TD,{ref:n,className:Ut("-mx-1 my-1 h-px bg-muted",e),...t}));uZ.displayName=TD.displayName;var K2="DropdownMenu",[dZ,yH]=ma(K2,[B2]),us=B2(),[hZ,ED]=dZ(K2),MD=e=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:u,defaultOpen:p,onOpenChange:f,modal:c=!0}=e,S=us(t),E=N.useRef(null),[A=!1,z]=Bu({prop:u,defaultProp:p,onChange:f});return C.jsx(hZ,{scope:t,triggerId:mo(),triggerRef:E,contentId:mo(),open:A,onOpenChange:z,onOpenToggle:N.useCallback(()=>z(L=>!L),[z]),modal:c,children:C.jsx(FA,{...S,open:A,onOpenChange:z,dir:s,modal:c,children:n})})};MD.displayName=K2;var kD="DropdownMenuTrigger",ID=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...u}=e,p=ED(kD,n),f=us(n);return C.jsx(BA,{asChild:!0,...f,children:C.jsx(cr.button,{type:"button",id:p.triggerId,"aria-haspopup":"menu","aria-expanded":p.open,"aria-controls":p.open?p.contentId:void 0,"data-state":p.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...u,ref:Fv(t,p.triggerRef),onPointerDown:jt(e.onPointerDown,c=>{!s&&c.button===0&&c.ctrlKey===!1&&(p.onOpenToggle(),p.open||c.preventDefault())}),onKeyDown:jt(e.onKeyDown,c=>{s||(["Enter"," "].includes(c.key)&&p.onOpenToggle(),c.key==="ArrowDown"&&p.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});ID.displayName=kD;var pZ="DropdownMenuPortal",RD=e=>{const{__scopeDropdownMenu:t,...n}=e,s=us(t);return C.jsx(UA,{...s,...n})};RD.displayName=pZ;var AD="DropdownMenuContent",DD=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,u=ED(AD,n),p=us(n),f=N.useRef(!1);return C.jsx(VA,{id:u.contentId,"aria-labelledby":u.triggerId,...p,...s,ref:t,onCloseAutoFocus:jt(e.onCloseAutoFocus,c=>{var S;f.current||(S=u.triggerRef.current)==null||S.focus(),f.current=!1,c.preventDefault()}),onInteractOutside:jt(e.onInteractOutside,c=>{const S=c.detail.originalEvent,E=S.button===0&&S.ctrlKey===!0,A=S.button===2||E;(!u.modal||A)&&(f.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DD.displayName=AD;var fZ="DropdownMenuGroup",mZ=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,u=us(n);return C.jsx($A,{...u,...s,ref:t})});mZ.displayName=fZ;var gZ="DropdownMenuLabel",zD=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,u=us(n);return C.jsx(ZA,{...u,...s,ref:t})});zD.displayName=gZ;var yZ="DropdownMenuItem",jD=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,u=us(n);return C.jsx(GA,{...u,...s,ref:t})});jD.displayName=yZ;var _Z="DropdownMenuCheckboxItem",LD=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,u=us(n);return C.jsx(HA,{...u,...s,ref:t})});LD.displayName=_Z;var vZ="DropdownMenuRadioGroup",xZ=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,u=us(n);return C.jsx(qA,{...u,...s,ref:t})});xZ.displayName=vZ;var bZ="DropdownMenuRadioItem",ND=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,u=us(n);return C.jsx(WA,{...u,...s,ref:t})});ND.displayName=bZ;var wZ="DropdownMenuItemIndicator",OD=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,u=us(n);return C.jsx(XA,{...u,...s,ref:t})});OD.displayName=wZ;var SZ="DropdownMenuSeparator",FD=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,u=us(n);return C.jsx(KA,{...u,...s,ref:t})});FD.displayName=SZ;var TZ="DropdownMenuArrow",CZ=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,u=us(n);return C.jsx(YA,{...u,...s,ref:t})});CZ.displayName=TZ;var PZ="DropdownMenuSubTrigger",BD=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,u=us(n);return C.jsx(QA,{...u,...s,ref:t})});BD.displayName=PZ;var EZ="DropdownMenuSubContent",UD=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,u=us(n);return C.jsx(JA,{...u,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});UD.displayName=EZ;var MZ=MD,kZ=ID,IZ=RD,VD=DD,$D=zD,ZD=jD,GD=LD,HD=ND,qD=OD,WD=FD,XD=BD,KD=UD;const pv=MZ,fv=kZ,RZ=N.forwardRef(({className:e,inset:t,children:n,...s},u)=>C.jsxs(XD,{ref:u,className:Ut("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...s,children:[n,C.jsx(wR,{className:"ml-auto"})]}));RZ.displayName=XD.displayName;const AZ=N.forwardRef(({className:e,...t},n)=>C.jsx(KD,{ref:n,className:Ut("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));AZ.displayName=KD.displayName;const Xm=N.forwardRef(({className:e,sideOffset:t=4,...n},s)=>C.jsx(IZ,{children:C.jsx(VD,{ref:s,sideOffset:t,className:Ut("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Xm.displayName=VD.displayName;const Do=N.forwardRef(({className:e,inset:t,...n},s)=>C.jsx(ZD,{ref:s,className:Ut("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",t&&"pl-8",e),...n}));Do.displayName=ZD.displayName;const DZ=N.forwardRef(({className:e,children:t,checked:n,...s},u)=>C.jsxs(GD,{ref:u,className:Ut("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[C.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:C.jsx(qD,{children:C.jsx(Kv,{className:"h-4 w-4"})})}),t]}));DZ.displayName=GD.displayName;const zZ=N.forwardRef(({className:e,children:t,...n},s)=>C.jsxs(HD,{ref:s,className:Ut("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[C.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:C.jsx(qD,{children:C.jsx(SR,{className:"h-2 w-2 fill-current"})})}),t]}));zZ.displayName=HD.displayName;const jZ=N.forwardRef(({className:e,inset:t,...n},s)=>C.jsx($D,{ref:s,className:Ut("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));jZ.displayName=$D.displayName;const LZ=N.forwardRef(({className:e,...t},n)=>C.jsx(WD,{ref:n,className:Ut("-mx-1 my-1 h-px bg-muted",e),...t}));LZ.displayName=WD.displayName;var Y2="Avatar",[NZ,_H]=ma(Y2),[OZ,YD]=NZ(Y2),QD=N.forwardRef((e,t)=>{const{__scopeAvatar:n,...s}=e,[u,p]=N.useState("idle");return C.jsx(OZ,{scope:n,imageLoadingStatus:u,onImageLoadingStatusChange:p,children:C.jsx(cr.span,{...s,ref:t})})});QD.displayName=Y2;var JD="AvatarImage",ez=N.forwardRef((e,t)=>{const{__scopeAvatar:n,src:s,onLoadingStatusChange:u=()=>{},...p}=e,f=YD(JD,n),c=FZ(s,p.referrerPolicy),S=Ws(E=>{u(E),f.onImageLoadingStatusChange(E)});return ki(()=>{c!=="idle"&&S(c)},[c,S]),c==="loaded"?C.jsx(cr.img,{...p,ref:t,src:s}):null});ez.displayName=JD;var tz="AvatarFallback",rz=N.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:s,...u}=e,p=YD(tz,n),[f,c]=N.useState(s===void 0);return N.useEffect(()=>{if(s!==void 0){const S=window.setTimeout(()=>c(!0),s);return()=>window.clearTimeout(S)}},[s]),f&&p.imageLoadingStatus!=="loaded"?C.jsx(cr.span,{...u,ref:t}):null});rz.displayName=tz;function FZ(e,t){const[n,s]=N.useState("idle");return ki(()=>{if(!e){s("error");return}let u=!0;const p=new window.Image,f=c=>()=>{u&&s(c)};return s("loading"),p.onload=f("loaded"),p.onerror=f("error"),p.src=e,t&&(p.referrerPolicy=t),()=>{u=!1}},[e,t]),n}var nz=QD,iz=ez,sz=rz;const mg=N.forwardRef(({className:e,...t},n)=>C.jsx(nz,{ref:n,className:Ut("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));mg.displayName=nz.displayName;const gg=N.forwardRef(({className:e,...t},n)=>C.jsx(iz,{ref:n,className:Ut("aspect-square h-full w-full",e),...t}));gg.displayName=iz.displayName;const yg=N.forwardRef(({className:e,...t},n)=>C.jsx(sz,{ref:n,className:Ut("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));yg.displayName=sz.displayName;var Q2="Dialog",[oz,vH]=ma(Q2),[BZ,Go]=oz(Q2),az=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:u,onOpenChange:p,modal:f=!0}=e,c=N.useRef(null),S=N.useRef(null),[E=!1,A]=Bu({prop:s,defaultProp:u,onChange:p});return C.jsx(BZ,{scope:t,triggerRef:c,contentRef:S,contentId:mo(),titleId:mo(),descriptionId:mo(),open:E,onOpenChange:A,onOpenToggle:N.useCallback(()=>A(z=>!z),[A]),modal:f,children:n})};az.displayName=Q2;var lz="DialogTrigger",cz=N.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,u=Go(lz,n),p=Gr(t,u.triggerRef);return C.jsx(cr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":u.open,"aria-controls":u.contentId,"data-state":rS(u.open),...s,ref:p,onClick:jt(e.onClick,u.onOpenToggle)})});cz.displayName=lz;var J2="DialogPortal",[UZ,uz]=oz(J2,{forceMount:void 0}),dz=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:u}=e,p=Go(J2,t);return C.jsx(UZ,{scope:t,forceMount:n,children:N.Children.map(s,f=>C.jsx(ol,{present:n||p.open,children:C.jsx(o0,{asChild:!0,container:u,children:f})}))})};dz.displayName=J2;var mv="DialogOverlay",hz=N.forwardRef((e,t)=>{const n=uz(mv,e.__scopeDialog),{forceMount:s=n.forceMount,...u}=e,p=Go(mv,e.__scopeDialog);return p.modal?C.jsx(ol,{present:s||p.open,children:C.jsx(VZ,{...u,ref:t})}):null});hz.displayName=mv;var VZ=N.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,u=Go(mv,n);return C.jsx(u0,{as:lc,allowPinchZoom:!0,shards:[u.contentRef],children:C.jsx(cr.div,{"data-state":rS(u.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Uu="DialogContent",pz=N.forwardRef((e,t)=>{const n=uz(Uu,e.__scopeDialog),{forceMount:s=n.forceMount,...u}=e,p=Go(Uu,e.__scopeDialog);return C.jsx(ol,{present:s||p.open,children:p.modal?C.jsx($Z,{...u,ref:t}):C.jsx(ZZ,{...u,ref:t})})});pz.displayName=Uu;var $Z=N.forwardRef((e,t)=>{const n=Go(Uu,e.__scopeDialog),s=N.useRef(null),u=Gr(t,n.contentRef,s);return N.useEffect(()=>{const p=s.current;if(p)return F2(p)},[]),C.jsx(fz,{...e,ref:u,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:jt(e.onCloseAutoFocus,p=>{var f;p.preventDefault(),(f=n.triggerRef.current)==null||f.focus()}),onPointerDownOutside:jt(e.onPointerDownOutside,p=>{const f=p.detail.originalEvent,c=f.button===0&&f.ctrlKey===!0;(f.button===2||c)&&p.preventDefault()}),onFocusOutside:jt(e.onFocusOutside,p=>p.preventDefault())})}),ZZ=N.forwardRef((e,t)=>{const n=Go(Uu,e.__scopeDialog),s=N.useRef(!1),u=N.useRef(!1);return C.jsx(fz,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:p=>{var f,c;(f=e.onCloseAutoFocus)==null||f.call(e,p),p.defaultPrevented||(s.current||(c=n.triggerRef.current)==null||c.focus(),p.preventDefault()),s.current=!1,u.current=!1},onInteractOutside:p=>{var S,E;(S=e.onInteractOutside)==null||S.call(e,p),p.defaultPrevented||(s.current=!0,p.detail.originalEvent.type==="pointerdown"&&(u.current=!0));const f=p.target;((E=n.triggerRef.current)==null?void 0:E.contains(f))&&p.preventDefault(),p.detail.originalEvent.type==="focusin"&&u.current&&p.preventDefault()}})}),fz=N.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:u,onCloseAutoFocus:p,...f}=e,c=Go(Uu,n),S=N.useRef(null),E=Gr(t,S);return k2(),C.jsxs(C.Fragment,{children:[C.jsx(t0,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:u,onUnmountAutoFocus:p,children:C.jsx(e0,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":rS(c.open),...f,ref:E,onDismiss:()=>c.onOpenChange(!1)})}),C.jsxs(C.Fragment,{children:[C.jsx(GZ,{titleId:c.titleId}),C.jsx(qZ,{contentRef:S,descriptionId:c.descriptionId})]})]})}),eS="DialogTitle",tS=N.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,u=Go(eS,n);return C.jsx(cr.h2,{id:u.titleId,...s,ref:t})});tS.displayName=eS;var mz="DialogDescription",gz=N.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,u=Go(mz,n);return C.jsx(cr.p,{id:u.descriptionId,...s,ref:t})});gz.displayName=mz;var yz="DialogClose",_z=N.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,u=Go(yz,n);return C.jsx(cr.button,{type:"button",...s,ref:t,onClick:jt(e.onClick,()=>u.onOpenChange(!1))})});_z.displayName=yz;function rS(e){return e?"open":"closed"}var vz="DialogTitleWarning",[xH,xz]=FU(vz,{contentName:Uu,titleName:eS,docsSlug:"dialog"}),GZ=({titleId:e})=>{const t=xz(vz),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return N.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},HZ="DialogDescriptionWarning",qZ=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${xz(HZ).contentName}}.`;return N.useEffect(()=>{var p;const u=(p=e.current)==null?void 0:p.getAttribute("aria-describedby");t&&u&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},bz=az,wz=cz,Sz=dz,f0=hz,m0=pz,g0=tS,y0=gz,nS=_z;const WZ=bz,XZ=wz,KZ=nS,YZ=Sz,Tz=N.forwardRef(({className:e,...t},n)=>C.jsx(f0,{className:Ut("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Tz.displayName=f0.displayName;const QZ=Bv("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Cz=N.forwardRef(({side:e="right",className:t,children:n,...s},u)=>C.jsxs(YZ,{children:[C.jsx(Tz,{}),C.jsxs(m0,{ref:u,className:Ut(QZ({side:e}),t),...s,children:[C.jsxs(nS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[C.jsx(M2,{className:"h-4 w-4"}),C.jsx("span",{className:"sr-only",children:"Close"})]}),n]})]}));Cz.displayName=m0.displayName;const Pz=({className:e,...t})=>C.jsx("div",{className:Ut("flex flex-col space-y-2 text-center sm:text-left",e),...t});Pz.displayName="SheetHeader";const Ez=({className:e,...t})=>C.jsx("div",{className:Ut("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ez.displayName="SheetFooter";const Mz=N.forwardRef(({className:e,...t},n)=>C.jsx(g0,{ref:n,className:Ut("text-lg font-semibold text-foreground",e),...t}));Mz.displayName=g0.displayName;const kz=N.forwardRef(({className:e,...t},n)=>C.jsx(y0,{ref:n,className:Ut("text-sm text-muted-foreground",e),...t}));kz.displayName=y0.displayName;const _0=ep()(tp(e=>({cart:[],addToCart:t=>{e(n=>n.cart.find(u=>u._id===t._id)?{cart:n==null?void 0:n.cart.map(u=>u._id===t._id?{...u,quantity:u.quantity+1}:u)}:{cart:[...n.cart,{...t,quantity:1}]})},clearCart:()=>{e({cart:[]})},removeFromTheCart:t=>{e(n=>({cart:n.cart.filter(s=>s._id!==t)}))},incrementQuantity:t=>{e(n=>({cart:n.cart.map(s=>s._id===t?{...s,quantity:s.quantity+1}:s)}))},decrementQuantity:t=>{e(n=>({cart:n.cart.map(s=>s._id===t&&s.quantity>1?{...s,quantity:s.quantity-1}:s)}))}}),{name:"cart-name",storage:qu(()=>localStorage)})),iS=ep()(tp(e=>({theme:"light",setTheme:t=>{const n=window.document.documentElement;n.classList.remove("light","dark"),n.classList.add(t),localStorage.setItem("vite-ui-theme",t),e({theme:t})},loadThemeFromStorage:(t,n)=>{const s=localStorage.getItem(t)||n;e({theme:s})},initializeTheme:()=>{if(typeof window<"u"){const n=localStorage.getItem("vite-ui-theme"),s=window.document.documentElement;s.classList.remove("light","dark"),s.classList.add(n),e({theme:n})}}}),{name:"theme-store",storage:qu(()=>localStorage)})),JZ=()=>{const{user:e,loading:t,logout:n}=Zo(),{cart:s}=_0(),{setTheme:u}=iS();return C.jsx("div",{className:"max-w-7xl mx-auto",children:C.jsxs("div",{className:"flex items-center justify-between h-14",children:[C.jsx(Dn,{to:"/",children:C.jsx("h1",{className:"font-bold md:font-extrabold text-2xl",children:"FoodTiger"})}),C.jsxs("div",{className:"hidden md:flex items-center gap-10",children:[C.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[C.jsx(Dn,{to:"/",children:"Home"}),C.jsx(Dn,{to:"/profile",children:"Profile"}),e?C.jsx(Dn,{to:e.deliveryUser?"/delivery/orders":"/order/status",children:"Order"}):null,e&&C.jsx(C.Fragment,{children:e.deliveryUser?C.jsx(Dn,{to:"/delivery/orders",children:C.jsx(J1,{children:C.jsxs(SE,{children:[C.jsx(ew,{children:"Dashboard"}),C.jsx(tw,{children:C.jsx(Qf,{children:"Delivery Orders"})})]})})}):e.admin?C.jsx(J1,{children:C.jsxs(SE,{children:[C.jsx(ew,{children:"Dashboard"}),C.jsxs(tw,{children:[C.jsx(Dn,{to:"/admin/restaurant",children:C.jsx(Qf,{children:"Restaurant"})}),C.jsx(Dn,{to:"/admin/menu",children:C.jsx(Qf,{children:"Menu"})}),C.jsx(Dn,{to:"/admin/orders",children:C.jsx(Qf,{children:"Orders"})})]})]})}):null})]}),C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("div",{children:C.jsxs(pv,{children:[C.jsx(fv,{asChild:!0,children:C.jsxs(jr,{variant:"outline",size:"icon",children:[C.jsx(ER,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),C.jsx(CR,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),C.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),C.jsxs(Xm,{align:"end",children:[C.jsx(Do,{onClick:()=>u("light"),children:"Light"}),C.jsx(Do,{onClick:()=>u("dark"),children:"Dark"})]})]})}),C.jsxs(Dn,{to:"/cart",className:"relative cursor-pointer",children:[C.jsx(PR,{}),s.length>0&&C.jsx(jr,{size:"icon",className:"absolute -inset-y-3 left-2 text-xs rounded-full w-4 h-4 bg-red-500 hover:bg-red-500",children:s.length})]}),C.jsx("div",{children:C.jsxs(mg,{children:[C.jsx(gg,{src:e==null?void 0:e.profilePicture,alt:"profilephoto"}),C.jsx(yg,{children:"AR"})]})}),C.jsx("div",{children:C.jsx(jr,{onClick:n,className:"bg-orange hover:bg-hoverOrange",children:"Logout"})})]})]}),C.jsx("div",{className:"md:hidden lg:hidden",children:C.jsx(e7,{})})]})})},e7=()=>{const{user:e,logout:t,loading:n}=Zo(),{setTheme:s}=iS();return C.jsxs(WZ,{children:[C.jsx(XZ,{asChild:!0,children:C.jsx(jr,{size:"icon",className:"rounded-full bg-gray-200 text-black hover:bg-gray-200",variant:"outline",children:C.jsx(xU,{size:"18"})})}),C.jsxs(Cz,{className:"flex flex-col",children:[C.jsxs(Pz,{className:"flex flex-row items-center justify-between mt-2",children:[C.jsx(Mz,{children:"FoodTiger"}),C.jsxs(pv,{children:[C.jsx(fv,{asChild:!0,children:C.jsxs(jr,{variant:"outline",size:"icon",children:[C.jsx(ER,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),C.jsx(CR,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),C.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),C.jsxs(Xm,{align:"end",children:[C.jsx(Do,{onClick:()=>s("light"),children:"Light"}),C.jsx(Do,{onClick:()=>s("dark"),children:"Dark"})]})]})]}),C.jsx(lg,{className:"my-2"}),C.jsxs(kz,{className:"flex-1",children:[C.jsxs(Dn,{to:"/profile",className:"flex items-center gap-4 hover:bg-gray-200 px-3 py-2 rounded-lg cursor-pointer hover:text-gray-900 font-medium",children:[C.jsx(MR,{}),C.jsx("span",{children:"Profile"})]}),C.jsxs(Dn,{to:"/order/status",className:"flex items-center gap-4 hover:bg-gray-200 px-3 py-2 rounded-lg cursor-pointer hover:text-gray-900 font-medium",children:[C.jsx(gU,{}),C.jsx("span",{children:"Order"})]}),C.jsxs(Dn,{to:"/cart",className:"flex items-center gap-4 hover:bg-gray-200 px-3 py-2 rounded-lg cursor-pointer hover:text-gray-900 font-medium",children:[C.jsx(PR,{}),C.jsx("span",{children:"Cart (0)"})]}),(e==null?void 0:e.admin)&&C.jsxs(C.Fragment,{children:[C.jsxs(Dn,{to:"/admin/menu",className:"flex items-center gap-4 hover:bg-gray-200 px-3 py-2 rounded-lg cursor-pointer hover:text-gray-900 font-medium",children:[C.jsx(PU,{}),C.jsx("span",{children:"Menu"})]}),C.jsxs(Dn,{to:"/admin/restaurant",className:"flex items-center gap-4 hover:bg-gray-200 px-3 py-2 rounded-lg cursor-pointer hover:text-gray-900 font-medium",children:[C.jsx(IU,{}),C.jsx("span",{children:"Restaurant"})]}),C.jsxs(Dn,{to:"/admin/orders",className:"flex items-center gap-4 hover:bg-gray-200 px-3 py-2 rounded-lg cursor-pointer hover:text-gray-900 font-medium",children:[C.jsx(SU,{}),C.jsx("span",{children:"Restaurant Orders"})]})]})]}),C.jsxs(Ez,{className:"flex flex-col gap-4",children:[C.jsxs("div",{className:"flex flex-row items-center gap-2",children:[C.jsxs(mg,{children:[C.jsx(gg,{src:e==null?void 0:e.profilePicture}),C.jsx(yg,{children:"AR"})]}),C.jsx("h1",{className:"font-bold",children:"Arnob Rizwan"})]}),C.jsx(KZ,{asChild:!0,children:C.jsx(jr,{onClick:t,className:"bg-orange hover:bg-hoverOrange",children:"Logout"})})]})]})]})},t7=()=>C.jsxs("div",{className:"flex flex-col min-h-screen m-2 md:m-0",children:[C.jsx("header",{children:C.jsx(JZ,{})}),C.jsx("div",{className:"flex-1",children:C.jsx(u3,{})}),C.jsx("footer",{children:C.jsx(OU,{})})]});var r7="Label",Iz=N.forwardRef((e,t)=>C.jsx(cr.label,{...e,ref:t,onMouseDown:n=>{var u;n.target.closest("button, input, select, textarea")||((u=e.onMouseDown)==null||u.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Iz.displayName=r7;var Rz=Iz;const n7=Bv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Yr=N.forwardRef(({className:e,...t},n)=>C.jsx(Rz,{ref:n,className:Ut(n7(),e),...t}));Yr.displayName=Rz.displayName;const i7=()=>{const{user:e,updateProfile:t}=Zo(),[n,s]=N.useState(!1),[u,p]=N.useState({fullname:(e==null?void 0:e.fullname)||"",email:(e==null?void 0:e.email)||"",address:(e==null?void 0:e.address)||"",city:(e==null?void 0:e.city)||"",country:(e==null?void 0:e.country)||"",profilePicture:(e==null?void 0:e.profilePicture)||""}),f=N.useRef(null),[c,S]=N.useState(u.profilePicture||""),E=L=>{var F;const I=(F=L.target.files)==null?void 0:F[0];if(I){const B=new FileReader;B.onloadend=()=>{const X=B.result;S(X),p(q=>({...q,profilePicture:X}))},B.readAsDataURL(I)}},A=L=>{const{name:I,value:F}=L.target;p({...u,[I]:F})},z=async L=>{L.preventDefault();try{s(!0),await t(u),s(!1)}catch{s(!1)}};return C.jsxs("form",{onSubmit:z,className:"max-w-7xl mx-auto my-5",children:[C.jsx("div",{className:"flex items-center justify-between",children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsxs(mg,{className:"relative md:w-28 md:h-28 w-20 h-20",children:[C.jsx(gg,{src:c}),C.jsx(yg,{children:"AR"}),C.jsx("input",{ref:f,className:"hidden",type:"file",accept:"image/*",onChange:E}),C.jsx("div",{onClick:()=>{var L;return(L=f.current)==null?void 0:L.click()},className:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300 bg-black bg-opacity-50 rounded-full cursor-pointer",children:C.jsx(E2,{className:"text-white w-8 h-8"})})]}),C.jsx(zr,{type:"text",name:"fullname",value:u.fullname,onChange:A,className:"font-bold text-2xl outline-none border-none focus-visible:ring-transparent"})]})}),C.jsxs("div",{className:"grid md:grid-cols-4 md:gap-2 gap-3 my-10",children:[C.jsxs("div",{className:"flex items-center gap-4 rounded-sm p-2 bg-gray-200",children:[C.jsx(Yv,{className:"text-gray-500"}),C.jsxs("div",{className:"w-full",children:[C.jsx(Yr,{children:"Email"}),C.jsx("input",{disabled:!0,name:"email",value:u.email,onChange:A,className:"w-full text-gray-600 bg-transparent focus-visible:ring-0 focus-visible:border-transparent outline-none border-none"})]})]}),C.jsxs("div",{className:"flex items-center gap-4 rounded-sm p-2 bg-gray-200",children:[C.jsx(_U,{className:"text-gray-500"}),C.jsxs("div",{className:"w-full",children:[C.jsx(Yr,{children:"Address"}),C.jsx("input",{name:"address",value:u.address,onChange:A,className:"w-full text-gray-600 bg-transparent focus-visible:ring-0 focus-visible:border-transparent outline-none border-none"})]})]}),C.jsxs("div",{className:"flex items-center gap-4 rounded-sm p-2 bg-gray-200",children:[C.jsx(TR,{className:"text-gray-500"}),C.jsxs("div",{className:"w-full",children:[C.jsx(Yr,{children:"City"}),C.jsx("input",{name:"city",value:u.city,onChange:A,className:"w-full text-gray-600 bg-transparent focus-visible:ring-0 focus-visible:border-transparent outline-none border-none"})]})]}),C.jsxs("div",{className:"flex items-center gap-4 rounded-sm p-2 bg-gray-200",children:[C.jsx(vU,{className:"text-gray-500"}),C.jsxs("div",{className:"w-full",children:[C.jsx(Yr,{children:"Country"}),C.jsx("input",{name:"country",value:u.country,onChange:A,className:"w-full text-gray-600 bg-transparent focus-visible:ring-0 focus-visible:border-transparent outline-none border-none"})]})]})]}),C.jsx("div",{className:"text-center",children:C.jsx(jr,{type:"submit",className:"bg-orange hover:bg-hoverOrange",children:"Update"})})]})},au=Xv+"/api/v1/restaurant",il=ep()(tp((e,t)=>({loading:!1,restaurant:null,searchedRestaurant:null,appliedFilter:[],singleRestaurant:null,restaurantOrder:[],createRestaurant:async n=>{try{e({loading:!0});const s=await xr.post(`${au}/`,n,{headers:{"Content-Type":"multipart/form-data"}});s.data.success&&(_n.success(s.data.message),e({loading:!1}))}catch(s){_n.error(s.response.data.message),e({loading:!1})}},getRestaurant:async()=>{try{e({loading:!0});const n=await xr.get(`${au}/`);n.data.success&&e({loading:!1,restaurant:n.data.restaurant})}catch(n){n.response.status===404&&e({restaurant:null}),e({loading:!1})}},updateRestaurant:async n=>{try{e({loading:!0});const s=await xr.put(`${au}/`,n,{headers:{"Content-Type":"multipart/form-data"}});s.data.success&&(_n.success(s.data.message),e({loading:!1}))}catch(s){_n.error(s.response.data.message),e({loading:!1})}},searchRestaurant:async(n,s,u)=>{try{e({loading:!0});const p=new URLSearchParams;p.set("searchQuery",s),p.set("selectedCuisines",u.join(","));const f=await xr.get(`${au}/search/${n}?${p.toString()}`);f.data.success&&e({loading:!1,searchedRestaurant:f.data})}catch{e({loading:!1})}},addMenuToRestaurant:n=>{e(s=>({restaurant:s.restaurant?{...s.restaurant,menus:[...s.restaurant.menus,n]}:null}))},updateMenuToRestaurant:n=>{e(s=>{if(s.restaurant){const u=s.restaurant.menus.map(p=>p._id===n._id?n:p);return{restaurant:{...s.restaurant,menus:u}}}return s})},setAppliedFilter:n=>{e(s=>({appliedFilter:s.appliedFilter.includes(n)?s.appliedFilter.filter(f=>f!==n):[...s.appliedFilter,n]}))},resetAppliedFilter:()=>{e({appliedFilter:[]})},getSingleRestaurant:async n=>{try{const s=await xr.get(`${au}/${n}`);s.data.success&&e({singleRestaurant:s.data.restaurant})}catch{}},getRestaurantOrders:async()=>{try{const n=await xr.get(`${au}/order`);n.data.success&&e({restaurantOrder:n.data.orders})}catch(n){console.log(n)}},updateRestaurantOrder:async(n,s)=>{try{const u=await xr.put(`${au}/order/${n}/status`,{status:s},{headers:{"Content-Type":"application/json"}});if(u.data.success){const p=t().restaurantOrder.map(f=>f._id===n?{...f,status:u.data.status}:f);e({restaurantOrder:p}),_n.success(u.data.message)}}catch(u){_n.error(u.response.data.message)}}}),{name:"restaurant-name",storage:qu(()=>localStorage)}));function Az(e){const t=N.useRef({value:e,previous:e});return N.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var sS="Checkbox",[s7,bH]=ma(sS),[o7,a7]=s7(sS),Dz=N.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:s,checked:u,defaultChecked:p,required:f,disabled:c,value:S="on",onCheckedChange:E,form:A,...z}=e,[L,I]=N.useState(null),F=Gr(t,de=>I(de)),B=N.useRef(!1),X=L?A||!!L.closest("form"):!0,[q=!1,V]=Bu({prop:u,defaultProp:p,onChange:E}),Y=N.useRef(q);return N.useEffect(()=>{const de=L==null?void 0:L.form;if(de){const Se=()=>V(Y.current);return de.addEventListener("reset",Se),()=>de.removeEventListener("reset",Se)}},[L,V]),C.jsxs(o7,{scope:n,state:q,disabled:c,children:[C.jsx(cr.button,{type:"button",role:"checkbox","aria-checked":sc(q)?"mixed":q,"aria-required":f,"data-state":Lz(q),"data-disabled":c?"":void 0,disabled:c,value:S,...z,ref:F,onKeyDown:jt(e.onKeyDown,de=>{de.key==="Enter"&&de.preventDefault()}),onClick:jt(e.onClick,de=>{V(Se=>sc(Se)?!0:!Se),X&&(B.current=de.isPropagationStopped(),B.current||de.stopPropagation())})}),X&&C.jsx(l7,{control:L,bubbles:!B.current,name:s,value:S,checked:q,required:f,disabled:c,form:A,style:{transform:"translateX(-100%)"},defaultChecked:sc(p)?!1:p})]})});Dz.displayName=sS;var zz="CheckboxIndicator",jz=N.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:s,...u}=e,p=a7(zz,n);return C.jsx(ol,{present:s||sc(p.state)||p.state===!0,children:C.jsx(cr.span,{"data-state":Lz(p.state),"data-disabled":p.disabled?"":void 0,...u,ref:t,style:{pointerEvents:"none",...e.style}})})});jz.displayName=zz;var l7=e=>{const{control:t,checked:n,bubbles:s=!0,defaultChecked:u,...p}=e,f=N.useRef(null),c=Az(n),S=VR(t);N.useEffect(()=>{const A=f.current,z=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(z,"checked").set;if(c!==n&&I){const F=new Event("click",{bubbles:s});A.indeterminate=sc(n),I.call(A,sc(n)?!1:n),A.dispatchEvent(F)}},[c,n,s]);const E=N.useRef(sc(n)?!1:n);return C.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:u??E.current,...p,tabIndex:-1,ref:f,style:{...e.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function sc(e){return e==="indeterminate"}function Lz(e){return sc(e)?"indeterminate":e?"checked":"unchecked"}var Nz=Dz,c7=jz;const Oz=N.forwardRef(({className:e,...t},n)=>C.jsx(Nz,{ref:n,className:Ut("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:C.jsx(c7,{className:Ut("flex items-center justify-center text-current"),children:C.jsx(Kv,{className:"h-4 w-4"})})}));Oz.displayName=Nz.displayName;const u7=[{id:"burger",label:"Burger"},{id:"pizza",label:"Pizza"},{id:"biryani",label:"Biryani"},{id:"wrap",label:"Wrap"}],d7=()=>{const{setAppliedFilter:e,appliedFilter:t,resetAppliedFilter:n}=il(),s=u=>{e(u)};return C.jsxs("div",{className:"md:w-72",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("h1",{className:"font-medium text-lg",children:"Filter by cuisines"}),C.jsx(jr,{variant:"link",onClick:n,children:"Reset"})]}),u7.map(u=>C.jsxs("div",{className:"flex items-center space-x-2 my-5",children:[C.jsx(Oz,{id:u.id,checked:t.includes(u.label),onClick:()=>s(u.label)}),C.jsx(Yr,{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:u.label})]},u.id))]})},v0=N.forwardRef(({className:e,...t},n)=>C.jsx("div",{ref:n,className:Ut("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));v0.displayName="Card";const h7=N.forwardRef(({className:e,...t},n)=>C.jsx("div",{ref:n,className:Ut("flex flex-col space-y-1.5 p-6",e),...t}));h7.displayName="CardHeader";const p7=N.forwardRef(({className:e,...t},n)=>C.jsx("h3",{ref:n,className:Ut("text-2xl font-semibold leading-none tracking-tight",e),...t}));p7.displayName="CardTitle";const f7=N.forwardRef(({className:e,...t},n)=>C.jsx("p",{ref:n,className:Ut("text-sm text-muted-foreground",e),...t}));f7.displayName="CardDescription";const x0=N.forwardRef(({className:e,...t},n)=>C.jsx("div",{ref:n,className:Ut("p-6 pt-0",e),...t}));x0.displayName="CardContent";const b0=N.forwardRef(({className:e,...t},n)=>C.jsx("div",{ref:n,className:Ut("flex items-center p-6 pt-0",e),...t}));b0.displayName="CardFooter";var m7="AspectRatio",Fz=N.forwardRef((e,t)=>{const{ratio:n=1/1,style:s,...u}=e;return C.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${100/n}%`},"data-radix-aspect-ratio-wrapper":"",children:C.jsx(cr.div,{...u,ref:t,style:{...s,position:"absolute",top:0,right:0,bottom:0,left:0}})})});Fz.displayName=m7;var g7=Fz;const Bz=g7;function Dl({className:e,...t}){return C.jsx("div",{className:Ut("animate-pulse rounded-md bg-muted",e),...t})}const y7=Bv("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function rw({className:e,variant:t,...n}){return C.jsx("div",{className:Ut(y7({variant:t}),e),...n})}const _7=()=>{const e=bI(),[t,n]=N.useState(""),{loading:s,searchedRestaurant:u,searchRestaurant:p,setAppliedFilter:f,appliedFilter:c}=il();return N.useEffect(()=>{p(e.text,t,c)},[e.text,c]),C.jsx("div",{className:"max-w-7xl mx-auto my-10",children:C.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-10",children:[C.jsx(d7,{}),C.jsxs("div",{className:"flex-1",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(zr,{type:"text",value:t,placeholder:"Search by restaurant & cuisines",onChange:S=>n(S.target.value)}),C.jsx(jr,{onClick:()=>p(e.text,t,c),className:"bg-orange hover:bg-hoverOrange",children:"Search"})]}),C.jsxs("div",{children:[C.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:gap-2 my-3",children:[C.jsxs("h1",{className:"font-medium text-lg",children:["(",u==null?void 0:u.data.length,") Search result found"]}),C.jsx("div",{className:"flex flex-wrap gap-2 mb-4 md:mb-0",children:c.map((S,E)=>C.jsxs("div",{className:"relative inline-flex items-center max-w-full",children:[C.jsx(rw,{className:"text-[#D19254] rounded-md hover:cursor-pointer pr-6 whitespace-nowrap",variant:"outline",children:S}),C.jsx(M2,{onClick:()=>f(S),size:16,className:"absolute text-[#D19254] right-1 hover:cursor-pointer"})]},E))})]}),C.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:s?C.jsx(v7,{}):!s&&(u==null?void 0:u.data.length)===0?C.jsx(x7,{searchText:e.text}):u==null?void 0:u.data.map(S=>C.jsxs(v0,{className:"bg-white dark:bg-gray-800 shadow-xl rounded-xl overflow-hidden hover:shadow-2xl transition-shadow duration-300",children:[C.jsxs("div",{className:"relative",children:[C.jsx(Bz,{ratio:16/6,children:C.jsx("img",{src:S.imageUrl,alt:"",className:"w-full h-full object-cover"})}),C.jsx("div",{className:"absolute top-2 left-2 bg-white dark:bg-gray-700 bg-opacity-75 rounded-lg px-3 py-1",children:C.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Featured"})})]}),C.jsxs(x0,{className:"p-4",children:[C.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:S.restaurantName}),C.jsxs("div",{className:"mt-2 gap-1 flex items-center text-gray-600 dark:text-gray-400",children:[C.jsx(TR,{size:16}),C.jsxs("p",{className:"text-sm",children:["City:"," ",C.jsx("span",{className:"font-medium",children:S.city})]})]}),C.jsxs("div",{className:"mt-2 gap-1 flex items-center text-gray-600 dark:text-gray-400",children:[C.jsx(mU,{size:16}),C.jsxs("p",{className:"text-sm",children:["Country:"," ",C.jsx("span",{className:"font-medium",children:S.country})]})]}),C.jsx("div",{className:"flex gap-2 mt-4 flex-wrap",children:S.cuisines.map((E,A)=>C.jsx(rw,{className:"font-medium px-2 py-1 rounded-full shadow-sm",children:E},A))})]}),C.jsx(b0,{className:"p-4 border-t dark:border-t-gray-700 border-t-gray-100 text-white flex justify-end",children:C.jsx(Dn,{to:`/restaurant/${S._id}`,children:C.jsx(jr,{className:"bg-orange hover:bg-hoverOrange font-semibold py-2 px-4 rounded-full shadow-md transition-colors duration-200",children:"View Menus"})})})]},S._id))})]})]})]})})},v7=()=>C.jsx(C.Fragment,{children:[...Array(3)].map((e,t)=>C.jsxs(v0,{className:"bg-white dark:bg-gray-800 shadow-xl rounded-xl overflow-hidden",children:[C.jsx("div",{className:"relative",children:C.jsx(Bz,{ratio:16/6,children:C.jsx(Dl,{className:"w-full h-full"})})}),C.jsxs(x0,{className:"p-4",children:[C.jsx(Dl,{className:"h-8 w-3/4 mb-2"}),C.jsx("div",{className:"mt-2 gap-1 flex items-center text-gray-600 dark:text-gray-400",children:C.jsx(Dl,{className:"h-4 w-1/2"})}),C.jsx("div",{className:"mt-2 flex gap-1 items-center text-gray-600 dark:text-gray-400",children:C.jsx(Dl,{className:"h-4 w-1/2"})}),C.jsxs("div",{className:"flex gap-2 mt-4 flex-wrap",children:[C.jsx(Dl,{className:"h-6 w-20"}),C.jsx(Dl,{className:"h-6 w-20"}),C.jsx(Dl,{className:"h-6 w-20"})]})]}),C.jsx(b0,{className:"p-4  dark:bg-gray-900 flex justify-end",children:C.jsx(Dl,{className:"h-10 w-24 rounded-full"})})]},t))}),x7=({searchText:e})=>C.jsxs("div",{className:"text-center",children:[C.jsx("h1",{className:"text-2xl font-semibold text-gray-700 dark:text-gray-200",children:"No results found"}),C.jsxs("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:[`We couldn't find any results for "`,e,'". ',C.jsx("br",{})," Try searching with a different term."]}),C.jsx(Dn,{to:"/",children:C.jsx(jr,{className:"mt-4 bg-orange hover:bg-orangeHover",children:"Go Back to Home"})})]}),b7=({menus:e})=>{const{addToCart:t}=_0(),n=Qh();return C.jsxs("div",{className:"md:p-4",children:[C.jsx("h1",{className:"text-xl md:text-2xl font-extrabold mb-6",children:"Available Menus"}),C.jsx("div",{className:"grid md:grid-cols-3 space-y-4 md:space-y-0",children:e.map(s=>C.jsxs(v0,{className:"max-w-xs mx-auto shadow-lg rounded-lg overflow-hidden",children:[C.jsx("img",{src:s.image,alt:"",className:"w-full h-40 object-cover"}),C.jsxs(x0,{className:"p-4",children:[C.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:s.name}),C.jsx("p",{className:"text-sm text-gray-600 mt-2",children:s.description}),C.jsxs("h3",{className:"text-lg font-semibold mt-4",children:["Price: ",C.jsxs("span",{className:"text-[#D19254]",children:["RM",s.price]})]})]}),C.jsx(b0,{className:"p-4",children:C.jsx(jr,{onClick:()=>{t(s),n("/cart")},className:"w-full bg-orange hover:bg-hoverOrange",children:"Add to Cart"})})]}))})]})},w7=()=>{const e=bI(),{singleRestaurant:t,getSingleRestaurant:n}=il();return N.useEffect(()=>{n(e.id)},[e.id]),C.jsx("div",{className:"max-w-6xl mx-auto my-10",children:C.jsxs("div",{className:"w-full",children:[C.jsx("div",{className:"relative w-full h-32 md:h-64 lg:h-72",children:C.jsx("img",{src:(t==null?void 0:t.imageUrl)||"Loading...",alt:"res_image",className:"object-cover w-full h-full rounded-lg shadow-lg"})}),C.jsx("div",{className:"flex flex-col md:flex-row justify-between",children:C.jsxs("div",{className:"my-5",children:[C.jsx("h1",{className:"font-medium text-xl",children:(t==null?void 0:t.restaurantName)||"Loading..."}),C.jsx("div",{className:"flex gap-2 my-2",children:t==null?void 0:t.cuisines.map((s,u)=>C.jsx(rw,{children:s},u))}),C.jsx("div",{className:"flex md:flex-row flex-col gap-2 my-5",children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(MU,{className:"w-5 h-5"}),C.jsxs("h1",{className:"flex items-center gap-2 font-medium",children:["Delivery Time: ",C.jsxs("span",{className:"text-[#D19254]",children:[(t==null?void 0:t.deliveryTime)||"NA"," mins"]})]})]})})]})}),(t==null?void 0:t.menus)&&C.jsx(b7,{menus:t==null?void 0:t.menus})]})})},S7=Un.object({restaurantName:Un.string().nonempty({message:"Restaurant name is required"}).min(3,{message:"Restaurant name must be at least 3 characters long"}).max(100,{message:"Restaurant name must be at most 100 characters long"}),city:Un.string().nonempty({message:"City is required"}).min(2,{message:"City name must be at least 2 characters long"}).max(50,{message:"City name must be at most 50 characters long"}),country:Un.string().nonempty({message:"Country is required"}).min(2,{message:"Country name must be at least 2 characters long"}).max(50,{message:"Country name must be at most 50 characters long"}),deliveryTime:Un.number({invalid_type_error:"Delivery time must be a number"}).min(5,{message:"Delivery time must be at least 5 minutes"}).max(300,{message:"Delivery time must not exceed 300 minutes"}),cuisines:Un.array(Un.string().nonempty({message:"Cuisine type cannot be empty"})).min(1,{message:"At least one cuisine type is required"}).max(10,{message:"You can add at most 10 cuisines"}),imageFile:Un.instanceof(File).refine(e=>e.size>0,{message:"Image file is required"}).refine(e=>["image/jpeg","image/png","image/webp","image/jpg"].includes(e.type),{message:"Image must be of type JPEG, PNG, WEBP, or JPG"}).optional()}),T7=()=>{var z;const[e,t]=N.useState({restaurantName:"",city:"",country:"",deliveryTime:0,cuisines:[],imageFile:void 0}),[n,s]=N.useState({}),{loading:u,restaurant:p,updateRestaurant:f,createRestaurant:c,getRestaurant:S}=il(),E=L=>{const{name:I,value:F,type:B}=L.target;t({...e,[I]:B==="number"?Number(F):F})},A=async L=>{var F,B;L.preventDefault();const I=S7.safeParse(e);if(!I.success){const X=I.error.formErrors.fieldErrors;s(X);return}try{const X=new FormData,q=(B=(F=JSON.parse(localStorage.getItem("user-name")||"{}").state)==null?void 0:F.user)==null?void 0:B._id;X.append("restaurantName",e.restaurantName),X.append("city",e.city),X.append("country",e.country),X.append("deliveryTime",e.deliveryTime.toString()),X.append("cuisines",JSON.stringify(e.cuisines)),e.imageFile&&X.append("imageFile",e.imageFile),p?await f(X):await c(X)}catch(X){console.log(X)}};return N.useEffect(()=>{(async()=>{await S(),p&&t({restaurantName:p.restaurantName||"",city:p.city||"",country:p.country||"",deliveryTime:p.deliveryTime||0,cuisines:p.cuisines?p.cuisines.map(I=>I):[],imageFile:void 0})})(),console.log(p)},[]),C.jsx("div",{className:"max-w-6xl mx-auto my-10",children:C.jsx("div",{children:C.jsxs("div",{children:[C.jsx("h1",{className:"font-extrabold text-2xl mb-5",children:"Add Restaurants"}),C.jsxs("form",{onSubmit:A,children:[C.jsxs("div",{className:"md:grid grid-cols-2 gap-6 space-y-2 md:space-y-0",children:[C.jsxs("div",{children:[C.jsx(Yr,{children:"Restaurant Name"}),C.jsx(zr,{type:"text",name:"restaurantName",value:e.restaurantName,onChange:E,placeholder:"Enter your restaurant name"}),n&&C.jsx("span",{className:"text-xs text-red-600 font-medium",children:n.restaurantName})]}),C.jsxs("div",{children:[C.jsx(Yr,{children:"City"}),C.jsx(zr,{type:"text",name:"city",value:e.city,onChange:E,placeholder:"Enter your city name"}),n&&C.jsx("span",{className:"text-xs text-red-600 font-medium",children:n.city})]}),C.jsxs("div",{children:[C.jsx(Yr,{children:"Country"}),C.jsx(zr,{type:"text",name:"country",value:e.country,onChange:E,placeholder:"Enter your country name"}),n&&C.jsx("span",{className:"text-xs text-red-600 font-medium",children:n.country})]}),C.jsxs("div",{children:[C.jsx(Yr,{children:"Delivery Time"}),C.jsx(zr,{type:"number",name:"deliveryTime",value:e.deliveryTime,onChange:E,placeholder:"Enter your delivery time"}),n&&C.jsx("span",{className:"text-xs text-red-600 font-medium",children:n.deliveryTime})]}),C.jsxs("div",{children:[C.jsx(Yr,{children:"Cuisines"}),C.jsx(zr,{type:"text",name:"cuisines",value:e.cuisines,onChange:L=>t({...e,cuisines:L.target.value.split(",")}),placeholder:"e.g. Momos, Biryani"}),n&&C.jsx("span",{className:"text-xs text-red-600 font-medium",children:n.cuisines})]}),C.jsxs("div",{children:[C.jsx(Yr,{children:"Upload Restaurant Banner"}),C.jsx(zr,{onChange:L=>{var I;return t({...e,imageFile:((I=L.target.files)==null?void 0:I[0])||void 0})},type:"file",accept:"image/*",name:"imageFile"}),n&&C.jsx("span",{className:"text-xs text-red-600 font-medium",children:(z=n.imageFile)==null?void 0:z.name})]})]}),C.jsx("div",{className:"my-5 w-fit",children:C.jsx(jr,{className:"bg-orange hover:bg-hoverOrange",children:p?"Update Your Restaurant":"Add Your Restaurant"})})]})]})})})},oS=bz,C7=wz,P7=Sz,Uz=N.forwardRef(({className:e,...t},n)=>C.jsx(f0,{ref:n,className:Ut("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Uz.displayName=f0.displayName;const w0=N.forwardRef(({className:e,children:t,...n},s)=>C.jsxs(P7,{children:[C.jsx(Uz,{}),C.jsxs(m0,{ref:s,className:Ut("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,C.jsxs(nS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[C.jsx(M2,{className:"h-4 w-4"}),C.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));w0.displayName=m0.displayName;const aS=({className:e,...t})=>C.jsx("div",{className:Ut("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});aS.displayName="DialogHeader";const S0=({className:e,...t})=>C.jsx("div",{className:Ut("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});S0.displayName="DialogFooter";const lS=N.forwardRef(({className:e,...t},n)=>C.jsx(g0,{ref:n,className:Ut("text-lg font-semibold leading-none tracking-tight",e),...t}));lS.displayName=g0.displayName;const T0=N.forwardRef(({className:e,...t},n)=>C.jsx(y0,{ref:n,className:Ut("text-sm text-muted-foreground",e),...t}));T0.displayName=y0.displayName;const Vz=Un.object({name:Un.string().nonempty({message:"Name is required"}).min(3,{message:"Name must be at least 3 characters long"}).max(50,{message:"Name must be at most 50 characters long"}),description:Un.string().nonempty({message:"Description is required"}).min(10,{message:"Description must be at least 10 characters long"}).max(500,{message:"Description must be at most 500 characters long"}),price:Un.number({invalid_type_error:"Price must be a valid number"}).min(.01,{message:"Price must be at least 0.01"}).max(1e4,{message:"Price must not exceed 10,000"}),image:Un.instanceof(File).refine(e=>e.size>0,{message:"Image file is required"}).refine(e=>["image/jpeg","image/png","image/webp","image/jpg"].includes(e.type),{message:"Image must be of type JPEG, PNG, WEBP, or JPG"}).optional()}),TE=Xv+"/api/v1/menu",$z=ep()(tp(e=>({loading:!1,menu:null,createMenu:async t=>{try{e({loading:!0});const n=await xr.post(`${TE}/`,t,{headers:{"Content-Type":"multipart/form-data"}});n.data.success&&(_n.success(n.data.message),e({loading:!1,menu:n.data.menu})),il.getState().addMenuToRestaurant(n.data.menu)}catch(n){_n.error(n.response.data.message),e({loading:!1})}},editMenu:async(t,n)=>{try{e({loading:!0});const s=await xr.put(`${TE}/${t}`,n,{headers:{"Content-Type":"multipart/form-data"}});s.data.success&&(_n.success(s.data.message),e({loading:!1,menu:s.data.menu})),il.getState().updateMenuToRestaurant(s.data.menu)}catch(s){_n.error(s.response.data.message),e({loading:!1})}}}),{name:"menu-name",storage:qu(()=>localStorage)})),E7=({selectedMenu:e,editOpen:t,setEditOpen:n})=>{var z;const[s,u]=N.useState({name:"",description:"",price:0,image:void 0}),[p,f]=N.useState({}),{loading:c,editMenu:S}=$z(),E=L=>{const{name:I,value:F,type:B}=L.target;u({...s,[I]:B==="number"?Number(F):F})},A=async L=>{L.preventDefault();const I=Vz.safeParse(s);if(!I.success){const F=I.error.formErrors.fieldErrors;f(F);return}try{const F=new FormData;F.append("name",s.name),F.append("description",s.description),F.append("price",s.price.toString()),s.image&&F.append("image",s.image),await S(e._id,F)}catch(F){console.log(F)}};return N.useEffect(()=>{u({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",price:(e==null?void 0:e.price)||0,image:void 0})},[e]),C.jsx(oS,{open:t,onOpenChange:n,children:C.jsxs(w0,{children:[C.jsxs(aS,{children:[C.jsx(lS,{children:"Edit Menu"}),C.jsx(T0,{children:"Update your menu to keep your offerings fresh and exciting!"})]}),C.jsxs("form",{onSubmit:A,className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx(Yr,{children:"Name"}),C.jsx(zr,{type:"text",name:"name",value:s.name,onChange:E,placeholder:"Enter menu name"}),p&&C.jsx("span",{className:"text-xs font-medium text-red-600",children:p.name})]}),C.jsxs("div",{children:[C.jsx(Yr,{children:"Description"}),C.jsx(zr,{type:"text",name:"description",value:s.description,onChange:E,placeholder:"Enter menu description"}),p&&C.jsx("span",{className:"text-xs font-medium text-red-600",children:p.description})]}),C.jsxs("div",{children:[C.jsx(Yr,{children:"Price in (RM)"}),C.jsx(zr,{type:"number",name:"price",value:s.price,onChange:E,placeholder:"Enter menu price"}),p&&C.jsx("span",{className:"text-xs font-medium text-red-600",children:p.price})]}),C.jsxs("div",{children:[C.jsx(Yr,{children:"Upload Menu Image"}),C.jsx(zr,{type:"file",name:"image",onChange:L=>{var I;return u({...s,image:((I=L.target.files)==null?void 0:I[0])||void 0})}}),p&&C.jsx("span",{className:"text-xs font-medium text-red-600",children:(z=p.image)==null?void 0:z.name})]}),C.jsx(S0,{className:"mt-5",children:C.jsx(jr,{className:"bg-orange hover:bg-hoverOrange",children:"Submit"})})]})]})})},M7=()=>{var B;const[e,t]=N.useState({name:"",description:"",price:0,image:void 0}),[n,s]=N.useState(!1),[u,p]=N.useState(!1),[f,c]=N.useState(),[S,E]=N.useState({}),{loading:A,createMenu:z}=$z(),{restaurant:L}=il(),I=X=>{const{name:q,value:V,type:Y}=X.target;t({...e,[q]:Y==="number"?Number(V):V})},F=async X=>{X.preventDefault();const q=Vz.safeParse(e);if(!q.success){const V=q.error.formErrors.fieldErrors;E(V);return}try{const V=new FormData;V.append("name",e.name),V.append("description",e.description),V.append("price",e.price.toString()),e.image&&V.append("image",e.image),await z(V)}catch(V){console.log(V)}};return C.jsxs("div",{className:"max-w-6xl mx-auto my-10",children:[C.jsxs("div",{className:"flex justify-between",children:[C.jsx("h1",{className:"font-bold md:font-extrabold text-lg md:text-2xl",children:"Available Menus"}),C.jsxs(oS,{open:n,onOpenChange:s,children:[C.jsx(C7,{children:C.jsxs(jr,{className:"bg-orange hover:bg-hoverOrange",children:[C.jsx(E2,{className:"mr-2"}),"Add Menus"]})}),C.jsxs(w0,{children:[C.jsxs(aS,{children:[C.jsx(lS,{children:"Add A New Menu"}),C.jsx(T0,{children:"Create a menu that will make your restaurant stand out."})]}),C.jsxs("form",{onSubmit:F,className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx(Yr,{children:"Name"}),C.jsx(zr,{type:"text",name:"name",value:e.name,onChange:I,placeholder:"Enter menu name"}),S&&C.jsx("span",{className:"text-xs font-medium text-red-600",children:S.name})]}),C.jsxs("div",{children:[C.jsx(Yr,{children:"Description"}),C.jsx(zr,{type:"text",name:"description",value:e.description,onChange:I,placeholder:"Enter menu description"}),S&&C.jsx("span",{className:"text-xs font-medium text-red-600",children:S.description})]}),C.jsxs("div",{children:[C.jsx(Yr,{children:"Price in RM"}),C.jsx(zr,{type:"number",name:"price",value:e.price,onChange:I,placeholder:"Enter menu price"}),S&&C.jsx("span",{className:"text-xs font-medium text-red-600",children:S.price})]}),C.jsxs("div",{children:[C.jsx(Yr,{children:"Upload Menu Image"}),C.jsx(zr,{type:"file",name:"image",onChange:X=>{var q;return t({...e,image:((q=X.target.files)==null?void 0:q[0])||void 0})}}),S&&C.jsx("span",{className:"text-xs font-medium text-red-600",children:(B=S.image)==null?void 0:B.name})]}),C.jsx(S0,{className:"mt-5",children:C.jsx(jr,{type:"submit",className:"bg-orange hover:bg-hoverOrange",children:"Submit"})})]})]})]})]}),L==null?void 0:L.menus.map((X,q)=>C.jsx("div",{className:"mt-6 space-y-4",children:C.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 md:p-4 p-2 shadow-md rounded-lg border",children:[C.jsx("img",{src:X.image,alt:"",className:"md:h-24 md:w-24 h-16 w-full object-cover rounded-lg"}),C.jsxs("div",{className:"flex-1",children:[C.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:X.name}),C.jsx("p",{className:"text-sm text-gray-600 mt-1",children:X.description}),C.jsxs("h2",{className:"text-md font-semibold mt-2",children:["Price (RM): ",C.jsx("span",{className:"text-[#D19254]",children:X.price})]})]}),C.jsx(jr,{onClick:()=>{c(X),p(!0)},size:"sm",className:"bg-orange hover:bg-hoverOrange mt-2",children:"Edit"})]})},q)),C.jsx(E7,{selectedMenu:f,editOpen:u,setEditOpen:p})]})};function CE(e,[t,n]){return Math.min(n,Math.max(t,e))}var k7="VisuallyHidden",Zz=N.forwardRef((e,t)=>C.jsx(cr.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));Zz.displayName=k7;var I7=[" ","Enter","ArrowUp","ArrowDown"],R7=[" ","Enter"],_g="Select",[C0,P0,A7]=Qv(_g),[op,wH]=ma(_g,[A7,s0]),E0=s0(),[D7,bc]=op(_g),[z7,j7]=op(_g),Gz=e=>{const{__scopeSelect:t,children:n,open:s,defaultOpen:u,onOpenChange:p,value:f,defaultValue:c,onValueChange:S,dir:E,name:A,autoComplete:z,disabled:L,required:I,form:F}=e,B=E0(t),[X,q]=N.useState(null),[V,Y]=N.useState(null),[de,Se]=N.useState(!1),ce=Jv(E),[Re=!1,Ie]=Bu({prop:s,defaultProp:u,onChange:p}),[We,tt]=Bu({prop:f,defaultProp:c,onChange:S}),vt=N.useRef(null),st=X?F||!!X.closest("form"):!0,[Tt,_t]=N.useState(new Set),Kt=Array.from(Tt).map(ct=>ct.props.value).join(";");return C.jsx(QR,{...B,children:C.jsxs(D7,{required:I,scope:t,trigger:X,onTriggerChange:q,valueNode:V,onValueNodeChange:Y,valueNodeHasChildren:de,onValueNodeHasChildrenChange:Se,contentId:mo(),value:We,onValueChange:tt,open:Re,onOpenChange:Ie,dir:ce,triggerPointerDownPosRef:vt,disabled:L,children:[C.jsx(C0.Provider,{scope:t,children:C.jsx(z7,{scope:e.__scopeSelect,onNativeOptionAdd:N.useCallback(ct=>{_t(Pt=>new Set(Pt).add(ct))},[]),onNativeOptionRemove:N.useCallback(ct=>{_t(Pt=>{const Xe=new Set(Pt);return Xe.delete(ct),Xe})},[]),children:n})}),st?C.jsxs(yj,{"aria-hidden":!0,required:I,tabIndex:-1,name:A,autoComplete:z,value:We,onChange:ct=>tt(ct.target.value),disabled:L,form:F,children:[We===void 0?C.jsx("option",{value:""}):null,Array.from(Tt)]},Kt):null]})})};Gz.displayName=_g;var Hz="SelectTrigger",qz=N.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:s=!1,...u}=e,p=E0(n),f=bc(Hz,n),c=f.disabled||s,S=Gr(t,f.onTriggerChange),E=P0(n),A=N.useRef("touch"),[z,L,I]=_j(B=>{const X=E().filter(Y=>!Y.disabled),q=X.find(Y=>Y.value===f.value),V=vj(X,B,q);V!==void 0&&f.onValueChange(V.value)}),F=B=>{c||(f.onOpenChange(!0),I()),B&&(f.triggerPointerDownPosRef.current={x:Math.round(B.pageX),y:Math.round(B.pageY)})};return C.jsx(JR,{asChild:!0,...p,children:C.jsx(cr.button,{type:"button",role:"combobox","aria-controls":f.contentId,"aria-expanded":f.open,"aria-required":f.required,"aria-autocomplete":"none",dir:f.dir,"data-state":f.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":gj(f.value)?"":void 0,...u,ref:S,onClick:jt(u.onClick,B=>{B.currentTarget.focus(),A.current!=="mouse"&&F(B)}),onPointerDown:jt(u.onPointerDown,B=>{A.current=B.pointerType;const X=B.target;X.hasPointerCapture(B.pointerId)&&X.releasePointerCapture(B.pointerId),B.button===0&&B.ctrlKey===!1&&B.pointerType==="mouse"&&(F(B),B.preventDefault())}),onKeyDown:jt(u.onKeyDown,B=>{const X=z.current!=="";!(B.ctrlKey||B.altKey||B.metaKey)&&B.key.length===1&&L(B.key),!(X&&B.key===" ")&&I7.includes(B.key)&&(F(),B.preventDefault())})})})});qz.displayName=Hz;var Wz="SelectValue",Xz=N.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:u,children:p,placeholder:f="",...c}=e,S=bc(Wz,n),{onValueNodeHasChildrenChange:E}=S,A=p!==void 0,z=Gr(t,S.onValueNodeChange);return ki(()=>{E(A)},[E,A]),C.jsx(cr.span,{...c,ref:z,style:{pointerEvents:"none"},children:gj(S.value)?C.jsx(C.Fragment,{children:f}):p})});Xz.displayName=Wz;var L7="SelectIcon",Kz=N.forwardRef((e,t)=>{const{__scopeSelect:n,children:s,...u}=e;return C.jsx(cr.span,{"aria-hidden":!0,...u,ref:t,children:s||""})});Kz.displayName=L7;var N7="SelectPortal",Yz=e=>C.jsx(o0,{asChild:!0,...e});Yz.displayName=N7;var Vu="SelectContent",Qz=N.forwardRef((e,t)=>{const n=bc(Vu,e.__scopeSelect),[s,u]=N.useState();if(ki(()=>{u(new DocumentFragment)},[]),!n.open){const p=s;return p?Hu.createPortal(C.jsx(Jz,{scope:e.__scopeSelect,children:C.jsx(C0.Slot,{scope:e.__scopeSelect,children:C.jsx("div",{children:e.children})})}),p):null}return C.jsx(ej,{...e,ref:t})});Qz.displayName=Vu;var Po=10,[Jz,wc]=op(Vu),O7="SelectContentImpl",ej=N.forwardRef((e,t)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:u,onEscapeKeyDown:p,onPointerDownOutside:f,side:c,sideOffset:S,align:E,alignOffset:A,arrowPadding:z,collisionBoundary:L,collisionPadding:I,sticky:F,hideWhenDetached:B,avoidCollisions:X,...q}=e,V=bc(Vu,n),[Y,de]=N.useState(null),[Se,ce]=N.useState(null),Re=Gr(t,gt=>de(gt)),[Ie,We]=N.useState(null),[tt,vt]=N.useState(null),st=P0(n),[Tt,_t]=N.useState(!1),Kt=N.useRef(!1);N.useEffect(()=>{if(Y)return F2(Y)},[Y]),k2();const ct=N.useCallback(gt=>{const[or,...Yt]=st().map(Zt=>Zt.ref.current),[ir]=Yt.slice(-1),At=document.activeElement;for(const Zt of gt)if(Zt===At||(Zt==null||Zt.scrollIntoView({block:"nearest"}),Zt===or&&Se&&(Se.scrollTop=0),Zt===ir&&Se&&(Se.scrollTop=Se.scrollHeight),Zt==null||Zt.focus(),document.activeElement!==At))return},[st,Se]),Pt=N.useCallback(()=>ct([Ie,Y]),[ct,Ie,Y]);N.useEffect(()=>{Tt&&Pt()},[Tt,Pt]);const{onOpenChange:Xe,triggerPointerDownPosRef:Oe}=V;N.useEffect(()=>{if(Y){let gt={x:0,y:0};const or=ir=>{var At,Zt;gt={x:Math.abs(Math.round(ir.pageX)-(((At=Oe.current)==null?void 0:At.x)??0)),y:Math.abs(Math.round(ir.pageY)-(((Zt=Oe.current)==null?void 0:Zt.y)??0))}},Yt=ir=>{gt.x<=10&&gt.y<=10?ir.preventDefault():Y.contains(ir.target)||Xe(!1),document.removeEventListener("pointermove",or),Oe.current=null};return Oe.current!==null&&(document.addEventListener("pointermove",or),document.addEventListener("pointerup",Yt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",or),document.removeEventListener("pointerup",Yt,{capture:!0})}}},[Y,Xe,Oe]),N.useEffect(()=>{const gt=()=>Xe(!1);return window.addEventListener("blur",gt),window.addEventListener("resize",gt),()=>{window.removeEventListener("blur",gt),window.removeEventListener("resize",gt)}},[Xe]);const[at,Et]=_j(gt=>{const or=st().filter(At=>!At.disabled),Yt=or.find(At=>At.ref.current===document.activeElement),ir=vj(or,gt,Yt);ir&&setTimeout(()=>ir.ref.current.focus())}),wt=N.useCallback((gt,or,Yt)=>{const ir=!Kt.current&&!Yt;(V.value!==void 0&&V.value===or||ir)&&(We(gt),ir&&(Kt.current=!0))},[V.value]),Lt=N.useCallback(()=>Y==null?void 0:Y.focus(),[Y]),It=N.useCallback((gt,or,Yt)=>{const ir=!Kt.current&&!Yt;(V.value!==void 0&&V.value===or||ir)&&vt(gt)},[V.value]),Wt=s==="popper"?nw:tj,tr=Wt===nw?{side:c,sideOffset:S,align:E,alignOffset:A,arrowPadding:z,collisionBoundary:L,collisionPadding:I,sticky:F,hideWhenDetached:B,avoidCollisions:X}:{};return C.jsx(Jz,{scope:n,content:Y,viewport:Se,onViewportChange:ce,itemRefCallback:wt,selectedItem:Ie,onItemLeave:Lt,itemTextRefCallback:It,focusSelectedItem:Pt,selectedItemText:tt,position:s,isPositioned:Tt,searchRef:at,children:C.jsx(u0,{as:lc,allowPinchZoom:!0,children:C.jsx(t0,{asChild:!0,trapped:V.open,onMountAutoFocus:gt=>{gt.preventDefault()},onUnmountAutoFocus:jt(u,gt=>{var or;(or=V.trigger)==null||or.focus({preventScroll:!0}),gt.preventDefault()}),children:C.jsx(e0,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:p,onPointerDownOutside:f,onFocusOutside:gt=>gt.preventDefault(),onDismiss:()=>V.onOpenChange(!1),children:C.jsx(Wt,{role:"listbox",id:V.contentId,"data-state":V.open?"open":"closed",dir:V.dir,onContextMenu:gt=>gt.preventDefault(),...q,...tr,onPlaced:()=>_t(!0),ref:Re,style:{display:"flex",flexDirection:"column",outline:"none",...q.style},onKeyDown:jt(q.onKeyDown,gt=>{const or=gt.ctrlKey||gt.altKey||gt.metaKey;if(gt.key==="Tab"&&gt.preventDefault(),!or&&gt.key.length===1&&Et(gt.key),["ArrowUp","ArrowDown","Home","End"].includes(gt.key)){let ir=st().filter(At=>!At.disabled).map(At=>At.ref.current);if(["ArrowUp","End"].includes(gt.key)&&(ir=ir.slice().reverse()),["ArrowUp","ArrowDown"].includes(gt.key)){const At=gt.target,Zt=ir.indexOf(At);ir=ir.slice(Zt+1)}setTimeout(()=>ct(ir)),gt.preventDefault()}})})})})})})});ej.displayName=O7;var F7="SelectItemAlignedPosition",tj=N.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:s,...u}=e,p=bc(Vu,n),f=wc(Vu,n),[c,S]=N.useState(null),[E,A]=N.useState(null),z=Gr(t,Re=>A(Re)),L=P0(n),I=N.useRef(!1),F=N.useRef(!0),{viewport:B,selectedItem:X,selectedItemText:q,focusSelectedItem:V}=f,Y=N.useCallback(()=>{if(p.trigger&&p.valueNode&&c&&E&&B&&X&&q){const Re=p.trigger.getBoundingClientRect(),Ie=E.getBoundingClientRect(),We=p.valueNode.getBoundingClientRect(),tt=q.getBoundingClientRect();if(p.dir!=="rtl"){const At=tt.left-Ie.left,Zt=We.left-At,Lr=Re.left-Zt,vr=Re.width+Lr,Qr=Math.max(vr,Ie.width),ei=window.innerWidth-Po,fn=CE(Zt,[Po,Math.max(Po,ei-Qr)]);c.style.minWidth=vr+"px",c.style.left=fn+"px"}else{const At=Ie.right-tt.right,Zt=window.innerWidth-We.right-At,Lr=window.innerWidth-Re.right-Zt,vr=Re.width+Lr,Qr=Math.max(vr,Ie.width),ei=window.innerWidth-Po,fn=CE(Zt,[Po,Math.max(Po,ei-Qr)]);c.style.minWidth=vr+"px",c.style.right=fn+"px"}const vt=L(),st=window.innerHeight-Po*2,Tt=B.scrollHeight,_t=window.getComputedStyle(E),Kt=parseInt(_t.borderTopWidth,10),ct=parseInt(_t.paddingTop,10),Pt=parseInt(_t.borderBottomWidth,10),Xe=parseInt(_t.paddingBottom,10),Oe=Kt+ct+Tt+Xe+Pt,at=Math.min(X.offsetHeight*5,Oe),Et=window.getComputedStyle(B),wt=parseInt(Et.paddingTop,10),Lt=parseInt(Et.paddingBottom,10),It=Re.top+Re.height/2-Po,Wt=st-It,tr=X.offsetHeight/2,gt=X.offsetTop+tr,or=Kt+ct+gt,Yt=Oe-or;if(or<=It){const At=vt.length>0&&X===vt[vt.length-1].ref.current;c.style.bottom="0px";const Zt=E.clientHeight-B.offsetTop-B.offsetHeight,Lr=Math.max(Wt,tr+(At?Lt:0)+Zt+Pt),vr=or+Lr;c.style.height=vr+"px"}else{const At=vt.length>0&&X===vt[0].ref.current;c.style.top="0px";const Lr=Math.max(It,Kt+B.offsetTop+(At?wt:0)+tr)+Yt;c.style.height=Lr+"px",B.scrollTop=or-It+B.offsetTop}c.style.margin=`${Po}px 0`,c.style.minHeight=at+"px",c.style.maxHeight=st+"px",s==null||s(),requestAnimationFrame(()=>I.current=!0)}},[L,p.trigger,p.valueNode,c,E,B,X,q,p.dir,s]);ki(()=>Y(),[Y]);const[de,Se]=N.useState();ki(()=>{E&&Se(window.getComputedStyle(E).zIndex)},[E]);const ce=N.useCallback(Re=>{Re&&F.current===!0&&(Y(),V==null||V(),F.current=!1)},[Y,V]);return C.jsx(U7,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:I,onScrollButtonChange:ce,children:C.jsx("div",{ref:S,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:de},children:C.jsx(cr.div,{...u,ref:z,style:{boxSizing:"border-box",maxHeight:"100%",...u.style}})})})});tj.displayName=F7;var B7="SelectPopperPosition",nw=N.forwardRef((e,t)=>{const{__scopeSelect:n,align:s="start",collisionPadding:u=Po,...p}=e,f=E0(n);return C.jsx(eA,{...f,...p,ref:t,align:s,collisionPadding:u,style:{boxSizing:"border-box",...p.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});nw.displayName=B7;var[U7,cS]=op(Vu,{}),iw="SelectViewport",rj=N.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:s,...u}=e,p=wc(iw,n),f=cS(iw,n),c=Gr(t,p.onViewportChange),S=N.useRef(0);return C.jsxs(C.Fragment,{children:[C.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),C.jsx(C0.Slot,{scope:n,children:C.jsx(cr.div,{"data-radix-select-viewport":"",role:"presentation",...u,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...u.style},onScroll:jt(u.onScroll,E=>{const A=E.currentTarget,{contentWrapper:z,shouldExpandOnScrollRef:L}=f;if(L!=null&&L.current&&z){const I=Math.abs(S.current-A.scrollTop);if(I>0){const F=window.innerHeight-Po*2,B=parseFloat(z.style.minHeight),X=parseFloat(z.style.height),q=Math.max(B,X);if(q<F){const V=q+I,Y=Math.min(F,V),de=V-Y;z.style.height=Y+"px",z.style.bottom==="0px"&&(A.scrollTop=de>0?de:0,z.style.justifyContent="flex-end")}}}S.current=A.scrollTop})})})]})});rj.displayName=iw;var nj="SelectGroup",[V7,$7]=op(nj),ij=N.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,u=mo();return C.jsx(V7,{scope:n,id:u,children:C.jsx(cr.div,{role:"group","aria-labelledby":u,...s,ref:t})})});ij.displayName=nj;var sj="SelectLabel",oj=N.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,u=$7(sj,n);return C.jsx(cr.div,{id:u.id,...s,ref:t})});oj.displayName=sj;var gv="SelectItem",[Z7,aj]=op(gv),lj=N.forwardRef((e,t)=>{const{__scopeSelect:n,value:s,disabled:u=!1,textValue:p,...f}=e,c=bc(gv,n),S=wc(gv,n),E=c.value===s,[A,z]=N.useState(p??""),[L,I]=N.useState(!1),F=Gr(t,V=>{var Y;return(Y=S.itemRefCallback)==null?void 0:Y.call(S,V,s,u)}),B=mo(),X=N.useRef("touch"),q=()=>{u||(c.onValueChange(s),c.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return C.jsx(Z7,{scope:n,value:s,disabled:u,textId:B,isSelected:E,onItemTextChange:N.useCallback(V=>{z(Y=>Y||((V==null?void 0:V.textContent)??"").trim())},[]),children:C.jsx(C0.ItemSlot,{scope:n,value:s,disabled:u,textValue:A,children:C.jsx(cr.div,{role:"option","aria-labelledby":B,"data-highlighted":L?"":void 0,"aria-selected":E&&L,"data-state":E?"checked":"unchecked","aria-disabled":u||void 0,"data-disabled":u?"":void 0,tabIndex:u?void 0:-1,...f,ref:F,onFocus:jt(f.onFocus,()=>I(!0)),onBlur:jt(f.onBlur,()=>I(!1)),onClick:jt(f.onClick,()=>{X.current!=="mouse"&&q()}),onPointerUp:jt(f.onPointerUp,()=>{X.current==="mouse"&&q()}),onPointerDown:jt(f.onPointerDown,V=>{X.current=V.pointerType}),onPointerMove:jt(f.onPointerMove,V=>{var Y;X.current=V.pointerType,u?(Y=S.onItemLeave)==null||Y.call(S):X.current==="mouse"&&V.currentTarget.focus({preventScroll:!0})}),onPointerLeave:jt(f.onPointerLeave,V=>{var Y;V.currentTarget===document.activeElement&&((Y=S.onItemLeave)==null||Y.call(S))}),onKeyDown:jt(f.onKeyDown,V=>{var de;((de=S.searchRef)==null?void 0:de.current)!==""&&V.key===" "||(R7.includes(V.key)&&q(),V.key===" "&&V.preventDefault())})})})})});lj.displayName=gv;var Jf="SelectItemText",cj=N.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:u,...p}=e,f=bc(Jf,n),c=wc(Jf,n),S=aj(Jf,n),E=j7(Jf,n),[A,z]=N.useState(null),L=Gr(t,q=>z(q),S.onItemTextChange,q=>{var V;return(V=c.itemTextRefCallback)==null?void 0:V.call(c,q,S.value,S.disabled)}),I=A==null?void 0:A.textContent,F=N.useMemo(()=>C.jsx("option",{value:S.value,disabled:S.disabled,children:I},S.value),[S.disabled,S.value,I]),{onNativeOptionAdd:B,onNativeOptionRemove:X}=E;return ki(()=>(B(F),()=>X(F)),[B,X,F]),C.jsxs(C.Fragment,{children:[C.jsx(cr.span,{id:S.textId,...p,ref:L}),S.isSelected&&f.valueNode&&!f.valueNodeHasChildren?Hu.createPortal(p.children,f.valueNode):null]})});cj.displayName=Jf;var uj="SelectItemIndicator",dj=N.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return aj(uj,n).isSelected?C.jsx(cr.span,{"aria-hidden":!0,...s,ref:t}):null});dj.displayName=uj;var sw="SelectScrollUpButton",hj=N.forwardRef((e,t)=>{const n=wc(sw,e.__scopeSelect),s=cS(sw,e.__scopeSelect),[u,p]=N.useState(!1),f=Gr(t,s.onScrollButtonChange);return ki(()=>{if(n.viewport&&n.isPositioned){let c=function(){const E=S.scrollTop>0;p(E)};const S=n.viewport;return c(),S.addEventListener("scroll",c),()=>S.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),u?C.jsx(fj,{...e,ref:f,onAutoScroll:()=>{const{viewport:c,selectedItem:S}=n;c&&S&&(c.scrollTop=c.scrollTop-S.offsetHeight)}}):null});hj.displayName=sw;var ow="SelectScrollDownButton",pj=N.forwardRef((e,t)=>{const n=wc(ow,e.__scopeSelect),s=cS(ow,e.__scopeSelect),[u,p]=N.useState(!1),f=Gr(t,s.onScrollButtonChange);return ki(()=>{if(n.viewport&&n.isPositioned){let c=function(){const E=S.scrollHeight-S.clientHeight,A=Math.ceil(S.scrollTop)<E;p(A)};const S=n.viewport;return c(),S.addEventListener("scroll",c),()=>S.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),u?C.jsx(fj,{...e,ref:f,onAutoScroll:()=>{const{viewport:c,selectedItem:S}=n;c&&S&&(c.scrollTop=c.scrollTop+S.offsetHeight)}}):null});pj.displayName=ow;var fj=N.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:s,...u}=e,p=wc("SelectScrollButton",n),f=N.useRef(null),c=P0(n),S=N.useCallback(()=>{f.current!==null&&(window.clearInterval(f.current),f.current=null)},[]);return N.useEffect(()=>()=>S(),[S]),ki(()=>{var A;const E=c().find(z=>z.ref.current===document.activeElement);(A=E==null?void 0:E.ref.current)==null||A.scrollIntoView({block:"nearest"})},[c]),C.jsx(cr.div,{"aria-hidden":!0,...u,ref:t,style:{flexShrink:0,...u.style},onPointerDown:jt(u.onPointerDown,()=>{f.current===null&&(f.current=window.setInterval(s,50))}),onPointerMove:jt(u.onPointerMove,()=>{var E;(E=p.onItemLeave)==null||E.call(p),f.current===null&&(f.current=window.setInterval(s,50))}),onPointerLeave:jt(u.onPointerLeave,()=>{S()})})}),G7="SelectSeparator",mj=N.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return C.jsx(cr.div,{"aria-hidden":!0,...s,ref:t})});mj.displayName=G7;var aw="SelectArrow",H7=N.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,u=E0(n),p=bc(aw,n),f=wc(aw,n);return p.open&&f.position==="popper"?C.jsx(tA,{...u,...s,ref:t}):null});H7.displayName=aw;function gj(e){return e===""||e===void 0}var yj=N.forwardRef((e,t)=>{const{value:n,...s}=e,u=N.useRef(null),p=Gr(t,u),f=Az(n);return N.useEffect(()=>{const c=u.current,S=window.HTMLSelectElement.prototype,A=Object.getOwnPropertyDescriptor(S,"value").set;if(f!==n&&A){const z=new Event("change",{bubbles:!0});A.call(c,n),c.dispatchEvent(z)}},[f,n]),C.jsx(Zz,{asChild:!0,children:C.jsx("select",{...s,ref:p,defaultValue:n})})});yj.displayName="BubbleSelect";function _j(e){const t=Ws(e),n=N.useRef(""),s=N.useRef(0),u=N.useCallback(f=>{const c=n.current+f;t(c),function S(E){n.current=E,window.clearTimeout(s.current),E!==""&&(s.current=window.setTimeout(()=>S(""),1e3))}(c)},[t]),p=N.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,u,p]}function vj(e,t,n){const u=t.length>1&&Array.from(t).every(E=>E===t[0])?t[0]:t,p=n?e.indexOf(n):-1;let f=q7(e,Math.max(p,0));u.length===1&&(f=f.filter(E=>E!==n));const S=f.find(E=>E.textValue.toLowerCase().startsWith(u.toLowerCase()));return S!==n?S:void 0}function q7(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var W7=Gz,xj=qz,X7=Xz,K7=Kz,Y7=Yz,bj=Qz,Q7=rj,J7=ij,wj=oj,Sj=lj,eG=cj,tG=dj,Tj=hj,Cj=pj,Pj=mj;const Ej=W7,Mj=J7,kj=X7,uS=N.forwardRef(({className:e,children:t,...n},s)=>C.jsxs(xj,{ref:s,className:Ut("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,C.jsx(K7,{asChild:!0,children:C.jsx(bR,{className:"h-4 w-4 opacity-50"})})]}));uS.displayName=xj.displayName;const Ij=N.forwardRef(({className:e,...t},n)=>C.jsx(Tj,{ref:n,className:Ut("flex cursor-default items-center justify-center py-1",e),...t,children:C.jsx(uU,{className:"h-4 w-4"})}));Ij.displayName=Tj.displayName;const Rj=N.forwardRef(({className:e,...t},n)=>C.jsx(Cj,{ref:n,className:Ut("flex cursor-default items-center justify-center py-1",e),...t,children:C.jsx(bR,{className:"h-4 w-4"})}));Rj.displayName=Cj.displayName;const dS=N.forwardRef(({className:e,children:t,position:n="popper",...s},u)=>C.jsx(Y7,{children:C.jsxs(bj,{ref:u,className:Ut("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...s,children:[C.jsx(Ij,{}),C.jsx(Q7,{className:Ut("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),C.jsx(Rj,{})]})}));dS.displayName=bj.displayName;const rG=N.forwardRef(({className:e,...t},n)=>C.jsx(wj,{ref:n,className:Ut("px-2 py-1.5 text-sm font-semibold",e),...t}));rG.displayName=wj.displayName;const hS=N.forwardRef(({className:e,children:t,...n},s)=>C.jsxs(Sj,{ref:s,className:Ut("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[C.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:C.jsx(tG,{children:C.jsx(Kv,{className:"h-4 w-4"})})}),C.jsx(eG,{children:t})]}));hS.displayName=Sj.displayName;const nG=N.forwardRef(({className:e,...t},n)=>C.jsx(Pj,{ref:n,className:Ut("-mx-1 my-1 h-px bg-muted",e),...t}));nG.displayName=Pj.displayName;const iG=()=>{const{restaurantOrder:e,getRestaurantOrders:t,updateRestaurantOrder:n}=il(),s=async(u,p)=>{await n(u,p)};return N.useEffect(()=>{t()},[]),C.jsxs("div",{className:"max-w-6xl mx-auto py-10 px-6",children:[C.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white mb-10",children:"Orders Overview"}),C.jsx("div",{className:"space-y-8",children:e.map(u=>C.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start sm:items-center bg-white dark:bg-gray-800 shadow-lg rounded-xl p-6 sm:p-8 border border-gray-200 dark:border-gray-700",children:[C.jsxs("div",{className:"flex-1 mb-6 sm:mb-0",children:[C.jsx("h1",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:u.deliveryDetails.name}),C.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:[C.jsx("span",{className:"font-semibold",children:"Address: "}),u.deliveryDetails.address]}),C.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:[C.jsx("span",{className:"font-semibold",children:"Total Amount: "}),u.totalAmount/100]})]}),C.jsxs("div",{className:"w-full sm:w-1/3",children:[C.jsx(Yr,{className:"block text-sm font-medium text-gray-700 dark:text-gray300 mb-2",children:"Order Status"}),C.jsxs(Ej,{onValueChange:p=>s(u._id,p),defaultValue:u.status,children:[C.jsx(uS,{children:C.jsx(kj,{placeholder:"Select Status"})}),C.jsx(dS,{children:C.jsx(Mj,{children:["Pending","Confirmed","Preparing","OutForDelivery","Delivered"].map((p,f)=>C.jsx(hS,{value:p.toLowerCase(),children:p},f))})})]})]})]}))})]})},Mb=Xv+"/api/v1/order",pS=ep()(tp(e=>({loading:!1,orders:[],createCheckoutSession:async t=>{try{e({loading:!0});const n=await xr.post(`${Mb}/checkout/create-checkout-session`,t,{headers:{"Content-Type":"application/json"}});window.location.href=n.data.session.url,e({loading:!1})}catch{e({loading:!1})}},getOrderDetails:async()=>{try{e({loading:!0});const t=await xr.get(`${Mb}/`);e({loading:!1,orders:t.data.orders})}catch{e({loading:!1})}},getOrdersForDeliveryMan:async()=>{var t,n;try{e({loading:!0});const s=(n=(t=JSON.parse(localStorage.getItem("user-name")||"{}").state)==null?void 0:t.user)==null?void 0:n._id;if(console.log(s),!s){e({loading:!1});return}const u=await xr.get(`${Mb}/getOrdersForDeliveryMan`,{params:{userId:s},headers:{"Content-Type":"application/json"}});e({loading:!1,orders:u.data.orders})}catch{e({loading:!1})}}}),{name:"order-name",storage:qu(()=>localStorage)})),sG=()=>{const{orders:e,getOrderDetails:t}=pS();return N.useEffect(()=>{t()},[]),e.length===0?C.jsx("div",{className:"flex items-center justify-center min-h-screen",children:C.jsx("h1",{className:"font-bold text-2xl text-gray-700 dark:text-gray-300",children:"Order not found!"})}):C.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900 px-4",children:C.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 max-w-lg w-full",children:[C.jsx("div",{className:"text-center mb-6",children:C.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200",children:["Order Status:"," ",C.jsx("span",{className:"text-[#FF5A5A]",children:"confirm".toUpperCase()})]})}),C.jsxs("div",{className:"mb-6",children:[C.jsx("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-4",children:"Order Summary"}),e.map((n,s)=>C.jsx("div",{children:n.cartItems.map(u=>C.jsxs("div",{className:"mb-4",children:[C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx("img",{src:u.image,alt:"",className:"w-14 h-14 rounded-md object-cover"}),C.jsx("h3",{className:"ml-4 text-gray-800 dark:text-gray-200 font-medium",children:u.name})]}),C.jsx("div",{className:"text-right",children:C.jsxs("div",{className:"text-gray-800 dark:text-gray-200 flex items-center",children:["RM"," ",C.jsx("span",{className:"text-lg font-medium",children:u.price})]})})]}),C.jsx(lg,{className:"my-4"})]}))},s))]}),C.jsx(Dn,{to:"/cart",children:C.jsx(jr,{className:"bg-orange hover:bg-hoverOrange w-full py-3 rounded-md shadow-lg",children:"Continue Shopping"})})]})})},oG=()=>C.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-bg-lightGreen to-emerald-900 flex items-center justify-center relative overflow-hidden",children:C.jsx(yU,{className:"animate-spin w-16 h-16 text-white"})}),aG=()=>{const[e,t]=N.useState("");return C.jsx("div",{className:"flex items-center justify-center min-h-screen w-full",children:C.jsxs("form",{className:"flex flex-col gap-5 md:p-8 w-full max-w-md rounded-lg mx-4",children:[C.jsxs("div",{className:"text-center",children:[C.jsx("h1",{className:"font-extrabold text-2xl mb-2",children:"Forget Password"}),C.jsx("p",{className:"text-sm text-gray-600",children:"Enter your email address to reset your password"})]}),C.jsxs("div",{className:"relative w-full",children:[C.jsx(zr,{type:"text",value:e,onChange:n=>t(n.target.value),placeholder:"Enter your email",className:"pl-10"}),C.jsx(Yv,{className:"absolute inset-y-2 left-2 text-gray-600 pointer-events-none"})]}),C.jsx(jr,{className:"bg-orange hover:bg-hoverOrange",children:"Send Reset Link"}),C.jsxs("span",{className:"text-center",children:["Back to"," ",C.jsx(Dn,{to:"/login",className:"text-blue-500",children:"Login"})]})]})})},lG=()=>{const[e,t]=N.useState({email:"",password:""}),[n,s]=N.useState({}),{loading:u,login:p}=Zo(),f=Qh(),c=E=>{const{name:A,value:z}=E.target;t({...e,[A]:z})},S=async E=>{E.preventDefault();const A=kB.safeParse(e);if(!A.success){const z=A.error.formErrors.fieldErrors;s(z);return}try{await p(e),f("/")}catch(z){console.log(z)}};return C.jsx("div",{className:"flex items-center justify-center min-h-screen",children:C.jsxs("form",{onSubmit:S,className:"md:p-8 w-full max-w-md rounded-lg md:border border-gray-200 mx-4",children:[C.jsx("div",{className:"mb-4",children:C.jsx("h1",{className:"font-bold text-2xl",children:"FoodTiger"})}),C.jsx("div",{className:"mb-4",children:C.jsxs("div",{className:"relative",children:[C.jsx(zr,{type:"email",placeholder:"Email",name:"email",value:e.email,onChange:c,className:"pl-10 focus-visible:ring-1"}),C.jsx(Yv,{className:"absolute inset-y-2 left-2 text-gray-500 pointer-events-none"}),n&&C.jsx("span",{className:"text-xs text-red-500",children:n.email})]})}),C.jsx("div",{className:"mb-4",children:C.jsxs("div",{className:"relative",children:[C.jsx(zr,{type:"password",placeholder:"Password",name:"password",value:e.password,onChange:c,className:"pl-10 focus-visible:ring-1"}),C.jsx(P2,{className:"absolute inset-y-2 left-2 text-gray-500 pointer-events-none"}),n&&C.jsx("span",{className:"text-xs text-red-500",children:n.password})]})}),C.jsx("div",{className:"mb-10",children:C.jsx(jr,{type:"submit",className:"w-full bg-orange hover:bg-hoverOrange",children:"Login"})}),C.jsx(lg,{}),C.jsxs("p",{className:"mt-2",children:["Don't have an account?"," ",C.jsx(Dn,{to:"/signup",className:"text-blue-500",children:"Signup"})]})]})})},Aj=N.forwardRef(({className:e,...t},n)=>C.jsx("div",{className:"relative w-full overflow-auto",children:C.jsx("table",{ref:n,className:Ut("w-full caption-bottom text-sm",e),...t})}));Aj.displayName="Table";const Dj=N.forwardRef(({className:e,...t},n)=>C.jsx("thead",{ref:n,className:Ut("[&_tr]:border-b",e),...t}));Dj.displayName="TableHeader";const zj=N.forwardRef(({className:e,...t},n)=>C.jsx("tbody",{ref:n,className:Ut("[&_tr:last-child]:border-0",e),...t}));zj.displayName="TableBody";const jj=N.forwardRef(({className:e,...t},n)=>C.jsx("tfoot",{ref:n,className:Ut("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));jj.displayName="TableFooter";const b_=N.forwardRef(({className:e,...t},n)=>C.jsx("tr",{ref:n,className:Ut("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));b_.displayName="TableRow";const uu=N.forwardRef(({className:e,...t},n)=>C.jsx("th",{ref:n,className:Ut("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));uu.displayName="TableHead";const Ua=N.forwardRef(({className:e,...t},n)=>C.jsx("td",{ref:n,className:Ut("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));Ua.displayName="TableCell";const cG=N.forwardRef(({className:e,...t},n)=>C.jsx("caption",{ref:n,className:Ut("mt-4 text-sm text-muted-foreground",e),...t}));cG.displayName="TableCaption";const uG=({open:e,setOpen:t})=>{const{user:n}=Zo(),[s,u]=N.useState({name:(n==null?void 0:n.fullname)||"",email:(n==null?void 0:n.email)||"",contact:(n==null?void 0:n.contact.toString())||"",address:(n==null?void 0:n.address)||"",city:(n==null?void 0:n.city)||"",country:(n==null?void 0:n.country)||""}),{cart:p}=_0(),{restaurant:f,searchedRestaurant:c,singleRestaurant:S}=il(),{createCheckoutSession:E,loading:A}=pS(),z=I=>{const{name:F,value:B}=I.target;u({...s,[F]:B})},L=async I=>{I.preventDefault();try{console.log(f);const F={cartItems:p.map(B=>({menuId:B._id,name:B.name,image:B.image,price:B.price.toString(),quantity:B.quantity.toString()})),deliveryDetails:s,user:n==null?void 0:n._id,restaurantId:S==null?void 0:S._id};await E(F)}catch(F){console.log(F)}};return C.jsx(oS,{open:e,onOpenChange:t,children:C.jsxs(w0,{children:[C.jsx(tS,{className:"font-semibold",children:"Review Your Order"}),C.jsx(T0,{className:"text-xs",children:"Double-check your delivery details and ensure everything is in order. When you are ready, hit confirm button to finalize your order"}),C.jsxs("form",{onSubmit:L,className:"md:grid grid-cols-2 gap-2 space-y-1 md:space-y-0",children:[C.jsxs("div",{children:[C.jsx(Yr,{children:"Fullname"}),C.jsx(zr,{type:"text",name:"name",value:s.name,onChange:z})]}),C.jsxs("div",{children:[C.jsx(Yr,{children:"Email"}),C.jsx(zr,{disabled:!0,type:"email",name:"email",value:s.email,onChange:z})]}),C.jsxs("div",{children:[C.jsx(Yr,{children:"Contact"}),C.jsx(zr,{type:"text",name:"contact",value:s.contact,onChange:z})]}),C.jsxs("div",{children:[C.jsx(Yr,{children:"Address"}),C.jsx(zr,{type:"text",name:"address",value:s.address,onChange:z})]}),C.jsxs("div",{children:[C.jsx(Yr,{children:"City"}),C.jsx(zr,{type:"text",name:"city",value:s.city,onChange:z})]}),C.jsxs("div",{children:[C.jsx(Yr,{children:"Country"}),C.jsx(zr,{type:"text",name:"country",value:s.country,onChange:z})]}),C.jsx(S0,{className:"col-span-2 pt-5",children:C.jsx(jr,{className:"bg-orange hover:bg-hoverOrange",children:"Continue To Payment"})})]})]})})},dG=()=>{const[e,t]=N.useState(!1),{cart:n,removeFromTheCart:s,incrementQuantity:u,decrementQuantity:p,clearCart:f}=_0();let c=n.reduce((S,E)=>S+E.price*E.quantity,0);return C.jsxs("div",{className:"flex flex-col max-w-7xl mx-auto my-10",children:[C.jsx("div",{className:"flex justify-end",children:C.jsx(jr,{onClick:f,variant:"link",children:"Clear All"})}),C.jsxs(Aj,{children:[C.jsx(Dj,{children:C.jsxs(b_,{children:[C.jsx(uu,{children:"Items"}),C.jsx(uu,{children:"Title"}),C.jsx(uu,{children:"Price"}),C.jsx(uu,{children:"Quantity"}),C.jsx(uu,{children:"Total"}),C.jsx(uu,{className:"text-right",children:"Remove"})]})}),C.jsx(zj,{children:n.map(S=>C.jsxs(b_,{children:[C.jsx(Ua,{children:C.jsxs(mg,{children:[C.jsx(gg,{src:S.image,alt:S.name}),C.jsx(yg,{children:"AR"})]})}),C.jsxs(Ua,{children:[" ",S.name]}),C.jsxs(Ua,{children:[" ",S.price]}),C.jsx(Ua,{children:C.jsxs("div",{className:"w-fit flex items-center rounded-full border border-gray-100 dark:border-gray-800 shadow-md",children:[C.jsx(jr,{onClick:()=>p(S._id),size:"icon",variant:"outline",className:"rounded-full bg-gray-200",children:C.jsx(bU,{})}),C.jsx("span",{className:"mx-3 font-bold",children:S.quantity}),C.jsx(jr,{onClick:()=>u(S._id),size:"icon",className:"rounded-full bg-orange hover:bg-hoverOrange",variant:"outline",children:C.jsx(E2,{})})]})}),C.jsx(Ua,{children:S.price*S.quantity}),C.jsx(Ua,{className:"text-right",children:C.jsx(jr,{onClick:()=>s(S._id),size:"sm",className:"bg-orange hover:bg-hoverOrange",children:"Remove"})})]},S._id))}),C.jsx(jj,{children:C.jsxs(b_,{className:"text-2xl font-bold",children:[C.jsx(Ua,{colSpan:5,children:"Total"}),C.jsx(Ua,{className:"text-right",children:c})]})})]}),C.jsx("div",{className:"flex justify-end my-5",children:C.jsx(jr,{onClick:()=>t(!0),className:"bg-orange hover:bg-hoverOrange",children:"Proceed To Checkout"})}),C.jsx(uG,{open:e,setOpen:t})]})};var Lj={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.0.1/LICENSE.txt
 */(function(e,t){(function(n,s){e.exports=s()})(TN,function(){var n={},s={};function u(f,c,S){if(s[f]=S,f==="index"){var E="var sharedModule = {}; ("+s.shared+")(sharedModule); ("+s.worker+")(sharedModule);",A={};return s.shared(A),s.index(n,A),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([E],{type:"text/javascript"}))),n}}u("shared",["exports"],function(f){function c(l,i,a,d){return new(a||(a=Promise))(function(g,v){function x(k){try{P(d.next(k))}catch(D){v(D)}}function w(k){try{P(d.throw(k))}catch(D){v(D)}}function P(k){var D;k.done?g(k.value):(D=k.value,D instanceof a?D:new a(function(j){j(D)})).then(x,w)}P((d=d.apply(l,i||[])).next())})}function S(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var E,A;function z(){if(A)return E;function l(i,a){this.x=i,this.y=a}return A=1,E=l,l.prototype={clone:function(){return new l(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,a){return this.clone()._rotateAround(i,a)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var a=i.x-this.x,d=i.y-this.y;return a*a+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,a){return Math.atan2(this.x*a-this.y*i,this.x*i+this.y*a)},_matMult:function(i){var a=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=a,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var a=Math.cos(i),d=Math.sin(i),g=d*this.x+a*this.y;return this.x=a*this.x-d*this.y,this.y=g,this},_rotateAround:function(i,a){var d=Math.cos(i),g=Math.sin(i),v=a.y+g*(this.x-a.x)+d*(this.y-a.y);return this.x=a.x+d*(this.x-a.x)-g*(this.y-a.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},l.convert=function(i){return i instanceof l?i:Array.isArray(i)?new l(i[0],i[1]):i},E}typeof SuppressedError=="function"&&SuppressedError;var L,I,F=S(z()),B=function(){if(I)return L;function l(i,a,d,g){this.cx=3*i,this.bx=3*(d-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(g-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=a,this.p2x=d,this.p2y=g}return I=1,L=l,l.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,a){if(a===void 0&&(a=1e-6),i<0)return 0;if(i>1)return 1;for(var d=i,g=0;g<8;g++){var v=this.sampleCurveX(d)-i;if(Math.abs(v)<a)return d;var x=this.sampleCurveDerivativeX(d);if(Math.abs(x)<1e-6)break;d-=v/x}var w=0,P=1;for(d=i,g=0;g<20&&(v=this.sampleCurveX(d),!(Math.abs(v-i)<a));g++)i>v?w=d:P=d,d=.5*(P-w)+w;return d},solve:function(i,a){return this.sampleCurveY(this.solveCurveX(i,a))}},L}(),X=S(B);let q,V;function Y(){return q==null&&(q=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),q}function de(){if(V==null&&(V=!1,Y())){const i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let d=0;d<5*5;d++){const g=4*d;i.fillStyle=`rgb(${g},${g+1},${g+2})`,i.fillRect(d%5,Math.floor(d/5),1,1)}const a=i.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&a[d]!==d){V=!0;break}}}return V||!1}var Se,ce=1e-6,Re=typeof Float32Array<"u"?Float32Array:Array;function Ie(){var l=new Re(9);return Re!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function We(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function tt(){var l=new Re(3);return Re!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function vt(l,i,a){var d=new Re(3);return d[0]=l,d[1]=i,d[2]=a,d}function st(l,i,a){var d=i[0],g=i[1],v=i[2],x=i[3];return l[0]=a[0]*d+a[4]*g+a[8]*v+a[12]*x,l[1]=a[1]*d+a[5]*g+a[9]*v+a[13]*x,l[2]=a[2]*d+a[6]*g+a[10]*v+a[14]*x,l[3]=a[3]*d+a[7]*g+a[11]*v+a[15]*x,l}function Tt(){var l=new Re(4);return Re!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function _t(){var l=new Re(2);return Re!=Float32Array&&(l[0]=0,l[1]=0),l}function Kt(l,i){var a=new Re(2);return a[0]=l,a[1]=i,a}Math.hypot||(Math.hypot=function(){for(var l=0,i=arguments.length;i--;)l+=arguments[i]*arguments[i];return Math.sqrt(l)}),tt(),Se=new Re(4),Re!=Float32Array&&(Se[0]=0,Se[1]=0,Se[2]=0,Se[3]=0),tt(),vt(1,0,0),vt(0,1,0),Tt(),Tt(),Ie(),_t();const ct=8192;function Pt(l,i,a){return i*(ct/(l.tileSize*Math.pow(2,a-l.tileID.overscaledZ)))}function Xe(l,i){return(l%i+i)%i}function Oe(l,i,a){return l*(1-a)+i*a}function at(l){if(l<=0)return 0;if(l>=1)return 1;const i=l*l,a=i*l;return 4*(l<.5?a:3*(l-i)+a-.75)}function Et(l,i,a,d){const g=new X(l,i,a,d);return v=>g.solve(v)}const wt=Et(.25,.1,.25,1);function Lt(l,i,a){return Math.min(a,Math.max(i,l))}function It(l,i,a){const d=a-i,g=((l-i)%d+d)%d+i;return g===i?a:g}function Wt(l,...i){for(const a of i)for(const d in a)l[d]=a[d];return l}let tr=1;function gt(l,i,a){const d={};for(const g in l)d[g]=i.call(this,l[g],g,l);return d}function or(l,i,a){const d={};for(const g in l)i.call(this,l[g],g,l)&&(d[g]=l[g]);return d}function Yt(l){return Array.isArray(l)?l.map(Yt):typeof l=="object"&&l?gt(l,Yt):l}const ir={};function At(l){ir[l]||(typeof console<"u"&&console.warn(l),ir[l]=!0)}function Zt(l,i,a){return(a.y-l.y)*(i.x-l.x)>(i.y-l.y)*(a.x-l.x)}function Lr(l){return typeof WorkerGlobalScope<"u"&&l!==void 0&&l instanceof WorkerGlobalScope}let vr=null;function Qr(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}const ei="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function fn(l,i,a,d,g){return c(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(l,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const w=x.startsWith("BGR"),P=new Uint8ClampedArray(d*g*4);if(yield v.copyTo(P,function(k,D,j,Z,H){const W=4*Math.max(1,0),J=(Math.max(0,j)-j)*Z*4+W,ie=4*Z,ue=Math.max(0,D),Me=Math.max(0,j);return{rect:{x:ue,y:Me,width:Math.min(k.width,D+Z)-ue,height:Math.min(k.height,j+H)-Me},layout:[{offset:J,stride:ie}]}}(l,i,a,d,g)),w)for(let k=0;k<P.length;k+=4){const D=P[k];P[k]=P[k+2],P[k+2]=D}return P}finally{v.close()}})}let $n,Zn;function mn(l){return l/Math.PI*180}const Ss="AbortError";function Ts(){return new Error(Ss)}const Nr={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Gn(l){return Nr.REGISTERED_PROTOCOLS[l.substring(0,l.indexOf("://"))]}const ds="global-dispatcher";class _i extends Error{constructor(i,a,d,g){super(`AJAXError: ${a} (${i}): ${d}`),this.status=i,this.statusText=a,this.url=d,this.body=g}}const bn=()=>Lr(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,wn=function(l,i){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){const d=Gn(l.url);if(d)return d(l,i);if(Lr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,targetMapId:ds},i)}if(!(/^file:/.test(a=l.url)||/^file:/.test(bn())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(d,g){return c(this,void 0,void 0,function*(){const v=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:bn(),signal:g.signal});let x,w;d.type!=="json"||v.headers.has("Accept")||v.headers.set("Accept","application/json");try{x=yield fetch(v)}catch(k){throw new _i(0,k.message,d.url,new Blob)}if(!x.ok){const k=yield x.blob();throw new _i(x.status,x.statusText,d.url,k)}w=d.type==="arrayBuffer"||d.type==="image"?x.arrayBuffer():d.type==="json"?x.json():x.text();const P=yield w;if(g.signal.aborted)throw Ts();return{data:P,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(l,i);if(Lr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,mustQueue:!0,targetMapId:ds},i)}var a;return function(d,g){return new Promise((v,x)=>{var w;const P=new XMLHttpRequest;P.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(P.responseType="arraybuffer");for(const k in d.headers)P.setRequestHeader(k,d.headers[k]);d.type==="json"&&(P.responseType="text",!((w=d.headers)===null||w===void 0)&&w.Accept||P.setRequestHeader("Accept","application/json")),P.withCredentials=d.credentials==="include",P.onerror=()=>{x(new Error(P.statusText))},P.onload=()=>{if(!g.signal.aborted)if((P.status>=200&&P.status<300||P.status===0)&&P.response!==null){let k=P.response;if(d.type==="json")try{k=JSON.parse(P.response)}catch(D){return void x(D)}v({data:k,cacheControl:P.getResponseHeader("Cache-Control"),expires:P.getResponseHeader("Expires")})}else{const k=new Blob([P.response],{type:P.getResponseHeader("Content-Type")});x(new _i(P.status,P.statusText,d.url,k))}},g.signal.addEventListener("abort",()=>{P.abort(),x(Ts())}),P.send(d.body)})}(l,i)};function Ii(l){if(!l||l.indexOf("://")<=0||l.indexOf("data:image/")===0||l.indexOf("blob:")===0)return!0;const i=new URL(l),a=window.location;return i.protocol===a.protocol&&i.host===a.host}function kn(l,i,a){a[l]&&a[l].indexOf(i)!==-1||(a[l]=a[l]||[],a[l].push(i))}function Cs(l,i,a){if(a&&a[l]){const d=a[l].indexOf(i);d!==-1&&a[l].splice(d,1)}}class In{constructor(i,a={}){Wt(this,a),this.type=i}}class Ps extends In{constructor(i,a={}){super("error",Wt({error:i},a))}}class Wi{on(i,a){return this._listeners=this._listeners||{},kn(i,a,this._listeners),{unsubscribe:()=>{this.off(i,a)}}}off(i,a){return Cs(i,a,this._listeners),Cs(i,a,this._oneTimeListeners),this}once(i,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},kn(i,a,this._oneTimeListeners),this):new Promise(d=>this.once(i,d))}fire(i,a){typeof i=="string"&&(i=new In(i,a||{}));const d=i.type;if(this.listens(d)){i.target=this;const g=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const w of g)w.call(this,i);const v=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const w of v)Cs(d,w,this._oneTimeListeners),w.call(this,i);const x=this._eventedParent;x&&(Wt(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(i))}else i instanceof Ps&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,a){return this._eventedParent=i,this._eventedParentData=a,this}}var se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Q=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function te(l,i){const a={};for(const d in l)d!=="ref"&&(a[d]=l[d]);return Q.forEach(d=>{d in i&&(a[d]=i[d])}),a}function re(l,i){if(Array.isArray(l)){if(!Array.isArray(i)||l.length!==i.length)return!1;for(let a=0;a<l.length;a++)if(!re(l[a],i[a]))return!1;return!0}if(typeof l=="object"&&l!==null&&i!==null){if(typeof i!="object"||Object.keys(l).length!==Object.keys(i).length)return!1;for(const a in l)if(!re(l[a],i[a]))return!1;return!0}return l===i}function pe(l,i){l.push(i)}function Te(l,i,a){pe(a,{command:"addSource",args:[l,i[l]]})}function ve(l,i,a){pe(i,{command:"removeSource",args:[l]}),a[l]=!0}function Ae(l,i,a,d){ve(l,a,d),Te(l,i,a)}function we(l,i,a){let d;for(d in l[a])if(Object.prototype.hasOwnProperty.call(l[a],d)&&d!=="data"&&!re(l[a][d],i[a][d]))return!1;for(d in i[a])if(Object.prototype.hasOwnProperty.call(i[a],d)&&d!=="data"&&!re(l[a][d],i[a][d]))return!1;return!0}function Ve(l,i,a,d,g,v){l=l||{},i=i||{};for(const x in l)Object.prototype.hasOwnProperty.call(l,x)&&(re(l[x],i[x])||a.push({command:v,args:[d,x,i[x],g]}));for(const x in i)Object.prototype.hasOwnProperty.call(i,x)&&!Object.prototype.hasOwnProperty.call(l,x)&&(re(l[x],i[x])||a.push({command:v,args:[d,x,i[x],g]}))}function Be(l){return l.id}function ze(l,i){return l[i.id]=i,l}class Ee{constructor(i,a,d,g){this.message=(i?`${i}: `:"")+d,g&&(this.identifier=g),a!=null&&a.__line__&&(this.line=a.__line__)}}function ht(l,...i){for(const a of i)for(const d in a)l[d]=a[d];return l}class dt extends Error{constructor(i,a){super(a),this.message=a,this.key=i}}class me{constructor(i,a=[]){this.parent=i,this.bindings={};for(const[d,g]of a)this.bindings[d]=g}concat(i){return new me(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const Ce={kind:"null"},he={kind:"number"},De={kind:"string"},He={kind:"boolean"},lt={kind:"color"},bt={kind:"projectionDefinition"},et={kind:"object"},Ge={kind:"value"},yt={kind:"collator"},Nt={kind:"formatted"},qt={kind:"padding"},Xt={kind:"resolvedImage"},sr={kind:"variableAnchorOffsetCollection"};function ur(l,i){return{kind:"array",itemType:l,N:i}}function Gt(l){if(l.kind==="array"){const i=Gt(l.itemType);return typeof l.N=="number"?`array<${i}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${i}>`}return l.kind}const Fr=[Ce,he,De,He,lt,bt,Nt,et,ur(Ge),qt,Xt,sr];function Xi(l,i){if(i.kind==="error")return null;if(l.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Xi(l.itemType,i.itemType))&&(typeof l.N!="number"||l.N===i.N))return null}else{if(l.kind===i.kind)return null;if(l.kind==="value"){for(const a of Fr)if(!Xi(a,i))return null}}return`Expected ${Gt(l)} but found ${Gt(i)} instead.`}function vo(l,i){return i.some(a=>a.kind===l.kind)}function ti(l,i){return i.some(a=>a==="null"?l===null:a==="array"?Array.isArray(l):a==="object"?l&&!Array.isArray(l)&&typeof l=="object":a===typeof l)}function Hn(l,i){return l.kind==="array"&&i.kind==="array"?l.itemType.kind===i.itemType.kind&&typeof l.N=="number":l.kind===i.kind}const al=.96422,xo=.82521,Ys=4/29,Es=6/29,ya=3*Es*Es,Cr=Es*Es*Es,tn=Math.PI/180,Ho=180/Math.PI;function qo(l){return(l%=360)<0&&(l+=360),l}function rn([l,i,a,d]){let g,v;const x=ll((.2225045*(l=Ri(l))+.7168786*(i=Ri(i))+.0606169*(a=Ri(a)))/1);l===i&&i===a?g=v=x:(g=ll((.4360747*l+.3850649*i+.1430804*a)/al),v=ll((.0139322*l+.0971045*i+.7141733*a)/xo));const w=116*x-16;return[w<0?0:w,500*(g-x),200*(x-v),d]}function Ri(l){return l<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function ll(l){return l>Cr?Math.pow(l,1/3):l/ya+Ys}function Ku([l,i,a,d]){let g=(l+16)/116,v=isNaN(i)?g:g+i/500,x=isNaN(a)?g:g-a/200;return g=1*ap(g),v=al*ap(v),x=xo*ap(x),[_a(3.1338561*v-1.6168667*g-.4906146*x),_a(-.9787684*v+1.9161415*g+.033454*x),_a(.0719453*v-.2289914*g+1.4052427*x),d]}function _a(l){return(l=l<=.00304?12.92*l:1.055*Math.pow(l,1/2.4)-.055)<0?0:l>1?1:l}function ap(l){return l>Es?l*l*l:ya*(l-Ys)}function Yu(l){return parseInt(l.padEnd(2,l),16)/255}function xg(l,i){return va(i?l/100:l,0,1)}function va(l,i,a){return Math.min(Math.max(i,l),a)}function lp(l){return!l.some(Number.isNaN)}const Qs={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ar(l,i,a){return l+a*(i-l)}function Js(l,i,a){return l.map((d,g)=>ar(d,i[g],a))}class lr{constructor(i,a,d,g=1,v=!0){this.r=i,this.g=a,this.b=d,this.a=g,v||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[i,a,d,g]))}static parse(i){if(i instanceof lr)return i;if(typeof i!="string")return;const a=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=Qs[d];if(g){const[x,w,P]=g;return[x/255,w/255,P/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const x=d.length<6?1:2;let w=1;return[Yu(d.slice(w,w+=x)),Yu(d.slice(w,w+=x)),Yu(d.slice(w,w+=x)),Yu(d.slice(w,w+x)||"ff")]}if(d.startsWith("rgb")){const x=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,P,k,D,j,Z,H,W,J,ie,ue,Me]=x,ge=[D||" ",H||" ",ie].join("");if(ge==="  "||ge==="  /"||ge===",,"||ge===",,,"){const G=[k,Z,J].join(""),ne=G==="%%%"?100:G===""?255:0;if(ne){const ye=[va(+P/ne,0,1),va(+j/ne,0,1),va(+W/ne,0,1),ue?xg(+ue,Me):1];if(lp(ye))return ye}}return}}const v=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,w,P,k,D,j,Z,H,W]=v,J=[P||" ",D||" ",Z].join("");if(J==="  "||J==="  /"||J===",,"||J===",,,"){const ie=[+w,va(+k,0,100),va(+j,0,100),H?xg(+H,W):1];if(lp(ie))return function([ue,Me,ge,G]){function ne(ye){const Ne=(ye+ue/30)%12,rt=Me*Math.min(ge,1-ge);return ge-rt*Math.max(-1,Math.min(Ne-3,9-Ne,1))}return ue=qo(ue),Me/=100,ge/=100,[ne(0),ne(8),ne(4),G]}(ie)}}}(i);return a?new lr(...a,!1):void 0}get rgb(){const{r:i,g:a,b:d,a:g}=this,v=g||1/0;return this.overwriteGetter("rgb",[i/v,a/v,d/v,g])}get hcl(){return this.overwriteGetter("hcl",function(i){const[a,d,g,v]=rn(i),x=Math.sqrt(d*d+g*g);return[Math.round(1e4*x)?qo(Math.atan2(g,d)*Ho):NaN,x,a,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",rn(this.rgb))}overwriteGetter(i,a){return Object.defineProperty(this,i,{value:a}),a}toString(){const[i,a,d,g]=this.rgb;return`rgba(${[i,a,d].map(v=>Math.round(255*v)).join(",")},${g})`}static interpolate(i,a,d,g="rgb"){switch(g){case"rgb":{const[v,x,w,P]=Js(i.rgb,a.rgb,d);return new lr(v,x,w,P,!1)}case"hcl":{const[v,x,w,P]=i.hcl,[k,D,j,Z]=a.hcl;let H,W;if(isNaN(v)||isNaN(k))isNaN(v)?isNaN(k)?H=NaN:(H=k,w!==1&&w!==0||(W=D)):(H=v,j!==1&&j!==0||(W=x));else{let ge=k-v;k>v&&ge>180?ge-=360:k<v&&v-k>180&&(ge+=360),H=v+d*ge}const[J,ie,ue,Me]=function([ge,G,ne,ye]){return ge=isNaN(ge)?0:ge*tn,Ku([ne,Math.cos(ge)*G,Math.sin(ge)*G,ye])}([H,W??ar(x,D,d),ar(w,j,d),ar(P,Z,d)]);return new lr(J,ie,ue,Me,!1)}case"lab":{const[v,x,w,P]=Ku(Js(i.lab,a.lab,d));return new lr(v,x,w,P,!1)}}}}lr.black=new lr(0,0,0,1),lr.white=new lr(1,1,1,1),lr.transparent=new lr(0,0,0,0),lr.red=new lr(1,0,0,1);class Qu{constructor(i,a,d){this.sensitivity=i?a?"variant":"case":a?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,a){return this.collator.compare(i,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ju{constructor(i,a,d,g,v){this.text=i,this.image=a,this.scale=d,this.fontStack=g,this.textColor=v}}class vi{constructor(i){this.sections=i}static fromString(i){return new vi([new Ju(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof vi?i:vi.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class nn{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof nn)return i;if(typeof i=="number")return new nn([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(const a of i)if(typeof a!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new nn(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,a,d){return new nn(Js(i.values,a.values,d))}}class Jr{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}const ed=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ci{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof ci)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let a=0;a<i.length;a+=2){const d=i[a],g=i[a+1];if(typeof d!="string"||!ed.has(d)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new ci(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,a,d){const g=i.values,v=a.values;if(g.length!==v.length)throw new Jr(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${a.toString()}`);const x=[];for(let w=0;w<g.length;w+=2){if(g[w]!==v[w])throw new Jr(`Cannot interpolate values containing mismatched anchors. from[${w}]: ${g[w]}, to[${w}]: ${v[w]}`);x.push(g[w]);const[P,k]=g[w+1],[D,j]=v[w+1];x.push([ar(P,D,d),ar(k,j,d)])}return new ci(x)}}class Ai{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new Ai({name:i,available:!1}):null}}class ri{constructor(i,a,d){this.from=i,this.to=a,this.transition=d}static interpolate(i,a,d){return new ri(i,a,d)}static parse(i){return i instanceof ri?i:Array.isArray(i)&&i.length===3&&typeof i[0]=="string"&&typeof i[1]=="string"&&typeof i[2]=="number"?new ri(i[0],i[1],i[2]):typeof i=="object"&&typeof i.from=="string"&&typeof i.to=="string"&&typeof i.transition=="number"?new ri(i.from,i.to,i.transition):typeof i=="string"?new ri(i,i,1):void 0}}function Sc(l,i,a,d){return typeof l=="number"&&l>=0&&l<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof a=="number"&&a>=0&&a<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[l,i,a,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[l,i,a,d]:[l,i,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function cl(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof ri||l instanceof lr||l instanceof Qu||l instanceof vi||l instanceof nn||l instanceof ci||l instanceof Ai)return!0;if(Array.isArray(l)){for(const i of l)if(!cl(i))return!1;return!0}if(typeof l=="object"){for(const i in l)if(!cl(l[i]))return!1;return!0}return!1}function gn(l){if(l===null)return Ce;if(typeof l=="string")return De;if(typeof l=="boolean")return He;if(typeof l=="number")return he;if(l instanceof lr)return lt;if(l instanceof ri)return bt;if(l instanceof Qu)return yt;if(l instanceof vi)return Nt;if(l instanceof nn)return qt;if(l instanceof ci)return sr;if(l instanceof Ai)return Xt;if(Array.isArray(l)){const i=l.length;let a;for(const d of l){const g=gn(d);if(a){if(a===g)continue;a=Ge;break}a=g}return ur(a||Ge,i)}return et}function Ms(l){const i=typeof l;return l===null?"":i==="string"||i==="number"||i==="boolean"?String(l):l instanceof lr||l instanceof ri||l instanceof vi||l instanceof nn||l instanceof ci||l instanceof Ai?l.toString():JSON.stringify(l)}class xa{constructor(i,a){this.type=i,this.value=a}static parse(i,a){if(i.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!cl(i[1]))return a.error("invalid value");const d=i[1];let g=gn(d);const v=a.expectedType;return g.kind!=="array"||g.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(g=v),new xa(g,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const ba={string:De,number:he,boolean:He,object:et};class ui{constructor(i,a){this.type=i,this.args=a}static parse(i,a){if(i.length<2)return a.error("Expected at least one argument.");let d,g=1;const v=i[0];if(v==="array"){let w,P;if(i.length>2){const k=i[1];if(typeof k!="string"||!(k in ba)||k==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);w=ba[k],g++}else w=Ge;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return a.error('The length argument to "array" must be a positive integer literal',2);P=i[2],g++}d=ur(w,P)}else{if(!ba[v])throw new Error(`Types doesn't contain name = ${v}`);d=ba[v]}const x=[];for(;g<i.length;g++){const w=a.parse(i[g],g,Ge);if(!w)return null;x.push(w)}return new ui(d,x)}evaluate(i){for(let a=0;a<this.args.length;a++){const d=this.args[a].evaluate(i);if(!Xi(this.type,gn(d)))return d;if(a===this.args.length-1)throw new Jr(`Expected value to be of type ${Gt(this.type)}, but found ${Gt(gn(d))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const cp={"to-boolean":He,"to-color":lt,"to-number":he,"to-string":De};class bo{constructor(i,a){this.type=i,this.args=a}static parse(i,a){if(i.length<2)return a.error("Expected at least one argument.");const d=i[0];if(!cp[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&i.length!==2)return a.error("Expected one argument.");const g=cp[d],v=[];for(let x=1;x<i.length;x++){const w=a.parse(i[x],x,Ge);if(!w)return null;v.push(w)}return new bo(g,v)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let a,d;for(const g of this.args){if(a=g.evaluate(i),d=null,a instanceof lr)return a;if(typeof a=="string"){const v=i.parseColor(a);if(v)return v}else if(Array.isArray(a)&&(d=a.length<3||a.length>4?`Invalid rgba value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Sc(a[0],a[1],a[2],a[3]),!d))return new lr(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new Jr(d||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"padding":{let a;for(const d of this.args){a=d.evaluate(i);const g=nn.parse(a);if(g)return g}throw new Jr(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"variableAnchorOffsetCollection":{let a;for(const d of this.args){a=d.evaluate(i);const g=ci.parse(a);if(g)return g}throw new Jr(`Could not parse variableAnchorOffsetCollection from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"number":{let a=null;for(const d of this.args){if(a=d.evaluate(i),a===null)return 0;const g=Number(a);if(!isNaN(g))return g}throw new Jr(`Could not convert ${JSON.stringify(a)} to number.`)}case"formatted":return vi.fromString(Ms(this.args[0].evaluate(i)));case"resolvedImage":return Ai.fromString(Ms(this.args[0].evaluate(i)));case"projectionDefinition":return this.args[0].evaluate(i);default:return Ms(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const bg=["Unknown","Point","LineString","Polygon"];class Tc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?bg[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let a=this._parseColorCache[i];return a||(a=this._parseColorCache[i]=lr.parse(i)),a}}class Br{constructor(i,a,d=[],g,v=new me,x=[]){this.registry=i,this.path=d,this.key=d.map(w=>`[${w}]`).join(""),this.scope=v,this.errors=x,this.expectedType=g,this._isConstant=a}parse(i,a,d,g,v={}){return a?this.concat(a,d,g)._parse(i,v):this._parse(i,v)}_parse(i,a){function d(g,v,x){return x==="assert"?new ui(v,[g]):x==="coerce"?new bo(v,[g]):g}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=i[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[g];if(v){let x=v.parse(i,this);if(!x)return null;if(this.expectedType){const w=this.expectedType,P=x.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||P.kind!=="value")if(w.kind!=="projectionDefinition"||P.kind!=="string"&&P.kind!=="array")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string")if(w.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array")if(w.kind!=="variableAnchorOffsetCollection"||P.kind!=="value"&&P.kind!=="array"){if(this.checkSubtype(w,P))return null}else x=d(x,w,a.typeAnnotation||"coerce");else x=d(x,w,a.typeAnnotation||"coerce");else x=d(x,w,a.typeAnnotation||"coerce");else x=d(x,w,a.typeAnnotation||"coerce");else x=d(x,w,a.typeAnnotation||"assert")}if(!(x instanceof xa)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const w=new Tc;try{x=new xa(x.type,x.evaluate(w))}catch(P){return this.error(P.message),null}}return x}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,a,d){const g=typeof i=="number"?this.path.concat(i):this.path,v=d?this.scope.concat(d):this.scope;return new Br(this.registry,this._isConstant,g,a||null,v,this.errors)}error(i,...a){const d=`${this.key}${a.map(g=>`[${g}]`).join("")}`;this.errors.push(new dt(d,i))}checkSubtype(i,a){const d=Xi(i,a);return d&&this.error(d),d}}class ul{constructor(i,a){this.type=a.type,this.bindings=[].concat(i),this.result=a}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const a of this.bindings)i(a[1]);i(this.result)}static parse(i,a){if(i.length<4)return a.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const d=[];for(let v=1;v<i.length-1;v+=2){const x=i[v];if(typeof x!="string")return a.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return a.error("Variable names must contain only alphanumeric characters or '_'.",v);const w=a.parse(i[v+1],v+1);if(!w)return null;d.push([x,w])}const g=a.parse(i[i.length-1],i.length-1,a.expectedType,d);return g?new ul(d,g):null}outputDefined(){return this.result.outputDefined()}}class yr{constructor(i,a){this.type=a.type,this.name=i,this.boundExpression=a}static parse(i,a){if(i.length!==2||typeof i[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const d=i[1];return a.scope.has(d)?new yr(d,a.scope.get(d)):a.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class nr{constructor(i,a,d){this.type=i,this.index=a,this.input=d}static parse(i,a){if(i.length!==3)return a.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const d=a.parse(i[1],1,he),g=a.parse(i[2],2,ur(a.expectedType||Ge));return d&&g?new nr(g.type.itemType,d,g):null}evaluate(i){const a=this.index.evaluate(i),d=this.input.evaluate(i);if(a<0)throw new Jr(`Array index out of bounds: ${a} < 0.`);if(a>=d.length)throw new Jr(`Array index out of bounds: ${a} > ${d.length-1}.`);if(a!==Math.floor(a))throw new Jr(`Array index must be an integer, but found ${a} instead.`);return d[a]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class Cc{constructor(i,a){this.type=He,this.needle=i,this.haystack=a}static parse(i,a){if(i.length!==3)return a.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const d=a.parse(i[1],1,Ge),g=a.parse(i[2],2,Ge);return d&&g?vo(d.type,[He,De,he,Ce,Ge])?new Cc(d,g):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Gt(d.type)} instead`):null}evaluate(i){const a=this.needle.evaluate(i),d=this.haystack.evaluate(i);if(!d)return!1;if(!ti(a,["boolean","string","number","null"]))throw new Jr(`Expected first argument to be of type boolean, string, number or null, but found ${Gt(gn(a))} instead.`);if(!ti(d,["string","array"]))throw new Jr(`Expected second argument to be of type array or string, but found ${Gt(gn(d))} instead.`);return d.indexOf(a)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class _r{constructor(i,a,d){this.type=he,this.needle=i,this.haystack=a,this.fromIndex=d}static parse(i,a){if(i.length<=2||i.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const d=a.parse(i[1],1,Ge),g=a.parse(i[2],2,Ge);if(!d||!g)return null;if(!vo(d.type,[He,De,he,Ce,Ge]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Gt(d.type)} instead`);if(i.length===4){const v=a.parse(i[3],3,he);return v?new _r(d,g,v):null}return new _r(d,g)}evaluate(i){const a=this.needle.evaluate(i),d=this.haystack.evaluate(i);if(!ti(a,["boolean","string","number","null"]))throw new Jr(`Expected first argument to be of type boolean, string, number or null, but found ${Gt(gn(a))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(i)),ti(d,["string"])){const v=d.indexOf(a,g);return v===-1?-1:[...d.slice(0,v)].length}if(ti(d,["array"]))return d.indexOf(a,g);throw new Jr(`Expected second argument to be of type array or string, but found ${Gt(gn(d))} instead.`)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class Pc{constructor(i,a,d,g,v,x){this.inputType=i,this.type=a,this.input=d,this.cases=g,this.outputs=v,this.otherwise=x}static parse(i,a){if(i.length<5)return a.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return a.error("Expected an even number of arguments.");let d,g;a.expectedType&&a.expectedType.kind!=="value"&&(g=a.expectedType);const v={},x=[];for(let k=2;k<i.length-1;k+=2){let D=i[k];const j=i[k+1];Array.isArray(D)||(D=[D]);const Z=a.concat(k);if(D.length===0)return Z.error("Expected at least one branch label.");for(const W of D){if(typeof W!="number"&&typeof W!="string")return Z.error("Branch labels must be numbers or strings.");if(typeof W=="number"&&Math.abs(W)>Number.MAX_SAFE_INTEGER)return Z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof W=="number"&&Math.floor(W)!==W)return Z.error("Numeric branch labels must be integer values.");if(d){if(Z.checkSubtype(d,gn(W)))return null}else d=gn(W);if(v[String(W)]!==void 0)return Z.error("Branch labels must be unique.");v[String(W)]=x.length}const H=a.parse(j,k,g);if(!H)return null;g=g||H.type,x.push(H)}const w=a.parse(i[1],1,Ge);if(!w)return null;const P=a.parse(i[i.length-1],i.length-1,g);return P?w.type.kind!=="value"&&a.concat(1).checkSubtype(d,w.type)?null:new Pc(d,g,w,v,x,P):null}evaluate(i){const a=this.input.evaluate(i);return(gn(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class ks{constructor(i,a,d){this.type=i,this.branches=a,this.otherwise=d}static parse(i,a){if(i.length<4)return a.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return a.error("Expected an odd number of arguments.");let d;a.expectedType&&a.expectedType.kind!=="value"&&(d=a.expectedType);const g=[];for(let x=1;x<i.length-1;x+=2){const w=a.parse(i[x],x,He);if(!w)return null;const P=a.parse(i[x+1],x+1,d);if(!P)return null;g.push([w,P]),d=d||P.type}const v=a.parse(i[i.length-1],i.length-1,d);if(!v)return null;if(!d)throw new Error("Can't infer output type");return new ks(d,g,v)}evaluate(i){for(const[a,d]of this.branches)if(a.evaluate(i))return d.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[a,d]of this.branches)i(a),i(d);i(this.otherwise)}outputDefined(){return this.branches.every(([i,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class dl{constructor(i,a,d,g){this.type=i,this.input=a,this.beginIndex=d,this.endIndex=g}static parse(i,a){if(i.length<=2||i.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const d=a.parse(i[1],1,Ge),g=a.parse(i[2],2,he);if(!d||!g)return null;if(!vo(d.type,[ur(Ge),De,Ge]))return a.error(`Expected first argument to be of type array or string, but found ${Gt(d.type)} instead`);if(i.length===4){const v=a.parse(i[3],3,he);return v?new dl(d.type,d,g,v):null}return new dl(d.type,d,g)}evaluate(i){const a=this.input.evaluate(i),d=this.beginIndex.evaluate(i);let g;if(this.endIndex&&(g=this.endIndex.evaluate(i)),ti(a,["string"]))return[...a].slice(d,g).join("");if(ti(a,["array"]))return a.slice(d,g);throw new Jr(`Expected first argument to be of type array or string, but found ${Gt(gn(a))} instead.`)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function Ec(l,i){const a=l.length-1;let d,g,v=0,x=a,w=0;for(;v<=x;)if(w=Math.floor((v+x)/2),d=l[w],g=l[w+1],d<=i){if(w===a||i<g)return w;v=w+1}else{if(!(d>i))throw new Jr("Input is not a number.");x=w-1}return 0}class hl{constructor(i,a,d){this.type=i,this.input=a,this.labels=[],this.outputs=[];for(const[g,v]of d)this.labels.push(g),this.outputs.push(v)}static parse(i,a){if(i.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return a.error("Expected an even number of arguments.");const d=a.parse(i[1],1,he);if(!d)return null;const g=[];let v=null;a.expectedType&&a.expectedType.kind!=="value"&&(v=a.expectedType);for(let x=1;x<i.length;x+=2){const w=x===1?-1/0:i[x],P=i[x+1],k=x,D=x+1;if(typeof w!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(g.length&&g[g.length-1][0]>=w)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);const j=a.parse(P,D,v);if(!j)return null;v=v||j.type,g.push([w,j])}return new hl(v,d,g)}evaluate(i){const a=this.labels,d=this.outputs;if(a.length===1)return d[0].evaluate(i);const g=this.input.evaluate(i);if(g<=a[0])return d[0].evaluate(i);const v=a.length;return g>=a[v-1]?d[v-1].evaluate(i):d[Ec(a,g)].evaluate(i)}eachChild(i){i(this.input);for(const a of this.outputs)i(a)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function up(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var td,wg,Sg=function(){if(wg)return td;function l(i,a,d,g){this.cx=3*i,this.bx=3*(d-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(g-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=a,this.p2x=d,this.p2y=g}return wg=1,td=l,l.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,a){if(a===void 0&&(a=1e-6),i<0)return 0;if(i>1)return 1;for(var d=i,g=0;g<8;g++){var v=this.sampleCurveX(d)-i;if(Math.abs(v)<a)return d;var x=this.sampleCurveDerivativeX(d);if(Math.abs(x)<1e-6)break;d-=v/x}var w=0,P=1;for(d=i,g=0;g<20&&(v=this.sampleCurveX(d),!(Math.abs(v-i)<a));g++)i>v?w=d:P=d,d=.5*(P-w)+w;return d},solve:function(i,a){return this.sampleCurveY(this.solveCurveX(i,a))}},td}(),Tg=up(Sg);class ni{constructor(i,a,d,g,v){this.type=i,this.operator=a,this.interpolation=d,this.input=g,this.labels=[],this.outputs=[];for(const[x,w]of v)this.labels.push(x),this.outputs.push(w)}static interpolationFactor(i,a,d,g){let v=0;if(i.name==="exponential")v=qn(a,i.base,d,g);else if(i.name==="linear")v=qn(a,1,d,g);else if(i.name==="cubic-bezier"){const x=i.controlPoints;v=new Tg(x[0],x[1],x[2],x[3]).solve(qn(a,1,d,g))}return v}static parse(i,a){let[d,g,v,...x]=i;if(!Array.isArray(g)||g.length===0)return a.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const k=g[1];if(typeof k!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:k}}else{if(g[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const k=g.slice(1);if(k.length!==4||k.some(D=>typeof D!="number"||D<0||D>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:k}}}if(i.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(v=a.parse(v,2,he),!v)return null;const w=[];let P=null;d==="interpolate-hcl"||d==="interpolate-lab"?P=lt:a.expectedType&&a.expectedType.kind!=="value"&&(P=a.expectedType);for(let k=0;k<x.length;k+=2){const D=x[k],j=x[k+1],Z=k+3,H=k+4;if(typeof D!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(w.length&&w[w.length-1][0]>=D)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Z);const W=a.parse(j,H,P);if(!W)return null;P=P||W.type,w.push([D,W])}return Hn(P,he)||Hn(P,bt)||Hn(P,lt)||Hn(P,qt)||Hn(P,sr)||Hn(P,ur(he))?new ni(P,d,g,v,w):a.error(`Type ${Gt(P)} is not interpolatable.`)}evaluate(i){const a=this.labels,d=this.outputs;if(a.length===1)return d[0].evaluate(i);const g=this.input.evaluate(i);if(g<=a[0])return d[0].evaluate(i);const v=a.length;if(g>=a[v-1])return d[v-1].evaluate(i);const x=Ec(a,g),w=ni.interpolationFactor(this.interpolation,g,a[x],a[x+1]),P=d[x].evaluate(i),k=d[x+1].evaluate(i);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ar(P,k,w);case"color":return lr.interpolate(P,k,w);case"padding":return nn.interpolate(P,k,w);case"variableAnchorOffsetCollection":return ci.interpolate(P,k,w);case"array":return Js(P,k,w);case"projectionDefinition":return ri.interpolate(P,k,w)}case"interpolate-hcl":return lr.interpolate(P,k,w,"hcl");case"interpolate-lab":return lr.interpolate(P,k,w,"lab")}}eachChild(i){i(this.input);for(const a of this.outputs)i(a)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function qn(l,i,a,d){const g=d-a,v=l-a;return g===0?0:i===1?v/g:(Math.pow(i,v)-1)/(Math.pow(i,g)-1)}const Ki={color:lr.interpolate,number:ar,padding:nn.interpolate,variableAnchorOffsetCollection:ci.interpolate,array:Js};class Mc{constructor(i,a){this.type=i,this.args=a}static parse(i,a){if(i.length<2)return a.error("Expected at least one argument.");let d=null;const g=a.expectedType;g&&g.kind!=="value"&&(d=g);const v=[];for(const w of i.slice(1)){const P=a.parse(w,1+v.length,d,void 0,{typeAnnotation:"omit"});if(!P)return null;d=d||P.type,v.push(P)}if(!d)throw new Error("No output type");const x=g&&v.some(w=>Xi(g,w.type));return new Mc(x?Ge:d,v)}evaluate(i){let a,d=null,g=0;for(const v of this.args)if(g++,d=v.evaluate(i),d&&d instanceof Ai&&!d.available&&(a||(a=d.name),d=null,g===this.args.length&&(d=a)),d!==null)break;return d}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}function kc(l,i){return l==="=="||l==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function zn(l,i,a,d){return d.compare(i,a)===0}function wa(l,i,a){const d=l!=="=="&&l!=="!=";return class Nj{constructor(v,x,w){this.type=He,this.lhs=v,this.rhs=x,this.collator=w,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const w=v[0];let P=x.parse(v[1],1,Ge);if(!P)return null;if(!kc(w,P.type))return x.concat(1).error(`"${w}" comparisons are not supported for type '${Gt(P.type)}'.`);let k=x.parse(v[2],2,Ge);if(!k)return null;if(!kc(w,k.type))return x.concat(2).error(`"${w}" comparisons are not supported for type '${Gt(k.type)}'.`);if(P.type.kind!==k.type.kind&&P.type.kind!=="value"&&k.type.kind!=="value")return x.error(`Cannot compare types '${Gt(P.type)}' and '${Gt(k.type)}'.`);d&&(P.type.kind==="value"&&k.type.kind!=="value"?P=new ui(k.type,[P]):P.type.kind!=="value"&&k.type.kind==="value"&&(k=new ui(P.type,[k])));let D=null;if(v.length===4){if(P.type.kind!=="string"&&k.type.kind!=="string"&&P.type.kind!=="value"&&k.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(D=x.parse(v[3],3,yt),!D)return null}return new Nj(P,k,D)}evaluate(v){const x=this.lhs.evaluate(v),w=this.rhs.evaluate(v);if(d&&this.hasUntypedArgument){const P=gn(x),k=gn(w);if(P.kind!==k.kind||P.kind!=="string"&&P.kind!=="number")throw new Jr(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${P.kind}, ${k.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const P=gn(x),k=gn(w);if(P.kind!=="string"||k.kind!=="string")return i(v,x,w)}return this.collator?a(v,x,w,this.collator.evaluate(v)):i(v,x,w)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const dp=wa("==",function(l,i,a){return i===a},zn),Cg=wa("!=",function(l,i,a){return i!==a},function(l,i,a,d){return!zn(0,i,a,d)}),M0=wa("<",function(l,i,a){return i<a},function(l,i,a,d){return d.compare(i,a)<0}),rd=wa(">",function(l,i,a){return i>a},function(l,i,a,d){return d.compare(i,a)>0}),hp=wa("<=",function(l,i,a){return i<=a},function(l,i,a,d){return d.compare(i,a)<=0}),k0=wa(">=",function(l,i,a){return i>=a},function(l,i,a,d){return d.compare(i,a)>=0});class Sa{constructor(i,a,d){this.type=yt,this.locale=d,this.caseSensitive=i,this.diacriticSensitive=a}static parse(i,a){if(i.length!==2)return a.error("Expected one argument.");const d=i[1];if(typeof d!="object"||Array.isArray(d))return a.error("Collator options argument must be an object.");const g=a.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,He);if(!g)return null;const v=a.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,He);if(!v)return null;let x=null;return d.locale&&(x=a.parse(d.locale,1,De),!x)?null:new Sa(g,v,x)}evaluate(i){return new Qu(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}class pl{constructor(i,a,d,g,v){this.type=De,this.number=i,this.locale=a,this.currency=d,this.minFractionDigits=g,this.maxFractionDigits=v}static parse(i,a){if(i.length!==3)return a.error("Expected two arguments.");const d=a.parse(i[1],1,he);if(!d)return null;const g=i[2];if(typeof g!="object"||Array.isArray(g))return a.error("NumberFormat options argument must be an object.");let v=null;if(g.locale&&(v=a.parse(g.locale,1,De),!v))return null;let x=null;if(g.currency&&(x=a.parse(g.currency,1,De),!x))return null;let w=null;if(g["min-fraction-digits"]&&(w=a.parse(g["min-fraction-digits"],1,he),!w))return null;let P=null;return g["max-fraction-digits"]&&(P=a.parse(g["max-fraction-digits"],1,he),!P)?null:new pl(d,v,x,w,P)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class Di{constructor(i){this.type=Nt,this.sections=i}static parse(i,a){if(i.length<2)return a.error("Expected at least one argument.");const d=i[1];if(!Array.isArray(d)&&typeof d=="object")return a.error("First argument must be an image or text section.");const g=[];let v=!1;for(let x=1;x<=i.length-1;++x){const w=i[x];if(v&&typeof w=="object"&&!Array.isArray(w)){v=!1;let P=null;if(w["font-scale"]&&(P=a.parse(w["font-scale"],1,he),!P))return null;let k=null;if(w["text-font"]&&(k=a.parse(w["text-font"],1,ur(De)),!k))return null;let D=null;if(w["text-color"]&&(D=a.parse(w["text-color"],1,lt),!D))return null;const j=g[g.length-1];j.scale=P,j.font=k,j.textColor=D}else{const P=a.parse(i[x],1,Ge);if(!P)return null;const k=P.type.kind;if(k!=="string"&&k!=="value"&&k!=="null"&&k!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,g.push({content:P,scale:null,font:null,textColor:null})}}return new Di(g)}evaluate(i){return new vi(this.sections.map(a=>{const d=a.content.evaluate(i);return gn(d)===Xt?new Ju("",d,null,null,null):new Ju(Ms(d),null,a.scale?a.scale.evaluate(i):null,a.font?a.font.evaluate(i).join(","):null,a.textColor?a.textColor.evaluate(i):null)}))}eachChild(i){for(const a of this.sections)i(a.content),a.scale&&i(a.scale),a.font&&i(a.font),a.textColor&&i(a.textColor)}outputDefined(){return!1}}class nd{constructor(i){this.type=Xt,this.input=i}static parse(i,a){if(i.length!==2)return a.error("Expected two arguments.");const d=a.parse(i[1],1,De);return d?new nd(d):a.error("No image name provided.")}evaluate(i){const a=this.input.evaluate(i),d=Ai.fromString(a);return d&&i.availableImages&&(d.available=i.availableImages.indexOf(a)>-1),d}eachChild(i){i(this.input)}outputDefined(){return!1}}class fl{constructor(i){this.type=he,this.input=i}static parse(i,a){if(i.length!==2)return a.error(`Expected 1 argument, but found ${i.length-1} instead.`);const d=a.parse(i[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${Gt(d.type)} instead.`):new fl(d):null}evaluate(i){const a=this.input.evaluate(i);if(typeof a=="string")return[...a].length;if(Array.isArray(a))return a.length;throw new Jr(`Expected value to be of type string or array, but found ${Gt(gn(a))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}const eo=8192;function pp(l,i){const a=(180+l[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,g=Math.pow(2,i.z);return[Math.round(a*g*eo),Math.round(d*g*eo)]}function fp(l,i){const a=Math.pow(2,i.z);return[(g=(l[0]/eo+i.x)/a,360*g-180),(d=(l[1]/eo+i.y)/a,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,g}function Ic(l,i){l[0]=Math.min(l[0],i[0]),l[1]=Math.min(l[1],i[1]),l[2]=Math.max(l[2],i[0]),l[3]=Math.max(l[3],i[1])}function Rc(l,i){return!(l[0]<=i[0]||l[2]>=i[2]||l[1]<=i[1]||l[3]>=i[3])}function I0(l,i,a){const d=l[0]-i[0],g=l[1]-i[1],v=l[0]-a[0],x=l[1]-a[1];return d*x-v*g==0&&d*v<=0&&g*x<=0}function Ta(l,i,a,d){return(g=[d[0]-a[0],d[1]-a[1]])[0]*(v=[i[0]-l[0],i[1]-l[1]])[1]-g[1]*v[0]!=0&&!(!kg(l,i,a,d)||!kg(a,d,l,i));var g,v}function R0(l,i,a){for(const d of a)for(let g=0;g<d.length-1;++g)if(Ta(l,i,d[g],d[g+1]))return!0;return!1}function Ca(l,i,a=!1){let d=!1;for(const w of i)for(let P=0;P<w.length-1;P++){if(I0(l,w[P],w[P+1]))return a;(v=w[P])[1]>(g=l)[1]!=(x=w[P+1])[1]>g[1]&&g[0]<(x[0]-v[0])*(g[1]-v[1])/(x[1]-v[1])+v[0]&&(d=!d)}var g,v,x;return d}function Pg(l,i){for(const a of i)if(Ca(l,a))return!0;return!1}function Eg(l,i){for(const a of l)if(!Ca(a,i))return!1;for(let a=0;a<l.length-1;++a)if(R0(l[a],l[a+1],i))return!1;return!0}function Mg(l,i){for(const a of i)if(Eg(l,a))return!0;return!1}function kg(l,i,a,d){const g=d[0]-a[0],v=d[1]-a[1],x=(l[0]-a[0])*v-g*(l[1]-a[1]),w=(i[0]-a[0])*v-g*(i[1]-a[1]);return x>0&&w<0||x<0&&w>0}function mp(l,i,a){const d=[];for(let g=0;g<l.length;g++){const v=[];for(let x=0;x<l[g].length;x++){const w=pp(l[g][x],a);Ic(i,w),v.push(w)}d.push(v)}return d}function Ig(l,i,a){const d=[];for(let g=0;g<l.length;g++){const v=mp(l[g],i,a);d.push(v)}return d}function Rg(l,i,a,d){if(l[0]<a[0]||l[0]>a[2]){const g=.5*d;let v=l[0]-a[0]>g?-d:a[0]-l[0]>g?d:0;v===0&&(v=l[0]-a[2]>g?-d:a[2]-l[0]>g?d:0),l[0]+=v}Ic(i,l)}function Ag(l,i,a,d){const g=Math.pow(2,d.z)*eo,v=[d.x*eo,d.y*eo],x=[];for(const w of l)for(const P of w){const k=[P.x+v[0],P.y+v[1]];Rg(k,i,a,g),x.push(k)}return x}function gp(l,i,a,d){const g=Math.pow(2,d.z)*eo,v=[d.x*eo,d.y*eo],x=[];for(const P of l){const k=[];for(const D of P){const j=[D.x+v[0],D.y+v[1]];Ic(i,j),k.push(j)}x.push(k)}if(i[2]-i[0]<=g/2){(w=i)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const P of x)for(const k of P)Rg(k,i,a,g)}var w;return x}class Wo{constructor(i,a){this.type=He,this.geojson=i,this.geometries=a}static parse(i,a){if(i.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(cl(i[1])){const d=i[1];if(d.type==="FeatureCollection"){const g=[];for(const v of d.features){const{type:x,coordinates:w}=v.geometry;x==="Polygon"&&g.push(w),x==="MultiPolygon"&&g.push(...w)}if(g.length)return new Wo(d,{type:"MultiPolygon",coordinates:g})}else if(d.type==="Feature"){const g=d.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new Wo(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new Wo(d,d)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(a,d){const g=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(d.type==="Polygon"){const w=mp(d.coordinates,v,x),P=Ag(a.geometry(),g,v,x);if(!Rc(g,v))return!1;for(const k of P)if(!Ca(k,w))return!1}if(d.type==="MultiPolygon"){const w=Ig(d.coordinates,v,x),P=Ag(a.geometry(),g,v,x);if(!Rc(g,v))return!1;for(const k of P)if(!Pg(k,w))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(a,d){const g=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(d.type==="Polygon"){const w=mp(d.coordinates,v,x),P=gp(a.geometry(),g,v,x);if(!Rc(g,v))return!1;for(const k of P)if(!Eg(k,w))return!1}if(d.type==="MultiPolygon"){const w=Ig(d.coordinates,v,x),P=gp(a.geometry(),g,v,x);if(!Rc(g,v))return!1;for(const k of P)if(!Mg(k,w))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let yp=class{constructor(l=[],i=(a,d)=>a<d?-1:a>d?1:0){if(this.data=l,this.length=this.data.length,this.compare=i,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:i,compare:a}=this,d=i[l];for(;l>0;){const g=l-1>>1,v=i[g];if(a(d,v)>=0)break;i[l]=v,l=g}i[l]=d}_down(l){const{data:i,compare:a}=this,d=this.length>>1,g=i[l];for(;l<d;){let v=1+(l<<1);const x=v+1;if(x<this.length&&a(i[x],i[v])<0&&(v=x),a(i[v],g)>=0)break;i[l]=i[v],l=v}i[l]=g}};function Dg(l,i,a=0,d=l.length-1,g=A0){for(;d>a;){if(d-a>600){const P=d-a+1,k=i-a+1,D=Math.log(P),j=.5*Math.exp(2*D/3),Z=.5*Math.sqrt(D*j*(P-j)/P)*(k-P/2<0?-1:1);Dg(l,i,Math.max(a,Math.floor(i-k*j/P+Z)),Math.min(d,Math.floor(i+(P-k)*j/P+Z)),g)}const v=l[i];let x=a,w=d;for(Ac(l,a,i),g(l[d],v)>0&&Ac(l,a,d);x<w;){for(Ac(l,x,w),x++,w--;g(l[x],v)<0;)x++;for(;g(l[w],v)>0;)w--}g(l[a],v)===0?Ac(l,a,w):(w++,Ac(l,w,d)),w<=i&&(a=w+1),i<=w&&(d=w-1)}}function Ac(l,i,a){const d=l[i];l[i]=l[a],l[a]=d}function A0(l,i){return l<i?-1:l>i?1:0}function ml(l,i){if(l.length<=1)return[l];const a=[];let d,g;for(const v of l){const x=z0(v);x!==0&&(v.area=Math.abs(x),g===void 0&&(g=x<0),g===x<0?(d&&a.push(d),d=[v]):d.push(v))}if(d&&a.push(d),i>1)for(let v=0;v<a.length;v++)a[v].length<=i||(Dg(a[v],i,1,a[v].length-1,D0),a[v]=a[v].slice(0,i));return a}function D0(l,i){return i.area-l.area}function z0(l){let i=0;for(let a,d,g=0,v=l.length,x=v-1;g<v;x=g++)a=l[g],d=l[x],i+=(d.x-a.x)*(a.y+d.y);return i}const zg=1/298.257223563,_p=zg*(2-zg),vp=Math.PI/180;class xp{constructor(i){const a=6378.137*vp*1e3,d=Math.cos(i*vp),g=1/(1-_p*(1-d*d)),v=Math.sqrt(g);this.kx=a*v*d,this.ky=a*v*g*(1-_p)}distance(i,a){const d=this.wrap(i[0]-a[0])*this.kx,g=(i[1]-a[1])*this.ky;return Math.sqrt(d*d+g*g)}pointOnLine(i,a){let d,g,v,x,w=1/0;for(let P=0;P<i.length-1;P++){let k=i[P][0],D=i[P][1],j=this.wrap(i[P+1][0]-k)*this.kx,Z=(i[P+1][1]-D)*this.ky,H=0;j===0&&Z===0||(H=(this.wrap(a[0]-k)*this.kx*j+(a[1]-D)*this.ky*Z)/(j*j+Z*Z),H>1?(k=i[P+1][0],D=i[P+1][1]):H>0&&(k+=j/this.kx*H,D+=Z/this.ky*H)),j=this.wrap(a[0]-k)*this.kx,Z=(a[1]-D)*this.ky;const W=j*j+Z*Z;W<w&&(w=W,d=k,g=D,v=P,x=H)}return{point:[d,g],index:v,t:Math.max(0,Math.min(1,x))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}}function jg(l,i){return i[0]-l[0]}function Dc(l){return l[1]-l[0]+1}function to(l,i){return l[1]>=l[0]&&l[1]<i}function bp(l,i){if(l[0]>l[1])return[null,null];const a=Dc(l);if(i){if(a===2)return[l,null];const g=Math.floor(a/2);return[[l[0],l[0]+g],[l[0]+g,l[1]]]}if(a===1)return[l,null];const d=Math.floor(a/2)-1;return[[l[0],l[0]+d],[l[0]+d+1,l[1]]]}function wp(l,i){if(!to(i,l.length))return[1/0,1/0,-1/0,-1/0];const a=[1/0,1/0,-1/0,-1/0];for(let d=i[0];d<=i[1];++d)Ic(a,l[d]);return a}function Sp(l){const i=[1/0,1/0,-1/0,-1/0];for(const a of l)for(const d of a)Ic(i,d);return i}function Tp(l){return l[0]!==-1/0&&l[1]!==-1/0&&l[2]!==1/0&&l[3]!==1/0}function Cp(l,i,a){if(!Tp(l)||!Tp(i))return NaN;let d=0,g=0;return l[2]<i[0]&&(d=i[0]-l[2]),l[0]>i[2]&&(d=l[0]-i[2]),l[1]>i[3]&&(g=l[1]-i[3]),l[3]<i[1]&&(g=i[1]-l[3]),a.distance([0,0],[d,g])}function Pa(l,i,a){const d=a.pointOnLine(i,l);return a.distance(l,d.point)}function Pp(l,i,a,d,g){const v=Math.min(Pa(l,[a,d],g),Pa(i,[a,d],g)),x=Math.min(Pa(a,[l,i],g),Pa(d,[l,i],g));return Math.min(v,x)}function j0(l,i,a,d,g){if(!to(i,l.length)||!to(d,a.length))return 1/0;let v=1/0;for(let x=i[0];x<i[1];++x){const w=l[x],P=l[x+1];for(let k=d[0];k<d[1];++k){const D=a[k],j=a[k+1];if(Ta(w,P,D,j))return 0;v=Math.min(v,Pp(w,P,D,j,g))}}return v}function Ir(l,i,a,d,g){if(!to(i,l.length)||!to(d,a.length))return NaN;let v=1/0;for(let x=i[0];x<=i[1];++x)for(let w=d[0];w<=d[1];++w)if(v=Math.min(v,g.distance(l[x],a[w])),v===0)return v;return v}function L0(l,i,a){if(Ca(l,i,!0))return 0;let d=1/0;for(const g of i){const v=g[0],x=g[g.length-1];if(v!==x&&(d=Math.min(d,Pa(l,[x,v],a)),d===0))return d;const w=a.pointOnLine(g,l);if(d=Math.min(d,a.distance(l,w.point)),d===0)return d}return d}function N0(l,i,a,d){if(!to(i,l.length))return NaN;for(let v=i[0];v<=i[1];++v)if(Ca(l[v],a,!0))return 0;let g=1/0;for(let v=i[0];v<i[1];++v){const x=l[v],w=l[v+1];for(const P of a)for(let k=0,D=P.length,j=D-1;k<D;j=k++){const Z=P[j],H=P[k];if(Ta(x,w,Z,H))return 0;g=Math.min(g,Pp(x,w,Z,H,d))}}return g}function Lg(l,i){for(const a of l)for(const d of a)if(Ca(d,i,!0))return!0;return!1}function O0(l,i,a,d=1/0){const g=Sp(l),v=Sp(i);if(d!==1/0&&Cp(g,v,a)>=d)return d;if(Rc(g,v)){if(Lg(l,i))return 0}else if(Lg(i,l))return 0;let x=1/0;for(const w of l)for(let P=0,k=w.length,D=k-1;P<k;D=P++){const j=w[D],Z=w[P];for(const H of i)for(let W=0,J=H.length,ie=J-1;W<J;ie=W++){const ue=H[ie],Me=H[W];if(Ta(j,Z,ue,Me))return 0;x=Math.min(x,Pp(j,Z,ue,Me,a))}}return x}function Ng(l,i,a,d,g,v){if(!v)return;const x=Cp(wp(d,v),g,a);x<i&&l.push([x,v,[0,0]])}function id(l,i,a,d,g,v,x){if(!v||!x)return;const w=Cp(wp(d,v),wp(g,x),a);w<i&&l.push([w,v,x])}function sd(l,i,a,d,g=1/0){let v=Math.min(d.distance(l[0],a[0][0]),g);if(v===0)return v;const x=new yp([[0,[0,l.length-1],[0,0]]],jg),w=Sp(a);for(;x.length>0;){const P=x.pop();if(P[0]>=v)continue;const k=P[1],D=i?50:100;if(Dc(k)<=D){if(!to(k,l.length))return NaN;if(i){const j=N0(l,k,a,d);if(isNaN(j)||j===0)return j;v=Math.min(v,j)}else for(let j=k[0];j<=k[1];++j){const Z=L0(l[j],a,d);if(v=Math.min(v,Z),v===0)return 0}}else{const j=bp(k,i);Ng(x,v,d,l,w,j[0]),Ng(x,v,d,l,w,j[1])}}return v}function od(l,i,a,d,g,v=1/0){let x=Math.min(v,g.distance(l[0],a[0]));if(x===0)return x;const w=new yp([[0,[0,l.length-1],[0,a.length-1]]],jg);for(;w.length>0;){const P=w.pop();if(P[0]>=x)continue;const k=P[1],D=P[2],j=i?50:100,Z=d?50:100;if(Dc(k)<=j&&Dc(D)<=Z){if(!to(k,l.length)&&to(D,a.length))return NaN;let H;if(i&&d)H=j0(l,k,a,D,g),x=Math.min(x,H);else if(i&&!d){const W=l.slice(k[0],k[1]+1);for(let J=D[0];J<=D[1];++J)if(H=Pa(a[J],W,g),x=Math.min(x,H),x===0)return x}else if(!i&&d){const W=a.slice(D[0],D[1]+1);for(let J=k[0];J<=k[1];++J)if(H=Pa(l[J],W,g),x=Math.min(x,H),x===0)return x}else H=Ir(l,k,a,D,g),x=Math.min(x,H)}else{const H=bp(k,i),W=bp(D,d);id(w,x,g,l,a,H[0],W[0]),id(w,x,g,l,a,H[0],W[1]),id(w,x,g,l,a,H[1],W[0]),id(w,x,g,l,a,H[1],W[1])}}return x}function Ep(l){return l.type==="MultiPolygon"?l.coordinates.map(i=>({type:"Polygon",coordinates:i})):l.type==="MultiLineString"?l.coordinates.map(i=>({type:"LineString",coordinates:i})):l.type==="MultiPoint"?l.coordinates.map(i=>({type:"Point",coordinates:i})):[l]}class Ea{constructor(i,a){this.type=he,this.geojson=i,this.geometries=a}static parse(i,a){if(i.length!==2)return a.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if(cl(i[1])){const d=i[1];if(d.type==="FeatureCollection")return new Ea(d,d.features.map(g=>Ep(g.geometry)).flat());if(d.type==="Feature")return new Ea(d,Ep(d.geometry));if("type"in d&&"coordinates"in d)return new Ea(d,Ep(d))}return a.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(a,d){const g=a.geometry(),v=g.flat().map(P=>fp([P.x,P.y],a.canonical));if(g.length===0)return NaN;const x=new xp(v[0][1]);let w=1/0;for(const P of d){switch(P.type){case"Point":w=Math.min(w,od(v,!1,[P.coordinates],!1,x,w));break;case"LineString":w=Math.min(w,od(v,!1,P.coordinates,!0,x,w));break;case"Polygon":w=Math.min(w,sd(v,!1,P.coordinates,x,w))}if(w===0)return w}return w}(i,this.geometries);if(i.geometryType()==="LineString")return function(a,d){const g=a.geometry(),v=g.flat().map(P=>fp([P.x,P.y],a.canonical));if(g.length===0)return NaN;const x=new xp(v[0][1]);let w=1/0;for(const P of d){switch(P.type){case"Point":w=Math.min(w,od(v,!0,[P.coordinates],!1,x,w));break;case"LineString":w=Math.min(w,od(v,!0,P.coordinates,!0,x,w));break;case"Polygon":w=Math.min(w,sd(v,!0,P.coordinates,x,w))}if(w===0)return w}return w}(i,this.geometries);if(i.geometryType()==="Polygon")return function(a,d){const g=a.geometry();if(g.length===0||g[0].length===0)return NaN;const v=ml(g,0).map(P=>P.map(k=>k.map(D=>fp([D.x,D.y],a.canonical)))),x=new xp(v[0][0][0][1]);let w=1/0;for(const P of d)for(const k of v){switch(P.type){case"Point":w=Math.min(w,sd([P.coordinates],!1,k,x,w));break;case"LineString":w=Math.min(w,sd(P.coordinates,!0,k,x,w));break;case"Polygon":w=Math.min(w,O0(k,P.coordinates,x,w))}if(w===0)return w}return w}(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const gl={"==":dp,"!=":Cg,">":rd,"<":M0,">=":k0,"<=":hp,array:ui,at:nr,boolean:ui,case:ks,coalesce:Mc,collator:Sa,format:Di,image:nd,in:Cc,"index-of":_r,interpolate:ni,"interpolate-hcl":ni,"interpolate-lab":ni,length:fl,let:ul,literal:xa,match:Pc,number:ui,"number-format":pl,object:ui,slice:dl,step:hl,string:ui,"to-boolean":bo,"to-color":bo,"to-number":bo,"to-string":bo,var:yr,within:Wo,distance:Ea};class hs{constructor(i,a,d,g){this.name=i,this.type=a,this._evaluate=d,this.args=g}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,a){const d=i[0],g=hs.definitions[d];if(!g)return a.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,w=x.filter(([k])=>!Array.isArray(k)||k.length===i.length-1);let P=null;for(const[k,D]of w){P=new Br(a.registry,ad,a.path,null,a.scope);const j=[];let Z=!1;for(let H=1;H<i.length;H++){const W=i[H],J=Array.isArray(k)?k[H-1]:k.type,ie=P.parse(W,1+j.length,J);if(!ie){Z=!0;break}j.push(ie)}if(!Z)if(Array.isArray(k)&&k.length!==j.length)P.error(`Expected ${k.length} arguments, but found ${j.length} instead.`);else{for(let H=0;H<j.length;H++){const W=Array.isArray(k)?k[H]:k.type,J=j[H];P.concat(H+1).checkSubtype(W,J.type)}if(P.errors.length===0)return new hs(d,v,D,j)}}if(w.length===1)a.errors.push(...P.errors);else{const k=(w.length?w:x).map(([j])=>{return Z=j,Array.isArray(Z)?`(${Z.map(Gt).join(", ")})`:`(${Gt(Z.type)}...)`;var Z}).join(" | "),D=[];for(let j=1;j<i.length;j++){const Z=a.parse(i[j],1+D.length);if(!Z)return null;D.push(Gt(Z.type))}a.error(`Expected arguments of type ${k}, but found (${D.join(", ")}) instead.`)}return null}static register(i,a){hs.definitions=a;for(const d in a)i[d]=hs}}function Og(l,[i,a,d,g]){i=i.evaluate(l),a=a.evaluate(l),d=d.evaluate(l);const v=g?g.evaluate(l):1,x=Sc(i,a,d,v);if(x)throw new Jr(x);return new lr(i/255,a/255,d/255,v,!1)}function Fg(l,i){return l in i}function Mp(l,i){const a=i[l];return a===void 0?null:a}function Ma(l){return{type:l}}function ad(l){if(l instanceof yr)return ad(l.boundExpression);if(l instanceof hs&&l.name==="error"||l instanceof Sa||l instanceof Wo||l instanceof Ea)return!1;const i=l instanceof bo||l instanceof ui;let a=!0;return l.eachChild(d=>{a=i?a&&ad(d):a&&d instanceof xa}),!!a&&ld(l)&&cd(l,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ld(l){if(l instanceof hs&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof Wo||l instanceof Ea)return!1;let i=!0;return l.eachChild(a=>{i&&!ld(a)&&(i=!1)}),i}function zc(l){if(l instanceof hs&&l.name==="feature-state")return!1;let i=!0;return l.eachChild(a=>{i&&!zc(a)&&(i=!1)}),i}function cd(l,i){if(l instanceof hs&&i.indexOf(l.name)>=0)return!1;let a=!0;return l.eachChild(d=>{a&&!cd(d,i)&&(a=!1)}),a}function Bg(l){return{result:"success",value:l}}function yl(l){return{result:"error",value:l}}function _l(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function Ug(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function kp(l){return!!l.expression&&l.expression.interpolated}function wr(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function ud(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)}function F0(l){return l}function Vg(l,i){const a=i.type==="color",d=l.stops&&typeof l.stops[0][0]=="object",g=d||!(d||l.property!==void 0),v=l.type||(kp(i)?"exponential":"interval");if(a||i.type==="padding"){const D=a?lr.parse:nn.parse;(l=ht({},l)).stops&&(l.stops=l.stops.map(j=>[j[0],D(j[1])])),l.default=D(l.default?l.default:i.default)}if(l.colorSpace&&(x=l.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${l.colorSpace}"`);var x;let w,P,k;if(v==="exponential")w=$g;else if(v==="interval")w=Ip;else if(v==="categorical"){w=B0,P=Object.create(null);for(const D of l.stops)P[D[0]]=D[1];k=typeof l.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);w=U0}if(d){const D={},j=[];for(let W=0;W<l.stops.length;W++){const J=l.stops[W],ie=J[0].zoom;D[ie]===void 0&&(D[ie]={zoom:ie,type:l.type,property:l.property,default:l.default,stops:[]},j.push(ie)),D[ie].stops.push([J[0].value,J[1]])}const Z=[];for(const W of j)Z.push([D[W].zoom,Vg(D[W],i)]);const H={name:"linear"};return{kind:"composite",interpolationType:H,interpolationFactor:ni.interpolationFactor.bind(void 0,H),zoomStops:Z.map(W=>W[0]),evaluate:({zoom:W},J)=>$g({stops:Z,base:l.base},i,W).evaluate(W,J)}}if(g){const D=v==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:ni.interpolationFactor.bind(void 0,D),zoomStops:l.stops.map(j=>j[0]),evaluate:({zoom:j})=>w(l,i,j,P,k)}}return{kind:"source",evaluate(D,j){const Z=j&&j.properties?j.properties[l.property]:void 0;return Z===void 0?jc(l.default,i.default):w(l,i,Z,P,k)}}}function jc(l,i,a){return l!==void 0?l:i!==void 0?i:a!==void 0?a:void 0}function B0(l,i,a,d,g){return jc(typeof a===g?d[a]:void 0,l.default,i.default)}function Ip(l,i,a){if(wr(a)!=="number")return jc(l.default,i.default);const d=l.stops.length;if(d===1||a<=l.stops[0][0])return l.stops[0][1];if(a>=l.stops[d-1][0])return l.stops[d-1][1];const g=Ec(l.stops.map(v=>v[0]),a);return l.stops[g][1]}function $g(l,i,a){const d=l.base!==void 0?l.base:1;if(wr(a)!=="number")return jc(l.default,i.default);const g=l.stops.length;if(g===1||a<=l.stops[0][0])return l.stops[0][1];if(a>=l.stops[g-1][0])return l.stops[g-1][1];const v=Ec(l.stops.map(D=>D[0]),a),x=function(D,j,Z,H){const W=H-Z,J=D-Z;return W===0?0:j===1?J/W:(Math.pow(j,J)-1)/(Math.pow(j,W)-1)}(a,d,l.stops[v][0],l.stops[v+1][0]),w=l.stops[v][1],P=l.stops[v+1][1],k=Ki[i.type]||F0;return typeof w.evaluate=="function"?{evaluate(...D){const j=w.evaluate.apply(void 0,D),Z=P.evaluate.apply(void 0,D);if(j!==void 0&&Z!==void 0)return k(j,Z,x,l.colorSpace)}}:k(w,P,x,l.colorSpace)}function U0(l,i,a){switch(i.type){case"color":a=lr.parse(a);break;case"formatted":a=vi.fromString(a.toString());break;case"resolvedImage":a=Ai.fromString(a.toString());break;case"padding":a=nn.parse(a);break;default:wr(a)===i.type||i.type==="enum"&&i.values[a]||(a=void 0)}return jc(a,l.default,i.default)}hs.register(gl,{error:[{kind:"error"},[De],(l,[i])=>{throw new Jr(i.evaluate(l))}],typeof:[De,[Ge],(l,[i])=>Gt(gn(i.evaluate(l)))],"to-rgba":[ur(he,4),[lt],(l,[i])=>{const[a,d,g,v]=i.evaluate(l).rgb;return[255*a,255*d,255*g,v]}],rgb:[lt,[he,he,he],Og],rgba:[lt,[he,he,he,he],Og],has:{type:He,overloads:[[[De],(l,[i])=>Fg(i.evaluate(l),l.properties())],[[De,et],(l,[i,a])=>Fg(i.evaluate(l),a.evaluate(l))]]},get:{type:Ge,overloads:[[[De],(l,[i])=>Mp(i.evaluate(l),l.properties())],[[De,et],(l,[i,a])=>Mp(i.evaluate(l),a.evaluate(l))]]},"feature-state":[Ge,[De],(l,[i])=>Mp(i.evaluate(l),l.featureState||{})],properties:[et,[],l=>l.properties()],"geometry-type":[De,[],l=>l.geometryType()],id:[Ge,[],l=>l.id()],zoom:[he,[],l=>l.globals.zoom],"heatmap-density":[he,[],l=>l.globals.heatmapDensity||0],"line-progress":[he,[],l=>l.globals.lineProgress||0],accumulated:[Ge,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[he,Ma(he),(l,i)=>{let a=0;for(const d of i)a+=d.evaluate(l);return a}],"*":[he,Ma(he),(l,i)=>{let a=1;for(const d of i)a*=d.evaluate(l);return a}],"-":{type:he,overloads:[[[he,he],(l,[i,a])=>i.evaluate(l)-a.evaluate(l)],[[he],(l,[i])=>-i.evaluate(l)]]},"/":[he,[he,he],(l,[i,a])=>i.evaluate(l)/a.evaluate(l)],"%":[he,[he,he],(l,[i,a])=>i.evaluate(l)%a.evaluate(l)],ln2:[he,[],()=>Math.LN2],pi:[he,[],()=>Math.PI],e:[he,[],()=>Math.E],"^":[he,[he,he],(l,[i,a])=>Math.pow(i.evaluate(l),a.evaluate(l))],sqrt:[he,[he],(l,[i])=>Math.sqrt(i.evaluate(l))],log10:[he,[he],(l,[i])=>Math.log(i.evaluate(l))/Math.LN10],ln:[he,[he],(l,[i])=>Math.log(i.evaluate(l))],log2:[he,[he],(l,[i])=>Math.log(i.evaluate(l))/Math.LN2],sin:[he,[he],(l,[i])=>Math.sin(i.evaluate(l))],cos:[he,[he],(l,[i])=>Math.cos(i.evaluate(l))],tan:[he,[he],(l,[i])=>Math.tan(i.evaluate(l))],asin:[he,[he],(l,[i])=>Math.asin(i.evaluate(l))],acos:[he,[he],(l,[i])=>Math.acos(i.evaluate(l))],atan:[he,[he],(l,[i])=>Math.atan(i.evaluate(l))],min:[he,Ma(he),(l,i)=>Math.min(...i.map(a=>a.evaluate(l)))],max:[he,Ma(he),(l,i)=>Math.max(...i.map(a=>a.evaluate(l)))],abs:[he,[he],(l,[i])=>Math.abs(i.evaluate(l))],round:[he,[he],(l,[i])=>{const a=i.evaluate(l);return a<0?-Math.round(-a):Math.round(a)}],floor:[he,[he],(l,[i])=>Math.floor(i.evaluate(l))],ceil:[he,[he],(l,[i])=>Math.ceil(i.evaluate(l))],"filter-==":[He,[De,Ge],(l,[i,a])=>l.properties()[i.value]===a.value],"filter-id-==":[He,[Ge],(l,[i])=>l.id()===i.value],"filter-type-==":[He,[De],(l,[i])=>l.geometryType()===i.value],"filter-<":[He,[De,Ge],(l,[i,a])=>{const d=l.properties()[i.value],g=a.value;return typeof d==typeof g&&d<g}],"filter-id-<":[He,[Ge],(l,[i])=>{const a=l.id(),d=i.value;return typeof a==typeof d&&a<d}],"filter->":[He,[De,Ge],(l,[i,a])=>{const d=l.properties()[i.value],g=a.value;return typeof d==typeof g&&d>g}],"filter-id->":[He,[Ge],(l,[i])=>{const a=l.id(),d=i.value;return typeof a==typeof d&&a>d}],"filter-<=":[He,[De,Ge],(l,[i,a])=>{const d=l.properties()[i.value],g=a.value;return typeof d==typeof g&&d<=g}],"filter-id-<=":[He,[Ge],(l,[i])=>{const a=l.id(),d=i.value;return typeof a==typeof d&&a<=d}],"filter->=":[He,[De,Ge],(l,[i,a])=>{const d=l.properties()[i.value],g=a.value;return typeof d==typeof g&&d>=g}],"filter-id->=":[He,[Ge],(l,[i])=>{const a=l.id(),d=i.value;return typeof a==typeof d&&a>=d}],"filter-has":[He,[Ge],(l,[i])=>i.value in l.properties()],"filter-has-id":[He,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[He,[ur(De)],(l,[i])=>i.value.indexOf(l.geometryType())>=0],"filter-id-in":[He,[ur(Ge)],(l,[i])=>i.value.indexOf(l.id())>=0],"filter-in-small":[He,[De,ur(Ge)],(l,[i,a])=>a.value.indexOf(l.properties()[i.value])>=0],"filter-in-large":[He,[De,ur(Ge)],(l,[i,a])=>function(d,g,v,x){for(;v<=x;){const w=v+x>>1;if(g[w]===d)return!0;g[w]>d?x=w-1:v=w+1}return!1}(l.properties()[i.value],a.value,0,a.value.length-1)],all:{type:He,overloads:[[[He,He],(l,[i,a])=>i.evaluate(l)&&a.evaluate(l)],[Ma(He),(l,i)=>{for(const a of i)if(!a.evaluate(l))return!1;return!0}]]},any:{type:He,overloads:[[[He,He],(l,[i,a])=>i.evaluate(l)||a.evaluate(l)],[Ma(He),(l,i)=>{for(const a of i)if(a.evaluate(l))return!0;return!1}]]},"!":[He,[He],(l,[i])=>!i.evaluate(l)],"is-supported-script":[He,[De],(l,[i])=>{const a=l.globals&&l.globals.isSupportedScript;return!a||a(i.evaluate(l))}],upcase:[De,[De],(l,[i])=>i.evaluate(l).toUpperCase()],downcase:[De,[De],(l,[i])=>i.evaluate(l).toLowerCase()],concat:[De,Ma(Ge),(l,i)=>i.map(a=>Ms(a.evaluate(l))).join("")],"resolved-locale":[De,[yt],(l,[i])=>i.evaluate(l).resolvedLocale()]});class Rp{constructor(i,a){var d;this.expression=i,this._warningHistory={},this._evaluator=new Tc,this._defaultValue=a?(d=a).type==="color"&&ud(d.default)?new lr(0,0,0,0):d.type==="color"?lr.parse(d.default)||null:d.type==="padding"?nn.parse(d.default)||null:d.type==="variableAnchorOffsetCollection"?ci.parse(d.default)||null:d.type==="projectionDefinition"?ri.parse(d.default)||null:d.default===void 0?null:d.default:null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(i,a,d,g,v,x){return this._evaluator.globals=i,this._evaluator.feature=a,this._evaluator.featureState=d,this._evaluator.canonical=g,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(i,a,d,g,v,x){this._evaluator.globals=i,this._evaluator.feature=a||null,this._evaluator.featureState=d||null,this._evaluator.canonical=g,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new Jr(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}}}function Lc(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in gl}function dd(l,i){const a=new Br(gl,ad,[],i?function(g){const v={color:lt,string:De,number:he,enum:De,boolean:He,formatted:Nt,padding:qt,projectionDefinition:bt,resolvedImage:Xt,variableAnchorOffsetCollection:sr};return g.type==="array"?ur(v[g.value]||Ge,g.length):v[g.type]}(i):void 0),d=a.parse(l,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?Bg(new Rp(d,i)):yl(a.errors)}class Ap{constructor(i,a){this.kind=i,this._styleExpression=a,this.isStateDependent=i!=="constant"&&!zc(a.expression)}evaluateWithoutErrorHandling(i,a,d,g,v,x){return this._styleExpression.evaluateWithoutErrorHandling(i,a,d,g,v,x)}evaluate(i,a,d,g,v,x){return this._styleExpression.evaluate(i,a,d,g,v,x)}}class vl{constructor(i,a,d,g){this.kind=i,this.zoomStops=d,this._styleExpression=a,this.isStateDependent=i!=="camera"&&!zc(a.expression),this.interpolationType=g}evaluateWithoutErrorHandling(i,a,d,g,v,x){return this._styleExpression.evaluateWithoutErrorHandling(i,a,d,g,v,x)}evaluate(i,a,d,g,v,x){return this._styleExpression.evaluate(i,a,d,g,v,x)}interpolationFactor(i,a,d){return this.interpolationType?ni.interpolationFactor(this.interpolationType,i,a,d):0}}function Dp(l,i){const a=dd(l,i);if(a.result==="error")return a;const d=a.value.expression,g=ld(d);if(!g&&!_l(i))return yl([new dt("","data expressions not supported")]);const v=cd(d,["zoom"]);if(!v&&!Ug(i))return yl([new dt("","zoom expressions not supported")]);const x=pd(d);return x||v?x instanceof dt?yl([x]):x instanceof ni&&!kp(i)?yl([new dt("",'"interpolate" expressions cannot be used with this property')]):Bg(x?new vl(g?"camera":"composite",a.value,x.labels,x instanceof ni?x.interpolation:void 0):new Ap(g?"constant":"source",a.value)):yl([new dt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class hd{constructor(i,a){this._parameters=i,this._specification=a,ht(this,Vg(this._parameters,this._specification))}static deserialize(i){return new hd(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function pd(l){let i=null;if(l instanceof ul)i=pd(l.result);else if(l instanceof Mc){for(const a of l.args)if(i=pd(a),i)break}else(l instanceof hl||l instanceof ni)&&l.input instanceof hs&&l.input.name==="zoom"&&(i=l);return i instanceof dt||l.eachChild(a=>{const d=pd(a);d instanceof dt?i=d:!i&&d?i=new dt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&d&&i!==d&&(i=new dt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function zp(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const i of l.slice(1))if(!zp(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const V0={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function jp(l){if(l==null)return{filter:()=>!0,needGeometry:!1};zp(l)||(l=fd(l));const i=dd(l,V0);if(i.result==="error")throw new Error(i.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,d,g)=>i.value.evaluate(a,d,{},g),needGeometry:Lp(l)}}function Zg(l,i){return l<i?-1:l>i?1:0}function Lp(l){if(!Array.isArray(l))return!1;if(l[0]==="within"||l[0]==="distance")return!0;for(let i=1;i<l.length;i++)if(Lp(l[i]))return!0;return!1}function fd(l){if(!l)return!0;const i=l[0];return l.length<=1?i!=="any":i==="=="?Np(l[1],l[2],"=="):i==="!="?Nc(Np(l[1],l[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Np(l[1],l[2],i):i==="any"?(a=l.slice(1),["any"].concat(a.map(fd))):i==="all"?["all"].concat(l.slice(1).map(fd)):i==="none"?["all"].concat(l.slice(1).map(fd).map(Nc)):i==="in"?Op(l[1],l.slice(2)):i==="!in"?Nc(Op(l[1],l.slice(2))):i==="has"?Fp(l[1]):i!=="!has"||Nc(Fp(l[1]));var a}function Np(l,i,a){switch(l){case"$type":return[`filter-type-${a}`,i];case"$id":return[`filter-id-${a}`,i];default:return[`filter-${a}`,l,i]}}function Op(l,i){if(i.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(a=>typeof a!=typeof i[0])?["filter-in-large",l,["literal",i.sort(Zg)]]:["filter-in-small",l,["literal",i]]}}function Fp(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function Nc(l){return["!",l]}function md(l){const i=typeof l;if(i==="number"||i==="boolean"||i==="string"||l==null)return JSON.stringify(l);if(Array.isArray(l)){let g="[";for(const v of l)g+=`${md(v)},`;return`${g}]`}const a=Object.keys(l).sort();let d="{";for(let g=0;g<a.length;g++)d+=`${JSON.stringify(a[g])}:${md(l[a[g]])},`;return`${d}}`}function Bp(l){let i="";for(const a of Q)i+=`/${md(l[a])}`;return i}function gd(l){const i=l.value;return i?[new Ee(l.key,i,"constants have been deprecated as of v8")]:[]}function sn(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function ro(l){if(Array.isArray(l))return l.map(ro);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const i={};for(const a in l)i[a]=ro(l[a]);return i}return sn(l)}function ps(l){const i=l.key,a=l.value,d=l.valueSpec||{},g=l.objectElementValidators||{},v=l.style,x=l.styleSpec,w=l.validateSpec;let P=[];const k=wr(a);if(k!=="object")return[new Ee(i,a,`object expected, ${k} found`)];for(const D in a){const j=D.split(".")[0],Z=d[j]||d["*"];let H;if(g[j])H=g[j];else if(d[j])H=w;else if(g["*"])H=g["*"];else{if(!d["*"]){P.push(new Ee(i,a[D],`unknown property "${D}"`));continue}H=w}P=P.concat(H({key:(i&&`${i}.`)+D,value:a[D],valueSpec:Z,style:v,styleSpec:x,object:a,objectKey:D,validateSpec:w},a))}for(const D in d)g[D]||d[D].required&&d[D].default===void 0&&a[D]===void 0&&P.push(new Ee(i,a,`missing required property "${D}"`));return P}function Up(l){const i=l.value,a=l.valueSpec,d=l.style,g=l.styleSpec,v=l.key,x=l.arrayElementValidator||l.validateSpec;if(wr(i)!=="array")return[new Ee(v,i,`array expected, ${wr(i)} found`)];if(a.length&&i.length!==a.length)return[new Ee(v,i,`array length ${a.length} expected, length ${i.length} found`)];if(a["min-length"]&&i.length<a["min-length"])return[new Ee(v,i,`array length at least ${a["min-length"]} expected, length ${i.length} found`)];let w={type:a.value,values:a.values};g.$version<7&&(w.function=a.function),wr(a.value)==="object"&&(w=a.value);let P=[];for(let k=0;k<i.length;k++)P=P.concat(x({array:i,arrayIndex:k,value:i[k],valueSpec:w,validateSpec:l.validateSpec,style:d,styleSpec:g,key:`${v}[${k}]`}));return P}function Vp(l){const i=l.key,a=l.value,d=l.valueSpec;let g=wr(a);return g==="number"&&a!=a&&(g="NaN"),g!=="number"?[new Ee(i,a,`number expected, ${g} found`)]:"minimum"in d&&a<d.minimum?[new Ee(i,a,`${a} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&a>d.maximum?[new Ee(i,a,`${a} is greater than the maximum value ${d.maximum}`)]:[]}function Gg(l){const i=l.valueSpec,a=sn(l.value.type);let d,g,v,x={};const w=a!=="categorical"&&l.value.property===void 0,P=!w,k=wr(l.value.stops)==="array"&&wr(l.value.stops[0])==="array"&&wr(l.value.stops[0][0])==="object",D=ps({key:l.key,value:l.value,valueSpec:l.styleSpec.function,validateSpec:l.validateSpec,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(H){if(a==="identity")return[new Ee(H.key,H.value,'identity function may not have a "stops" property')];let W=[];const J=H.value;return W=W.concat(Up({key:H.key,value:J,valueSpec:H.valueSpec,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec,arrayElementValidator:j})),wr(J)==="array"&&J.length===0&&W.push(new Ee(H.key,J,"array must have at least one stop")),W},default:function(H){return H.validateSpec({key:H.key,value:H.value,valueSpec:i,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec})}}});return a==="identity"&&w&&D.push(new Ee(l.key,l.value,'missing required property "property"')),a==="identity"||l.value.stops||D.push(new Ee(l.key,l.value,'missing required property "stops"')),a==="exponential"&&l.valueSpec.expression&&!kp(l.valueSpec)&&D.push(new Ee(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(P&&!_l(l.valueSpec)?D.push(new Ee(l.key,l.value,"property functions not supported")):w&&!Ug(l.valueSpec)&&D.push(new Ee(l.key,l.value,"zoom functions not supported"))),a!=="categorical"&&!k||l.value.property!==void 0||D.push(new Ee(l.key,l.value,'"property" property is required')),D;function j(H){let W=[];const J=H.value,ie=H.key;if(wr(J)!=="array")return[new Ee(ie,J,`array expected, ${wr(J)} found`)];if(J.length!==2)return[new Ee(ie,J,`array length 2 expected, length ${J.length} found`)];if(k){if(wr(J[0])!=="object")return[new Ee(ie,J,`object expected, ${wr(J[0])} found`)];if(J[0].zoom===void 0)return[new Ee(ie,J,"object stop key must have zoom")];if(J[0].value===void 0)return[new Ee(ie,J,"object stop key must have value")];if(v&&v>sn(J[0].zoom))return[new Ee(ie,J[0].zoom,"stop zoom values must appear in ascending order")];sn(J[0].zoom)!==v&&(v=sn(J[0].zoom),g=void 0,x={}),W=W.concat(ps({key:`${ie}[0]`,value:J[0],valueSpec:{zoom:{}},validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec,objectElementValidators:{zoom:Vp,value:Z}}))}else W=W.concat(Z({key:`${ie}[0]`,value:J[0],valueSpec:{},validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec},J));return Lc(ro(J[1]))?W.concat([new Ee(`${ie}[1]`,J[1],"expressions are not allowed in function stops.")]):W.concat(H.validateSpec({key:`${ie}[1]`,value:J[1],valueSpec:i,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec}))}function Z(H,W){const J=wr(H.value),ie=sn(H.value),ue=H.value!==null?H.value:W;if(d){if(J!==d)return[new Ee(H.key,ue,`${J} stop domain type must match previous stop domain type ${d}`)]}else d=J;if(J!=="number"&&J!=="string"&&J!=="boolean")return[new Ee(H.key,ue,"stop domain value must be a number, string, or boolean")];if(J!=="number"&&a!=="categorical"){let Me=`number expected, ${J} found`;return _l(i)&&a===void 0&&(Me+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ee(H.key,ue,Me)]}return a!=="categorical"||J!=="number"||isFinite(ie)&&Math.floor(ie)===ie?a!=="categorical"&&J==="number"&&g!==void 0&&ie<g?[new Ee(H.key,ue,"stop domain values must appear in ascending order")]:(g=ie,a==="categorical"&&ie in x?[new Ee(H.key,ue,"stop domain values must be unique")]:(x[ie]=!0,[])):[new Ee(H.key,ue,`integer expected, found ${ie}`)]}}function xl(l){const i=(l.expressionContext==="property"?Dp:dd)(ro(l.value),l.valueSpec);if(i.result==="error")return i.value.map(d=>new Ee(`${l.key}${d.key}`,l.value,d.message));const a=i.value.expression||i.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!a.outputDefined())return[new Ee(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!zc(a))return[new Ee(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter"&&!zc(a))return[new Ee(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!cd(a,["zoom","feature-state"]))return[new Ee(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!ld(a))return[new Ee(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Oc(l){const i=l.key,a=l.value,d=l.valueSpec,g=[];return Array.isArray(d.values)?d.values.indexOf(sn(a))===-1&&g.push(new Ee(i,a,`expected one of [${d.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(d.values).indexOf(sn(a))===-1&&g.push(new Ee(i,a,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(a)} found`)),g}function yd(l){return zp(ro(l.value))?xl(ht({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):$p(l)}function $p(l){const i=l.value,a=l.key;if(wr(i)!=="array")return[new Ee(a,i,`array expected, ${wr(i)} found`)];const d=l.styleSpec;let g,v=[];if(i.length<1)return[new Ee(a,i,"filter array must have at least 1 element")];switch(v=v.concat(Oc({key:`${a}[0]`,value:i[0],valueSpec:d.filter_operator,style:l.style,styleSpec:l.styleSpec})),sn(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&sn(i[1])==="$type"&&v.push(new Ee(a,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&v.push(new Ee(a,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(g=wr(i[1]),g!=="string"&&v.push(new Ee(`${a}[1]`,i[1],`string expected, ${g} found`)));for(let x=2;x<i.length;x++)g=wr(i[x]),sn(i[1])==="$type"?v=v.concat(Oc({key:`${a}[${x}]`,value:i[x],valueSpec:d.geometry_type,style:l.style,styleSpec:l.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&v.push(new Ee(`${a}[${x}]`,i[x],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let x=1;x<i.length;x++)v=v.concat($p({key:`${a}[${x}]`,value:i[x],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":g=wr(i[1]),i.length!==2?v.push(new Ee(a,i,`filter array for "${i[0]}" operator must have 2 elements`)):g!=="string"&&v.push(new Ee(`${a}[1]`,i[1],`string expected, ${g} found`))}return v}function Fc(l,i){const a=l.key,d=l.validateSpec,g=l.style,v=l.styleSpec,x=l.value,w=l.objectKey,P=v[`${i}_${l.layerType}`];if(!P)return[];const k=w.match(/^(.*)-transition$/);if(i==="paint"&&k&&P[k[1]]&&P[k[1]].transition)return d({key:a,value:x,valueSpec:v.transition,style:g,styleSpec:v});const D=l.valueSpec||P[w];if(!D)return[new Ee(a,x,`unknown property "${w}"`)];let j;if(wr(x)==="string"&&_l(D)&&!D.tokens&&(j=/^{([^}]+)}$/.exec(x)))return[new Ee(a,x,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(j[1])} }\`.`)];const Z=[];return l.layerType==="symbol"&&(w==="text-field"&&g&&!g.glyphs&&Z.push(new Ee(a,x,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&ud(ro(x))&&sn(x.type)==="identity"&&Z.push(new Ee(a,x,'"text-font" does not support identity functions'))),Z.concat(d({key:l.key,value:x,valueSpec:D,style:g,styleSpec:v,expressionContext:"property",propertyType:i,propertyKey:w}))}function Hg(l){return Fc(l,"paint")}function Zp(l){return Fc(l,"layout")}function Gp(l){let i=[];const a=l.value,d=l.key,g=l.style,v=l.styleSpec;a.type||a.ref||i.push(new Ee(d,a,'either "type" or "ref" is required'));let x=sn(a.type);const w=sn(a.ref);if(a.id){const P=sn(a.id);for(let k=0;k<l.arrayIndex;k++){const D=g.layers[k];sn(D.id)===P&&i.push(new Ee(d,a.id,`duplicate layer id "${a.id}", previously used at line ${D.id.__line__}`))}}if("ref"in a){let P;["type","source","source-layer","filter","layout"].forEach(k=>{k in a&&i.push(new Ee(d,a[k],`"${k}" is prohibited for ref layers`))}),g.layers.forEach(k=>{sn(k.id)===w&&(P=k)}),P?P.ref?i.push(new Ee(d,a.ref,"ref cannot reference another ref layer")):x=sn(P.type):i.push(new Ee(d,a.ref,`ref layer "${w}" not found`))}else if(x!=="background")if(a.source){const P=g.sources&&g.sources[a.source],k=P&&sn(P.type);P?k==="vector"&&x==="raster"?i.push(new Ee(d,a.source,`layer "${a.id}" requires a raster source`)):k!=="raster-dem"&&x==="hillshade"?i.push(new Ee(d,a.source,`layer "${a.id}" requires a raster-dem source`)):k==="raster"&&x!=="raster"?i.push(new Ee(d,a.source,`layer "${a.id}" requires a vector source`)):k!=="vector"||a["source-layer"]?k==="raster-dem"&&x!=="hillshade"?i.push(new Ee(d,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!a.paint||!a.paint["line-gradient"]||k==="geojson"&&P.lineMetrics||i.push(new Ee(d,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Ee(d,a,`layer "${a.id}" must specify a "source-layer"`)):i.push(new Ee(d,a.source,`source "${a.source}" not found`))}else i.push(new Ee(d,a,'missing required property "source"'));return i=i.concat(ps({key:d,value:a,valueSpec:v.layer,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*":()=>[],type:()=>l.validateSpec({key:`${d}.type`,value:a.type,valueSpec:v.layer.type,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,object:a,objectKey:"type"}),filter:yd,layout:P=>ps({layer:a,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":k=>Zp(ht({layerType:x},k))}}),paint:P=>ps({layer:a,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":k=>Hg(ht({layerType:x},k))}})}})),i}function ka(l){const i=l.value,a=l.key,d=wr(i);return d!=="string"?[new Ee(a,i,`string expected, ${d} found`)]:[]}const Hp={promoteId:function({key:l,value:i}){if(wr(i)==="string")return ka({key:l,value:i});{const a=[];for(const d in i)a.push(...ka({key:`${l}.${d}`,value:i[d]}));return a}}};function qp(l){const i=l.value,a=l.key,d=l.styleSpec,g=l.style,v=l.validateSpec;if(!i.type)return[new Ee(a,i,'"type" is required')];const x=sn(i.type);let w;switch(x){case"vector":case"raster":return w=ps({key:a,value:i,valueSpec:d[`source_${x.replace("-","_")}`],style:l.style,styleSpec:d,objectElementValidators:Hp,validateSpec:v}),w;case"raster-dem":return w=function(P){var k;const D=(k=P.sourceName)!==null&&k!==void 0?k:"",j=P.value,Z=P.styleSpec,H=Z.source_raster_dem,W=P.style;let J=[];const ie=wr(j);if(j===void 0)return J;if(ie!=="object")return J.push(new Ee("source_raster_dem",j,`object expected, ${ie} found`)),J;const ue=sn(j.encoding)==="custom",Me=["redFactor","greenFactor","blueFactor","baseShift"],ge=P.value.encoding?`"${P.value.encoding}"`:"Default";for(const G in j)!ue&&Me.includes(G)?J.push(new Ee(G,j[G],`In "${D}": "${G}" is only valid when "encoding" is set to "custom". ${ge} encoding found`)):H[G]?J=J.concat(P.validateSpec({key:G,value:j[G],valueSpec:H[G],validateSpec:P.validateSpec,style:W,styleSpec:Z})):J.push(new Ee(G,j[G],`unknown property "${G}"`));return J}({sourceName:a,value:i,style:l.style,styleSpec:d,validateSpec:v}),w;case"geojson":if(w=ps({key:a,value:i,valueSpec:d.source_geojson,style:g,styleSpec:d,validateSpec:v,objectElementValidators:Hp}),i.cluster)for(const P in i.clusterProperties){const[k,D]=i.clusterProperties[P],j=typeof k=="string"?[k,["accumulated"],["get",P]]:k;w.push(...xl({key:`${a}.${P}.map`,value:D,validateSpec:v,expressionContext:"cluster-map"})),w.push(...xl({key:`${a}.${P}.reduce`,value:j,validateSpec:v,expressionContext:"cluster-reduce"}))}return w;case"video":return ps({key:a,value:i,valueSpec:d.source_video,style:g,validateSpec:v,styleSpec:d});case"image":return ps({key:a,value:i,valueSpec:d.source_image,style:g,validateSpec:v,styleSpec:d});case"canvas":return[new Ee(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Oc({key:`${a}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:g,validateSpec:v,styleSpec:d})}}function bl(l){const i=l.value,a=l.styleSpec,d=a.light,g=l.style;let v=[];const x=wr(i);if(i===void 0)return v;if(x!=="object")return v=v.concat([new Ee("light",i,`object expected, ${x} found`)]),v;for(const w in i){const P=w.match(/^(.*)-transition$/);v=v.concat(P&&d[P[1]]&&d[P[1]].transition?l.validateSpec({key:w,value:i[w],valueSpec:a.transition,validateSpec:l.validateSpec,style:g,styleSpec:a}):d[w]?l.validateSpec({key:w,value:i[w],valueSpec:d[w],validateSpec:l.validateSpec,style:g,styleSpec:a}):[new Ee(w,i[w],`unknown property "${w}"`)])}return v}function qg(l){const i=l.value,a=l.styleSpec,d=a.sky,g=l.style,v=wr(i);if(i===void 0)return[];if(v!=="object")return[new Ee("sky",i,`object expected, ${v} found`)];let x=[];for(const w in i)x=x.concat(d[w]?l.validateSpec({key:w,value:i[w],valueSpec:d[w],style:g,styleSpec:a}):[new Ee(w,i[w],`unknown property "${w}"`)]);return x}function Wg(l){const i=l.value,a=l.styleSpec,d=a.terrain,g=l.style;let v=[];const x=wr(i);if(i===void 0)return v;if(x!=="object")return v=v.concat([new Ee("terrain",i,`object expected, ${x} found`)]),v;for(const w in i)v=v.concat(d[w]?l.validateSpec({key:w,value:i[w],valueSpec:d[w],validateSpec:l.validateSpec,style:g,styleSpec:a}):[new Ee(w,i[w],`unknown property "${w}"`)]);return v}function Xg(l){let i=[];const a=l.value,d=l.key;if(Array.isArray(a)){const g=[],v=[];for(const x in a)a[x].id&&g.includes(a[x].id)&&i.push(new Ee(d,a,`all the sprites' ids must be unique, but ${a[x].id} is duplicated`)),g.push(a[x].id),a[x].url&&v.includes(a[x].url)&&i.push(new Ee(d,a,`all the sprites' URLs must be unique, but ${a[x].url} is duplicated`)),v.push(a[x].url),i=i.concat(ps({key:`${d}[${x}]`,value:a[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:l.validateSpec}));return i}return ka({key:d,value:a})}const Kg={"*":()=>[],array:Up,boolean:function(l){const i=l.value,a=l.key,d=wr(i);return d!=="boolean"?[new Ee(a,i,`boolean expected, ${d} found`)]:[]},number:Vp,color:function(l){const i=l.key,a=l.value,d=wr(a);return d!=="string"?[new Ee(i,a,`color expected, ${d} found`)]:lr.parse(String(a))?[]:[new Ee(i,a,`color expected, "${a}" found`)]},constants:gd,enum:Oc,filter:yd,function:Gg,layer:Gp,object:ps,source:qp,light:bl,sky:qg,terrain:Wg,projection:function(l){const i=l.value,a=l.styleSpec,d=a.projection,g=l.style,v=wr(i);if(i===void 0)return[];if(v!=="object")return[new Ee("projection",i,`object expected, ${v} found`)];let x=[];for(const w in i)x=x.concat(d[w]?l.validateSpec({key:w,value:i[w],valueSpec:d[w],style:g,styleSpec:a}):[new Ee(w,i[w],`unknown property "${w}"`)]);return x},projectionDefinition:function(l){const i=l.key;let a=l.value;a=a instanceof String?a.valueOf():a;const d=wr(a);return d!=="array"||function(g){return Array.isArray(g)&&g.length===3&&typeof g[0]=="string"&&typeof g[1]=="string"&&typeof g[2]=="number"}(a)||function(g){return!!["interpolate","step","literal"].includes(g[0])}(a)?["array","string"].includes(d)?[]:[new Ee(i,a,`projection expected, invalid type "${d}" found`)]:[new Ee(i,a,`projection expected, invalid array ${JSON.stringify(a)} found`)]},string:ka,formatted:function(l){return ka(l).length===0?[]:xl(l)},resolvedImage:function(l){return ka(l).length===0?[]:xl(l)},padding:function(l){const i=l.key,a=l.value;if(wr(a)==="array"){if(a.length<1||a.length>4)return[new Ee(i,a,`padding requires 1 to 4 values; ${a.length} values found`)];const d={type:"number"};let g=[];for(let v=0;v<a.length;v++)g=g.concat(l.validateSpec({key:`${i}[${v}]`,value:a[v],validateSpec:l.validateSpec,valueSpec:d}));return g}return Vp({key:i,value:a,valueSpec:{}})},variableAnchorOffsetCollection:function(l){const i=l.key,a=l.value,d=wr(a),g=l.styleSpec;if(d!=="array"||a.length<1||a.length%2!=0)return[new Ee(i,a,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<a.length;x+=2)v=v.concat(Oc({key:`${i}[${x}]`,value:a[x],valueSpec:g.layout_symbol["text-anchor"]})),v=v.concat(Up({key:`${i}[${x+1}]`,value:a[x+1],valueSpec:{length:2,value:"number"},validateSpec:l.validateSpec,style:l.style,styleSpec:g}));return v},sprite:Xg};function Bc(l){const i=l.value,a=l.valueSpec,d=l.styleSpec;return l.validateSpec=Bc,a.expression&&ud(sn(i))?Gg(l):a.expression&&Lc(ro(i))?xl(l):a.type&&Kg[a.type]?Kg[a.type](l):ps(ht({},l,{valueSpec:a.type?d[a.type]:a}))}function Yg(l){const i=l.value,a=l.key,d=ka(l);return d.length||(i.indexOf("{fontstack}")===-1&&d.push(new Ee(a,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&d.push(new Ee(a,i,'"glyphs" url must include a "{range}" token'))),d}function xi(l,i=se){let a=[];return a=a.concat(Bc({key:"",value:l,valueSpec:i.$root,styleSpec:i,style:l,validateSpec:Bc,objectElementValidators:{glyphs:Yg,"*":()=>[]}})),l.constants&&(a=a.concat(gd({key:"constants",value:l.constants,style:l,styleSpec:i,validateSpec:Bc}))),ji(a)}function zi(l){return function(i){return l({...i,validateSpec:Bc})}}function ji(l){return[].concat(l).sort((i,a)=>i.line-a.line)}function Li(l){return function(...i){return ji(l.apply(this,i))}}xi.source=Li(zi(qp)),xi.sprite=Li(zi(Xg)),xi.glyphs=Li(zi(Yg)),xi.light=Li(zi(bl)),xi.sky=Li(zi(qg)),xi.terrain=Li(zi(Wg)),xi.layer=Li(zi(Gp)),xi.filter=Li(zi(yd)),xi.paintProperty=Li(zi(Hg)),xi.layoutProperty=Li(zi(Zp));const Ia=xi,$0=Ia.light,Z0=Ia.sky,Uc=Ia.paintProperty,Qg=Ia.layoutProperty;function _d(l,i){let a=!1;if(i&&i.length)for(const d of i)l.fire(new Ps(new Error(d.message))),a=!0;return a}class Vc{constructor(i,a,d){const g=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const x=new Int32Array(this.arrayBuffer);i=x[0],this.d=(a=x[1])+2*(d=x[2]);for(let P=0;P<this.d*this.d;P++){const k=x[3+P],D=x[3+P+1];g.push(k===D?null:x.subarray(k,D))}const w=x[3+g.length+1];this.keys=x.subarray(x[3+g.length],w),this.bboxes=x.subarray(w),this.insert=this._insertReadonly}else{this.d=a+2*d;for(let x=0;x<this.d*this.d;x++)g.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=i,this.padding=d,this.scale=a/i,this.uid=0;const v=d/a*i;this.min=-v,this.max=i+v}insert(i,a,d,g,v){this._forEachCell(a,d,g,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(a),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,a,d,g,v,x){this.cells[v].push(x)}query(i,a,d,g,v){const x=this.min,w=this.max;if(i<=x&&a<=x&&w<=d&&w<=g&&!v)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(i,a,d,g,this._queryCell,P,{},v),P}}_queryCell(i,a,d,g,v,x,w,P){const k=this.cells[v];if(k!==null){const D=this.keys,j=this.bboxes;for(let Z=0;Z<k.length;Z++){const H=k[Z];if(w[H]===void 0){const W=4*H;(P?P(j[W+0],j[W+1],j[W+2],j[W+3]):i<=j[W+2]&&a<=j[W+3]&&d>=j[W+0]&&g>=j[W+1])?(w[H]=!0,x.push(D[H])):w[H]=!1}}}}_forEachCell(i,a,d,g,v,x,w,P){const k=this._convertToCellCoord(i),D=this._convertToCellCoord(a),j=this._convertToCellCoord(d),Z=this._convertToCellCoord(g);for(let H=k;H<=j;H++)for(let W=D;W<=Z;W++){const J=this.d*W+H;if((!P||P(this._convertFromCellCoord(H),this._convertFromCellCoord(W),this._convertFromCellCoord(H+1),this._convertFromCellCoord(W+1)))&&v.call(this,i,a,d,g,J,x,w,P))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,a=3+this.cells.length+1+1;let d=0;for(let x=0;x<this.cells.length;x++)d+=this.cells[x].length;const g=new Int32Array(a+d+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let v=a;for(let x=0;x<i.length;x++){const w=i[x];g[3+x]=v,g.set(w,v),v+=w.length}return g[3+i.length]=v,g.set(this.keys,v),v+=this.keys.length,g[3+i.length+1]=v,g.set(this.bboxes,v),v+=this.bboxes.length,g.buffer}static serialize(i,a){const d=i.toArrayBuffer();return a&&a.push(d),{buffer:d}}static deserialize(i){return new Vc(i.buffer)}}const Is={};function St(l,i,a={}){if(Is[l])throw new Error(`${l} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:l,writeable:!1}),Is[l]={klass:i,omit:a.omit||[],shallow:a.shallow||[]}}St("Object",Object),St("TransferableGridIndex",Vc),St("Color",lr),St("Error",Error),St("AJAXError",_i),St("ResolvedImage",Ai),St("StylePropertyFunction",hd),St("StyleExpression",Rp,{omit:["_evaluator"]}),St("ZoomDependentExpression",vl),St("ZoomConstantExpression",Ap),St("CompoundExpression",hs,{omit:["_evaluate"]});for(const l in gl)gl[l]._classRegistryKey||St(`Expression_${l}`,gl[l]);function wl(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function Wp(l){return l.$name||l.constructor._classRegistryKey}function Sl(l){return!function(i){if(i===null||typeof i!="object")return!1;const a=Wp(i);return!(!a||a==="Object")}(l)&&(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||l instanceof Error||wl(l)||Qr(l)||ArrayBuffer.isView(l)||l instanceof ImageData)}function $c(l,i){if(Sl(l))return(wl(l)||Qr(l))&&i&&i.push(l),ArrayBuffer.isView(l)&&i&&i.push(l.buffer),l instanceof ImageData&&i&&i.push(l.data.buffer),l;if(Array.isArray(l)){const v=[];for(const x of l)v.push($c(x,i));return v}if(typeof l!="object")throw new Error("can't serialize object of type "+typeof l);const a=Wp(l);if(!a)throw new Error(`can't serialize object of unregistered class ${l.constructor.name}`);if(!Is[a])throw new Error(`${a} is not registered.`);const{klass:d}=Is[a],g=d.serialize?d.serialize(l,i):{};if(d.serialize){if(i&&g===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in l){if(!l.hasOwnProperty(v)||Is[a].omit.indexOf(v)>=0)continue;const x=l[v];g[v]=Is[a].shallow.indexOf(v)>=0?x:$c(x,i)}l instanceof Error&&(g.message=l.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return a!=="Object"&&(g.$name=a),g}function Zc(l){if(Sl(l))return l;if(Array.isArray(l))return l.map(Zc);if(typeof l!="object")throw new Error("can't deserialize object of type "+typeof l);const i=Wp(l)||"Object";if(!Is[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:a}=Is[i];if(!a)throw new Error(`can't deserialize unregistered class ${i}`);if(a.deserialize)return a.deserialize(l);const d=Object.create(a.prototype);for(const g of Object.keys(l)){if(g==="$name")continue;const v=l[g];d[g]=Is[i].shallow.indexOf(g)>=0?v:Zc(v)}return d}class Gc{constructor(){this.first=!0}update(i,a){const d=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=a),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=d,!0))}}const mr={"Latin-1 Supplement":l=>l>=128&&l<=255,"Hangul Jamo":l=>l>=4352&&l<=4607,Khmer:l=>l>=6016&&l<=6143,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Katakana:l=>l>=12448&&l<=12543,Kanbun:l=>l>=12688&&l<=12703,"CJK Strokes":l=>l>=12736&&l<=12783,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"Private Use Area":l=>l>=57344&&l<=63743,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function Hc(l){for(const i of l)if(qc(i.charCodeAt(0)))return!0;return!1}function vd(l){for(const i of l)if(!ey(i.charCodeAt(0)))return!1;return!0}function xd(l){const i=l.map(a=>{try{return new RegExp(`\\p{sc=${a}}`,"u").source}catch{return null}}).filter(a=>a);return new RegExp(i.join("|"),"u")}const Jg=xd(["Arab","Dupl","Mong","Ougr","Syrc"]);function ey(l){return!Jg.test(String.fromCodePoint(l))}const Xp=xd(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function qc(l){return!(l!==746&&l!==747&&(l<4352||!(mr["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||mr["CJK Compatibility"](l)||mr["CJK Strokes"](l)||!(!mr["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||mr["Enclosed CJK Letters and Months"](l)||mr["Ideographic Description Characters"](l)||mr.Kanbun(l)||mr.Katakana(l)&&l!==12540||!(!mr["Halfwidth and Fullwidth Forms"](l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!mr["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||mr["Vertical Forms"](l)||mr["Yijing Hexagram Symbols"](l)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(l))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(l))||Xp.test(String.fromCodePoint(l)))))}function Kp(l){return!(qc(l)||function(i){return!!(mr["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||mr["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||mr["Letterlike Symbols"](i)||mr["Number Forms"](i)||mr["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||mr["Control Pictures"](i)&&i!==9251||mr["Optical Character Recognition"](i)||mr["Enclosed Alphanumerics"](i)||mr["Geometric Shapes"](i)||mr["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||mr["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||mr["CJK Symbols and Punctuation"](i)||mr.Katakana(i)||mr["Private Use Area"](i)||mr["CJK Compatibility Forms"](i)||mr["Small Form Variants"](i)||mr["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(l))}const G0=xd(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Yp(l){return G0.test(String.fromCodePoint(l))}function H0(l,i){return!(!i&&Yp(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||mr.Khmer(l))}function ty(l){for(const i of l)if(Yp(i.charCodeAt(0)))return!0;return!1}const wo=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(l){this.pluginStatus=l.pluginStatus,this.pluginURL=l.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(l){if(wo.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=l.applyArabicShaping,this.processBidirectionalText=l.processBidirectionalText,this.processStyledBidirectionalText=l.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(l,i){return c(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(l.pluginStatus!=="loading")return this.setState(l),l;const a=l.pluginURL,d=new Promise(v=>{this.loadScriptResolve=v});i(a);const g=new Promise(v=>setTimeout(()=>v(),this.TIMEOUT));if(yield Promise.race([d,g]),this.isParsed()){const v={pluginStatus:"loaded",pluginURL:a};return this.setState(v),v}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${a}`)})}};class Hr{constructor(i,a){this.zoom=i,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Gc,this.transition={})}isSupportedScript(i){return function(a,d){for(const g of a)if(!H0(g.charCodeAt(0),d))return!1;return!0}(i,wo.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,a=i-Math.floor(i),d=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*a}}}class bd{constructor(i,a){this.property=i,this.value=a,this.expression=function(d,g){if(ud(d))return new hd(d,g);if(Lc(d)){const v=Dp(d,g);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=d;return g.type==="color"&&typeof d=="string"?v=lr.parse(d):g.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(d)?v=ci.parse(d):g.type==="projectionDefinition"&&typeof d=="string"&&(v=ri.parse(d)):v=nn.parse(d),{kind:"constant",evaluate:()=>v}}}(a===void 0?i.specification.default:a,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,a,d){return this.property.possiblyEvaluate(this,i,a,d)}}class Qp{constructor(i){this.property=i,this.value=new bd(i,void 0)}transitioned(i,a){return new ef(this.property,this.value,a,Wt({},i.transition,this.transition),i.now)}untransitioned(){return new ef(this.property,this.value,null,{},0)}}class Jp{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return Yt(this._values[i].value.value)}setValue(i,a){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Qp(this._values[i].property)),this._values[i].value=new bd(this._values[i].property,a===null?void 0:Yt(a))}getTransition(i){return Yt(this._values[i].transition)}setTransition(i,a){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Qp(this._values[i].property)),this._values[i].transition=Yt(a)||void 0}serialize(){const i={};for(const a of Object.keys(this._values)){const d=this.getValue(a);d!==void 0&&(i[a]=d);const g=this.getTransition(a);g!==void 0&&(i[`${a}-transition`]=g)}return i}transitioned(i,a){const d=new tf(this._properties);for(const g of Object.keys(this._values))d._values[g]=this._values[g].transitioned(i,a._values[g]);return d}untransitioned(){const i=new tf(this._properties);for(const a of Object.keys(this._values))i._values[a]=this._values[a].untransitioned();return i}}class ef{constructor(i,a,d,g,v){this.property=i,this.value=a,this.begin=v+g.delay||0,this.end=this.begin+g.duration||0,i.specification.transition&&(g.delay||g.duration)&&(this.prior=d)}possiblyEvaluate(i,a,d){const g=i.now||0,v=this.value.possiblyEvaluate(i,a,d),x=this.prior;if(x){if(g>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(g<this.begin)return x.possiblyEvaluate(i,a,d);{const w=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(i,a,d),v,at(w))}}return v}}class tf{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,a,d){const g=new wd(this._properties);for(const v of Object.keys(this._values))g._values[v]=this._values[v].possiblyEvaluate(i,a,d);return g}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class ry{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}hasValue(i){return this._values[i].value!==void 0}getValue(i){return Yt(this._values[i].value)}setValue(i,a){this._values[i]=new bd(this._values[i].property,a===null?void 0:Yt(a))}serialize(){const i={};for(const a of Object.keys(this._values)){const d=this.getValue(a);d!==void 0&&(i[a]=d)}return i}possiblyEvaluate(i,a,d){const g=new wd(this._properties);for(const v of Object.keys(this._values))g._values[v]=this._values[v].possiblyEvaluate(i,a,d);return g}}class Yi{constructor(i,a,d){this.property=i,this.value=a,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,a,d,g){return this.property.evaluate(this.value,this.parameters,i,a,d,g)}}class wd{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Dt{constructor(i){this.specification=i}possiblyEvaluate(i,a){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(a)}interpolate(i,a,d){const g=Ki[this.specification.type];return g?g(i,a,d):i}}class Ht{constructor(i,a){this.specification=i,this.overrides=a}possiblyEvaluate(i,a,d,g){return new Yi(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(a,null,{},d,g)}:i.expression,a)}interpolate(i,a,d){if(i.value.kind!=="constant"||a.value.kind!=="constant")return i;if(i.value.value===void 0||a.value.value===void 0)return new Yi(this,{kind:"constant",value:void 0},i.parameters);const g=Ki[this.specification.type];if(g){const v=g(i.value.value,a.value.value,d);return new Yi(this,{kind:"constant",value:v},i.parameters)}return i}evaluate(i,a,d,g,v,x){return i.kind==="constant"?i.value:i.evaluate(a,d,g,v,x)}}class Sd extends Ht{possiblyEvaluate(i,a,d,g){if(i.value===void 0)return new Yi(this,{kind:"constant",value:void 0},a);if(i.expression.kind==="constant"){const v=i.expression.evaluate(a,null,{},d,g),x=i.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,w=this._calculate(x,x,x,a);return new Yi(this,{kind:"constant",value:w},a)}if(i.expression.kind==="camera"){const v=this._calculate(i.expression.evaluate({zoom:a.zoom-1}),i.expression.evaluate({zoom:a.zoom}),i.expression.evaluate({zoom:a.zoom+1}),a);return new Yi(this,{kind:"constant",value:v},a)}return new Yi(this,i.expression,a)}evaluate(i,a,d,g,v,x){if(i.kind==="source"){const w=i.evaluate(a,d,g,v,x);return this._calculate(w,w,w,a)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(a.zoom)-1},d,g),i.evaluate({zoom:Math.floor(a.zoom)},d,g),i.evaluate({zoom:Math.floor(a.zoom)+1},d,g),a):i.value}_calculate(i,a,d,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:i,to:a}:{from:d,to:a}}interpolate(i){return i}}class Td{constructor(i){this.specification=i}possiblyEvaluate(i,a,d,g){if(i.value!==void 0){if(i.expression.kind==="constant"){const v=i.expression.evaluate(a,null,{},d,g);return this._calculate(v,v,v,a)}return this._calculate(i.expression.evaluate(new Hr(Math.floor(a.zoom-1),a)),i.expression.evaluate(new Hr(Math.floor(a.zoom),a)),i.expression.evaluate(new Hr(Math.floor(a.zoom+1),a)),a)}}_calculate(i,a,d,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:i,to:a}:{from:d,to:a}}interpolate(i){return i}}class Cd{constructor(i){this.specification=i}possiblyEvaluate(i,a,d,g){return!!i.expression.evaluate(a,null,{},d,g)}interpolate(){return!1}}class bi{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in i){const d=i[a];d.specification.overridable&&this.overridableProperties.push(a);const g=this.defaultPropertyValues[a]=new bd(d,void 0),v=this.defaultTransitionablePropertyValues[a]=new Qp(d);this.defaultTransitioningPropertyValues[a]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=g.possiblyEvaluate({})}}}St("DataDrivenProperty",Ht),St("DataConstantProperty",Dt),St("CrossFadedDataDrivenProperty",Sd),St("CrossFadedProperty",Td),St("ColorRampProperty",Cd);const ny="-transition";class no extends Wi{constructor(i,a){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),a.layout&&(this._unevaluatedLayout=new ry(a.layout)),a.paint)){this._transitionablePaint=new Jp(a.paint);for(const d in i.paint)this.setPaintProperty(d,i.paint[d],{validate:!1});for(const d in i.layout)this.setLayoutProperty(d,i.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new wd(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,a,d={}){a!=null&&this._validate(Qg,`layers.${this.id}.layout.${i}`,i,a,d)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,a):this.visibility=a)}getPaintProperty(i){return i.endsWith(ny)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,a,d={}){if(a!=null&&this._validate(Uc,`layers.${this.id}.paint.${i}`,i,a,d))return!1;if(i.endsWith(ny))return this._transitionablePaint.setTransition(i.slice(0,-11),a||void 0),!1;{const g=this._transitionablePaint._values[i],v=g.property.specification["property-type"]==="cross-faded-data-driven",x=g.value.isDataDriven(),w=g.value;this._transitionablePaint.setValue(i,a),this._handleSpecialPaintPropertyUpdate(i);const P=this._transitionablePaint._values[i].value;return P.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(i,w,P)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,a,d){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,a){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,a)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),or(i,(a,d)=>!(a===void 0||d==="layout"&&!Object.keys(a).length||d==="paint"&&!Object.keys(a).length))}_validate(i,a,d,g,v={}){return(!v||v.validate!==!1)&&_d(this,i.call(Ia,{key:a,layerType:this.type,objectKey:d,value:g,styleSpec:se,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const a=this.paint.get(i);if(a instanceof Yi&&_l(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const q0={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Wc{constructor(i,a){this._structArray=i,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ln{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,a){return i._trim(),a&&(i.isTransferred=!0,a.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const a=Object.create(this.prototype);return a.arrayBuffer=i.arrayBuffer,a.length=i.length,a.capacity=i.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function qr(l,i=1){let a=0,d=0;return{members:l.map(g=>{const v=q0[g.type].BYTES_PER_ELEMENT,x=a=iy(a,Math.max(i,v)),w=g.components||1;return d=Math.max(d,v),a+=v*w,{name:g.name,type:g.type,components:w,offset:x}}),size:iy(a,Math.max(d,i)),alignment:i}}function iy(l,i){return Math.ceil(l/i)*i}class Xc extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a){const d=this.length;return this.resize(d+1),this.emplace(d,i,a)}emplace(i,a,d){const g=2*i;return this.int16[g+0]=a,this.int16[g+1]=d,i}}Xc.prototype.bytesPerElement=4,St("StructArrayLayout2i4",Xc);class Pd extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,d){const g=this.length;return this.resize(g+1),this.emplace(g,i,a,d)}emplace(i,a,d,g){const v=3*i;return this.int16[v+0]=a,this.int16[v+1]=d,this.int16[v+2]=g,i}}Pd.prototype.bytesPerElement=6,St("StructArrayLayout3i6",Pd);class Ed extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,d,g){const v=this.length;return this.resize(v+1),this.emplace(v,i,a,d,g)}emplace(i,a,d,g,v){const x=4*i;return this.int16[x+0]=a,this.int16[x+1]=d,this.int16[x+2]=g,this.int16[x+3]=v,i}}Ed.prototype.bytesPerElement=8,St("StructArrayLayout4i8",Ed);class rf extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,d,g,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,a,d,g,v,x)}emplace(i,a,d,g,v,x,w){const P=6*i;return this.int16[P+0]=a,this.int16[P+1]=d,this.int16[P+2]=g,this.int16[P+3]=v,this.int16[P+4]=x,this.int16[P+5]=w,i}}rf.prototype.bytesPerElement=12,St("StructArrayLayout2i4i12",rf);class nf extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,d,g,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,a,d,g,v,x)}emplace(i,a,d,g,v,x,w){const P=4*i,k=8*i;return this.int16[P+0]=a,this.int16[P+1]=d,this.uint8[k+4]=g,this.uint8[k+5]=v,this.uint8[k+6]=x,this.uint8[k+7]=w,i}}nf.prototype.bytesPerElement=8,St("StructArrayLayout2i4ub8",nf);class Rs extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a){const d=this.length;return this.resize(d+1),this.emplace(d,i,a)}emplace(i,a,d){const g=2*i;return this.float32[g+0]=a,this.float32[g+1]=d,i}}Rs.prototype.bytesPerElement=8,St("StructArrayLayout2f8",Rs);class Md extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,d,g,v,x,w,P,k,D){const j=this.length;return this.resize(j+1),this.emplace(j,i,a,d,g,v,x,w,P,k,D)}emplace(i,a,d,g,v,x,w,P,k,D,j){const Z=10*i;return this.uint16[Z+0]=a,this.uint16[Z+1]=d,this.uint16[Z+2]=g,this.uint16[Z+3]=v,this.uint16[Z+4]=x,this.uint16[Z+5]=w,this.uint16[Z+6]=P,this.uint16[Z+7]=k,this.uint16[Z+8]=D,this.uint16[Z+9]=j,i}}Md.prototype.bytesPerElement=20,St("StructArrayLayout10ui20",Md);class Kc extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,d,g,v,x,w,P,k,D,j,Z){const H=this.length;return this.resize(H+1),this.emplace(H,i,a,d,g,v,x,w,P,k,D,j,Z)}emplace(i,a,d,g,v,x,w,P,k,D,j,Z,H){const W=12*i;return this.int16[W+0]=a,this.int16[W+1]=d,this.int16[W+2]=g,this.int16[W+3]=v,this.uint16[W+4]=x,this.uint16[W+5]=w,this.uint16[W+6]=P,this.uint16[W+7]=k,this.int16[W+8]=D,this.int16[W+9]=j,this.int16[W+10]=Z,this.int16[W+11]=H,i}}Kc.prototype.bytesPerElement=24,St("StructArrayLayout4i4ui4i24",Kc);class kd extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,d){const g=this.length;return this.resize(g+1),this.emplace(g,i,a,d)}emplace(i,a,d,g){const v=3*i;return this.float32[v+0]=a,this.float32[v+1]=d,this.float32[v+2]=g,i}}kd.prototype.bytesPerElement=12,St("StructArrayLayout3f12",kd);class Yc extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const a=this.length;return this.resize(a+1),this.emplace(a,i)}emplace(i,a){return this.uint32[1*i+0]=a,i}}Yc.prototype.bytesPerElement=4,St("StructArrayLayout1ul4",Yc);class sf extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,d,g,v,x,w,P,k){const D=this.length;return this.resize(D+1),this.emplace(D,i,a,d,g,v,x,w,P,k)}emplace(i,a,d,g,v,x,w,P,k,D){const j=10*i,Z=5*i;return this.int16[j+0]=a,this.int16[j+1]=d,this.int16[j+2]=g,this.int16[j+3]=v,this.int16[j+4]=x,this.int16[j+5]=w,this.uint32[Z+3]=P,this.uint16[j+8]=k,this.uint16[j+9]=D,i}}sf.prototype.bytesPerElement=20,St("StructArrayLayout6i1ul2ui20",sf);class Tl extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,d,g,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,a,d,g,v,x)}emplace(i,a,d,g,v,x,w){const P=6*i;return this.int16[P+0]=a,this.int16[P+1]=d,this.int16[P+2]=g,this.int16[P+3]=v,this.int16[P+4]=x,this.int16[P+5]=w,i}}Tl.prototype.bytesPerElement=12,St("StructArrayLayout2i2i2i12",Tl);class Ra extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,d,g,v){const x=this.length;return this.resize(x+1),this.emplace(x,i,a,d,g,v)}emplace(i,a,d,g,v,x){const w=4*i,P=8*i;return this.float32[w+0]=a,this.float32[w+1]=d,this.float32[w+2]=g,this.int16[P+6]=v,this.int16[P+7]=x,i}}Ra.prototype.bytesPerElement=16,St("StructArrayLayout2f1f2i16",Ra);class of extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,d,g,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,a,d,g,v,x)}emplace(i,a,d,g,v,x,w){const P=16*i,k=4*i,D=8*i;return this.uint8[P+0]=a,this.uint8[P+1]=d,this.float32[k+1]=g,this.float32[k+2]=v,this.int16[D+6]=x,this.int16[D+7]=w,i}}of.prototype.bytesPerElement=16,St("StructArrayLayout2ub2f2i16",of);class Qc extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,d){const g=this.length;return this.resize(g+1),this.emplace(g,i,a,d)}emplace(i,a,d,g){const v=3*i;return this.uint16[v+0]=a,this.uint16[v+1]=d,this.uint16[v+2]=g,i}}Qc.prototype.bytesPerElement=6,St("StructArrayLayout3ui6",Qc);class Aa extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,d,g,v,x,w,P,k,D,j,Z,H,W,J,ie,ue){const Me=this.length;return this.resize(Me+1),this.emplace(Me,i,a,d,g,v,x,w,P,k,D,j,Z,H,W,J,ie,ue)}emplace(i,a,d,g,v,x,w,P,k,D,j,Z,H,W,J,ie,ue,Me){const ge=24*i,G=12*i,ne=48*i;return this.int16[ge+0]=a,this.int16[ge+1]=d,this.uint16[ge+2]=g,this.uint16[ge+3]=v,this.uint32[G+2]=x,this.uint32[G+3]=w,this.uint32[G+4]=P,this.uint16[ge+10]=k,this.uint16[ge+11]=D,this.uint16[ge+12]=j,this.float32[G+7]=Z,this.float32[G+8]=H,this.uint8[ne+36]=W,this.uint8[ne+37]=J,this.uint8[ne+38]=ie,this.uint32[G+10]=ue,this.int16[ge+22]=Me,i}}Aa.prototype.bytesPerElement=48,St("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Aa);class af extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,d,g,v,x,w,P,k,D,j,Z,H,W,J,ie,ue,Me,ge,G,ne,ye,Ne,rt,Ue,Ze,it,nt){const ot=this.length;return this.resize(ot+1),this.emplace(ot,i,a,d,g,v,x,w,P,k,D,j,Z,H,W,J,ie,ue,Me,ge,G,ne,ye,Ne,rt,Ue,Ze,it,nt)}emplace(i,a,d,g,v,x,w,P,k,D,j,Z,H,W,J,ie,ue,Me,ge,G,ne,ye,Ne,rt,Ue,Ze,it,nt,ot){const Qe=32*i,Ct=16*i;return this.int16[Qe+0]=a,this.int16[Qe+1]=d,this.int16[Qe+2]=g,this.int16[Qe+3]=v,this.int16[Qe+4]=x,this.int16[Qe+5]=w,this.int16[Qe+6]=P,this.int16[Qe+7]=k,this.uint16[Qe+8]=D,this.uint16[Qe+9]=j,this.uint16[Qe+10]=Z,this.uint16[Qe+11]=H,this.uint16[Qe+12]=W,this.uint16[Qe+13]=J,this.uint16[Qe+14]=ie,this.uint16[Qe+15]=ue,this.uint16[Qe+16]=Me,this.uint16[Qe+17]=ge,this.uint16[Qe+18]=G,this.uint16[Qe+19]=ne,this.uint16[Qe+20]=ye,this.uint16[Qe+21]=Ne,this.uint16[Qe+22]=rt,this.uint32[Ct+12]=Ue,this.float32[Ct+13]=Ze,this.float32[Ct+14]=it,this.uint16[Qe+30]=nt,this.uint16[Qe+31]=ot,i}}af.prototype.bytesPerElement=64,St("StructArrayLayout8i15ui1ul2f2ui64",af);class Id extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const a=this.length;return this.resize(a+1),this.emplace(a,i)}emplace(i,a){return this.float32[1*i+0]=a,i}}Id.prototype.bytesPerElement=4,St("StructArrayLayout1f4",Id);class Rd extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,d){const g=this.length;return this.resize(g+1),this.emplace(g,i,a,d)}emplace(i,a,d,g){const v=3*i;return this.uint16[6*i+0]=a,this.float32[v+1]=d,this.float32[v+2]=g,i}}Rd.prototype.bytesPerElement=12,St("StructArrayLayout1ui2f12",Rd);class lf extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,d){const g=this.length;return this.resize(g+1),this.emplace(g,i,a,d)}emplace(i,a,d,g){const v=4*i;return this.uint32[2*i+0]=a,this.uint16[v+2]=d,this.uint16[v+3]=g,i}}lf.prototype.bytesPerElement=8,St("StructArrayLayout1ul2ui8",lf);class y extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a){const d=this.length;return this.resize(d+1),this.emplace(d,i,a)}emplace(i,a,d){const g=2*i;return this.uint16[g+0]=a,this.uint16[g+1]=d,i}}y.prototype.bytesPerElement=4,St("StructArrayLayout2ui4",y);class r extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const a=this.length;return this.resize(a+1),this.emplace(a,i)}emplace(i,a){return this.uint16[1*i+0]=a,i}}r.prototype.bytesPerElement=2,St("StructArrayLayout1ui2",r);class o extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,d,g){const v=this.length;return this.resize(v+1),this.emplace(v,i,a,d,g)}emplace(i,a,d,g,v){const x=4*i;return this.float32[x+0]=a,this.float32[x+1]=d,this.float32[x+2]=g,this.float32[x+3]=v,i}}o.prototype.bytesPerElement=16,St("StructArrayLayout4f16",o);class h extends Wc{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new F(this.anchorPointX,this.anchorPointY)}}h.prototype.size=20;class m extends sf{get(i){return new h(this,i)}}St("CollisionBoxArray",m);class _ extends Wc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}_.prototype.size=48;class b extends Aa{get(i){return new _(this,i)}}St("PlacedSymbolArray",b);class T extends Wc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}T.prototype.size=64;class M extends af{get(i){return new T(this,i)}}St("SymbolInstanceArray",M);class R extends Id{getoffsetX(i){return this.float32[1*i+0]}}St("GlyphOffsetArray",R);class O extends Pd{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}St("SymbolLineVertexArray",O);class U extends Wc{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}U.prototype.size=12;class $ extends Rd{get(i){return new U(this,i)}}St("TextAnchorOffsetArray",$);class K extends Wc{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}K.prototype.size=8;class ee extends lf{get(i){return new K(this,i)}}St("FeatureIndexArray",ee);class ae extends Xc{}class oe extends Xc{}class le extends Xc{}class fe extends rf{}class _e extends nf{}class xe extends Rs{}class be extends Md{}class ke extends Kc{}class Pe extends kd{}class Le extends Yc{}class Fe extends Tl{}class Ke extends of{}class qe extends Qc{}class $e extends y{}const ft=qr([{name:"a_pos",components:2,type:"Int16"}],4),{members:ut}=ft;class Ye{constructor(i=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=i}prepareSegment(i,a,d,g){const v=this.segments[this.segments.length-1];return i>Ye.MAX_VERTEX_ARRAY_LENGTH&&At(`Max vertices per segment is ${Ye.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Ye.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!v||v.vertexLength+i>Ye.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==g?this.createNewSegment(a,d,g):v}createNewSegment(i,a,d){const g={vertexOffset:i.length,primitiveOffset:a.length,vertexLength:0,primitiveLength:0,vaos:{}};return d!==void 0&&(g.sortKey=d),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(g),g}getOrCreateLatestSegment(i,a,d){return this.prepareSegment(0,i,a,d)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const i of this.segments)for(const a in i.vaos)i.vaos[a].destroy()}static simpleSegment(i,a,d,g){return new Ye([{vertexOffset:i,primitiveOffset:a,vertexLength:d,primitiveLength:g,vaos:{},sortKey:0}])}}function kt(l,i){return 256*(l=Lt(Math.floor(l),0,255))+Lt(Math.floor(i),0,255)}Ye.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,St("SegmentVector",Ye);const Qt=qr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Pr,en,Or,Ur={exports:{}},Wr={exports:{}},Dr={exports:{}},Vr=function(){if(Or)return Ur.exports;Or=1;var l=(Pr||(Pr=1,Wr.exports=function(a,d){var g,v,x,w,P,k,D,j;for(v=a.length-(g=3&a.length),x=d,P=3432918353,k=461845907,j=0;j<v;)D=255&a.charCodeAt(j)|(255&a.charCodeAt(++j))<<8|(255&a.charCodeAt(++j))<<16|(255&a.charCodeAt(++j))<<24,++j,x=27492+(65535&(w=5*(65535&(x=(x^=D=(65535&(D=(D=(65535&D)*P+(((D>>>16)*P&65535)<<16)&4294967295)<<15|D>>>17))*k+(((D>>>16)*k&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(w>>>16)&65535)<<16);switch(D=0,g){case 3:D^=(255&a.charCodeAt(j+2))<<16;case 2:D^=(255&a.charCodeAt(j+1))<<8;case 1:x^=D=(65535&(D=(D=(65535&(D^=255&a.charCodeAt(j)))*P+(((D>>>16)*P&65535)<<16)&4294967295)<<15|D>>>17))*k+(((D>>>16)*k&65535)<<16)&4294967295}return x^=a.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0}),Wr.exports),i=(en||(en=1,Dr.exports=function(a,d){for(var g,v=a.length,x=d^v,w=0;v>=4;)g=1540483477*(65535&(g=255&a.charCodeAt(w)|(255&a.charCodeAt(++w))<<8|(255&a.charCodeAt(++w))<<16|(255&a.charCodeAt(++w))<<24))+((1540483477*(g>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),v-=4,++w;switch(v){case 3:x^=(255&a.charCodeAt(w+2))<<16;case 2:x^=(255&a.charCodeAt(w+1))<<8;case 1:x=1540483477*(65535&(x^=255&a.charCodeAt(w)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0}),Dr.exports);return Ur.exports=l,Ur.exports.murmur3=l,Ur.exports.murmur2=i,Ur.exports}(),jn=S(Vr);class Sn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,a,d,g){this.ids.push(Wn(i)),this.positions.push(a,d,g)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=Wn(i);let d=0,g=this.ids.length-1;for(;d<g;){const x=d+g>>1;this.ids[x]>=a?g=x:d=x+1}const v=[];for(;this.ids[d]===a;)v.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return v}static serialize(i,a){const d=new Float64Array(i.ids),g=new Uint32Array(i.positions);return di(d,g,0,d.length-1),a&&a.push(d.buffer,g.buffer),{ids:d,positions:g}}static deserialize(i){const a=new Sn;return a.ids=i.ids,a.positions=i.positions,a.indexed=!0,a}}function Wn(l){const i=+l;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:jn(String(l))}function di(l,i,a,d){for(;a<d;){const g=l[a+d>>1];let v=a-1,x=d+1;for(;;){do v++;while(l[v]<g);do x--;while(l[x]>g);if(v>=x)break;io(l,v,x),io(i,3*v,3*x),io(i,3*v+1,3*x+1),io(i,3*v+2,3*x+2)}x-a<d-x?(di(l,i,a,x),a=x+1):(di(l,i,x+1,d),d=x)}}function io(l,i,a){const d=l[i];l[i]=l[a],l[a]=d}St("FeaturePositionMap",Sn);class Qi{constructor(i,a){this.gl=i.gl,this.location=a}}class so extends Qi{constructor(i,a){super(i,a),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class Da extends Qi{constructor(i,a){super(i,a),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class Jc extends Qi{constructor(i,a){super(i,a),this.current=lr.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const Ad=new Float32Array(16);function Xo(l){return[kt(255*l.r,255*l.g),kt(255*l.b,255*l.a)]}class hi{constructor(i,a,d){this.value=i,this.uniformNames=a.map(g=>`u_${g}`),this.type=d}setUniform(i,a,d){i.set(d.constantOr(this.value))}getBinding(i,a,d){return this.type==="color"?new Jc(i,a):new so(i,a)}}class Ji{constructor(i,a){this.uniformNames=a.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=i.tlbr}setUniform(i,a,d,g){const v=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&i.set(v)}getBinding(i,a,d){return d.substr(0,9)==="u_pattern"?new Da(i,a):new so(i,a)}}class wi{constructor(i,a,d,g){this.expression=i,this.type=d,this.maxValue=0,this.paintVertexAttributes=a.map(v=>({name:`a_${v}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(i,a,d,g,v){const x=this.paintVertexArray.length,w=this.expression.evaluate(new Hr(0),a,{},g,[],v);this.paintVertexArray.resize(i),this._setPaintValue(x,i,w)}updatePaintArray(i,a,d,g){const v=this.expression.evaluate({zoom:0},d,g);this._setPaintValue(i,a,v)}_setPaintValue(i,a,d){if(this.type==="color"){const g=Xo(d);for(let v=i;v<a;v++)this.paintVertexArray.emplace(v,g[0],g[1])}else{for(let g=i;g<a;g++)this.paintVertexArray.emplace(g,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Si{constructor(i,a,d,g,v,x){this.expression=i,this.uniformNames=a.map(w=>`u_${w}_t`),this.type=d,this.useIntegerZoom=g,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=a.map(w=>({name:`a_${w}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(i,a,d,g,v){const x=this.expression.evaluate(new Hr(this.zoom),a,{},g,[],v),w=this.expression.evaluate(new Hr(this.zoom+1),a,{},g,[],v),P=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(P,i,x,w)}updatePaintArray(i,a,d,g){const v=this.expression.evaluate({zoom:this.zoom},d,g),x=this.expression.evaluate({zoom:this.zoom+1},d,g);this._setPaintValue(i,a,v,x)}_setPaintValue(i,a,d,g){if(this.type==="color"){const v=Xo(d),x=Xo(g);for(let w=i;w<a;w++)this.paintVertexArray.emplace(w,v[0],v[1],x[0],x[1])}else{for(let v=i;v<a;v++)this.paintVertexArray.emplace(v,d,g);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(g))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,a){const d=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,g=Lt(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);i.set(g)}getBinding(i,a,d){return new so(i,a)}}class Xr{constructor(i,a,d,g,v,x){this.expression=i,this.type=a,this.useIntegerZoom=d,this.zoom=g,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(i,a,d){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(g,i,a.patterns&&a.patterns[this.layerId],d)}updatePaintArray(i,a,d,g,v){this._setPaintValues(i,a,d.patterns&&d.patterns[this.layerId],v)}_setPaintValues(i,a,d,g){if(!g||!d)return;const{min:v,mid:x,max:w}=d,P=g[v],k=g[x],D=g[w];if(P&&k&&D)for(let j=i;j<a;j++)this.zoomInPaintVertexArray.emplace(j,k.tl[0],k.tl[1],k.br[0],k.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],k.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(j,k.tl[0],k.tl[1],k.br[0],k.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],k.pixelRatio,D.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,Qt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,Qt.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ln{constructor(i,a,d){this.binders={},this._buffers=[];const g=[];for(const v in i.paint._values){if(!d(v))continue;const x=i.paint.get(v);if(!(x instanceof Yi&&_l(x.property.specification)))continue;const w=Kn(v,i.type),P=x.value,k=x.property.specification.type,D=x.property.useIntegerZoom,j=x.property.specification["property-type"],Z=j==="cross-faded"||j==="cross-faded-data-driven";if(P.kind==="constant")this.binders[v]=Z?new Ji(P.value,w):new hi(P.value,w,k),g.push(`/u_${v}`);else if(P.kind==="source"||Z){const H=sy(v,k,"source");this.binders[v]=Z?new Xr(P,k,D,a,H,i.id):new wi(P,w,k,H),g.push(`/a_${v}`)}else{const H=sy(v,k,"composite");this.binders[v]=new Si(P,w,k,D,a,H),g.push(`/z_${v}`)}}this.cacheKey=g.sort().join("")}getMaxValue(i){const a=this.binders[i];return a instanceof wi||a instanceof Si?a.maxValue:0}populatePaintArrays(i,a,d,g,v){for(const x in this.binders){const w=this.binders[x];(w instanceof wi||w instanceof Si||w instanceof Xr)&&w.populatePaintArray(i,a,d,g,v)}}setConstantPatternPositions(i,a){for(const d in this.binders){const g=this.binders[d];g instanceof Ji&&g.setConstantPatternPositions(i,a)}}updatePaintArrays(i,a,d,g,v){let x=!1;for(const w in i){const P=a.getPositions(w);for(const k of P){const D=d.feature(k.index);for(const j in this.binders){const Z=this.binders[j];if((Z instanceof wi||Z instanceof Si||Z instanceof Xr)&&Z.expression.isStateDependent===!0){const H=g.paint.get(j);Z.expression=H.value,Z.updatePaintArray(k.start,k.end,D,i[w],v),x=!0}}}}return x}defines(){const i=[];for(const a in this.binders){const d=this.binders[a];(d instanceof hi||d instanceof Ji)&&i.push(...d.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return i}getBinderAttributes(){const i=[];for(const a in this.binders){const d=this.binders[a];if(d instanceof wi||d instanceof Si)for(let g=0;g<d.paintVertexAttributes.length;g++)i.push(d.paintVertexAttributes[g].name);else if(d instanceof Xr)for(let g=0;g<Qt.members.length;g++)i.push(Qt.members[g].name)}return i}getBinderUniforms(){const i=[];for(const a in this.binders){const d=this.binders[a];if(d instanceof hi||d instanceof Ji||d instanceof Si)for(const g of d.uniformNames)i.push(g)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,a){const d=[];for(const g in this.binders){const v=this.binders[g];if(v instanceof hi||v instanceof Ji||v instanceof Si){for(const x of v.uniformNames)if(a[x]){const w=v.getBinding(i,a[x],x);d.push({name:x,property:g,binding:w})}}}return d}setUniforms(i,a,d,g){for(const{name:v,property:x,binding:w}of a)this.binders[x].setUniform(w,g,d.get(x),v)}updatePaintBuffers(i){this._buffers=[];for(const a in this.binders){const d=this.binders[a];if(i&&d instanceof Xr){const g=i.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(d instanceof wi||d instanceof Si)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(i){for(const a in this.binders){const d=this.binders[a];(d instanceof wi||d instanceof Si||d instanceof Xr)&&d.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const a=this.binders[i];(a instanceof wi||a instanceof Si||a instanceof Xr)&&a.destroy()}}}class Xn{constructor(i,a,d=()=>!0){this.programConfigurations={};for(const g of i)this.programConfigurations[g.id]=new Ln(g,a,d);this.needsUpload=!1,this._featureMap=new Sn,this._bufferOffset=0}populatePaintArrays(i,a,d,g,v,x){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(i,a,g,v,x);a.id!==void 0&&this._featureMap.add(a.id,d,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,a,d,g){for(const v of d)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(i,this._featureMap,a,v,g)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function Kn(l,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${i}-`,"").replace(/-/g,"_")]}function sy(l,i,a){const d={color:{source:Rs,composite:o},number:{source:Id,composite:Rs}},g=function(v){return{"line-pattern":{source:be,composite:be},"fill-pattern":{source:be,composite:be},"fill-extrusion-pattern":{source:be,composite:be}}[v]}(l);return g&&g[a]||d[i][a]}St("ConstantBinder",hi),St("CrossFadedConstantBinder",Ji),St("SourceExpressionBinder",wi),St("CrossFadedCompositeBinder",Xr),St("CompositeExpressionBinder",Si),St("ProgramConfiguration",Ln,{omit:["_buffers"]}),St("ProgramConfigurationSet",Xn);const cf=Math.pow(2,14)-1,oy=-cf-1;function za(l){const i=ct/l.extent,a=l.loadGeometry();for(let d=0;d<a.length;d++){const g=a[d];for(let v=0;v<g.length;v++){const x=g[v],w=Math.round(x.x*i),P=Math.round(x.y*i);x.x=Lt(w,oy,cf),x.y=Lt(P,oy,cf),(w<x.x||w>x.x+1||P<x.y||P>x.y+1)&&At("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function ja(l,i){return{type:l.type,id:l.id,properties:l.properties,geometry:i?za(l):[]}}const ay=-32768;function La(l,i,a,d,g){l.emplaceBack(ay+8*i+d,ay+8*a+g)}class Dd{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new oe,this.indexArray=new qe,this.segments=new Ye,this.programConfigurations=new Xn(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(i,a,d){const g=this.layers[0],v=[];let x=null,w=!1,P=g.type==="heatmap";if(g.type==="circle"){const D=g;x=D.layout.get("circle-sort-key"),w=!x.isConstant(),P=P||D.paint.get("circle-pitch-alignment")==="map"}const k=P?a.subdivisionGranularity.circle:1;for(const{feature:D,id:j,index:Z,sourceLayerIndex:H}of i){const W=this.layers[0]._featureFilter.needGeometry,J=ja(D,W);if(!this.layers[0]._featureFilter.filter(new Hr(this.zoom),J,d))continue;const ie=w?x.evaluate(J,{},d):void 0,ue={id:j,properties:D.properties,type:D.type,sourceLayerIndex:H,index:Z,geometry:W?J.geometry:za(D),patterns:{},sortKey:ie};v.push(ue)}w&&v.sort((D,j)=>D.sortKey-j.sortKey);for(const D of v){const{geometry:j,index:Z,sourceLayerIndex:H}=D,W=i[Z].feature;this.addFeature(D,j,Z,d,k),a.featureIndex.insert(W,j,Z,H,this.index)}}update(i,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,a,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,ut),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,a,d,g,v=1){let x;switch(v){case 1:x=[0,7];break;case 3:x=[0,2,5,7];break;case 5:x=[0,1,3,4,6,7];break;case 7:x=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${v}; valid values are 1, 3, 5, 7.`)}const w=x.length;for(const P of a)for(const k of P){const D=k.x,j=k.y;if(D<0||D>=ct||j<0||j>=ct)continue;const Z=this.segments.prepareSegment(w*w,this.layoutVertexArray,this.indexArray,i.sortKey),H=Z.vertexLength;for(let W=0;W<w;W++)for(let J=0;J<w;J++)La(this.layoutVertexArray,D,j,x[J],x[W]);for(let W=0;W<w-1;W++)for(let J=0;J<w-1;J++){const ie=H+W*w+J,ue=H+(W+1)*w+J;this.indexArray.emplaceBack(ie,ue+1,ie+1),this.indexArray.emplaceBack(ie,ue,ue+1)}Z.vertexLength+=w*w,Z.primitiveLength+=(w-1)*(w-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,{},g)}}function uf(l,i){for(let a=0;a<l.length;a++)if(jd(i,l[a]))return!0;for(let a=0;a<i.length;a++)if(jd(l,i[a]))return!0;return!!eu(l,i)}function ly(l,i,a){return!!jd(l,i)||!!W0(i,l,a)}function zd(l,i){if(l.length===1)return vS(i,l[0]);for(let a=0;a<i.length;a++){const d=i[a];for(let g=0;g<d.length;g++)if(jd(l,d[g]))return!0}for(let a=0;a<l.length;a++)if(vS(i,l[a]))return!0;for(let a=0;a<i.length;a++)if(eu(l,i[a]))return!0;return!1}function cy(l,i,a){if(l.length>1){if(eu(l,i))return!0;for(let d=0;d<i.length;d++)if(W0(i[d],l,a))return!0}for(let d=0;d<l.length;d++)if(W0(l[d],i,a))return!0;return!1}function eu(l,i){if(l.length===0||i.length===0)return!1;for(let a=0;a<l.length-1;a++){const d=l[a],g=l[a+1];for(let v=0;v<i.length-1;v++)if(Xj(d,g,i[v],i[v+1]))return!0}return!1}function Xj(l,i,a,d){return Zt(l,a,d)!==Zt(i,a,d)&&Zt(l,i,a)!==Zt(l,i,d)}function W0(l,i,a){const d=a*a;if(i.length===1)return l.distSqr(i[0])<d;for(let g=1;g<i.length;g++)if(_S(l,i[g-1],i[g])<d)return!0;return!1}function _S(l,i,a){const d=i.distSqr(a);if(d===0)return l.distSqr(i);const g=((l.x-i.x)*(a.x-i.x)+(l.y-i.y)*(a.y-i.y))/d;return l.distSqr(g<0?i:g>1?a:a.sub(i)._mult(g)._add(i))}function vS(l,i){let a,d,g,v=!1;for(let x=0;x<l.length;x++){a=l[x];for(let w=0,P=a.length-1;w<a.length;P=w++)d=a[w],g=a[P],d.y>i.y!=g.y>i.y&&i.x<(g.x-d.x)*(i.y-d.y)/(g.y-d.y)+d.x&&(v=!v)}return v}function jd(l,i){let a=!1;for(let d=0,g=l.length-1;d<l.length;g=d++){const v=l[d],x=l[g];v.y>i.y!=x.y>i.y&&i.x<(x.x-v.x)*(i.y-v.y)/(x.y-v.y)+v.x&&(a=!a)}return a}function Kj(l,i,a){const d=a[0],g=a[2];if(l.x<d.x&&i.x<d.x||l.x>g.x&&i.x>g.x||l.y<d.y&&i.y<d.y||l.y>g.y&&i.y>g.y)return!1;const v=Zt(l,i,a[0]);return v!==Zt(l,i,a[1])||v!==Zt(l,i,a[2])||v!==Zt(l,i,a[3])}function df(l,i,a){const d=i.paint.get(l).value;return d.kind==="constant"?d.value:a.programConfigurations.get(i.id).getMaxValue(l)}function uy(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function dy(l,i,a,d,g){if(!i[0]&&!i[1])return l;const v=F.convert(i)._mult(g);a==="viewport"&&v._rotate(-d);const x=[];for(let w=0;w<l.length;w++)x.push(l[w].sub(v));return x}let xS,bS;St("CircleBucket",Dd,{omit:["layers"]});var Yj={get paint(){return bS=bS||new bi({"circle-radius":new Ht(se.paint_circle["circle-radius"]),"circle-color":new Ht(se.paint_circle["circle-color"]),"circle-blur":new Ht(se.paint_circle["circle-blur"]),"circle-opacity":new Ht(se.paint_circle["circle-opacity"]),"circle-translate":new Dt(se.paint_circle["circle-translate"]),"circle-translate-anchor":new Dt(se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Dt(se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Dt(se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ht(se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ht(se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ht(se.paint_circle["circle-stroke-opacity"])})},get layout(){return xS=xS||new bi({"circle-sort-key":new Ht(se.layout_circle["circle-sort-key"])})}};class Qj extends no{constructor(i){super(i,Yj)}createBucket(i){return new Dd(i)}queryRadius(i){const a=i;return df("circle-radius",this,a)+df("circle-stroke-width",this,a)+uy(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:i,feature:a,featureState:d,geometry:g,transform:v,pixelsToTileUnits:x,pixelPosMatrix:w}){const P=dy(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-v.bearingInRadians,x),k=this.paint.get("circle-radius").evaluate(a,d)+this.paint.get("circle-stroke-width").evaluate(a,d),D=this.paint.get("circle-pitch-alignment")==="map",j=D?P:function(H,W){return H.map(J=>wS(J,W))}(P,w),Z=D?k*x:k;for(const H of g)for(const W of H){const J=D?W:wS(W,w);let ie=Z;const ue=st([],[W.x,W.y,0,1],w);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ie*=ue[3]/v.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ie*=v.cameraToCenterDistance/ue[3]),ly(j,J,ie))return!0}return!1}}function wS(l,i){const a=st([],[l.x,l.y,0,1],i);return new F(a[0]/a[3],a[1]/a[3])}class SS extends Dd{}let TS;St("HeatmapBucket",SS,{omit:["layers"]});var Jj={get paint(){return TS=TS||new bi({"heatmap-radius":new Ht(se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ht(se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Dt(se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Cd(se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Dt(se.paint_heatmap["heatmap-opacity"])})}};function X0(l,{width:i,height:a},d,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==i*a*d)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${i*a*d}`)}else g=new Uint8Array(i*a*d);return l.width=i,l.height=a,l.data=g,l}function CS(l,{width:i,height:a},d){if(i===l.width&&a===l.height)return;const g=X0({},{width:i,height:a},d);K0(l,g,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,i),height:Math.min(l.height,a)},d),l.width=i,l.height=a,l.data=g.data}function K0(l,i,a,d,g,v){if(g.width===0||g.height===0)return i;if(g.width>l.width||g.height>l.height||a.x>l.width-g.width||a.y>l.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>i.width||g.height>i.height||d.x>i.width-g.width||d.y>i.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const x=l.data,w=i.data;if(x===w)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<g.height;P++){const k=((a.y+P)*l.width+a.x)*v,D=((d.y+P)*i.width+d.x)*v;for(let j=0;j<g.width*v;j++)w[D+j]=x[k+j]}return i}class hf{constructor(i,a){X0(this,i,1,a)}resize(i){CS(this,i,1)}clone(){return new hf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,a,d,g,v){K0(i,a,d,g,v,1)}}class As{constructor(i,a){X0(this,i,4,a)}resize(i){CS(this,i,4)}replace(i,a){a?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new As({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,a,d,g,v){K0(i,a,d,g,v,4)}}function PS(l){const i={},a=l.resolution||256,d=l.clips?l.clips.length:1,g=l.image||new As({width:a,height:d});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const v=(x,w,P)=>{i[l.evaluationKey]=P;const k=l.expression.evaluate(i);g.data[x+w+0]=Math.floor(255*k.r/k.a),g.data[x+w+1]=Math.floor(255*k.g/k.a),g.data[x+w+2]=Math.floor(255*k.b/k.a),g.data[x+w+3]=Math.floor(255*k.a)};if(l.clips)for(let x=0,w=0;x<d;++x,w+=4*a)for(let P=0,k=0;P<a;P++,k+=4){const D=P/(a-1),{start:j,end:Z}=l.clips[x];v(w,k,j*(1-D)+Z*D)}else for(let x=0,w=0;x<a;x++,w+=4)v(0,w,x/(a-1));return g}St("AlphaImage",hf),St("RGBAImage",As);const Y0="big-fb";class eL extends no{createBucket(i){return new SS(i)}constructor(i){super(i,Jj),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=PS({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Y0)&&this.heatmapFbos.delete(Y0)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let ES;var tL={get paint(){return ES=ES||new bi({"hillshade-illumination-direction":new Dt(se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Dt(se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Dt(se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Dt(se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Dt(se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Dt(se.paint_hillshade["hillshade-accent-color"])})}};class rL extends no{constructor(i){super(i,tL)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const nL=qr([{name:"a_pos",components:2,type:"Int16"}],4),{members:iL}=nL;function Q0(l,i,a){const d=a.patternDependencies;let g=!1;for(const v of i){const x=v.paint.get(`${l}-pattern`);x.isConstant()||(g=!0);const w=x.constantOr(null);w&&(g=!0,d[w.to]=!0,d[w.from]=!0)}return g}function J0(l,i,a,d,g){const v=g.patternDependencies;for(const x of i){const w=x.paint.get(`${l}-pattern`).value;if(w.kind!=="constant"){let P=w.evaluate({zoom:d-1},a,{},g.availableImages),k=w.evaluate({zoom:d},a,{},g.availableImages),D=w.evaluate({zoom:d+1},a,{},g.availableImages);P=P&&P.name?P.name:P,k=k&&k.name?k.name:k,D=D&&D.name?D.name:D,v[P]=!0,v[k]=!0,v[D]=!0,a.patterns[x.id]={min:P,mid:k,max:D}}}return a}function MS(l,i,a,d,g){let v;if(g===function(x,w,P,k){let D=0;for(let j=w,Z=P-k;j<P;j+=k)D+=(x[Z]-x[j])*(x[j+1]+x[Z+1]),Z=j;return D}(l,i,a,d)>0)for(let x=i;x<a;x+=d)v=AS(x/d|0,l[x],l[x+1],v);else for(let x=a-d;x>=i;x-=d)v=AS(x/d|0,l[x],l[x+1],v);return v&&Ld(v,v.next)&&(gf(v),v=v.next),v}function tu(l,i){if(!l)return l;i||(i=l);let a,d=l;do if(a=!1,d.steiner||!Ld(d,d.next)&&Tn(d.prev,d,d.next)!==0)d=d.next;else{if(gf(d),d=i=d.prev,d===d.next)break;a=!0}while(a||d!==i);return i}function pf(l,i,a,d,g,v,x){if(!l)return;!x&&v&&function(P,k,D,j){let Z=P;do Z.z===0&&(Z.z=ex(Z.x,Z.y,k,D,j)),Z.prevZ=Z.prev,Z.nextZ=Z.next,Z=Z.next;while(Z!==P);Z.prevZ.nextZ=null,Z.prevZ=null,function(H){let W,J=1;do{let ie,ue=H;H=null;let Me=null;for(W=0;ue;){W++;let ge=ue,G=0;for(let ye=0;ye<J&&(G++,ge=ge.nextZ,ge);ye++);let ne=J;for(;G>0||ne>0&&ge;)G!==0&&(ne===0||!ge||ue.z<=ge.z)?(ie=ue,ue=ue.nextZ,G--):(ie=ge,ge=ge.nextZ,ne--),Me?Me.nextZ=ie:H=ie,ie.prevZ=Me,Me=ie;ue=ge}Me.nextZ=null,J*=2}while(W>1)}(Z)}(l,d,g,v);let w=l;for(;l.prev!==l.next;){const P=l.prev,k=l.next;if(v?oL(l,d,g,v):sL(l))i.push(P.i,l.i,k.i),gf(l),l=k.next,w=k.next;else if((l=k)===w){x?x===1?pf(l=aL(tu(l),i),i,a,d,g,v,2):x===2&&lL(l,i,a,d,g,v):pf(tu(l),i,a,d,g,v,1);break}}}function sL(l){const i=l.prev,a=l,d=l.next;if(Tn(i,a,d)>=0)return!1;const g=i.x,v=a.x,x=d.x,w=i.y,P=a.y,k=d.y,D=Math.min(g,v,x),j=Math.min(w,P,k),Z=Math.max(g,v,x),H=Math.max(w,P,k);let W=d.next;for(;W!==i;){if(W.x>=D&&W.x<=Z&&W.y>=j&&W.y<=H&&ff(g,w,v,P,x,k,W.x,W.y)&&Tn(W.prev,W,W.next)>=0)return!1;W=W.next}return!0}function oL(l,i,a,d){const g=l.prev,v=l,x=l.next;if(Tn(g,v,x)>=0)return!1;const w=g.x,P=v.x,k=x.x,D=g.y,j=v.y,Z=x.y,H=Math.min(w,P,k),W=Math.min(D,j,Z),J=Math.max(w,P,k),ie=Math.max(D,j,Z),ue=ex(H,W,i,a,d),Me=ex(J,ie,i,a,d);let ge=l.prevZ,G=l.nextZ;for(;ge&&ge.z>=ue&&G&&G.z<=Me;){if(ge.x>=H&&ge.x<=J&&ge.y>=W&&ge.y<=ie&&ge!==g&&ge!==x&&ff(w,D,P,j,k,Z,ge.x,ge.y)&&Tn(ge.prev,ge,ge.next)>=0||(ge=ge.prevZ,G.x>=H&&G.x<=J&&G.y>=W&&G.y<=ie&&G!==g&&G!==x&&ff(w,D,P,j,k,Z,G.x,G.y)&&Tn(G.prev,G,G.next)>=0))return!1;G=G.nextZ}for(;ge&&ge.z>=ue;){if(ge.x>=H&&ge.x<=J&&ge.y>=W&&ge.y<=ie&&ge!==g&&ge!==x&&ff(w,D,P,j,k,Z,ge.x,ge.y)&&Tn(ge.prev,ge,ge.next)>=0)return!1;ge=ge.prevZ}for(;G&&G.z<=Me;){if(G.x>=H&&G.x<=J&&G.y>=W&&G.y<=ie&&G!==g&&G!==x&&ff(w,D,P,j,k,Z,G.x,G.y)&&Tn(G.prev,G,G.next)>=0)return!1;G=G.nextZ}return!0}function aL(l,i){let a=l;do{const d=a.prev,g=a.next.next;!Ld(d,g)&&IS(d,a,a.next,g)&&mf(d,g)&&mf(g,d)&&(i.push(d.i,a.i,g.i),gf(a),gf(a.next),a=l=g),a=a.next}while(a!==l);return tu(a)}function lL(l,i,a,d,g,v){let x=l;do{let w=x.next.next;for(;w!==x.prev;){if(x.i!==w.i&&pL(x,w)){let P=RS(x,w);return x=tu(x,x.next),P=tu(P,P.next),pf(x,i,a,d,g,v,0),void pf(P,i,a,d,g,v,0)}w=w.next}x=x.next}while(x!==l)}function cL(l,i){let a=l.x-i.x;return a===0&&(a=l.y-i.y,a===0)&&(a=(l.next.y-l.y)/(l.next.x-l.x)-(i.next.y-i.y)/(i.next.x-i.x)),a}function uL(l,i){const a=function(g,v){let x=v;const w=g.x,P=g.y;let k,D=-1/0;if(Ld(g,x))return x;do{if(Ld(g,x.next))return x.next;if(P<=x.y&&P>=x.next.y&&x.next.y!==x.y){const J=x.x+(P-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(J<=w&&J>D&&(D=J,k=x.x<x.next.x?x:x.next,J===w))return k}x=x.next}while(x!==v);if(!k)return null;const j=k,Z=k.x,H=k.y;let W=1/0;x=k;do{if(w>=x.x&&x.x>=Z&&w!==x.x&&kS(P<H?w:D,P,Z,H,P<H?D:w,P,x.x,x.y)){const J=Math.abs(P-x.y)/(w-x.x);mf(x,g)&&(J<W||J===W&&(x.x>k.x||x.x===k.x&&dL(k,x)))&&(k=x,W=J)}x=x.next}while(x!==j);return k}(l,i);if(!a)return i;const d=RS(a,l);return tu(d,d.next),tu(a,a.next)}function dL(l,i){return Tn(l.prev,l,i.prev)<0&&Tn(i.next,l,l.next)<0}function ex(l,i,a,d,g){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-a)*g|0)|l<<8))|l<<4))|l<<2))|l<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-d)*g|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function hL(l){let i=l,a=l;do(i.x<a.x||i.x===a.x&&i.y<a.y)&&(a=i),i=i.next;while(i!==l);return a}function kS(l,i,a,d,g,v,x,w){return(g-x)*(i-w)>=(l-x)*(v-w)&&(l-x)*(d-w)>=(a-x)*(i-w)&&(a-x)*(v-w)>=(g-x)*(d-w)}function ff(l,i,a,d,g,v,x,w){return!(l===x&&i===w)&&kS(l,i,a,d,g,v,x,w)}function pL(l,i){return l.next.i!==i.i&&l.prev.i!==i.i&&!function(a,d){let g=a;do{if(g.i!==a.i&&g.next.i!==a.i&&g.i!==d.i&&g.next.i!==d.i&&IS(g,g.next,a,d))return!0;g=g.next}while(g!==a);return!1}(l,i)&&(mf(l,i)&&mf(i,l)&&function(a,d){let g=a,v=!1;const x=(a.x+d.x)/2,w=(a.y+d.y)/2;do g.y>w!=g.next.y>w&&g.next.y!==g.y&&x<(g.next.x-g.x)*(w-g.y)/(g.next.y-g.y)+g.x&&(v=!v),g=g.next;while(g!==a);return v}(l,i)&&(Tn(l.prev,l,i.prev)||Tn(l,i.prev,i))||Ld(l,i)&&Tn(l.prev,l,l.next)>0&&Tn(i.prev,i,i.next)>0)}function Tn(l,i,a){return(i.y-l.y)*(a.x-i.x)-(i.x-l.x)*(a.y-i.y)}function Ld(l,i){return l.x===i.x&&l.y===i.y}function IS(l,i,a,d){const g=py(Tn(l,i,a)),v=py(Tn(l,i,d)),x=py(Tn(a,d,l)),w=py(Tn(a,d,i));return g!==v&&x!==w||!(g!==0||!hy(l,a,i))||!(v!==0||!hy(l,d,i))||!(x!==0||!hy(a,l,d))||!(w!==0||!hy(a,i,d))}function hy(l,i,a){return i.x<=Math.max(l.x,a.x)&&i.x>=Math.min(l.x,a.x)&&i.y<=Math.max(l.y,a.y)&&i.y>=Math.min(l.y,a.y)}function py(l){return l>0?1:l<0?-1:0}function mf(l,i){return Tn(l.prev,l,l.next)<0?Tn(l,i,l.next)>=0&&Tn(l,l.prev,i)>=0:Tn(l,i,l.prev)<0||Tn(l,l.next,i)<0}function RS(l,i){const a=tx(l.i,l.x,l.y),d=tx(i.i,i.x,i.y),g=l.next,v=i.prev;return l.next=i,i.prev=l,a.next=g,g.prev=a,d.next=a,a.prev=d,v.next=d,d.prev=v,d}function AS(l,i,a,d){const g=tx(l,i,a);return d?(g.next=d.next,g.prev=d,d.next.prev=g,d.next=g):(g.prev=g,g.next=g),g}function gf(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function tx(l,i,a){return{i:l,x:i,y:a,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Nd{constructor(i,a){if(a>i)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=i,this._minGranularity=a}getGranularityForZoomLevel(i){return Math.max(Math.floor(this._baseZoomGranularity/(1<<i)),this._minGranularity,1)}}class fy{constructor(i){this.fill=i.fill,this.line=i.line,this.tile=i.tile,this.stencil=i.stencil,this.circle=i.circle}}fy.noSubdivision=new fy({fill:new Nd(0,0),line:new Nd(0,0),tile:new Nd(0,0),stencil:new Nd(0,0),circle:1}),St("SubdivisionGranularityExpression",Nd),St("SubdivisionGranularitySetting",fy);const Od=-32768,yf=32767;class fL{constructor(i,a){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=i,this._granularityCellSize=ct/i,this._canonical=a}_getKey(i,a){return(i+=32768)<<16|(a+=32768)<<0}_vertexToIndex(i,a){if(i<-32768||a<-32768||i>32767||a>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const d=0|Math.round(i),g=0|Math.round(a),v=this._getKey(d,g);if(this._vertexDictionary.has(v))return this._vertexDictionary.get(v);const x=this._vertexBuffer.length/2;return this._vertexDictionary.set(v,x),this._vertexBuffer.push(d,g),x}_subdivideTrianglesScanline(i){if(this._granularity<2)return function(g,v){const x=[];for(let w=0;w<v.length;w+=3){const P=v[w],k=v[w+1],D=v[w+2],j=g[2*P],Z=g[2*P+1];(g[2*k]-j)*(g[2*D+1]-Z)-(g[2*k+1]-Z)*(g[2*D]-j)>0?(x.push(P),x.push(D),x.push(k)):(x.push(P),x.push(k),x.push(D))}return x}(this._vertexBuffer,i);const a=[],d=i.length;for(let g=0;g<d;g+=3){const v=[i[g+0],i[g+1],i[g+2]],x=[this._vertexBuffer[2*i[g+0]+0],this._vertexBuffer[2*i[g+0]+1],this._vertexBuffer[2*i[g+1]+0],this._vertexBuffer[2*i[g+1]+1],this._vertexBuffer[2*i[g+2]+0],this._vertexBuffer[2*i[g+2]+1]];let w=1/0,P=1/0,k=-1/0,D=-1/0;for(let J=0;J<3;J++){const ie=x[2*J],ue=x[2*J+1];w=Math.min(w,ie),k=Math.max(k,ie),P=Math.min(P,ue),D=Math.max(D,ue)}if(w===k||P===D)continue;const j=Math.floor(w/this._granularityCellSize),Z=Math.ceil(k/this._granularityCellSize),H=Math.floor(P/this._granularityCellSize),W=Math.ceil(D/this._granularityCellSize);if(j!==Z||H!==W)for(let J=H;J<W;J++){const ie=this._scanlineGenerateVertexRingForCellRow(J,x,v);mL(this._vertexBuffer,ie,a)}else a.push(...v)}return a}_scanlineGenerateVertexRingForCellRow(i,a,d){const g=i*this._granularityCellSize,v=g+this._granularityCellSize,x=[];for(let w=0;w<3;w++){const P=a[2*w],k=a[2*w+1],D=a[2*(w+1)%6],j=a[(2*(w+1)+1)%6],Z=a[2*(w+2)%6],H=a[(2*(w+2)+1)%6],W=D-P,J=j-k,ie=W===0,ue=J===0,Me=(g-k)/J,ge=(v-k)/J,G=Math.min(Me,ge),ne=Math.max(Me,ge);if(!ue&&(G>=1||ne<=0)||ue&&(k<g||k>v)){j>=g&&j<=v&&x.push(d[(w+1)%3]);continue}!ue&&G>0&&x.push(this._vertexToIndex(P+W*G,k+J*G));const ye=P+W*Math.max(G,0),Ne=P+W*Math.min(ne,1);ie||this._generateIntraEdgeVertices(x,P,k,D,j,ye,Ne),!ue&&ne<1&&x.push(this._vertexToIndex(P+W*ne,k+J*ne)),(ue||j>=g&&j<=v)&&x.push(d[(w+1)%3]),!ue&&(j<=g||j>=v)&&this._generateInterEdgeVertices(x,P,k,D,j,Z,H,Ne,g,v)}return x}_generateIntraEdgeVertices(i,a,d,g,v,x,w){const P=g-a,k=v-d,D=k===0,j=D?Math.min(a,g):Math.min(x,w),Z=D?Math.max(a,g):Math.max(x,w),H=Math.floor(j/this._granularityCellSize)+1,W=Math.ceil(Z/this._granularityCellSize)-1;if(D?a<g:x<w)for(let J=H;J<=W;J++){const ie=J*this._granularityCellSize;i.push(this._vertexToIndex(ie,d+k*(ie-a)/P))}else for(let J=W;J>=H;J--){const ie=J*this._granularityCellSize;i.push(this._vertexToIndex(ie,d+k*(ie-a)/P))}}_generateInterEdgeVertices(i,a,d,g,v,x,w,P,k,D){const j=v-d,Z=x-g,H=w-v,W=(k-v)/H,J=(D-v)/H,ie=Math.min(W,J),ue=Math.max(W,J),Me=g+Z*ie;let ge=Math.floor(Math.min(Me,P)/this._granularityCellSize)+1,G=Math.ceil(Math.max(Me,P)/this._granularityCellSize)-1,ne=P<Me;const ye=H===0;if(ye&&(w===k||w===D))return;if(ye||ie>=1||ue<=0){const rt=d-w,Ue=x+(a-x)*Math.min((k-w)/rt,(D-w)/rt);ge=Math.floor(Math.min(Ue,P)/this._granularityCellSize)+1,G=Math.ceil(Math.max(Ue,P)/this._granularityCellSize)-1,ne=P<Ue}const Ne=j>0?D:k;if(ne)for(let rt=ge;rt<=G;rt++)i.push(this._vertexToIndex(rt*this._granularityCellSize,Ne));else for(let rt=G;rt>=ge;rt--)i.push(this._vertexToIndex(rt*this._granularityCellSize,Ne))}_generateOutline(i){const a=[];for(const d of i){const g=ru(d,this._granularity,!0),v=this._pointArrayToIndices(g),x=[];for(let w=1;w<v.length;w++)x.push(v[w-1]),x.push(v[w]);a.push(x)}return a}_handlePoles(i){let a=!1,d=!1;this._canonical&&(this._canonical.y===0&&(a=!0),this._canonical.y===(1<<this._canonical.z)-1&&(d=!0)),(a||d)&&this._fillPoles(i,a,d)}_ensureNoPoleVertices(){const i=this._vertexBuffer;for(let a=0;a<i.length;a+=2){const d=i[a+1];d===Od&&(i[a+1]=-32767),d===yf&&(i[a+1]=32766)}}_generatePoleQuad(i,a,d,g,v,x){g>v!=(x===Od)?(i.push(a),i.push(d),i.push(this._vertexToIndex(g,x)),i.push(d),i.push(this._vertexToIndex(v,x)),i.push(this._vertexToIndex(g,x))):(i.push(d),i.push(a),i.push(this._vertexToIndex(g,x)),i.push(this._vertexToIndex(v,x)),i.push(d),i.push(this._vertexToIndex(g,x)))}_fillPoles(i,a,d){const g=this._vertexBuffer,v=ct,x=i.length;for(let w=2;w<x;w+=3){const P=i[w-2],k=i[w-1],D=i[w],j=g[2*P],Z=g[2*P+1],H=g[2*k],W=g[2*k+1],J=g[2*D],ie=g[2*D+1];a&&(Z===0&&W===0&&this._generatePoleQuad(i,P,k,j,H,Od),W===0&&ie===0&&this._generatePoleQuad(i,k,D,H,J,Od),ie===0&&Z===0&&this._generatePoleQuad(i,D,P,J,j,Od)),d&&(Z===v&&W===v&&this._generatePoleQuad(i,P,k,j,H,yf),W===v&&ie===v&&this._generatePoleQuad(i,k,D,H,J,yf),ie===v&&Z===v&&this._generatePoleQuad(i,D,P,J,j,yf))}}_initializeVertices(i){for(let a=0;a<i.length;a+=2)this._vertexToIndex(i[a],i[a+1])}subdividePolygonInternal(i,a){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:d,holeIndices:g}=function(w){const P=[],k=[];for(const D of w)if(D.length!==0){D!==w[0]&&P.push(k.length/2);for(let j=0;j<D.length;j++)k.push(D[j].x),k.push(D[j].y)}return{flattened:k,holeIndices:P}}(i);let v;this._initializeVertices(d);try{const w=function(k,D,j=2){const Z=D&&D.length,H=Z?D[0]*j:k.length;let W=MS(k,0,H,j,!0);const J=[];if(!W||W.next===W.prev)return J;let ie,ue,Me;if(Z&&(W=function(ge,G,ne,ye){const Ne=[];for(let rt=0,Ue=G.length;rt<Ue;rt++){const Ze=MS(ge,G[rt]*ye,rt<Ue-1?G[rt+1]*ye:ge.length,ye,!1);Ze===Ze.next&&(Ze.steiner=!0),Ne.push(hL(Ze))}Ne.sort(cL);for(let rt=0;rt<Ne.length;rt++)ne=uL(Ne[rt],ne);return ne}(k,D,W,j)),k.length>80*j){ie=1/0,ue=1/0;let ge=-1/0,G=-1/0;for(let ne=j;ne<H;ne+=j){const ye=k[ne],Ne=k[ne+1];ye<ie&&(ie=ye),Ne<ue&&(ue=Ne),ye>ge&&(ge=ye),Ne>G&&(G=Ne)}Me=Math.max(ge-ie,G-ue),Me=Me!==0?32767/Me:0}return pf(W,J,j,ie,ue,Me,0),J}(d,g),P=this._convertIndices(d,w);v=this._subdivideTrianglesScanline(P)}catch(w){console.error(w)}let x=[];return a&&(x=this._generateOutline(i)),this._ensureNoPoleVertices(),this._handlePoles(v),{verticesFlattened:this._vertexBuffer,indicesTriangles:v,indicesLineList:x}}_convertIndices(i,a){const d=[];for(let g=0;g<a.length;g++)d.push(this._vertexToIndex(i[2*a[g]],i[2*a[g]+1]));return d}_pointArrayToIndices(i){const a=[];for(let d=0;d<i.length;d++){const g=i[d];a.push(this._vertexToIndex(g.x,g.y))}return a}}function DS(l,i,a,d=!0){return new fL(a,i).subdividePolygonInternal(l,d)}function ru(l,i,a=!1){if(!l||l.length<1)return[];if(l.length<2)return[];const d=l[0],g=l[l.length-1],v=a&&(d.x!==g.x||d.y!==g.y);if(i<2)return v?[...l,l[0]]:[...l];const x=Math.floor(ct/i),w=[];w.push(new F(l[0].x,l[0].y));const P=l.length,k=v?P:P-1;for(let D=0;D<k;D++){const j=l[D],Z=D<P-1?l[D+1]:l[0],H=j.x,W=j.y,J=Z.x,ie=Z.y,ue=H!==J,Me=W!==ie;if(!ue&&!Me)continue;const ge=J-H,G=ie-W,ne=Math.abs(ge),ye=Math.abs(G);let Ne=H,rt=W;for(;;){const Ze=ge>0?(Math.floor(Ne/x)+1)*x:(Math.ceil(Ne/x)-1)*x,it=G>0?(Math.floor(rt/x)+1)*x:(Math.ceil(rt/x)-1)*x,nt=Math.abs(Ne-Ze),ot=Math.abs(rt-it),Qe=Math.abs(Ne-J),Ct=Math.abs(rt-ie),Vt=ue?nt/ne:Number.POSITIVE_INFINITY,Bt=Me?ot/ye:Number.POSITIVE_INFINITY;if((Qe<=nt||!ue)&&(Ct<=ot||!Me))break;if(Vt<Bt&&ue||!Me){Ne=Ze,rt+=G*Vt;const Rt=new F(Ne,Math.round(rt));w[w.length-1].x===Rt.x&&w[w.length-1].y===Rt.y||w.push(Rt)}else{Ne+=ge*Bt,rt=it;const Rt=new F(Math.round(Ne),rt);w[w.length-1].x===Rt.x&&w[w.length-1].y===Rt.y||w.push(Rt)}}const Ue=new F(J,ie);w[w.length-1].x===Ue.x&&w[w.length-1].y===Ue.y||w.push(Ue)}return w}function mL(l,i,a){if(i.length===0)throw new Error("Subdivision vertex ring is empty.");let d=0,g=l[2*i[0]];for(let P=1;P<i.length;P++){const k=l[2*i[P]];k<g&&(g=k,d=P)}const v=i.length;let x=d,w=(x+1)%v;for(;;){const P=x-1>=0?x-1:v-1,k=(w+1)%v,D=l[2*i[P]],j=l[2*i[k]],Z=l[2*i[x]],H=l[2*i[x]+1],W=l[2*i[w]+1];let J=!1;if(D<j)J=!0;else if(D>j)J=!1;else{const ie=W-H,ue=-(l[2*i[w]]-Z),Me=H<W?1:-1;((D-Z)*ie+(l[2*i[P]+1]-H)*ue)*Me>((j-Z)*ie+(l[2*i[k]+1]-H)*ue)*Me&&(J=!0)}if(J){const ie=i[P],ue=i[x],Me=i[w];ie!==ue&&ie!==Me&&ue!==Me&&a.push(Me,ue,ie),x--,x<0&&(x=v-1)}else{const ie=i[k],ue=i[x],Me=i[w];ie!==ue&&ie!==Me&&ue!==Me&&a.push(Me,ue,ie),w++,w>=v&&(w=0)}if(P===k)break}}function zS(l,i,a,d,g,v,x,w,P){const k=g.length/2,D=x&&w&&P;if(k<Ye.MAX_VERTEX_ARRAY_LENGTH){const j=i.prepareSegment(k,a,d),Z=j.vertexLength;for(let J=0;J<v.length;J+=3)d.emplaceBack(Z+v[J],Z+v[J+1],Z+v[J+2]);let H,W;j.vertexLength+=k,j.primitiveLength+=v.length/3,D&&(W=x.prepareSegment(k,a,w),H=W.vertexLength,W.vertexLength+=k);for(let J=0;J<g.length;J+=2)l(g[J],g[J+1]);if(D)for(let J=0;J<P.length;J++){const ie=P[J];for(let ue=1;ue<ie.length;ue+=2)w.emplaceBack(H+ie[ue-1],H+ie[ue]);W.primitiveLength+=ie.length/2}}else(function(j,Z,H,W,J,ie){const ue=[];for(let ye=0;ye<W.length/2;ye++)ue.push(-1);const Me={count:0};let ge=0,G=j.getOrCreateLatestSegment(Z,H),ne=G.vertexLength;for(let ye=2;ye<J.length;ye+=3){const Ne=J[ye-2],rt=J[ye-1],Ue=J[ye];let Ze=ue[Ne]<ge,it=ue[rt]<ge,nt=ue[Ue]<ge;G.vertexLength+((Ze?1:0)+(it?1:0)+(nt?1:0))>Ye.MAX_VERTEX_ARRAY_LENGTH&&(G=j.createNewSegment(Z,H),ge=Me.count,Ze=!0,it=!0,nt=!0,ne=0);const ot=_f(ue,W,ie,Me,Ne,Ze,G),Qe=_f(ue,W,ie,Me,rt,it,G),Ct=_f(ue,W,ie,Me,Ue,nt,G);H.emplaceBack(ne+ot-ge,ne+Qe-ge,ne+Ct-ge),G.primitiveLength++}})(i,a,d,g,v,l),D&&function(j,Z,H,W,J,ie){const ue=[];for(let ye=0;ye<W.length/2;ye++)ue.push(-1);const Me={count:0};let ge=0,G=j.getOrCreateLatestSegment(Z,H),ne=G.vertexLength;for(let ye=0;ye<J.length;ye++){const Ne=J[ye];for(let rt=1;rt<J[ye].length;rt+=2){const Ue=Ne[rt-1],Ze=Ne[rt];let it=ue[Ue]<ge,nt=ue[Ze]<ge;G.vertexLength+((it?1:0)+(nt?1:0))>Ye.MAX_VERTEX_ARRAY_LENGTH&&(G=j.createNewSegment(Z,H),ge=Me.count,it=!0,nt=!0,ne=0);const ot=_f(ue,W,ie,Me,Ue,it,G),Qe=_f(ue,W,ie,Me,Ze,nt,G);H.emplaceBack(ne+ot-ge,ne+Qe-ge),G.primitiveLength++}}}(x,a,w,g,P,l),i.forceNewSegmentOnNextPrepare(),x==null||x.forceNewSegmentOnNextPrepare()}function _f(l,i,a,d,g,v,x){if(v){const w=d.count;return a(i[2*g],i[2*g+1]),l[g]=d.count,d.count++,x.vertexLength++,w}return l[g]}class rx{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new le,this.indexArray=new qe,this.indexArray2=new $e,this.programConfigurations=new Xn(i.layers,i.zoom),this.segments=new Ye,this.segments2=new Ye,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(i,a,d){this.hasPattern=Q0("fill",this.layers,a);const g=this.layers[0].layout.get("fill-sort-key"),v=!g.isConstant(),x=[];for(const{feature:w,id:P,index:k,sourceLayerIndex:D}of i){const j=this.layers[0]._featureFilter.needGeometry,Z=ja(w,j);if(!this.layers[0]._featureFilter.filter(new Hr(this.zoom),Z,d))continue;const H=v?g.evaluate(Z,{},d,a.availableImages):void 0,W={id:P,properties:w.properties,type:w.type,sourceLayerIndex:D,index:k,geometry:j?Z.geometry:za(w),patterns:{},sortKey:H};x.push(W)}v&&x.sort((w,P)=>w.sortKey-P.sortKey);for(const w of x){const{geometry:P,index:k,sourceLayerIndex:D}=w;if(this.hasPattern){const j=J0("fill",this.layers,w,this.zoom,a);this.patternFeatures.push(j)}else this.addFeature(w,P,k,d,{},a.subdivisionGranularity);a.featureIndex.insert(i[k].feature,P,k,D,this.index)}}update(i,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,a,this.stateDependentLayers,d)}addFeatures(i,a,d){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,a,d,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,iL),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,a,d,g,v,x){for(const w of ml(a,500)){const P=DS(w,g,x.fill.getGranularityForZoomLevel(g.z)),k=this.layoutVertexArray;zS((D,j)=>{k.emplaceBack(D,j)},this.segments,this.layoutVertexArray,this.indexArray,P.verticesFlattened,P.indicesTriangles,this.segments2,this.indexArray2,P.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,v,g)}}let jS,LS;St("FillBucket",rx,{omit:["layers","patternFeatures"]});var gL={get paint(){return LS=LS||new bi({"fill-antialias":new Dt(se.paint_fill["fill-antialias"]),"fill-opacity":new Ht(se.paint_fill["fill-opacity"]),"fill-color":new Ht(se.paint_fill["fill-color"]),"fill-outline-color":new Ht(se.paint_fill["fill-outline-color"]),"fill-translate":new Dt(se.paint_fill["fill-translate"]),"fill-translate-anchor":new Dt(se.paint_fill["fill-translate-anchor"]),"fill-pattern":new Sd(se.paint_fill["fill-pattern"])})},get layout(){return jS=jS||new bi({"fill-sort-key":new Ht(se.layout_fill["fill-sort-key"])})}};class yL extends no{constructor(i){super(i,gL)}recalculate(i,a){super.recalculate(i,a);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new rx(i)}queryRadius(){return uy(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:i,geometry:a,transform:d,pixelsToTileUnits:g}){return zd(dy(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-d.bearingInRadians,g),a)}isTileClipped(){return!0}}const _L=qr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),vL=qr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:xL}=_L;var nx,NS,ix,OS,sx,FS,BS,my={};function US(){if(NS)return nx;NS=1;var l=z();function i(g,v,x,w,P){this.properties={},this.extent=x,this.type=0,this._pbf=g,this._geometry=-1,this._keys=w,this._values=P,g.readFields(a,this,v)}function a(g,v,x){g==1?v.id=x.readVarint():g==2?function(w,P){for(var k=w.readVarint()+w.pos;w.pos<k;){var D=P._keys[w.readVarint()],j=P._values[w.readVarint()];P.properties[D]=j}}(x,v):g==3?v.type=x.readVarint():g==4&&(v._geometry=x.pos)}function d(g){for(var v,x,w=0,P=0,k=g.length,D=k-1;P<k;D=P++)w+=((x=g[D]).x-(v=g[P]).x)*(v.y+x.y);return w}return nx=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var v,x=g.readVarint()+g.pos,w=1,P=0,k=0,D=0,j=[];g.pos<x;){if(P<=0){var Z=g.readVarint();w=7&Z,P=Z>>3}if(P--,w===1||w===2)k+=g.readSVarint(),D+=g.readSVarint(),w===1&&(v&&j.push(v),v=[]),v.push(new l(k,D));else{if(w!==7)throw new Error("unknown command "+w);v&&v.push(v[0].clone())}}return v&&j.push(v),j},i.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var v=g.readVarint()+g.pos,x=1,w=0,P=0,k=0,D=1/0,j=-1/0,Z=1/0,H=-1/0;g.pos<v;){if(w<=0){var W=g.readVarint();x=7&W,w=W>>3}if(w--,x===1||x===2)(P+=g.readSVarint())<D&&(D=P),P>j&&(j=P),(k+=g.readSVarint())<Z&&(Z=k),k>H&&(H=k);else if(x!==7)throw new Error("unknown command "+x)}return[D,Z,j,H]},i.prototype.toGeoJSON=function(g,v,x){var w,P,k=this.extent*Math.pow(2,x),D=this.extent*g,j=this.extent*v,Z=this.loadGeometry(),H=i.types[this.type];function W(ue){for(var Me=0;Me<ue.length;Me++){var ge=ue[Me];ue[Me]=[360*(ge.x+D)/k-180,360/Math.PI*Math.atan(Math.exp((180-360*(ge.y+j)/k)*Math.PI/180))-90]}}switch(this.type){case 1:var J=[];for(w=0;w<Z.length;w++)J[w]=Z[w][0];W(Z=J);break;case 2:for(w=0;w<Z.length;w++)W(Z[w]);break;case 3:for(Z=function(ue){var Me=ue.length;if(Me<=1)return[ue];for(var ge,G,ne=[],ye=0;ye<Me;ye++){var Ne=d(ue[ye]);Ne!==0&&(G===void 0&&(G=Ne<0),G===Ne<0?(ge&&ne.push(ge),ge=[ue[ye]]):ge.push(ue[ye]))}return ge&&ne.push(ge),ne}(Z),w=0;w<Z.length;w++)for(P=0;P<Z[w].length;P++)W(Z[w][P])}Z.length===1?Z=Z[0]:H="Multi"+H;var ie={type:"Feature",geometry:{type:H,coordinates:Z},properties:this.properties};return"id"in this&&(ie.id=this.id),ie},nx}function VS(){if(OS)return ix;OS=1;var l=US();function i(d,g){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(a,this,g),this.length=this._features.length}function a(d,g,v){d===15?g.version=v.readVarint():d===1?g.name=v.readString():d===5?g.extent=v.readVarint():d===2?g._features.push(v.pos):d===3?g._keys.push(v.readString()):d===4&&g._values.push(function(x){for(var w=null,P=x.readVarint()+x.pos;x.pos<P;){var k=x.readVarint()>>3;w=k===1?x.readString():k===2?x.readFloat():k===3?x.readDouble():k===4?x.readVarint64():k===5?x.readVarint():k===6?x.readSVarint():k===7?x.readBoolean():null}return w}(v))}return ix=i,i.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var g=this._pbf.readVarint()+this._pbf.pos;return new l(this._pbf,g,this.extent,this._keys,this._values)},ix}function $S(){return BS||(BS=1,my.VectorTile=function(){if(FS)return sx;FS=1;var l=VS();function i(a,d,g){if(a===3){var v=new l(g,g.readVarint()+g.pos);v.length&&(d[v.name]=v)}}return sx=function(a,d){this.layers=a.readFields(i,{},d)},sx}(),my.VectorTileFeature=US(),my.VectorTileLayer=VS()),my}var vf=S($S());const bL=vf.VectorTileFeature.types,ox=Math.pow(2,13);function xf(l,i,a,d,g,v,x,w){l.emplaceBack(i,a,2*Math.floor(d*ox)+x,g*ox*2,v*ox*2,Math.round(w))}class ax{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new fe,this.centroidVertexArray=new ae,this.indexArray=new qe,this.programConfigurations=new Xn(i.layers,i.zoom),this.segments=new Ye,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(i,a,d){this.features=[],this.hasPattern=Q0("fill-extrusion",this.layers,a);for(const{feature:g,id:v,index:x,sourceLayerIndex:w}of i){const P=this.layers[0]._featureFilter.needGeometry,k=ja(g,P);if(!this.layers[0]._featureFilter.filter(new Hr(this.zoom),k,d))continue;const D={id:v,sourceLayerIndex:w,index:x,geometry:P?k.geometry:za(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(J0("fill-extrusion",this.layers,D,this.zoom,a)):this.addFeature(D,D.geometry,x,d,{},a.subdivisionGranularity),a.featureIndex.insert(g,D.geometry,x,w,this.index,!0)}}addFeatures(i,a,d){for(const g of this.features){const{geometry:v}=g;this.addFeature(g,v,g.index,a,d,i.subdivisionGranularity)}}update(i,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,a,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,xL),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,vL.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,a,d,g,v,x){for(const w of ml(a,500)){const P={x:0,y:0,sampleCount:0},k=this.layoutVertexArray.length;this.processPolygon(P,g,i,w,x);const D=this.layoutVertexArray.length-k,j=Math.floor(P.x/P.sampleCount),Z=Math.floor(P.y/P.sampleCount);for(let H=0;H<D;H++)this.centroidVertexArray.emplaceBack(j,Z)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,v,g)}processPolygon(i,a,d,g,v){if(g.length<1||ZS(g[0]))return;for(const j of g)j.length!==0&&wL(i,j);const x={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},w=v.fill.getGranularityForZoomLevel(a.z),P=bL[d.type]==="Polygon";for(const j of g){if(j.length===0||ZS(j))continue;const Z=ru(j,w,P);this._generateSideFaces(Z,x)}if(!P)return;const k=DS(g,a,w,!1),D=this.layoutVertexArray;zS((j,Z)=>{xf(D,j,Z,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,k.verticesFlattened,k.indicesTriangles)}_generateSideFaces(i,a){let d=0;for(let g=1;g<i.length;g++){const v=i[g],x=i[g-1];if(SL(v,x))continue;a.segment.vertexLength+4>Ye.MAX_VERTEX_ARRAY_LENGTH&&(a.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const w=v.sub(x)._perp()._unit(),P=x.dist(v);d+P>32768&&(d=0),xf(this.layoutVertexArray,v.x,v.y,w.x,w.y,0,0,d),xf(this.layoutVertexArray,v.x,v.y,w.x,w.y,0,1,d),d+=P,xf(this.layoutVertexArray,x.x,x.y,w.x,w.y,0,0,d),xf(this.layoutVertexArray,x.x,x.y,w.x,w.y,0,1,d);const k=a.segment.vertexLength;this.indexArray.emplaceBack(k,k+2,k+1),this.indexArray.emplaceBack(k+1,k+2,k+3),a.segment.vertexLength+=4,a.segment.primitiveLength+=2}}}function wL(l,i){for(let a=0;a<i.length;a++){const d=i[a];a===i.length-1&&i[0].x===d.x&&i[0].y===d.y||(l.x+=d.x,l.y+=d.y,l.sampleCount++)}}function SL(l,i){return l.x===i.x&&(l.x<0||l.x>ct)||l.y===i.y&&(l.y<0||l.y>ct)}function ZS(l){return l.every(i=>i.x<0)||l.every(i=>i.x>ct)||l.every(i=>i.y<0)||l.every(i=>i.y>ct)}let GS;St("FillExtrusionBucket",ax,{omit:["layers","features"]});var TL={get paint(){return GS=GS||new bi({"fill-extrusion-opacity":new Dt(se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ht(se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Dt(se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Dt(se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Sd(se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ht(se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ht(se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Dt(se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class CL extends no{constructor(i){super(i,TL)}createBucket(i){return new ax(i)}queryRadius(){return uy(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:i,feature:a,featureState:d,geometry:g,transform:v,pixelsToTileUnits:x,pixelPosMatrix:w}){const P=dy(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-v.bearingInRadians,x),k=this.paint.get("fill-extrusion-height").evaluate(a,d),D=this.paint.get("fill-extrusion-base").evaluate(a,d),j=function(H,W,J){const ie=[];for(const ue of H){const Me=[ue.x,ue.y,0,1];st(Me,Me,W),ie.push(new F(Me[0]/Me[3],Me[1]/Me[3]))}return ie}(P,w),Z=function(H,W,J,ie){const ue=[],Me=[],ge=ie[8]*W,G=ie[9]*W,ne=ie[10]*W,ye=ie[11]*W,Ne=ie[8]*J,rt=ie[9]*J,Ue=ie[10]*J,Ze=ie[11]*J;for(const it of H){const nt=[],ot=[];for(const Qe of it){const Ct=Qe.x,Vt=Qe.y,Bt=ie[0]*Ct+ie[4]*Vt+ie[12],Rt=ie[1]*Ct+ie[5]*Vt+ie[13],pr=ie[2]*Ct+ie[6]*Vt+ie[14],cn=ie[3]*Ct+ie[7]*Vt+ie[15],On=pr+ne,ii=cn+ye,oo=Bt+Ne,Ni=Rt+rt,si=pr+Ue,fi=cn+Ze,yn=new F((Bt+ge)/ii,(Rt+G)/ii);yn.z=On/ii,nt.push(yn);const Fn=new F(oo/fi,Ni/fi);Fn.z=si/fi,ot.push(Fn)}ue.push(nt),Me.push(ot)}return[ue,Me]}(g,D,k,w);return function(H,W,J){let ie=1/0;zd(J,W)&&(ie=HS(J,W[0]));for(let ue=0;ue<W.length;ue++){const Me=W[ue],ge=H[ue];for(let G=0;G<Me.length-1;G++){const ne=Me[G],ye=[ne,Me[G+1],ge[G+1],ge[G],ne];uf(J,ye)&&(ie=Math.min(ie,HS(J,ye)))}}return ie!==1/0&&ie}(Z[0],Z[1],j)}}function bf(l,i){return l.x*i.x+l.y*i.y}function HS(l,i){if(l.length===1){let a=0;const d=i[a++];let g;for(;!g||d.equals(g);)if(g=i[a++],!g)return 1/0;for(;a<i.length;a++){const v=i[a],x=l[0],w=g.sub(d),P=v.sub(d),k=x.sub(d),D=bf(w,w),j=bf(w,P),Z=bf(P,P),H=bf(k,w),W=bf(k,P),J=D*Z-j*j,ie=(Z*H-j*W)/J,ue=(D*W-j*H)/J,Me=d.z*(1-ie-ue)+g.z*ie+v.z*ue;if(isFinite(Me))return Me}return 1/0}{let a=1/0;for(const d of i)a=Math.min(a,d.z);return a}}const PL=qr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:EL}=PL,ML=qr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:kL}=ML,IL=vf.VectorTileFeature.types,RL=Math.cos(Math.PI/180*37.5),qS=Math.pow(2,14)/.5;class lx{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new _e,this.layoutVertexArray2=new xe,this.indexArray=new qe,this.programConfigurations=new Xn(i.layers,i.zoom),this.segments=new Ye,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(i,a,d){this.hasPattern=Q0("line",this.layers,a);const g=this.layers[0].layout.get("line-sort-key"),v=!g.isConstant(),x=[];for(const{feature:w,id:P,index:k,sourceLayerIndex:D}of i){const j=this.layers[0]._featureFilter.needGeometry,Z=ja(w,j);if(!this.layers[0]._featureFilter.filter(new Hr(this.zoom),Z,d))continue;const H=v?g.evaluate(Z,{},d):void 0,W={id:P,properties:w.properties,type:w.type,sourceLayerIndex:D,index:k,geometry:j?Z.geometry:za(w),patterns:{},sortKey:H};x.push(W)}v&&x.sort((w,P)=>w.sortKey-P.sortKey);for(const w of x){const{geometry:P,index:k,sourceLayerIndex:D}=w;if(this.hasPattern){const j=J0("line",this.layers,w,this.zoom,a);this.patternFeatures.push(j)}else this.addFeature(w,P,k,d,{},a.subdivisionGranularity);a.featureIndex.insert(i[k].feature,P,k,D,this.index)}}update(i,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,a,this.stateDependentLayers,d)}addFeatures(i,a,d){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,a,d,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,kL)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,EL),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,a,d,g,v,x){const w=this.layers[0].layout,P=w.get("line-join").evaluate(i,{}),k=w.get("line-cap"),D=w.get("line-miter-limit"),j=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const Z of a)this.addLine(Z,i,P,k,D,j,g,x);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,v,g)}addLine(i,a,d,g,v,x,w,P){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,i=ru(i,w?P.line.getGranularityForZoomLevel(w.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ge=0;ge<i.length-1;ge++)this.totalDistance+=i[ge].dist(i[ge+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const k=IL[a.type]==="Polygon";let D=i.length;for(;D>=2&&i[D-1].equals(i[D-2]);)D--;let j=0;for(;j<D-1&&i[j].equals(i[j+1]);)j++;if(D<(k?3:2))return;d==="bevel"&&(v=1.05);const Z=this.overscaling<=16?15*ct/(512*this.overscaling):0,H=this.segments.prepareSegment(10*D,this.layoutVertexArray,this.indexArray);let W,J,ie,ue,Me;this.e1=this.e2=-1,k&&(W=i[D-2],Me=i[j].sub(W)._unit()._perp());for(let ge=j;ge<D;ge++){if(ie=ge===D-1?k?i[j+1]:void 0:i[ge+1],ie&&i[ge].equals(ie))continue;Me&&(ue=Me),W&&(J=W),W=i[ge],Me=ie?ie.sub(W)._unit()._perp():ue,ue=ue||Me;let G=ue.add(Me);G.x===0&&G.y===0||G._unit();const ne=ue.x*Me.x+ue.y*Me.y,ye=G.x*Me.x+G.y*Me.y,Ne=ye!==0?1/ye:1/0,rt=2*Math.sqrt(2-2*ye),Ue=ye<RL&&J&&ie,Ze=ue.x*Me.y-ue.y*Me.x>0;if(Ue&&ge>j){const ot=W.dist(J);if(ot>2*Z){const Qe=W.sub(W.sub(J)._mult(Z/ot)._round());this.updateDistance(J,Qe),this.addCurrentVertex(Qe,ue,0,0,H),J=Qe}}const it=J&&ie;let nt=it?d:k?"butt":g;if(it&&nt==="round"&&(Ne<x?nt="miter":Ne<=2&&(nt="fakeround")),nt==="miter"&&Ne>v&&(nt="bevel"),nt==="bevel"&&(Ne>2&&(nt="flipbevel"),Ne<v&&(nt="miter")),J&&this.updateDistance(J,W),nt==="miter")G._mult(Ne),this.addCurrentVertex(W,G,0,0,H);else if(nt==="flipbevel"){if(Ne>100)G=Me.mult(-1);else{const ot=Ne*ue.add(Me).mag()/ue.sub(Me).mag();G._perp()._mult(ot*(Ze?-1:1))}this.addCurrentVertex(W,G,0,0,H),this.addCurrentVertex(W,G.mult(-1),0,0,H)}else if(nt==="bevel"||nt==="fakeround"){const ot=-Math.sqrt(Ne*Ne-1),Qe=Ze?ot:0,Ct=Ze?0:ot;if(J&&this.addCurrentVertex(W,ue,Qe,Ct,H),nt==="fakeround"){const Vt=Math.round(180*rt/Math.PI/20);for(let Bt=1;Bt<Vt;Bt++){let Rt=Bt/Vt;if(Rt!==.5){const cn=Rt-.5;Rt+=Rt*cn*(Rt-1)*((1.0904+ne*(ne*(3.55645-1.43519*ne)-3.2452))*cn*cn+(.848013+ne*(.215638*ne-1.06021)))}const pr=Me.sub(ue)._mult(Rt)._add(ue)._unit()._mult(Ze?-1:1);this.addHalfVertex(W,pr.x,pr.y,!1,Ze,0,H)}}ie&&this.addCurrentVertex(W,Me,-Qe,-Ct,H)}else if(nt==="butt")this.addCurrentVertex(W,G,0,0,H);else if(nt==="square"){const ot=J?1:-1;this.addCurrentVertex(W,G,ot,ot,H)}else nt==="round"&&(J&&(this.addCurrentVertex(W,ue,0,0,H),this.addCurrentVertex(W,ue,1,1,H,!0)),ie&&(this.addCurrentVertex(W,Me,-1,-1,H,!0),this.addCurrentVertex(W,Me,0,0,H)));if(Ue&&ge<D-1){const ot=W.dist(ie);if(ot>2*Z){const Qe=W.add(ie.sub(W)._mult(Z/ot)._round());this.updateDistance(W,Qe),this.addCurrentVertex(Qe,Me,0,0,H),W=Qe}}}}addCurrentVertex(i,a,d,g,v,x=!1){const w=a.y*g-a.x,P=-a.y-a.x*g;this.addHalfVertex(i,a.x+a.y*d,a.y-a.x*d,x,!1,d,v),this.addHalfVertex(i,w,P,x,!0,-g,v),this.distance>qS/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,a,d,g,v,x))}addHalfVertex({x:i,y:a},d,g,v,x,w,P){const k=.5*(this.lineClips?this.scaledDistance*(qS-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(v?1:0),(a<<1)+(x?1:0),Math.round(63*d)+128,Math.round(63*g)+128,1+(w===0?0:w<0?-1:1)|(63&k)<<2,k>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const D=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,D,this.e2),P.primitiveLength++),x?this.e2=D:this.e1=D}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,a){this.distance+=i.dist(a),this.updateScaledDistance()}}let WS,XS;St("LineBucket",lx,{omit:["layers","patternFeatures"]});var KS={get paint(){return XS=XS||new bi({"line-opacity":new Ht(se.paint_line["line-opacity"]),"line-color":new Ht(se.paint_line["line-color"]),"line-translate":new Dt(se.paint_line["line-translate"]),"line-translate-anchor":new Dt(se.paint_line["line-translate-anchor"]),"line-width":new Ht(se.paint_line["line-width"]),"line-gap-width":new Ht(se.paint_line["line-gap-width"]),"line-offset":new Ht(se.paint_line["line-offset"]),"line-blur":new Ht(se.paint_line["line-blur"]),"line-dasharray":new Td(se.paint_line["line-dasharray"]),"line-pattern":new Sd(se.paint_line["line-pattern"]),"line-gradient":new Cd(se.paint_line["line-gradient"])})},get layout(){return WS=WS||new bi({"line-cap":new Dt(se.layout_line["line-cap"]),"line-join":new Ht(se.layout_line["line-join"]),"line-miter-limit":new Dt(se.layout_line["line-miter-limit"]),"line-round-limit":new Dt(se.layout_line["line-round-limit"]),"line-sort-key":new Ht(se.layout_line["line-sort-key"])})}};class AL extends Ht{possiblyEvaluate(i,a){return a=new Hr(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(i,a)}evaluate(i,a,d,g){return a=Wt({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(i,a,d,g)}}let gy;class DL extends no{constructor(i){super(i,KS),this.gradientVersion=0,gy||(gy=new AL(KS.paint.properties["line-width"].specification),gy.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const a=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(a)&&a._styleExpression.expression instanceof hl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,a){super.recalculate(i,a),this.paint._values["line-floorwidth"]=gy.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new lx(i)}queryRadius(i){const a=i,d=YS(df("line-width",this,a),df("line-gap-width",this,a)),g=df("line-offset",this,a);return d/2+Math.abs(g)+uy(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:i,feature:a,featureState:d,geometry:g,transform:v,pixelsToTileUnits:x}){const w=dy(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-v.bearingInRadians,x),P=x/2*YS(this.paint.get("line-width").evaluate(a,d),this.paint.get("line-gap-width").evaluate(a,d)),k=this.paint.get("line-offset").evaluate(a,d);return k&&(g=function(D,j){const Z=[];for(let H=0;H<D.length;H++){const W=D[H],J=[];for(let ie=0;ie<W.length;ie++){const ue=W[ie-1],Me=W[ie],ge=W[ie+1],G=ie===0?new F(0,0):Me.sub(ue)._unit()._perp(),ne=ie===W.length-1?new F(0,0):ge.sub(Me)._unit()._perp(),ye=G._add(ne)._unit(),Ne=ye.x*ne.x+ye.y*ne.y;Ne!==0&&ye._mult(1/Ne),J.push(ye._mult(j)._add(Me))}Z.push(J)}return Z}(g,k*x)),function(D,j,Z){for(let H=0;H<j.length;H++){const W=j[H];if(D.length>=3){for(let J=0;J<W.length;J++)if(jd(D,W[J]))return!0}if(cy(D,W,Z))return!0}return!1}(w,g,P)}isTileClipped(){return!0}}function YS(l,i){return i>0?i+2*l:l}const zL=qr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),jL=qr([{name:"a_projected_pos",components:3,type:"Float32"}],4);qr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const LL=qr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);qr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const QS=qr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),NL=qr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function OL(l,i,a){return l.sections.forEach(d=>{d.text=function(g,v,x){const w=v.layout.get("text-transform").evaluate(x,{});return w==="uppercase"?g=g.toLocaleUpperCase():w==="lowercase"&&(g=g.toLocaleLowerCase()),wo.applyArabicShaping&&(g=wo.applyArabicShaping(g)),g}(d.text,i,a)}),l}qr([{name:"triangle",components:3,type:"Uint16"}]),qr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),qr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),qr([{type:"Float32",name:"offsetX"}]),qr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),qr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const wf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var JS,cx,eT,Nn=24,ux={};function FL(){return JS||(JS=1,ux.read=function(l,i,a,d,g){var v,x,w=8*g-d-1,P=(1<<w)-1,k=P>>1,D=-7,j=a?g-1:0,Z=a?-1:1,H=l[i+j];for(j+=Z,v=H&(1<<-D)-1,H>>=-D,D+=w;D>0;v=256*v+l[i+j],j+=Z,D-=8);for(x=v&(1<<-D)-1,v>>=-D,D+=d;D>0;x=256*x+l[i+j],j+=Z,D-=8);if(v===0)v=1-k;else{if(v===P)return x?NaN:1/0*(H?-1:1);x+=Math.pow(2,d),v-=k}return(H?-1:1)*x*Math.pow(2,v-d)},ux.write=function(l,i,a,d,g,v){var x,w,P,k=8*v-g-1,D=(1<<k)-1,j=D>>1,Z=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=d?0:v-1,W=d?1:-1,J=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(w=isNaN(i)?1:0,x=D):(x=Math.floor(Math.log(i)/Math.LN2),i*(P=Math.pow(2,-x))<1&&(x--,P*=2),(i+=x+j>=1?Z/P:Z*Math.pow(2,1-j))*P>=2&&(x++,P/=2),x+j>=D?(w=0,x=D):x+j>=1?(w=(i*P-1)*Math.pow(2,g),x+=j):(w=i*Math.pow(2,j-1)*Math.pow(2,g),x=0));g>=8;l[a+H]=255&w,H+=W,w/=256,g-=8);for(x=x<<g|w,k+=g;k>0;l[a+H]=255&x,H+=W,x/=256,k-=8);l[a+H-W]|=128*J}),ux}function tT(){if(eT)return cx;eT=1,cx=i;var l=FL();function i(G){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(G)?G:new Uint8Array(G||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var a=4294967296,d=1/a,g=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function v(G){return G.type===i.Bytes?G.readVarint()+G.pos:G.pos+1}function x(G,ne,ye){return ye?4294967296*ne+(G>>>0):4294967296*(ne>>>0)+(G>>>0)}function w(G,ne,ye){var Ne=ne<=16383?1:ne<=2097151?2:ne<=268435455?3:Math.floor(Math.log(ne)/(7*Math.LN2));ye.realloc(Ne);for(var rt=ye.pos-1;rt>=G;rt--)ye.buf[rt+Ne]=ye.buf[rt]}function P(G,ne){for(var ye=0;ye<G.length;ye++)ne.writeVarint(G[ye])}function k(G,ne){for(var ye=0;ye<G.length;ye++)ne.writeSVarint(G[ye])}function D(G,ne){for(var ye=0;ye<G.length;ye++)ne.writeFloat(G[ye])}function j(G,ne){for(var ye=0;ye<G.length;ye++)ne.writeDouble(G[ye])}function Z(G,ne){for(var ye=0;ye<G.length;ye++)ne.writeBoolean(G[ye])}function H(G,ne){for(var ye=0;ye<G.length;ye++)ne.writeFixed32(G[ye])}function W(G,ne){for(var ye=0;ye<G.length;ye++)ne.writeSFixed32(G[ye])}function J(G,ne){for(var ye=0;ye<G.length;ye++)ne.writeFixed64(G[ye])}function ie(G,ne){for(var ye=0;ye<G.length;ye++)ne.writeSFixed64(G[ye])}function ue(G,ne){return(G[ne]|G[ne+1]<<8|G[ne+2]<<16)+16777216*G[ne+3]}function Me(G,ne,ye){G[ye]=ne,G[ye+1]=ne>>>8,G[ye+2]=ne>>>16,G[ye+3]=ne>>>24}function ge(G,ne){return(G[ne]|G[ne+1]<<8|G[ne+2]<<16)+(G[ne+3]<<24)}return i.prototype={destroy:function(){this.buf=null},readFields:function(G,ne,ye){for(ye=ye||this.length;this.pos<ye;){var Ne=this.readVarint(),rt=Ne>>3,Ue=this.pos;this.type=7&Ne,G(rt,ne,this),this.pos===Ue&&this.skip(Ne)}return ne},readMessage:function(G,ne){return this.readFields(G,ne,this.readVarint()+this.pos)},readFixed32:function(){var G=ue(this.buf,this.pos);return this.pos+=4,G},readSFixed32:function(){var G=ge(this.buf,this.pos);return this.pos+=4,G},readFixed64:function(){var G=ue(this.buf,this.pos)+ue(this.buf,this.pos+4)*a;return this.pos+=8,G},readSFixed64:function(){var G=ue(this.buf,this.pos)+ge(this.buf,this.pos+4)*a;return this.pos+=8,G},readFloat:function(){var G=l.read(this.buf,this.pos,!0,23,4);return this.pos+=4,G},readDouble:function(){var G=l.read(this.buf,this.pos,!0,52,8);return this.pos+=8,G},readVarint:function(G){var ne,ye,Ne=this.buf;return ne=127&(ye=Ne[this.pos++]),ye<128?ne:(ne|=(127&(ye=Ne[this.pos++]))<<7,ye<128?ne:(ne|=(127&(ye=Ne[this.pos++]))<<14,ye<128?ne:(ne|=(127&(ye=Ne[this.pos++]))<<21,ye<128?ne:function(rt,Ue,Ze){var it,nt,ot=Ze.buf;if(it=(112&(nt=ot[Ze.pos++]))>>4,nt<128||(it|=(127&(nt=ot[Ze.pos++]))<<3,nt<128)||(it|=(127&(nt=ot[Ze.pos++]))<<10,nt<128)||(it|=(127&(nt=ot[Ze.pos++]))<<17,nt<128)||(it|=(127&(nt=ot[Ze.pos++]))<<24,nt<128)||(it|=(1&(nt=ot[Ze.pos++]))<<31,nt<128))return x(rt,it,Ue);throw new Error("Expected varint not more than 10 bytes")}(ne|=(15&(ye=Ne[this.pos]))<<28,G,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var G=this.readVarint();return G%2==1?(G+1)/-2:G/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var G=this.readVarint()+this.pos,ne=this.pos;return this.pos=G,G-ne>=12&&g?function(ye,Ne,rt){return g.decode(ye.subarray(Ne,rt))}(this.buf,ne,G):function(ye,Ne,rt){for(var Ue="",Ze=Ne;Ze<rt;){var it,nt,ot,Qe=ye[Ze],Ct=null,Vt=Qe>239?4:Qe>223?3:Qe>191?2:1;if(Ze+Vt>rt)break;Vt===1?Qe<128&&(Ct=Qe):Vt===2?(192&(it=ye[Ze+1]))==128&&(Ct=(31&Qe)<<6|63&it)<=127&&(Ct=null):Vt===3?(nt=ye[Ze+2],(192&(it=ye[Ze+1]))==128&&(192&nt)==128&&((Ct=(15&Qe)<<12|(63&it)<<6|63&nt)<=2047||Ct>=55296&&Ct<=57343)&&(Ct=null)):Vt===4&&(nt=ye[Ze+2],ot=ye[Ze+3],(192&(it=ye[Ze+1]))==128&&(192&nt)==128&&(192&ot)==128&&((Ct=(15&Qe)<<18|(63&it)<<12|(63&nt)<<6|63&ot)<=65535||Ct>=1114112)&&(Ct=null)),Ct===null?(Ct=65533,Vt=1):Ct>65535&&(Ct-=65536,Ue+=String.fromCharCode(Ct>>>10&1023|55296),Ct=56320|1023&Ct),Ue+=String.fromCharCode(Ct),Ze+=Vt}return Ue}(this.buf,ne,G)},readBytes:function(){var G=this.readVarint()+this.pos,ne=this.buf.subarray(this.pos,G);return this.pos=G,ne},readPackedVarint:function(G,ne){if(this.type!==i.Bytes)return G.push(this.readVarint(ne));var ye=v(this);for(G=G||[];this.pos<ye;)G.push(this.readVarint(ne));return G},readPackedSVarint:function(G){if(this.type!==i.Bytes)return G.push(this.readSVarint());var ne=v(this);for(G=G||[];this.pos<ne;)G.push(this.readSVarint());return G},readPackedBoolean:function(G){if(this.type!==i.Bytes)return G.push(this.readBoolean());var ne=v(this);for(G=G||[];this.pos<ne;)G.push(this.readBoolean());return G},readPackedFloat:function(G){if(this.type!==i.Bytes)return G.push(this.readFloat());var ne=v(this);for(G=G||[];this.pos<ne;)G.push(this.readFloat());return G},readPackedDouble:function(G){if(this.type!==i.Bytes)return G.push(this.readDouble());var ne=v(this);for(G=G||[];this.pos<ne;)G.push(this.readDouble());return G},readPackedFixed32:function(G){if(this.type!==i.Bytes)return G.push(this.readFixed32());var ne=v(this);for(G=G||[];this.pos<ne;)G.push(this.readFixed32());return G},readPackedSFixed32:function(G){if(this.type!==i.Bytes)return G.push(this.readSFixed32());var ne=v(this);for(G=G||[];this.pos<ne;)G.push(this.readSFixed32());return G},readPackedFixed64:function(G){if(this.type!==i.Bytes)return G.push(this.readFixed64());var ne=v(this);for(G=G||[];this.pos<ne;)G.push(this.readFixed64());return G},readPackedSFixed64:function(G){if(this.type!==i.Bytes)return G.push(this.readSFixed64());var ne=v(this);for(G=G||[];this.pos<ne;)G.push(this.readSFixed64());return G},skip:function(G){var ne=7&G;if(ne===i.Varint)for(;this.buf[this.pos++]>127;);else if(ne===i.Bytes)this.pos=this.readVarint()+this.pos;else if(ne===i.Fixed32)this.pos+=4;else{if(ne!==i.Fixed64)throw new Error("Unimplemented type: "+ne);this.pos+=8}},writeTag:function(G,ne){this.writeVarint(G<<3|ne)},realloc:function(G){for(var ne=this.length||16;ne<this.pos+G;)ne*=2;if(ne!==this.length){var ye=new Uint8Array(ne);ye.set(this.buf),this.buf=ye,this.length=ne}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(G){this.realloc(4),Me(this.buf,G,this.pos),this.pos+=4},writeSFixed32:function(G){this.realloc(4),Me(this.buf,G,this.pos),this.pos+=4},writeFixed64:function(G){this.realloc(8),Me(this.buf,-1&G,this.pos),Me(this.buf,Math.floor(G*d),this.pos+4),this.pos+=8},writeSFixed64:function(G){this.realloc(8),Me(this.buf,-1&G,this.pos),Me(this.buf,Math.floor(G*d),this.pos+4),this.pos+=8},writeVarint:function(G){(G=+G||0)>268435455||G<0?function(ne,ye){var Ne,rt;if(ne>=0?(Ne=ne%4294967296|0,rt=ne/4294967296|0):(rt=~(-ne/4294967296),4294967295^(Ne=~(-ne%4294967296))?Ne=Ne+1|0:(Ne=0,rt=rt+1|0)),ne>=18446744073709552e3||ne<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");ye.realloc(10),function(Ue,Ze,it){it.buf[it.pos++]=127&Ue|128,Ue>>>=7,it.buf[it.pos++]=127&Ue|128,Ue>>>=7,it.buf[it.pos++]=127&Ue|128,Ue>>>=7,it.buf[it.pos++]=127&Ue|128,it.buf[it.pos]=127&(Ue>>>=7)}(Ne,0,ye),function(Ue,Ze){var it=(7&Ue)<<4;Ze.buf[Ze.pos++]|=it|((Ue>>>=3)?128:0),Ue&&(Ze.buf[Ze.pos++]=127&Ue|((Ue>>>=7)?128:0),Ue&&(Ze.buf[Ze.pos++]=127&Ue|((Ue>>>=7)?128:0),Ue&&(Ze.buf[Ze.pos++]=127&Ue|((Ue>>>=7)?128:0),Ue&&(Ze.buf[Ze.pos++]=127&Ue|((Ue>>>=7)?128:0),Ue&&(Ze.buf[Ze.pos++]=127&Ue)))))}(rt,ye)}(G,this):(this.realloc(4),this.buf[this.pos++]=127&G|(G>127?128:0),G<=127||(this.buf[this.pos++]=127&(G>>>=7)|(G>127?128:0),G<=127||(this.buf[this.pos++]=127&(G>>>=7)|(G>127?128:0),G<=127||(this.buf[this.pos++]=G>>>7&127))))},writeSVarint:function(G){this.writeVarint(G<0?2*-G-1:2*G)},writeBoolean:function(G){this.writeVarint(!!G)},writeString:function(G){G=String(G),this.realloc(4*G.length),this.pos++;var ne=this.pos;this.pos=function(Ne,rt,Ue){for(var Ze,it,nt=0;nt<rt.length;nt++){if((Ze=rt.charCodeAt(nt))>55295&&Ze<57344){if(!it){Ze>56319||nt+1===rt.length?(Ne[Ue++]=239,Ne[Ue++]=191,Ne[Ue++]=189):it=Ze;continue}if(Ze<56320){Ne[Ue++]=239,Ne[Ue++]=191,Ne[Ue++]=189,it=Ze;continue}Ze=it-55296<<10|Ze-56320|65536,it=null}else it&&(Ne[Ue++]=239,Ne[Ue++]=191,Ne[Ue++]=189,it=null);Ze<128?Ne[Ue++]=Ze:(Ze<2048?Ne[Ue++]=Ze>>6|192:(Ze<65536?Ne[Ue++]=Ze>>12|224:(Ne[Ue++]=Ze>>18|240,Ne[Ue++]=Ze>>12&63|128),Ne[Ue++]=Ze>>6&63|128),Ne[Ue++]=63&Ze|128)}return Ue}(this.buf,G,this.pos);var ye=this.pos-ne;ye>=128&&w(ne,ye,this),this.pos=ne-1,this.writeVarint(ye),this.pos+=ye},writeFloat:function(G){this.realloc(4),l.write(this.buf,G,this.pos,!0,23,4),this.pos+=4},writeDouble:function(G){this.realloc(8),l.write(this.buf,G,this.pos,!0,52,8),this.pos+=8},writeBytes:function(G){var ne=G.length;this.writeVarint(ne),this.realloc(ne);for(var ye=0;ye<ne;ye++)this.buf[this.pos++]=G[ye]},writeRawMessage:function(G,ne){this.pos++;var ye=this.pos;G(ne,this);var Ne=this.pos-ye;Ne>=128&&w(ye,Ne,this),this.pos=ye-1,this.writeVarint(Ne),this.pos+=Ne},writeMessage:function(G,ne,ye){this.writeTag(G,i.Bytes),this.writeRawMessage(ne,ye)},writePackedVarint:function(G,ne){ne.length&&this.writeMessage(G,P,ne)},writePackedSVarint:function(G,ne){ne.length&&this.writeMessage(G,k,ne)},writePackedBoolean:function(G,ne){ne.length&&this.writeMessage(G,Z,ne)},writePackedFloat:function(G,ne){ne.length&&this.writeMessage(G,D,ne)},writePackedDouble:function(G,ne){ne.length&&this.writeMessage(G,j,ne)},writePackedFixed32:function(G,ne){ne.length&&this.writeMessage(G,H,ne)},writePackedSFixed32:function(G,ne){ne.length&&this.writeMessage(G,W,ne)},writePackedFixed64:function(G,ne){ne.length&&this.writeMessage(G,J,ne)},writePackedSFixed64:function(G,ne){ne.length&&this.writeMessage(G,ie,ne)},writeBytesField:function(G,ne){this.writeTag(G,i.Bytes),this.writeBytes(ne)},writeFixed32Field:function(G,ne){this.writeTag(G,i.Fixed32),this.writeFixed32(ne)},writeSFixed32Field:function(G,ne){this.writeTag(G,i.Fixed32),this.writeSFixed32(ne)},writeFixed64Field:function(G,ne){this.writeTag(G,i.Fixed64),this.writeFixed64(ne)},writeSFixed64Field:function(G,ne){this.writeTag(G,i.Fixed64),this.writeSFixed64(ne)},writeVarintField:function(G,ne){this.writeTag(G,i.Varint),this.writeVarint(ne)},writeSVarintField:function(G,ne){this.writeTag(G,i.Varint),this.writeSVarint(ne)},writeStringField:function(G,ne){this.writeTag(G,i.Bytes),this.writeString(ne)},writeFloatField:function(G,ne){this.writeTag(G,i.Fixed32),this.writeFloat(ne)},writeDoubleField:function(G,ne){this.writeTag(G,i.Fixed64),this.writeDouble(ne)},writeBooleanField:function(G,ne){this.writeVarintField(G,!!ne)}},cx}var dx=S(tT());const hx=3;function BL(l,i,a){l===1&&a.readMessage(UL,i)}function UL(l,i,a){if(l===3){const{id:d,bitmap:g,width:v,height:x,left:w,top:P,advance:k}=a.readMessage(VL,{});i.push({id:d,bitmap:new hf({width:v+2*hx,height:x+2*hx},g),metrics:{width:v,height:x,left:w,top:P,advance:k}})}}function VL(l,i,a){l===1?i.id=a.readVarint():l===2?i.bitmap=a.readBytes():l===3?i.width=a.readVarint():l===4?i.height=a.readVarint():l===5?i.left=a.readSVarint():l===6?i.top=a.readSVarint():l===7&&(i.advance=a.readVarint())}const $L=hx;function rT(l){let i=0,a=0;for(const x of l)i+=x.w*x.h,a=Math.max(a,x.w);l.sort((x,w)=>w.h-x.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),a),h:1/0}];let g=0,v=0;for(const x of l)for(let w=d.length-1;w>=0;w--){const P=d[w];if(!(x.w>P.w||x.h>P.h)){if(x.x=P.x,x.y=P.y,v=Math.max(v,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===P.w&&x.h===P.h){const k=d.pop();w<d.length&&(d[w]=k)}else x.h===P.h?(P.x+=x.w,P.w-=x.w):x.w===P.w?(P.y+=x.h,P.h-=x.h):(d.push({x:P.x+x.w,y:P.y,w:P.w-x.w,h:x.h}),P.y+=x.h,P.h-=x.h);break}}return{w:g,h:v,fill:i/(g*v)||0}}const es=1;class px{constructor(i,{pixelRatio:a,version:d,stretchX:g,stretchY:v,content:x,textFitWidth:w,textFitHeight:P}){this.paddedRect=i,this.pixelRatio=a,this.stretchX=g,this.stretchY=v,this.content=x,this.version=d,this.textFitWidth=w,this.textFitHeight=P}get tl(){return[this.paddedRect.x+es,this.paddedRect.y+es]}get br(){return[this.paddedRect.x+this.paddedRect.w-es,this.paddedRect.y+this.paddedRect.h-es]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*es)/this.pixelRatio,(this.paddedRect.h-2*es)/this.pixelRatio]}}class nT{constructor(i,a){const d={},g={};this.haveRenderCallbacks=[];const v=[];this.addImages(i,d,v),this.addImages(a,g,v);const{w:x,h:w}=rT(v),P=new As({width:x||1,height:w||1});for(const k in i){const D=i[k],j=d[k].paddedRect;As.copy(D.data,P,{x:0,y:0},{x:j.x+es,y:j.y+es},D.data)}for(const k in a){const D=a[k],j=g[k].paddedRect,Z=j.x+es,H=j.y+es,W=D.data.width,J=D.data.height;As.copy(D.data,P,{x:0,y:0},{x:Z,y:H},D.data),As.copy(D.data,P,{x:0,y:J-1},{x:Z,y:H-1},{width:W,height:1}),As.copy(D.data,P,{x:0,y:0},{x:Z,y:H+J},{width:W,height:1}),As.copy(D.data,P,{x:W-1,y:0},{x:Z-1,y:H},{width:1,height:J}),As.copy(D.data,P,{x:0,y:0},{x:Z+W,y:H},{width:1,height:J})}this.image=P,this.iconPositions=d,this.patternPositions=g}addImages(i,a,d){for(const g in i){const v=i[g],x={x:0,y:0,w:v.data.width+2*es,h:v.data.height+2*es};d.push(x),a[g]=new px(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(i,a){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in i.updatedImages)this.patchUpdatedImage(this.iconPositions[d],i.getImage(d),a),this.patchUpdatedImage(this.patternPositions[d],i.getImage(d),a)}patchUpdatedImage(i,a,d){if(!i||!a||i.version===a.version)return;i.version=a.version;const[g,v]=i.tl;d.update(a.data,void 0,{x:g,y:v})}}var Cl;St("ImagePosition",px),St("ImageAtlas",nT),f.ai=void 0,(Cl=f.ai||(f.ai={}))[Cl.none=0]="none",Cl[Cl.horizontal=1]="horizontal",Cl[Cl.vertical=2]="vertical",Cl[Cl.horizontalOnly=3]="horizontalOnly";const Sf=-17;class Tf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,a){const d=new Tf;return d.scale=i||1,d.fontStack=a,d}static forImage(i){const a=new Tf;return a.imageName=i,a}}class Fd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,a){const d=new Fd;for(let g=0;g<i.sections.length;g++){const v=i.sections[g];v.image?d.addImageSection(v):d.addTextSection(v,a)}return d}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let a="";for(let d=0;d<i.length;d++){const g=i.charCodeAt(d+1)||null,v=i.charCodeAt(d-1)||null;a+=g&&Kp(g)&&!wf[i[d+1]]||v&&Kp(v)&&!wf[i[d-1]]||!wf[i[d]]?i[d]:wf[i[d]]}return a}(this.text)}trim(){let i=0;for(let d=0;d<this.text.length&&_y[this.text.charCodeAt(d)];d++)i++;let a=this.text.length;for(let d=this.text.length-1;d>=0&&d>=i&&_y[this.text.charCodeAt(d)];d--)a--;this.text=this.text.substring(i,a),this.sectionIndex=this.sectionIndex.slice(i,a)}substring(i,a){const d=new Fd;return d.text=this.text.substring(i,a),d.sectionIndex=this.sectionIndex.slice(i,a),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,a)=>Math.max(i,this.sections[a].scale),0)}addTextSection(i,a){this.text+=i.text,this.sections.push(Tf.forText(i.scale,i.fontStack||a));const d=this.sections.length-1;for(let g=0;g<i.text.length;++g)this.sectionIndex.push(d)}addImageSection(i){const a=i.image?i.image.name:"";if(a.length===0)return void At("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Tf.forImage(a)),this.sectionIndex.push(this.sections.length-1)):At("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function yy(l,i,a,d,g,v,x,w,P,k,D,j,Z,H,W){const J=Fd.fromFeature(l,g);let ie;j===f.ai.vertical&&J.verticalizePunctuation();const{processBidirectionalText:ue,processStyledBidirectionalText:Me}=wo;if(ue&&J.sections.length===1){ie=[];const ne=ue(J.toString(),fx(J,k,v,i,d,H));for(const ye of ne){const Ne=new Fd;Ne.text=ye,Ne.sections=J.sections;for(let rt=0;rt<ye.length;rt++)Ne.sectionIndex.push(0);ie.push(Ne)}}else if(Me){ie=[];const ne=Me(J.text,J.sectionIndex,fx(J,k,v,i,d,H));for(const ye of ne){const Ne=new Fd;Ne.text=ye[0],Ne.sectionIndex=ye[1],Ne.sections=J.sections,ie.push(Ne)}}else ie=function(ne,ye){const Ne=[],rt=ne.text;let Ue=0;for(const Ze of ye)Ne.push(ne.substring(Ue,Ze)),Ue=Ze;return Ue<rt.length&&Ne.push(ne.substring(Ue,rt.length)),Ne}(J,fx(J,k,v,i,d,H));const ge=[],G={positionedLines:ge,text:J.toString(),top:D[1],bottom:D[1],left:D[0],right:D[0],writingMode:j,iconsInText:!1,verticalizable:!1};return function(ne,ye,Ne,rt,Ue,Ze,it,nt,ot,Qe,Ct,Vt){let Bt=0,Rt=Sf,pr=0,cn=0;const On=nt==="right"?1:nt==="left"?0:.5;let ii=0;for(const yn of Ue){yn.trim();const Fn=yn.getMaxScale(),Oi=(Fn-1)*Nn,Fi={positionedGlyphs:[],lineOffset:0};ne.positionedLines[ii]=Fi;const Bi=Fi.positionedGlyphs;let Bn=0;if(!yn.length()){Rt+=Ze,++ii;continue}for(let ts=0;ts<yn.length();ts++){const Er=yn.getSection(ts),mi=yn.getSectionIndex(ts),on=yn.getCharCode(ts);let un=0,Yn=null,nu=null,js=null,Py=Nn;const ao=!(ot===f.ai.horizontal||!Ct&&!qc(on)||Ct&&(_y[on]||(oo=on,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(oo)))));if(Er.imageName){const fs=rt[Er.imageName];if(!fs)continue;js=Er.imageName,ne.iconsInText=ne.iconsInText||!0,nu=fs.paddedRect;const oi=fs.displaySize;Er.scale=Er.scale*Nn/Vt,Yn={width:oi[0],height:oi[1],left:es,top:-3,advance:ao?oi[1]:oi[0]},un=Oi+(Nn-oi[1]*Er.scale),Py=Yn.advance;const Ls=ao?oi[0]*Er.scale-Nn*Fn:oi[1]*Er.scale-Nn*Fn;Ls>0&&Ls>Bn&&(Bn=Ls)}else{const fs=Ne[Er.fontStack],oi=fs&&fs[on];if(oi&&oi.rect)nu=oi.rect,Yn=oi.metrics;else{const Ls=ye[Er.fontStack],Na=Ls&&Ls[on];if(!Na)continue;Yn=Na.metrics}un=(Fn-Er.scale)*Nn}ao?(ne.verticalizable=!0,Bi.push({glyph:on,imageName:js,x:Bt,y:Rt+un,vertical:ao,scale:Er.scale,fontStack:Er.fontStack,sectionIndex:mi,metrics:Yn,rect:nu}),Bt+=Py*Er.scale+Qe):(Bi.push({glyph:on,imageName:js,x:Bt,y:Rt+un,vertical:ao,scale:Er.scale,fontStack:Er.fontStack,sectionIndex:mi,metrics:Yn,rect:nu}),Bt+=Yn.advance*Er.scale+Qe)}Bi.length!==0&&(pr=Math.max(Bt-Qe,pr),qL(Bi,0,Bi.length-1,On,Bn)),Bt=0;const zs=Ze*Fn+Bn;Fi.lineOffset=Math.max(Bn,Oi),Rt+=zs,cn=Math.max(zs,cn),++ii}var oo;const Ni=Rt-Sf,{horizontalAlign:si,verticalAlign:fi}=mx(it);(function(yn,Fn,Oi,Fi,Bi,Bn,zs,ts,Er){const mi=(Fn-Oi)*Bi;let on=0;on=Bn!==zs?-ts*Fi-Sf:(-Fi*Er+.5)*zs;for(const un of yn)for(const Yn of un.positionedGlyphs)Yn.x+=mi,Yn.y+=on})(ne.positionedLines,On,si,fi,pr,cn,Ze,Ni,Ue.length),ne.top+=-fi*Ni,ne.bottom=ne.top+Ni,ne.left+=-si*pr,ne.right=ne.left+pr}(G,i,a,d,ie,x,w,P,j,k,Z,W),!function(ne){for(const ye of ne)if(ye.positionedGlyphs.length!==0)return!1;return!0}(ge)&&G}const _y={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ZL={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},GL={40:!0};function iT(l,i,a,d,g,v){if(i.imageName){const x=d[i.imageName];return x?x.displaySize[0]*i.scale*Nn/v+g:0}{const x=a[i.fontStack],w=x&&x[l];return w?w.metrics.advance*i.scale+g:0}}function sT(l,i,a,d){const g=Math.pow(l-i,2);return d?l<i?g/2:2*g:g+Math.abs(a)*a}function HL(l,i,a){let d=0;return l===10&&(d-=1e4),a&&(d+=150),l!==40&&l!==65288||(d+=50),i!==41&&i!==65289||(d+=50),d}function oT(l,i,a,d,g,v){let x=null,w=sT(i,a,g,v);for(const P of d){const k=sT(i-P.x,a,g,v)+P.badness;k<=w&&(x=P,w=k)}return{index:l,x:i,priorBreak:x,badness:w}}function aT(l){return l?aT(l.priorBreak).concat(l.index):[]}function fx(l,i,a,d,g,v){if(!l)return[];const x=[],w=function(j,Z,H,W,J,ie){let ue=0;for(let Me=0;Me<j.length();Me++){const ge=j.getSection(Me);ue+=iT(j.getCharCode(Me),ge,W,J,Z,ie)}return ue/Math.max(1,Math.ceil(ue/H))}(l,i,a,d,g,v),P=l.text.indexOf("")>=0;let k=0;for(let j=0;j<l.length();j++){const Z=l.getSection(j),H=l.getCharCode(j);if(_y[H]||(k+=iT(H,Z,d,g,i,v)),j<l.length()-1){const W=!((D=H)<11904)&&(!!mr["CJK Compatibility Forms"](D)||!!mr["CJK Compatibility"](D)||!!mr["CJK Strokes"](D)||!!mr["CJK Symbols and Punctuation"](D)||!!mr["Enclosed CJK Letters and Months"](D)||!!mr["Halfwidth and Fullwidth Forms"](D)||!!mr["Ideographic Description Characters"](D)||!!mr["Vertical Forms"](D)||Xp.test(String.fromCodePoint(D)));(ZL[H]||W||Z.imageName||j!==l.length()-2&&GL[l.getCharCode(j+1)])&&x.push(oT(j+1,k,w,x,HL(H,l.getCharCode(j+1),W&&P),!1))}}var D;return aT(oT(l.length(),k,w,x,0,!0))}function mx(l){let i=.5,a=.5;switch(l){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:i,verticalAlign:a}}function qL(l,i,a,d,g){if(!d&&!g)return;const v=l[a],x=(l[a].x+v.metrics.advance*v.scale)*d;for(let w=i;w<=a;w++)l[w].x-=x,l[w].y+=g}function WL(l,i,a){const{horizontalAlign:d,verticalAlign:g}=mx(a),v=i[0]-l.displaySize[0]*d,x=i[1]-l.displaySize[1]*g;return{image:l,top:x,bottom:x+l.displaySize[1],left:v,right:v+l.displaySize[0]}}function lT(l){var i,a;let d=l.left,g=l.top,v=l.right-d,x=l.bottom-g;const w=(i=l.image.textFitWidth)!==null&&i!==void 0?i:"stretchOrShrink",P=(a=l.image.textFitHeight)!==null&&a!==void 0?a:"stretchOrShrink",k=(l.image.content[2]-l.image.content[0])/(l.image.content[3]-l.image.content[1]);if(P==="proportional"){if(w==="stretchOnly"&&v/x<k||w==="proportional"){const D=Math.ceil(x*k);d*=D/v,v=D}}else if(w==="proportional"&&P==="stretchOnly"&&k!==0&&v/x>k){const D=Math.ceil(v/k);g*=D/x,x=D}return{x1:d,y1:g,x2:d+v,y2:g+x}}function cT(l,i,a,d,g,v){const x=l.image;let w;if(x.content){const ie=x.content,ue=x.pixelRatio||1;w=[ie[0]/ue,ie[1]/ue,x.displaySize[0]-ie[2]/ue,x.displaySize[1]-ie[3]/ue]}const P=i.left*v,k=i.right*v;let D,j,Z,H;a==="width"||a==="both"?(H=g[0]+P-d[3],j=g[0]+k+d[1]):(H=g[0]+(P+k-x.displaySize[0])/2,j=H+x.displaySize[0]);const W=i.top*v,J=i.bottom*v;return a==="height"||a==="both"?(D=g[1]+W-d[0],Z=g[1]+J+d[2]):(D=g[1]+(W+J-x.displaySize[1])/2,Z=D+x.displaySize[1]),{image:x,top:D,right:j,bottom:Z,left:H,collisionPadding:w}}const Cf=255,Ko=128,Pl=Cf*Ko;function uT(l,i){const{expression:a}=i;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new Hr(l+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:g}=a;let v=0;for(;v<d.length&&d[v]<=l;)v++;v=Math.max(0,v-1);let x=v;for(;x<d.length&&d[x]<l+1;)x++;x=Math.min(d.length-1,x);const w=d[v],P=d[x];return a.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:P,interpolationType:g}:{kind:"camera",minZoom:w,maxZoom:P,minSize:a.evaluate(new Hr(w)),maxSize:a.evaluate(new Hr(P)),interpolationType:g}}}function gx(l,i,a){let d="never";const g=l.get(i);return g?d=g:l.get(a)&&(d="always"),d}const XL=vf.VectorTileFeature.types,KL=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function vy(l,i,a,d,g,v,x,w,P,k,D,j,Z){const H=w?Math.min(Pl,Math.round(w[0])):0,W=w?Math.min(Pl,Math.round(w[1])):0;l.emplaceBack(i,a,Math.round(32*d),Math.round(32*g),v,x,(H<<1)+(P?1:0),W,16*k,16*D,256*j,256*Z)}function yx(l,i,a){l.emplaceBack(i.x,i.y,a),l.emplaceBack(i.x,i.y,a),l.emplaceBack(i.x,i.y,a),l.emplaceBack(i.x,i.y,a)}function YL(l){for(const i of l.sections)if(ty(i.text))return!0;return!1}class _x{constructor(i){this.layoutVertexArray=new ke,this.indexArray=new qe,this.programConfigurations=i,this.segments=new Ye,this.dynamicLayoutVertexArray=new Pe,this.opacityVertexArray=new Le,this.hasVisibleVertices=!1,this.placedSymbolArray=new b}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,a,d,g){this.isEmpty()||(d&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,zL.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,jL.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,KL,!0),this.opacityVertexBuffer.itemSize=1),(d||g)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}St("SymbolBuffers",_x);class vx{constructor(i,a,d){this.layoutVertexArray=new i,this.layoutAttributes=a,this.indexArray=new d,this.segments=new Ye,this.collisionVertexArray=new Ke}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,LL.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}St("CollisionBuffers",vx);class Bd{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(x=>x.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=uT(this.zoom,a["text-size"]),this.iconSizeData=uT(this.zoom,a["icon-size"]);const d=this.layers[0].layout,g=d.get("symbol-sort-key"),v=d.get("symbol-z-order");this.canOverlap=gx(d,"text-overlap","text-allow-overlap")!=="never"||gx(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(x=>f.ai[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=i.sourceID}createArrays(){this.text=new _x(new Xn(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new _x(new Xn(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new R,this.lineVertexArray=new O,this.symbolInstances=new M,this.textAnchorOffsets=new $}calculateGlyphDependencies(i,a,d,g,v){for(let x=0;x<i.length;x++)if(a[i.charCodeAt(x)]=!0,(d||g)&&v){const w=wf[i.charAt(x)];w&&(a[w.charCodeAt(0)]=!0)}}populate(i,a,d){const g=this.layers[0],v=g.layout,x=v.get("text-font"),w=v.get("text-field"),P=v.get("icon-image"),k=(w.value.kind!=="constant"||w.value.value instanceof vi&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),D=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,j=v.get("symbol-sort-key");if(this.features=[],!k&&!D)return;const Z=a.iconDependencies,H=a.glyphDependencies,W=a.availableImages,J=new Hr(this.zoom);for(const{feature:ie,id:ue,index:Me,sourceLayerIndex:ge}of i){const G=g._featureFilter.needGeometry,ne=ja(ie,G);if(!g._featureFilter.filter(J,ne,d))continue;let ye,Ne;if(G||(ne.geometry=za(ie)),k){const Ue=g.getValueAndResolveTokens("text-field",ne,d,W),Ze=vi.factory(Ue),it=this.hasRTLText=this.hasRTLText||YL(Ze);(!it||wo.getRTLTextPluginStatus()==="unavailable"||it&&wo.isParsed())&&(ye=OL(Ze,g,ne))}if(D){const Ue=g.getValueAndResolveTokens("icon-image",ne,d,W);Ne=Ue instanceof Ai?Ue:Ai.fromString(Ue)}if(!ye&&!Ne)continue;const rt=this.sortFeaturesByKey?j.evaluate(ne,{},d):void 0;if(this.features.push({id:ue,text:ye,icon:Ne,index:Me,sourceLayerIndex:ge,geometry:ne.geometry,properties:ie.properties,type:XL[ie.type],sortKey:rt}),Ne&&(Z[Ne.name]=!0),ye){const Ue=x.evaluate(ne,{},d).join(","),Ze=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(f.ai.vertical)>=0;for(const it of ye.sections)if(it.image)Z[it.image.name]=!0;else{const nt=Hc(ye.toString()),ot=it.fontStack||Ue,Qe=H[ot]=H[ot]||{};this.calculateGlyphDependencies(it.text,Qe,Ze,this.allowVerticalPlacement,nt)}}}v.get("symbol-placement")==="line"&&(this.features=function(ie){const ue={},Me={},ge=[];let G=0;function ne(Ue){ge.push(ie[Ue]),G++}function ye(Ue,Ze,it){const nt=Me[Ue];return delete Me[Ue],Me[Ze]=nt,ge[nt].geometry[0].pop(),ge[nt].geometry[0]=ge[nt].geometry[0].concat(it[0]),nt}function Ne(Ue,Ze,it){const nt=ue[Ze];return delete ue[Ze],ue[Ue]=nt,ge[nt].geometry[0].shift(),ge[nt].geometry[0]=it[0].concat(ge[nt].geometry[0]),nt}function rt(Ue,Ze,it){const nt=it?Ze[0][Ze[0].length-1]:Ze[0][0];return`${Ue}:${nt.x}:${nt.y}`}for(let Ue=0;Ue<ie.length;Ue++){const Ze=ie[Ue],it=Ze.geometry,nt=Ze.text?Ze.text.toString():null;if(!nt){ne(Ue);continue}const ot=rt(nt,it),Qe=rt(nt,it,!0);if(ot in Me&&Qe in ue&&Me[ot]!==ue[Qe]){const Ct=Ne(ot,Qe,it),Vt=ye(ot,Qe,ge[Ct].geometry);delete ue[ot],delete Me[Qe],Me[rt(nt,ge[Vt].geometry,!0)]=Vt,ge[Ct].geometry=null}else ot in Me?ye(ot,Qe,it):Qe in ue?Ne(ot,Qe,it):(ne(Ue),ue[ot]=G-1,Me[Qe]=G-1)}return ge.filter(Ue=>Ue.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ie,ue)=>ie.sortKey-ue.sortKey)}update(i,a,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,a,this.layers,d),this.icon.programConfigurations.updatePaintArrays(i,a,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,a){const d=this.lineVertexArray.length;if(i.segment!==void 0){let g=i.dist(a[i.segment+1]),v=i.dist(a[i.segment]);const x={};for(let w=i.segment+1;w<a.length;w++)x[w]={x:a[w].x,y:a[w].y,tileUnitDistanceFromAnchor:g},w<a.length-1&&(g+=a[w+1].dist(a[w]));for(let w=i.segment||0;w>=0;w--)x[w]={x:a[w].x,y:a[w].y,tileUnitDistanceFromAnchor:v},w>0&&(v+=a[w-1].dist(a[w]));for(let w=0;w<a.length;w++){const P=x[w];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(i,a,d,g,v,x,w,P,k,D,j,Z){const H=i.indexArray,W=i.layoutVertexArray,J=i.segments.prepareSegment(4*a.length,W,H,this.canOverlap?x.sortKey:void 0),ie=this.glyphOffsetArray.length,ue=J.vertexLength,Me=this.allowVerticalPlacement&&w===f.ai.vertical?Math.PI/2:0,ge=x.text&&x.text.sections;for(let G=0;G<a.length;G++){const{tl:ne,tr:ye,bl:Ne,br:rt,tex:Ue,pixelOffsetTL:Ze,pixelOffsetBR:it,minFontScaleX:nt,minFontScaleY:ot,glyphOffset:Qe,isSDF:Ct,sectionIndex:Vt}=a[G],Bt=J.vertexLength,Rt=Qe[1];vy(W,P.x,P.y,ne.x,Rt+ne.y,Ue.x,Ue.y,d,Ct,Ze.x,Ze.y,nt,ot),vy(W,P.x,P.y,ye.x,Rt+ye.y,Ue.x+Ue.w,Ue.y,d,Ct,it.x,Ze.y,nt,ot),vy(W,P.x,P.y,Ne.x,Rt+Ne.y,Ue.x,Ue.y+Ue.h,d,Ct,Ze.x,it.y,nt,ot),vy(W,P.x,P.y,rt.x,Rt+rt.y,Ue.x+Ue.w,Ue.y+Ue.h,d,Ct,it.x,it.y,nt,ot),yx(i.dynamicLayoutVertexArray,P,Me),H.emplaceBack(Bt,Bt+2,Bt+1),H.emplaceBack(Bt+1,Bt+2,Bt+3),J.vertexLength+=4,J.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Qe[0]),G!==a.length-1&&Vt===a[G+1].sectionIndex||i.programConfigurations.populatePaintArrays(W.length,x,x.index,{},Z,ge&&ge[Vt])}i.placedSymbolArray.emplaceBack(P.x,P.y,ie,this.glyphOffsetArray.length-ie,ue,k,D,P.segment,d?d[0]:0,d?d[1]:0,g[0],g[1],w,0,!1,0,j)}_addCollisionDebugVertex(i,a,d,g,v,x){return a.emplaceBack(0,0),i.emplaceBack(d.x,d.y,g,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(i,a,d,g,v,x,w){const P=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),k=P.vertexLength,D=v.layoutVertexArray,j=v.collisionVertexArray,Z=w.anchorX,H=w.anchorY;this._addCollisionDebugVertex(D,j,x,Z,H,new F(i,a)),this._addCollisionDebugVertex(D,j,x,Z,H,new F(d,a)),this._addCollisionDebugVertex(D,j,x,Z,H,new F(d,g)),this._addCollisionDebugVertex(D,j,x,Z,H,new F(i,g)),P.vertexLength+=4;const W=v.indexArray;W.emplaceBack(k,k+1),W.emplaceBack(k+1,k+2),W.emplaceBack(k+2,k+3),W.emplaceBack(k+3,k),P.primitiveLength+=4}addDebugCollisionBoxes(i,a,d,g){for(let v=i;v<a;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,g?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new vx(Fe,QS.members,$e),this.iconCollisionBox=new vx(Fe,QS.members,$e);for(let i=0;i<this.symbolInstances.length;i++){const a=this.symbolInstances.get(i);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(i,a,d,g,v,x,w,P,k){const D={};for(let j=a;j<d;j++){const Z=i.get(j);D.textBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},D.textFeatureIndex=Z.featureIndex;break}for(let j=g;j<v;j++){const Z=i.get(j);D.verticalTextBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},D.verticalTextFeatureIndex=Z.featureIndex;break}for(let j=x;j<w;j++){const Z=i.get(j);D.iconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},D.iconFeatureIndex=Z.featureIndex;break}for(let j=P;j<k;j++){const Z=i.get(j);D.verticalIconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},D.verticalIconFeatureIndex=Z.featureIndex;break}return D}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const d=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,a){const d=i.placedSymbolArray.get(a),g=d.vertexStartIndex+4*d.numGlyphs;for(let v=d.vertexStartIndex;v<g;v+=4)i.indexArray.emplaceBack(v,v+2,v+1),i.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(i),d=Math.cos(i),g=[],v=[],x=[];for(let w=0;w<this.symbolInstances.length;++w){x.push(w);const P=this.symbolInstances.get(w);g.push(0|Math.round(a*P.anchorX+d*P.anchorY)),v.push(P.featureIndex)}return x.sort((w,P)=>g[w]-g[P]||v[P]-v[w]),x}addToSortKeyRanges(i,a){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===a?d.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const d=this.symbolInstances.get(a);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((g,v,x)=>{g>=0&&x.indexOf(g)===v&&this.addIndicesForPlacedSymbol(this.text,g)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let dT,hT;St("SymbolBucket",Bd,{omit:["layers","collisionBoxArray","features","compareText"]}),Bd.MAX_GLYPHS=65535,Bd.addDynamicAttributes=yx;var xx={get paint(){return hT=hT||new bi({"icon-opacity":new Ht(se.paint_symbol["icon-opacity"]),"icon-color":new Ht(se.paint_symbol["icon-color"]),"icon-halo-color":new Ht(se.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ht(se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ht(se.paint_symbol["icon-halo-blur"]),"icon-translate":new Dt(se.paint_symbol["icon-translate"]),"icon-translate-anchor":new Dt(se.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ht(se.paint_symbol["text-opacity"]),"text-color":new Ht(se.paint_symbol["text-color"],{runtimeType:lt,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new Ht(se.paint_symbol["text-halo-color"]),"text-halo-width":new Ht(se.paint_symbol["text-halo-width"]),"text-halo-blur":new Ht(se.paint_symbol["text-halo-blur"]),"text-translate":new Dt(se.paint_symbol["text-translate"]),"text-translate-anchor":new Dt(se.paint_symbol["text-translate-anchor"])})},get layout(){return dT=dT||new bi({"symbol-placement":new Dt(se.layout_symbol["symbol-placement"]),"symbol-spacing":new Dt(se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Dt(se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ht(se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Dt(se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Dt(se.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Dt(se.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Dt(se.layout_symbol["icon-ignore-placement"]),"icon-optional":new Dt(se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Dt(se.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ht(se.layout_symbol["icon-size"]),"icon-text-fit":new Dt(se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Dt(se.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ht(se.layout_symbol["icon-image"]),"icon-rotate":new Ht(se.layout_symbol["icon-rotate"]),"icon-padding":new Ht(se.layout_symbol["icon-padding"]),"icon-keep-upright":new Dt(se.layout_symbol["icon-keep-upright"]),"icon-offset":new Ht(se.layout_symbol["icon-offset"]),"icon-anchor":new Ht(se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Dt(se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Dt(se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Dt(se.layout_symbol["text-rotation-alignment"]),"text-field":new Ht(se.layout_symbol["text-field"]),"text-font":new Ht(se.layout_symbol["text-font"]),"text-size":new Ht(se.layout_symbol["text-size"]),"text-max-width":new Ht(se.layout_symbol["text-max-width"]),"text-line-height":new Dt(se.layout_symbol["text-line-height"]),"text-letter-spacing":new Ht(se.layout_symbol["text-letter-spacing"]),"text-justify":new Ht(se.layout_symbol["text-justify"]),"text-radial-offset":new Ht(se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Dt(se.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ht(se.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ht(se.layout_symbol["text-anchor"]),"text-max-angle":new Dt(se.layout_symbol["text-max-angle"]),"text-writing-mode":new Dt(se.layout_symbol["text-writing-mode"]),"text-rotate":new Ht(se.layout_symbol["text-rotate"]),"text-padding":new Dt(se.layout_symbol["text-padding"]),"text-keep-upright":new Dt(se.layout_symbol["text-keep-upright"]),"text-transform":new Ht(se.layout_symbol["text-transform"]),"text-offset":new Ht(se.layout_symbol["text-offset"]),"text-allow-overlap":new Dt(se.layout_symbol["text-allow-overlap"]),"text-overlap":new Dt(se.layout_symbol["text-overlap"]),"text-ignore-placement":new Dt(se.layout_symbol["text-ignore-placement"]),"text-optional":new Dt(se.layout_symbol["text-optional"])})}};class pT{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:Ce,this.defaultValue=i}evaluate(i){if(i.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(i.formattedSection))return a.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}St("FormatSectionOverride",pT,{omit:["defaultValue"]});class xy extends no{constructor(i){super(i,xx)}recalculate(i,a){if(super.recalculate(i,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const g=[];for(const v of d)g.indexOf(v)<0&&g.push(v);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,a,d,g){const v=this.layout.get(i).evaluate(a,{},d,g),x=this._unevaluatedLayout._values[i];return x.isDataDriven()||Lc(x.value)||!v?v:function(w,P){return P.replace(/{([^{}]+)}/g,(k,D)=>w&&D in w?String(w[D]):"")}(a.properties,v)}createBucket(i){return new Bd(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const i of xx.paint.overridableProperties){if(!xy.hasPaintOverride(this.layout,i))continue;const a=this.paint.get(i),d=new pT(a),g=new Rp(d,a.property.specification);let v=null;v=a.value.kind==="constant"||a.value.kind==="source"?new Ap("source",g):new vl("composite",g,a.value.zoomStops),this.paint._values[i]=new Yi(a.property,v,a.parameters)}}_handleOverridablePaintPropertyUpdate(i,a,d){return!(!this.layout||a.isDataDriven()||d.isDataDriven())&&xy.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,a){const d=i.get("text-field"),g=xx.paint.properties[a];let v=!1;const x=w=>{for(const P of w)if(g.overrides&&g.overrides.hasOverride(P))return void(v=!0)};if(d.value.kind==="constant"&&d.value.value instanceof vi)x(d.value.value.sections);else if(d.value.kind==="source"){const w=k=>{v||(k instanceof xa&&gn(k.value)===Nt?x(k.value.sections):k instanceof Di?x(k.sections):k.eachChild(w))},P=d.value;P._styleExpression&&w(P._styleExpression.expression)}return v}}let fT;var QL={get paint(){return fT=fT||new bi({"background-color":new Dt(se.paint_background["background-color"]),"background-pattern":new Td(se.paint_background["background-pattern"]),"background-opacity":new Dt(se.paint_background["background-opacity"])})}};class JL extends no{constructor(i){super(i,QL)}}let mT;var eN={get paint(){return mT=mT||new bi({"raster-opacity":new Dt(se.paint_raster["raster-opacity"]),"raster-hue-rotate":new Dt(se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Dt(se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Dt(se.paint_raster["raster-brightness-max"]),"raster-saturation":new Dt(se.paint_raster["raster-saturation"]),"raster-contrast":new Dt(se.paint_raster["raster-contrast"]),"raster-resampling":new Dt(se.paint_raster["raster-resampling"]),"raster-fade-duration":new Dt(se.paint_raster["raster-fade-duration"])})}};class tN extends no{constructor(i){super(i,eN)}}class rN extends no{constructor(i){super(i,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class nN{constructor(i){this._methodToThrottle=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const bx=63710088e-1;class El{constructor(i,a){if(isNaN(i)||isNaN(a))throw new Error(`Invalid LngLat object: (${i}, ${a})`);if(this.lng=+i,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new El(It(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const a=Math.PI/180,d=this.lat*a,g=i.lat*a,v=Math.sin(d)*Math.sin(g)+Math.cos(d)*Math.cos(g)*Math.cos((i.lng-this.lng)*a);return bx*Math.acos(Math.min(v,1))}static convert(i){if(i instanceof El)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new El(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new El(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const gT=2*Math.PI*bx;function yT(l){return gT*Math.cos(l*Math.PI/180)}function _T(l){return(180+l)/360}function vT(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function xT(l,i){return l/yT(i)}function wx(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function bT(l,i){return l*yT(wx(i))}class Pf{constructor(i,a,d=0){this.x=+i,this.y=+a,this.z=+d}static fromLngLat(i,a=0){const d=El.convert(i);return new Pf(_T(d.lng),vT(d.lat),xT(a,d.lat))}toLngLat(){return new El(360*this.x-180,wx(this.y))}toAltitude(){return bT(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/gT*(i=wx(this.y),1/Math.cos(i*Math.PI/180));var i}}function wT(l,i,a){var d=2*Math.PI*6378137/256/Math.pow(2,a);return[l*d-2*Math.PI*6378137/2,i*d-2*Math.PI*6378137/2]}class Sx{constructor(i,a,d){if(!function(g,v,x){return!(g<0||g>25||x<0||x>=Math.pow(2,g)||v<0||v>=Math.pow(2,g))}(i,a,d))throw new Error(`x=${a}, y=${d}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=a,this.y=d,this.key=Ud(0,i,i,a,d)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,a,d){const g=(x=this.y,w=this.z,P=wT(256*(v=this.x),256*(x=Math.pow(2,w)-x-1),w),k=wT(256*(v+1),256*(x+1),w),P[0]+","+P[1]+","+k[0]+","+k[1]);var v,x,w,P,k;const D=function(j,Z,H){let W,J="";for(let ie=j;ie>0;ie--)W=1<<ie-1,J+=(Z&W?1:0)+(H&W?2:0);return J}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,D).replace(/{bbox-epsg-3857}/g,g)}isChildOf(i){const a=this.z-i.z;return a>0&&i.x===this.x>>a&&i.y===this.y>>a}getTilePoint(i){const a=Math.pow(2,this.z);return new F((i.x*a-this.x)*ct,(i.y*a-this.y)*ct)}toString(){return`${this.z}/${this.x}/${this.y}`}}class ST{constructor(i,a){this.wrap=i,this.canonical=a,this.key=Ud(i,a.z,a.z,a.x,a.y)}}class Ds{constructor(i,a,d,g,v){if(this.terrainRttPosMatrix32f=null,i<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${d}`);this.overscaledZ=i,this.wrap=a,this.canonical=new Sx(d,+g,+v),this.key=Ud(a,i,d,g,v)}clone(){return new Ds(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-i;return i>this.canonical.z?new Ds(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ds(i,this.wrap,i,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(i,a){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-i;return i>this.canonical.z?Ud(this.wrap*+a,i,this.canonical.z,this.canonical.x,this.canonical.y):Ud(this.wrap*+a,i,i,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(i){if(i.wrap!==this.wrap)return!1;const a=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>a&&i.canonical.y===this.canonical.y>>a}children(i){if(this.overscaledZ>=i)return[new Ds(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,d=2*this.canonical.x,g=2*this.canonical.y;return[new Ds(a,this.wrap,a,d,g),new Ds(a,this.wrap,a,d+1,g),new Ds(a,this.wrap,a,d,g+1),new Ds(a,this.wrap,a,d+1,g+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Ds(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Ds(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ST(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new Pf(i.x-this.wrap,i.y))}}function Ud(l,i,a,d,g){(l*=2)<0&&(l=-1*l-1);const v=1<<a;return(v*v*l+v*g+d).toString(36)+a.toString(36)+i.toString(36)}St("CanonicalTileID",Sx),St("OverscaledTileID",Ds,{omit:["terrainRttPosMatrix32f"]});class TT{constructor(i,a,d,g=1,v=1,x=1,w=0){if(this.uid=i,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void At(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=a.height;const P=this.dim=a.height-2;switch(this.data=new Uint32Array(a.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=v,this.blueFactor=x,this.baseShift=w;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let k=0;k<P;k++)this.data[this._idx(-1,k)]=this.data[this._idx(0,k)],this.data[this._idx(P,k)]=this.data[this._idx(P-1,k)],this.data[this._idx(k,-1)]=this.data[this._idx(k,0)],this.data[this._idx(k,P)]=this.data[this._idx(k,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let k=0;k<P;k++)for(let D=0;D<P;D++){const j=this.get(k,D);j>this.max&&(this.max=j),j<this.min&&(this.min=j)}}get(i,a){const d=new Uint8Array(this.data.buffer),g=4*this._idx(i,a);return this.unpack(d[g],d[g+1],d[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,a){if(i<-1||i>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(i+1)}unpack(i,a,d){return i*this.redFactor+a*this.greenFactor+d*this.blueFactor-this.baseShift}getPixels(){return new As({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,a,d){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let g=a*this.dim,v=a*this.dim+this.dim,x=d*this.dim,w=d*this.dim+this.dim;switch(a){case-1:g=v-1;break;case 1:v=g+1}switch(d){case-1:x=w-1;break;case 1:w=x+1}const P=-a*this.dim,k=-d*this.dim;for(let D=x;D<w;D++)for(let j=g;j<v;j++)this.data[this._idx(j,D)]=i.data[this._idx(j+P,D+k)]}}St("DEMData",TT);class CT{constructor(i){this._stringToNumber={},this._numberToString=[];for(let a=0;a<i.length;a++){const d=i[a];this._stringToNumber[d]=a,this._numberToString[a]=d}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class PT{constructor(i,a,d,g,v){this.type="Feature",this._vectorTileFeature=i,i._z=a,i._x=d,i._y=g,this.properties=i.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&(i[a]=this[a]);return i}}class ET{constructor(i,a){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Vc(ct,16,0),this.grid3D=new Vc(ct,16,0),this.featureIndexArray=new ee,this.promoteId=a}insert(i,a,d,g,v,x){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,g,v);const P=x?this.grid3D:this.grid;for(let k=0;k<a.length;k++){const D=a[k],j=[1/0,1/0,-1/0,-1/0];for(let Z=0;Z<D.length;Z++){const H=D[Z];j[0]=Math.min(j[0],H.x),j[1]=Math.min(j[1],H.y),j[2]=Math.max(j[2],H.x),j[3]=Math.max(j[3],H.y)}j[0]<ct&&j[1]<ct&&j[2]>=0&&j[3]>=0&&P.insert(w,j[0],j[1],j[2],j[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new vf.VectorTile(new dx(this.rawTileData)).layers,this.sourceLayerCoder=new CT(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,a,d,g){this.loadVTLayers();const v=i.params,x=ct/i.tileSize/i.scale,w=jp(v.filter),P=i.queryGeometry,k=i.queryPadding*x,D=kT(P),j=this.grid.query(D.minX-k,D.minY-k,D.maxX+k,D.maxY+k),Z=kT(i.cameraQueryGeometry),H=this.grid3D.query(Z.minX-k,Z.minY-k,Z.maxX+k,Z.maxY+k,(ie,ue,Me,ge)=>function(G,ne,ye,Ne,rt){for(const Ze of G)if(ne<=Ze.x&&ye<=Ze.y&&Ne>=Ze.x&&rt>=Ze.y)return!0;const Ue=[new F(ne,ye),new F(ne,rt),new F(Ne,rt),new F(Ne,ye)];if(G.length>2){for(const Ze of Ue)if(jd(G,Ze))return!0}for(let Ze=0;Ze<G.length-1;Ze++)if(Kj(G[Ze],G[Ze+1],Ue))return!0;return!1}(i.cameraQueryGeometry,ie-k,ue-k,Me+k,ge+k));for(const ie of H)j.push(ie);j.sort(iN);const W={};let J;for(let ie=0;ie<j.length;ie++){const ue=j[ie];if(ue===J)continue;J=ue;const Me=this.featureIndexArray.get(ue);let ge=null;this.loadMatchingFeature(W,Me.bucketIndex,Me.sourceLayerIndex,Me.featureIndex,w,v.layers,v.availableImages,a,d,g,(G,ne,ye)=>(ge||(ge=za(G)),ne.queryIntersectsFeature({queryGeometry:P,feature:G,featureState:ye,geometry:ge,zoom:this.z,transform:i.transform,pixelsToTileUnits:x,pixelPosMatrix:i.pixelPosMatrix})))}return W}loadMatchingFeature(i,a,d,g,v,x,w,P,k,D,j){const Z=this.bucketLayerIDs[a];if(x&&!Z.some(ie=>x.has(ie)))return;const H=this.sourceLayerCoder.decode(d),W=this.vtLayers[H].feature(g);if(v.needGeometry){const ie=ja(W,!0);if(!v.filter(new Hr(this.tileID.overscaledZ),ie,this.tileID.canonical))return}else if(!v.filter(new Hr(this.tileID.overscaledZ),W))return;const J=this.getId(W,H);for(let ie=0;ie<Z.length;ie++){const ue=Z[ie];if(x&&!x.has(ue))continue;const Me=P[ue];if(!Me)continue;let ge={};J&&D&&(ge=D.getState(Me.sourceLayer||"_geojsonTileLayer",J));const G=Wt({},k[ue]);G.paint=MT(G.paint,Me.paint,W,ge,w),G.layout=MT(G.layout,Me.layout,W,ge,w);const ne=!j||j(W,Me,ge);if(!ne)continue;const ye=new PT(W,this.z,this.x,this.y,J);ye.layer=G;let Ne=i[ue];Ne===void 0&&(Ne=i[ue]=[]),Ne.push({featureIndex:g,feature:ye,intersectionZ:ne})}}lookupSymbolFeatures(i,a,d,g,v,x,w,P){const k={};this.loadVTLayers();const D=jp(v);for(const j of i)this.loadMatchingFeature(k,d,g,j,D,x,w,P,a);return k}hasLayer(i){for(const a of this.bucketLayerIDs)for(const d of a)if(i===d)return!0;return!1}getId(i,a){var d;let g=i.id;return this.promoteId&&(g=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof g=="boolean"&&(g=Number(g)),g===void 0&&(!((d=i.properties)===null||d===void 0)&&d.cluster)&&this.promoteId&&(g=Number(i.properties.cluster_id))),g}}function MT(l,i,a,d,g){return gt(l,(v,x)=>{const w=i instanceof wd?i.get(x):null;return w&&w.evaluate?w.evaluate(a,d,g):w})}function kT(l){let i=1/0,a=1/0,d=-1/0,g=-1/0;for(const v of l)i=Math.min(i,v.x),a=Math.min(a,v.y),d=Math.max(d,v.x),g=Math.max(g,v.y);return{minX:i,minY:a,maxX:d,maxY:g}}function iN(l,i){return i-l}function IT(l,i,a,d,g){const v=[];for(let x=0;x<l.length;x++){const w=l[x];let P;for(let k=0;k<w.length-1;k++){let D=w[k],j=w[k+1];D.x<i&&j.x<i||(D.x<i?D=new F(i,D.y+(i-D.x)/(j.x-D.x)*(j.y-D.y))._round():j.x<i&&(j=new F(i,D.y+(i-D.x)/(j.x-D.x)*(j.y-D.y))._round()),D.y<a&&j.y<a||(D.y<a?D=new F(D.x+(a-D.y)/(j.y-D.y)*(j.x-D.x),a)._round():j.y<a&&(j=new F(D.x+(a-D.y)/(j.y-D.y)*(j.x-D.x),a)._round()),D.x>=d&&j.x>=d||(D.x>=d?D=new F(d,D.y+(d-D.x)/(j.x-D.x)*(j.y-D.y))._round():j.x>=d&&(j=new F(d,D.y+(d-D.x)/(j.x-D.x)*(j.y-D.y))._round()),D.y>=g&&j.y>=g||(D.y>=g?D=new F(D.x+(g-D.y)/(j.y-D.y)*(j.x-D.x),g)._round():j.y>=g&&(j=new F(D.x+(g-D.y)/(j.y-D.y)*(j.x-D.x),g)._round()),P&&D.equals(P[P.length-1])||(P=[D],v.push(P)),P.push(j)))))}}return v}St("FeatureIndex",ET,{omit:["rawTileData","sourceLayerCoder"]});class Ml extends F{constructor(i,a,d,g){super(i,a),this.angle=d,g!==void 0&&(this.segment=g)}clone(){return new Ml(this.x,this.y,this.angle,this.segment)}}function RT(l,i,a,d,g){if(i.segment===void 0||a===0)return!0;let v=i,x=i.segment+1,w=0;for(;w>-a/2;){if(x--,x<0)return!1;w-=l[x].dist(v),v=l[x]}w+=l[x].dist(l[x+1]),x++;const P=[];let k=0;for(;w<a/2;){const D=l[x],j=l[x+1];if(!j)return!1;let Z=l[x-1].angleTo(D)-D.angleTo(j);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:w,angleDelta:Z}),k+=Z;w-P[0].distance>d;)k-=P.shift().angleDelta;if(k>g)return!1;x++,w+=D.dist(j)}return!0}function AT(l){let i=0;for(let a=0;a<l.length-1;a++)i+=l[a].dist(l[a+1]);return i}function DT(l,i,a){return l?.6*i*a:0}function zT(l,i){return Math.max(l?l.right-l.left:0,i?i.right-i.left:0)}function sN(l,i,a,d,g,v){const x=DT(a,g,v),w=zT(a,d)*v;let P=0;const k=AT(l)/2;for(let D=0;D<l.length-1;D++){const j=l[D],Z=l[D+1],H=j.dist(Z);if(P+H>k){const W=(k-P)/H,J=Ki.number(j.x,Z.x,W),ie=Ki.number(j.y,Z.y,W),ue=new Ml(J,ie,Z.angleTo(j),D);return ue._round(),!x||RT(l,ue,w,x,i)?ue:void 0}P+=H}}function oN(l,i,a,d,g,v,x,w,P){const k=DT(d,v,x),D=zT(d,g),j=D*x,Z=l[0].x===0||l[0].x===P||l[0].y===0||l[0].y===P;return i-j<i/4&&(i=j+i/4),jT(l,Z?i/2*w%i:(D/2+2*v)*x*w%i,i,k,a,j,Z,!1,P)}function jT(l,i,a,d,g,v,x,w,P){const k=v/2,D=AT(l);let j=0,Z=i-a,H=[];for(let W=0;W<l.length-1;W++){const J=l[W],ie=l[W+1],ue=J.dist(ie),Me=ie.angleTo(J);for(;Z+a<j+ue;){Z+=a;const ge=(Z-j)/ue,G=Ki.number(J.x,ie.x,ge),ne=Ki.number(J.y,ie.y,ge);if(G>=0&&G<P&&ne>=0&&ne<P&&Z-k>=0&&Z+k<=D){const ye=new Ml(G,ne,Me,W);ye._round(),d&&!RT(l,ye,v,d,g)||H.push(ye)}}j+=ue}return w||H.length||x||(H=jT(l,j/2,a,d,g,v,x,!0,P)),H}St("Anchor",Ml);const Ef=es;function LT(l,i,a,d){const g=[],v=l.image,x=v.pixelRatio,w=v.paddedRect.w-2*Ef,P=v.paddedRect.h-2*Ef;let k={x1:l.left,y1:l.top,x2:l.right,y2:l.bottom};const D=v.stretchX||[[0,w]],j=v.stretchY||[[0,P]],Z=(Qe,Ct)=>Qe+Ct[1]-Ct[0],H=D.reduce(Z,0),W=j.reduce(Z,0),J=w-H,ie=P-W;let ue=0,Me=H,ge=0,G=W,ne=0,ye=J,Ne=0,rt=ie;if(v.content&&d){const Qe=v.content,Ct=Qe[2]-Qe[0],Vt=Qe[3]-Qe[1];(v.textFitWidth||v.textFitHeight)&&(k=lT(l)),ue=by(D,0,Qe[0]),ge=by(j,0,Qe[1]),Me=by(D,Qe[0],Qe[2]),G=by(j,Qe[1],Qe[3]),ne=Qe[0]-ue,Ne=Qe[1]-ge,ye=Ct-Me,rt=Vt-G}const Ue=k.x1,Ze=k.y1,it=k.x2-Ue,nt=k.y2-Ze,ot=(Qe,Ct,Vt,Bt)=>{const Rt=wy(Qe.stretch-ue,Me,it,Ue),pr=Sy(Qe.fixed-ne,ye,Qe.stretch,H),cn=wy(Ct.stretch-ge,G,nt,Ze),On=Sy(Ct.fixed-Ne,rt,Ct.stretch,W),ii=wy(Vt.stretch-ue,Me,it,Ue),oo=Sy(Vt.fixed-ne,ye,Vt.stretch,H),Ni=wy(Bt.stretch-ge,G,nt,Ze),si=Sy(Bt.fixed-Ne,rt,Bt.stretch,W),fi=new F(Rt,cn),yn=new F(ii,cn),Fn=new F(ii,Ni),Oi=new F(Rt,Ni),Fi=new F(pr/x,On/x),Bi=new F(oo/x,si/x),Bn=i*Math.PI/180;if(Bn){const Er=Math.sin(Bn),mi=Math.cos(Bn),on=[mi,-Er,Er,mi];fi._matMult(on),yn._matMult(on),Oi._matMult(on),Fn._matMult(on)}const zs=Qe.stretch+Qe.fixed,ts=Ct.stretch+Ct.fixed;return{tl:fi,tr:yn,bl:Oi,br:Fn,tex:{x:v.paddedRect.x+Ef+zs,y:v.paddedRect.y+Ef+ts,w:Vt.stretch+Vt.fixed-zs,h:Bt.stretch+Bt.fixed-ts},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Fi,pixelOffsetBR:Bi,minFontScaleX:ye/x/it,minFontScaleY:rt/x/nt,isSDF:a}};if(d&&(v.stretchX||v.stretchY)){const Qe=NT(D,J,H),Ct=NT(j,ie,W);for(let Vt=0;Vt<Qe.length-1;Vt++){const Bt=Qe[Vt],Rt=Qe[Vt+1];for(let pr=0;pr<Ct.length-1;pr++)g.push(ot(Bt,Ct[pr],Rt,Ct[pr+1]))}}else g.push(ot({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:P+1}));return g}function by(l,i,a){let d=0;for(const g of l)d+=Math.max(i,Math.min(a,g[1]))-Math.max(i,Math.min(a,g[0]));return d}function NT(l,i,a){const d=[{fixed:-1,stretch:0}];for(const[g,v]of l){const x=d[d.length-1];d.push({fixed:g-x.stretch,stretch:x.stretch}),d.push({fixed:g-x.stretch,stretch:x.stretch+(v-g)})}return d.push({fixed:i+Ef,stretch:a}),d}function wy(l,i,a,d){return l/i*a+d}function Sy(l,i,a,d){return l-i*a/d}class Ty{constructor(i,a,d,g,v,x,w,P,k,D){var j;if(this.boxStartIndex=i.length,k){let Z=x.top,H=x.bottom;const W=x.collisionPadding;W&&(Z-=W[1],H+=W[3]);let J=H-Z;J>0&&(J=Math.max(10,J),this.circleDiameter=J)}else{const Z=!((j=x.image)===null||j===void 0)&&j.content&&(x.image.textFitWidth||x.image.textFitHeight)?lT(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};Z.y1=Z.y1*w-P[0],Z.y2=Z.y2*w+P[2],Z.x1=Z.x1*w-P[3],Z.x2=Z.x2*w+P[1];const H=x.collisionPadding;if(H&&(Z.x1-=H[0]*w,Z.y1-=H[1]*w,Z.x2+=H[2]*w,Z.y2+=H[3]*w),D){const W=new F(Z.x1,Z.y1),J=new F(Z.x2,Z.y1),ie=new F(Z.x1,Z.y2),ue=new F(Z.x2,Z.y2),Me=D*Math.PI/180;W._rotate(Me),J._rotate(Me),ie._rotate(Me),ue._rotate(Me),Z.x1=Math.min(W.x,J.x,ie.x,ue.x),Z.x2=Math.max(W.x,J.x,ie.x,ue.x),Z.y1=Math.min(W.y,J.y,ie.y,ue.y),Z.y2=Math.max(W.y,J.y,ie.y,ue.y)}i.emplaceBack(a.x,a.y,Z.x1,Z.y1,Z.x2,Z.y2,d,g,v)}this.boxEndIndex=i.length}}class aN{constructor(i=[],a=(d,g)=>d<g?-1:d>g?1:0){if(this.data=i,this.length=this.data.length,this.compare=a,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],a=this.data.pop();return--this.length>0&&(this.data[0]=a,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:a,compare:d}=this,g=a[i];for(;i>0;){const v=i-1>>1,x=a[v];if(d(g,x)>=0)break;a[i]=x,i=v}a[i]=g}_down(i){const{data:a,compare:d}=this,g=this.length>>1,v=a[i];for(;i<g;){let x=1+(i<<1);const w=x+1;if(w<this.length&&d(a[w],a[x])<0&&(x=w),d(a[x],v)>=0)break;a[i]=a[x],i=x}a[i]=v}}function lN(l,i=1,a=!1){let d=1/0,g=1/0,v=-1/0,x=-1/0;const w=l[0];for(let H=0;H<w.length;H++){const W=w[H];(!H||W.x<d)&&(d=W.x),(!H||W.y<g)&&(g=W.y),(!H||W.x>v)&&(v=W.x),(!H||W.y>x)&&(x=W.y)}const P=Math.min(v-d,x-g);let k=P/2;const D=new aN([],cN);if(P===0)return new F(d,g);for(let H=d;H<v;H+=P)for(let W=g;W<x;W+=P)D.push(new Vd(H+k,W+k,k,l));let j=function(H){let W=0,J=0,ie=0;const ue=H[0];for(let Me=0,ge=ue.length,G=ge-1;Me<ge;G=Me++){const ne=ue[Me],ye=ue[G],Ne=ne.x*ye.y-ye.x*ne.y;J+=(ne.x+ye.x)*Ne,ie+=(ne.y+ye.y)*Ne,W+=3*Ne}return new Vd(J/W,ie/W,0,H)}(l),Z=D.length;for(;D.length;){const H=D.pop();(H.d>j.d||!j.d)&&(j=H,a&&console.log("found best %d after %d probes",Math.round(1e4*H.d)/1e4,Z)),H.max-j.d<=i||(k=H.h/2,D.push(new Vd(H.p.x-k,H.p.y-k,k,l)),D.push(new Vd(H.p.x+k,H.p.y-k,k,l)),D.push(new Vd(H.p.x-k,H.p.y+k,k,l)),D.push(new Vd(H.p.x+k,H.p.y+k,k,l)),Z+=4)}return a&&(console.log(`num probes: ${Z}`),console.log(`best distance: ${j.d}`)),j.p}function cN(l,i){return i.max-l.max}function Vd(l,i,a,d){this.p=new F(l,i),this.h=a,this.d=function(g,v){let x=!1,w=1/0;for(let P=0;P<v.length;P++){const k=v[P];for(let D=0,j=k.length,Z=j-1;D<j;Z=D++){const H=k[D],W=k[Z];H.y>g.y!=W.y>g.y&&g.x<(W.x-H.x)*(g.y-H.y)/(W.y-H.y)+H.x&&(x=!x),w=Math.min(w,_S(g,H,W))}}return(x?1:-1)*Math.sqrt(w)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var pi;f.av=void 0,(pi=f.av||(f.av={}))[pi.center=1]="center",pi[pi.left=2]="left",pi[pi.right=3]="right",pi[pi.top=4]="top",pi[pi.bottom=5]="bottom",pi[pi["top-left"]=6]="top-left",pi[pi["top-right"]=7]="top-right",pi[pi["bottom-left"]=8]="bottom-left",pi[pi["bottom-right"]=9]="bottom-right";const kl=7,Tx=Number.POSITIVE_INFINITY;function OT(l,i){return i[1]!==Tx?function(a,d,g){let v=0,x=0;switch(d=Math.abs(d),g=Math.abs(g),a){case"top-right":case"top-left":case"top":x=g-kl;break;case"bottom-right":case"bottom-left":case"bottom":x=-g+kl}switch(a){case"top-right":case"bottom-right":case"right":v=-d;break;case"top-left":case"bottom-left":case"left":v=d}return[v,x]}(l,i[0],i[1]):function(a,d){let g=0,v=0;d<0&&(d=0);const x=d/Math.SQRT2;switch(a){case"top-right":case"top-left":v=x-kl;break;case"bottom-right":case"bottom-left":v=-x+kl;break;case"bottom":v=-d+kl;break;case"top":v=d-kl}switch(a){case"top-right":case"bottom-right":g=-x;break;case"top-left":case"bottom-left":g=x;break;case"left":g=d;break;case"right":g=-d}return[g,v]}(l,i[0])}function FT(l,i,a){var d;const g=l.layout,v=(d=g.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(i,{},a);if(v){const w=v.values,P=[];for(let k=0;k<w.length;k+=2){const D=P[k]=w[k],j=w[k+1].map(Z=>Z*Nn);D.startsWith("top")?j[1]-=kl:D.startsWith("bottom")&&(j[1]+=kl),P[k+1]=j}return new ci(P)}const x=g.get("text-variable-anchor");if(x){let w;w=l._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(i,{},a)*Nn,Tx]:g.get("text-offset").evaluate(i,{},a).map(k=>k*Nn);const P=[];for(const k of x)P.push(k,OT(k,w));return new ci(P)}return null}function Cx(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function uN(l,i,a,d,g,v,x,w,P,k,D,j){let Z=v.textMaxSize.evaluate(i,{});Z===void 0&&(Z=x);const H=l.layers[0].layout,W=H.get("icon-offset").evaluate(i,{},D),J=UT(a.horizontal),ie=x/24,ue=l.tilePixelRatio*ie,Me=l.tilePixelRatio*Z/24,ge=l.tilePixelRatio*w,G=l.tilePixelRatio*H.get("symbol-spacing"),ne=H.get("text-padding")*l.tilePixelRatio,ye=function(Vt,Bt,Rt,pr=1){const cn=Vt.get("icon-padding").evaluate(Bt,{},Rt),On=cn&&cn.values;return[On[0]*pr,On[1]*pr,On[2]*pr,On[3]*pr]}(H,i,D,l.tilePixelRatio),Ne=H.get("text-max-angle")/180*Math.PI,rt=H.get("text-rotation-alignment")!=="viewport"&&H.get("symbol-placement")!=="point",Ue=H.get("icon-rotation-alignment")==="map"&&H.get("symbol-placement")!=="point",Ze=H.get("symbol-placement"),it=G/2,nt=H.get("icon-text-fit");let ot;d&&nt!=="none"&&(l.allowVerticalPlacement&&a.vertical&&(ot=cT(d,a.vertical,nt,H.get("icon-text-fit-padding"),W,ie)),J&&(d=cT(d,J,nt,H.get("icon-text-fit-padding"),W,ie)));const Qe=D?j.line.getGranularityForZoomLevel(D.z):1,Ct=(Vt,Bt)=>{Bt.x<0||Bt.x>=ct||Bt.y<0||Bt.y>=ct||function(Rt,pr,cn,On,ii,oo,Ni,si,fi,yn,Fn,Oi,Fi,Bi,Bn,zs,ts,Er,mi,on,un,Yn,nu,js,Py){const ao=Rt.addToLineVertexArray(pr,cn);let fs,oi,Ls,Na,GT=0,HT=0,qT=0,WT=0,Dx=-1,zx=-1;const Oa={};let XT=jn("");if(Rt.allowVerticalPlacement&&On.vertical){const Ti=si.layout.get("text-rotate").evaluate(un,{},js)+90;Ls=new Ty(fi,pr,yn,Fn,Oi,On.vertical,Fi,Bi,Bn,Ti),Ni&&(Na=new Ty(fi,pr,yn,Fn,Oi,Ni,ts,Er,Bn,Ti))}if(ii){const Ti=si.layout.get("icon-rotate").evaluate(un,{}),Ns=si.layout.get("icon-text-fit")!=="none",iu=LT(ii,Ti,nu,Ns),To=Ni?LT(Ni,Ti,nu,Ns):void 0;oi=new Ty(fi,pr,yn,Fn,Oi,ii,ts,Er,!1,Ti),GT=4*iu.length;const su=Rt.iconSizeData;let Yo=null;su.kind==="source"?(Yo=[Ko*si.layout.get("icon-size").evaluate(un,{})],Yo[0]>Pl&&At(`${Rt.layerIds[0]}: Value for "icon-size" is >= ${Cf}. Reduce your "icon-size".`)):su.kind==="composite"&&(Yo=[Ko*Yn.compositeIconSizes[0].evaluate(un,{},js),Ko*Yn.compositeIconSizes[1].evaluate(un,{},js)],(Yo[0]>Pl||Yo[1]>Pl)&&At(`${Rt.layerIds[0]}: Value for "icon-size" is >= ${Cf}. Reduce your "icon-size".`)),Rt.addSymbols(Rt.icon,iu,Yo,on,mi,un,f.ai.none,pr,ao.lineStartIndex,ao.lineLength,-1,js),Dx=Rt.icon.placedSymbolArray.length-1,To&&(HT=4*To.length,Rt.addSymbols(Rt.icon,To,Yo,on,mi,un,f.ai.vertical,pr,ao.lineStartIndex,ao.lineLength,-1,js),zx=Rt.icon.placedSymbolArray.length-1)}const KT=Object.keys(On.horizontal);for(const Ti of KT){const Ns=On.horizontal[Ti];if(!fs){XT=jn(Ns.text);const To=si.layout.get("text-rotate").evaluate(un,{},js);fs=new Ty(fi,pr,yn,Fn,Oi,Ns,Fi,Bi,Bn,To)}const iu=Ns.positionedLines.length===1;if(qT+=BT(Rt,pr,Ns,oo,si,Bn,un,zs,ao,On.vertical?f.ai.horizontal:f.ai.horizontalOnly,iu?KT:[Ti],Oa,Dx,Yn,js),iu)break}On.vertical&&(WT+=BT(Rt,pr,On.vertical,oo,si,Bn,un,zs,ao,f.ai.vertical,["vertical"],Oa,zx,Yn,js));const pN=fs?fs.boxStartIndex:Rt.collisionBoxArray.length,fN=fs?fs.boxEndIndex:Rt.collisionBoxArray.length,mN=Ls?Ls.boxStartIndex:Rt.collisionBoxArray.length,gN=Ls?Ls.boxEndIndex:Rt.collisionBoxArray.length,yN=oi?oi.boxStartIndex:Rt.collisionBoxArray.length,_N=oi?oi.boxEndIndex:Rt.collisionBoxArray.length,vN=Na?Na.boxStartIndex:Rt.collisionBoxArray.length,xN=Na?Na.boxEndIndex:Rt.collisionBoxArray.length;let So=-1;const Ey=(Ti,Ns)=>Ti&&Ti.circleDiameter?Math.max(Ti.circleDiameter,Ns):Ns;So=Ey(fs,So),So=Ey(Ls,So),So=Ey(oi,So),So=Ey(Na,So);const YT=So>-1?1:0;YT&&(So*=Py/Nn),Rt.glyphOffsetArray.length>=Bd.MAX_GLYPHS&&At("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),un.sortKey!==void 0&&Rt.addToSortKeyRanges(Rt.symbolInstances.length,un.sortKey);const bN=FT(si,un,js),[wN,SN]=function(Ti,Ns){const iu=Ti.length,To=Ns==null?void 0:Ns.values;if((To==null?void 0:To.length)>0)for(let su=0;su<To.length;su+=2){const Yo=To[su+1];Ti.emplaceBack(f.av[To[su]],Yo[0],Yo[1])}return[iu,Ti.length]}(Rt.textAnchorOffsets,bN);Rt.symbolInstances.emplaceBack(pr.x,pr.y,Oa.right>=0?Oa.right:-1,Oa.center>=0?Oa.center:-1,Oa.left>=0?Oa.left:-1,Oa.vertical||-1,Dx,zx,XT,pN,fN,mN,gN,yN,_N,vN,xN,yn,qT,WT,GT,HT,YT,0,Fi,So,wN,SN)}(l,Bt,Vt,a,d,g,ot,l.layers[0],l.collisionBoxArray,i.index,i.sourceLayerIndex,l.index,ue,[ne,ne,ne,ne],rt,P,ge,ye,Ue,W,i,v,k,D,x)};if(Ze==="line")for(const Vt of IT(i.geometry,0,0,ct,ct)){const Bt=ru(Vt,Qe),Rt=oN(Bt,G,Ne,a.vertical||J,d,24,Me,l.overscaling,ct);for(const pr of Rt)J&&dN(l,J.text,it,pr)||Ct(Bt,pr)}else if(Ze==="line-center"){for(const Vt of i.geometry)if(Vt.length>1){const Bt=ru(Vt,Qe),Rt=sN(Bt,Ne,a.vertical||J,d,24,Me);Rt&&Ct(Bt,Rt)}}else if(i.type==="Polygon")for(const Vt of ml(i.geometry,0)){const Bt=lN(Vt,16);Ct(ru(Vt[0],Qe,!0),new Ml(Bt.x,Bt.y,0))}else if(i.type==="LineString")for(const Vt of i.geometry){const Bt=ru(Vt,Qe);Ct(Bt,new Ml(Bt[0].x,Bt[0].y,0))}else if(i.type==="Point")for(const Vt of i.geometry)for(const Bt of Vt)Ct([Bt],new Ml(Bt.x,Bt.y,0))}function BT(l,i,a,d,g,v,x,w,P,k,D,j,Z,H,W){const J=function(Me,ge,G,ne,ye,Ne,rt,Ue){const Ze=ne.layout.get("text-rotate").evaluate(Ne,{})*Math.PI/180,it=[];for(const nt of ge.positionedLines)for(const ot of nt.positionedGlyphs){if(!ot.rect)continue;const Qe=ot.rect||{};let Ct=$L+1,Vt=!0,Bt=1,Rt=0;const pr=(ye||Ue)&&ot.vertical,cn=ot.metrics.advance*ot.scale/2;if(Ue&&ge.verticalizable&&(Rt=nt.lineOffset/2-(ot.imageName?-(Nn-ot.metrics.width*ot.scale)/2:(ot.scale-1)*Nn)),ot.imageName){const Er=rt[ot.imageName];Vt=Er.sdf,Bt=Er.pixelRatio,Ct=es/Bt}const On=ye?[ot.x+cn,ot.y]:[0,0];let ii=ye?[0,0]:[ot.x+cn+G[0],ot.y+G[1]-Rt],oo=[0,0];pr&&(oo=ii,ii=[0,0]);const Ni=ot.metrics.isDoubleResolution?2:1,si=(ot.metrics.left-Ct)*ot.scale-cn+ii[0],fi=(-ot.metrics.top-Ct)*ot.scale+ii[1],yn=si+Qe.w/Ni*ot.scale/Bt,Fn=fi+Qe.h/Ni*ot.scale/Bt,Oi=new F(si,fi),Fi=new F(yn,fi),Bi=new F(si,Fn),Bn=new F(yn,Fn);if(pr){const Er=new F(-cn,cn-Sf),mi=-Math.PI/2,on=Nn/2-cn,un=new F(5-Sf-on,-(ot.imageName?on:0)),Yn=new F(...oo);Oi._rotateAround(mi,Er)._add(un)._add(Yn),Fi._rotateAround(mi,Er)._add(un)._add(Yn),Bi._rotateAround(mi,Er)._add(un)._add(Yn),Bn._rotateAround(mi,Er)._add(un)._add(Yn)}if(Ze){const Er=Math.sin(Ze),mi=Math.cos(Ze),on=[mi,-Er,Er,mi];Oi._matMult(on),Fi._matMult(on),Bi._matMult(on),Bn._matMult(on)}const zs=new F(0,0),ts=new F(0,0);it.push({tl:Oi,tr:Fi,bl:Bi,br:Bn,tex:Qe,writingMode:ge.writingMode,glyphOffset:On,sectionIndex:ot.sectionIndex,isSDF:Vt,pixelOffsetTL:zs,pixelOffsetBR:ts,minFontScaleX:0,minFontScaleY:0})}return it}(0,a,w,g,v,x,d,l.allowVerticalPlacement),ie=l.textSizeData;let ue=null;ie.kind==="source"?(ue=[Ko*g.layout.get("text-size").evaluate(x,{})],ue[0]>Pl&&At(`${l.layerIds[0]}: Value for "text-size" is >= ${Cf}. Reduce your "text-size".`)):ie.kind==="composite"&&(ue=[Ko*H.compositeTextSizes[0].evaluate(x,{},W),Ko*H.compositeTextSizes[1].evaluate(x,{},W)],(ue[0]>Pl||ue[1]>Pl)&&At(`${l.layerIds[0]}: Value for "text-size" is >= ${Cf}. Reduce your "text-size".`)),l.addSymbols(l.text,J,ue,w,v,x,k,i,P.lineStartIndex,P.lineLength,Z,W);for(const Me of D)j[Me]=l.text.placedSymbolArray.length-1;return 4*J.length}function UT(l){for(const i in l)return l[i];return null}function dN(l,i,a,d){const g=l.compareText;if(i in g){const v=g[i];for(let x=v.length-1;x>=0;x--)if(d.dist(v[x])<a)return!0}else g[i]=[];return g[i].push(d),!1}const VT=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Px{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,d]=new Uint8Array(i,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=d>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const v=VT[15&d];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(i,2,1),[w]=new Uint32Array(i,4,1);return new Px(w,x,v,i)}constructor(i,a=64,d=Float64Array,g){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=d,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const v=VT.indexOf(this.ArrayType),x=2*i*this.ArrayType.BYTES_PER_ELEMENT,w=i*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-w%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${d}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+w+P,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+x+w+P),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+w+P,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=i)}add(i,a){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=i,this.coords[this._pos++]=a,d}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return Ex(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,a,d,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:w}=this,P=[0,v.length-1,0],k=[];for(;P.length;){const D=P.pop()||0,j=P.pop()||0,Z=P.pop()||0;if(j-Z<=w){for(let ie=Z;ie<=j;ie++){const ue=x[2*ie],Me=x[2*ie+1];ue>=i&&ue<=d&&Me>=a&&Me<=g&&k.push(v[ie])}continue}const H=Z+j>>1,W=x[2*H],J=x[2*H+1];W>=i&&W<=d&&J>=a&&J<=g&&k.push(v[H]),(D===0?i<=W:a<=J)&&(P.push(Z),P.push(H-1),P.push(1-D)),(D===0?d>=W:g>=J)&&(P.push(H+1),P.push(j),P.push(1-D))}return k}within(i,a,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:v,nodeSize:x}=this,w=[0,g.length-1,0],P=[],k=d*d;for(;w.length;){const D=w.pop()||0,j=w.pop()||0,Z=w.pop()||0;if(j-Z<=x){for(let ie=Z;ie<=j;ie++)ZT(v[2*ie],v[2*ie+1],i,a)<=k&&P.push(g[ie]);continue}const H=Z+j>>1,W=v[2*H],J=v[2*H+1];ZT(W,J,i,a)<=k&&P.push(g[H]),(D===0?i-d<=W:a-d<=J)&&(w.push(Z),w.push(H-1),w.push(1-D)),(D===0?i+d>=W:a+d>=J)&&(w.push(H+1),w.push(j),w.push(1-D))}return P}}function Ex(l,i,a,d,g,v){if(g-d<=a)return;const x=d+g>>1;$T(l,i,x,d,g,v),Ex(l,i,a,d,x-1,1-v),Ex(l,i,a,x+1,g,1-v)}function $T(l,i,a,d,g,v){for(;g>d;){if(g-d>600){const k=g-d+1,D=a-d+1,j=Math.log(k),Z=.5*Math.exp(2*j/3),H=.5*Math.sqrt(j*Z*(k-Z)/k)*(D-k/2<0?-1:1);$T(l,i,a,Math.max(d,Math.floor(a-D*Z/k+H)),Math.min(g,Math.floor(a+(k-D)*Z/k+H)),v)}const x=i[2*a+v];let w=d,P=g;for(Mf(l,i,d,a),i[2*g+v]>x&&Mf(l,i,d,g);w<P;){for(Mf(l,i,w,P),w++,P--;i[2*w+v]<x;)w++;for(;i[2*P+v]>x;)P--}i[2*d+v]===x?Mf(l,i,d,P):(P++,Mf(l,i,P,g)),P<=a&&(d=P+1),a<=P&&(g=P-1)}}function Mf(l,i,a,d){Mx(l,a,d),Mx(i,2*a,2*d),Mx(i,2*a+1,2*d+1)}function Mx(l,i,a){const d=l[i];l[i]=l[a],l[a]=d}function ZT(l,i,a,d){const g=l-a,v=i-d;return g*g+v*v}var kx;f.ce=void 0,(kx=f.ce||(f.ce={})).create="create",kx.load="load",kx.fullLoad="fullLoad";let Cy=null,kf=[];const Ix=1e3/60,Rx="loadTime",Ax="fullLoadTime",hN={mark(l){performance.mark(l)},frame(l){const i=l;Cy!=null&&kf.push(i-Cy),Cy=i},clearMetrics(){Cy=null,kf=[],performance.clearMeasures(Rx),performance.clearMeasures(Ax);for(const l in f.ce)performance.clearMarks(f.ce[l])},getPerformanceMetrics(){performance.measure(Rx,f.ce.create,f.ce.load),performance.measure(Ax,f.ce.create,f.ce.fullLoad);const l=performance.getEntriesByName(Rx)[0].duration,i=performance.getEntriesByName(Ax)[0].duration,a=kf.length,d=1/(kf.reduce((v,x)=>v+x,0)/a/1e3),g=kf.filter(v=>v>Ix).reduce((v,x)=>v+(x-Ix)/Ix,0);return{loadTime:l,fullLoadTime:i,fps:d,percentDroppedFrames:g/(a+g)*100,totalFrames:a}}};f.$=Ee,f.A=Re,f.B=Z0,f.C=function(l){if(vr==null){const i=l.navigator?l.navigator.userAgent:null;vr=!!l.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return vr},f.D=Dt,f.E=Wi,f.F=class{constructor(l,i){this.target=l,this.mapId=i,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new nN(()=>this.process()),this.subscription=function(a,d,g,v){return a.addEventListener(d,g,!1),{unsubscribe:()=>{a.removeEventListener(d,g,!1)}}}(this.target,"message",a=>this.receive(a)),this.globalScope=Lr(self)?l:window}registerMessageHandler(l,i){this.messageHandlers[l]=i}sendAsync(l,i){return new Promise((a,d)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[g]={resolve:a,reject:d},i&&i.signal.addEventListener("abort",()=>{delete this.resolveRejects[g];const w={id:g,type:"<cancel>",origin:location.origin,targetMapId:l.targetMapId,sourceMapId:this.mapId};this.target.postMessage(w)},{once:!0});const v=[],x=Object.assign(Object.assign({},l),{id:g,sourceMapId:this.mapId,origin:location.origin,data:$c(l.data,v)});this.target.postMessage(x,{transfer:v})})}receive(l){const i=l.data,a=i.id;if(!(i.origin!=="file://"&&location.origin!=="file://"&&i.origin!=="resource://android"&&location.origin!=="resource://android"&&i.origin!==location.origin||i.targetMapId&&this.mapId!==i.targetMapId)){if(i.type==="<cancel>"){delete this.tasks[a];const d=this.abortControllers[a];return delete this.abortControllers[a],void(d&&d.abort())}if(Lr(self)||i.mustQueue)return this.tasks[a]=i,this.taskQueue.push(a),void this.invoker.trigger();this.processTask(a,i)}}process(){if(this.taskQueue.length===0)return;const l=this.taskQueue.shift(),i=this.tasks[l];delete this.tasks[l],this.taskQueue.length>0&&this.invoker.trigger(),i&&this.processTask(l,i)}processTask(l,i){return c(this,void 0,void 0,function*(){if(i.type==="<response>"){const g=this.resolveRejects[l];return delete this.resolveRejects[l],g?void(i.error?g.reject(Zc(i.error)):g.resolve(Zc(i.data))):void 0}if(!this.messageHandlers[i.type])return void this.completeTask(l,new Error(`Could not find a registered handler for ${i.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const a=Zc(i.data),d=new AbortController;this.abortControllers[l]=d;try{const g=yield this.messageHandlers[i.type](i.sourceMapId,a,d);this.completeTask(l,null,g)}catch(g){this.completeTask(l,g)}})}completeTask(l,i,a){const d=[];delete this.abortControllers[l];const g={id:l,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:i?$c(i):null,data:$c(a,d)};this.target.postMessage(g,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},f.G=ds,f.H=function(){var l=new Re(16);return Re!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},f.I=px,f.J=function(l,i,a){var d,g,v,x,w,P,k,D,j,Z,H,W,J=a[0],ie=a[1],ue=a[2];return i===l?(l[12]=i[0]*J+i[4]*ie+i[8]*ue+i[12],l[13]=i[1]*J+i[5]*ie+i[9]*ue+i[13],l[14]=i[2]*J+i[6]*ie+i[10]*ue+i[14],l[15]=i[3]*J+i[7]*ie+i[11]*ue+i[15]):(g=i[1],v=i[2],x=i[3],w=i[4],P=i[5],k=i[6],D=i[7],j=i[8],Z=i[9],H=i[10],W=i[11],l[0]=d=i[0],l[1]=g,l[2]=v,l[3]=x,l[4]=w,l[5]=P,l[6]=k,l[7]=D,l[8]=j,l[9]=Z,l[10]=H,l[11]=W,l[12]=d*J+w*ie+j*ue+i[12],l[13]=g*J+P*ie+Z*ue+i[13],l[14]=v*J+k*ie+H*ue+i[14],l[15]=x*J+D*ie+W*ue+i[15]),l},f.K=function(l,i,a){var d=a[0],g=a[1],v=a[2];return l[0]=i[0]*d,l[1]=i[1]*d,l[2]=i[2]*d,l[3]=i[3]*d,l[4]=i[4]*g,l[5]=i[5]*g,l[6]=i[6]*g,l[7]=i[7]*g,l[8]=i[8]*v,l[9]=i[9]*v,l[10]=i[10]*v,l[11]=i[11]*v,l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15],l},f.L=function(l,i,a){var d=i[0],g=i[1],v=i[2],x=i[3],w=i[4],P=i[5],k=i[6],D=i[7],j=i[8],Z=i[9],H=i[10],W=i[11],J=i[12],ie=i[13],ue=i[14],Me=i[15],ge=a[0],G=a[1],ne=a[2],ye=a[3];return l[0]=ge*d+G*w+ne*j+ye*J,l[1]=ge*g+G*P+ne*Z+ye*ie,l[2]=ge*v+G*k+ne*H+ye*ue,l[3]=ge*x+G*D+ne*W+ye*Me,l[4]=(ge=a[4])*d+(G=a[5])*w+(ne=a[6])*j+(ye=a[7])*J,l[5]=ge*g+G*P+ne*Z+ye*ie,l[6]=ge*v+G*k+ne*H+ye*ue,l[7]=ge*x+G*D+ne*W+ye*Me,l[8]=(ge=a[8])*d+(G=a[9])*w+(ne=a[10])*j+(ye=a[11])*J,l[9]=ge*g+G*P+ne*Z+ye*ie,l[10]=ge*v+G*k+ne*H+ye*ue,l[11]=ge*x+G*D+ne*W+ye*Me,l[12]=(ge=a[12])*d+(G=a[13])*w+(ne=a[14])*j+(ye=a[15])*J,l[13]=ge*g+G*P+ne*Z+ye*ie,l[14]=ge*v+G*k+ne*H+ye*ue,l[15]=ge*x+G*D+ne*W+ye*Me,l},f.M=function(l,i){const a={};for(let d=0;d<i.length;d++){const g=i[d];g in l&&(a[g]=l[g])}return a},f.N=El,f.O=_T,f.P=F,f.Q=vT,f.R=As,f.S=Ds,f.T=Jp,f.U=Y,f.V=de,f.W=fn,f.X=ct,f.Y=Pf,f.Z=Sx,f._=c,f.a=Nr,f.a$=function(){return new Float64Array(16)},f.a0=l=>{const i=window.document.createElement("video");return i.muted=!0,new Promise(a=>{i.onloadstart=()=>{a(i)};for(const d of l){const g=window.document.createElement("source");Ii(d)||(i.crossOrigin="Anonymous"),g.src=d,i.appendChild(g)}})},f.a1=function(){return tr++},f.a2=m,f.a3=Bd,f.a4=jp,f.a5=ja,f.a6=PT,f.a7=function(l){const i={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,d,g,v)=>{const x=g||v;return i[d]=!x||x.toLowerCase(),""}),i["max-age"]){const a=parseInt(i["max-age"],10);isNaN(a)?delete i["max-age"]:i["max-age"]=a}return i},f.a8=function(l){return Math.log(l)/Math.LN2},f.a9=function(l){var i=l[0],a=l[1];return i*i+a*a},f.aA=qr,f.aB=fy,f.aC=ae,f.aD=Ye,f.aE=qe,f.aF=85.051129,f.aG=function(l){return Math.pow(2,l)},f.aH=xT,f.aI=It,f.aJ=mn,f.aK=bT,f.aL=function(l,i,a){return l[0]=i[0]*a,l[1]=i[1]*a,l[2]=i[2]*a,l},f.aM=function(l,i,a){return l[0]=i[0]+a[0],l[1]=i[1]+a[1],l[2]=i[2]+a[2],l},f.aN=function(l){var i=new Re(3);return i[0]=l[0],i[1]=l[1],i[2]=l[2],i},f.aO=function(l,i,a){return l[0]=i[0]*a[0],l[1]=i[1]*a[1],l[2]=i[2]*a[2],l[3]=i[3]*a[3],l},f.aP=function(l,i,a){return l[0]=i[0]-a[0],l[1]=i[1]-a[1],l[2]=i[2]-a[2],l},f.aQ=function(l,i){var a=i[0],d=i[1],g=i[2],v=a*a+d*d+g*g;return v>0&&(v=1/Math.sqrt(v)),l[0]=i[0]*v,l[1]=i[1]*v,l[2]=i[2]*v,l},f.aR=function(l,i,a){var d=i[0],g=i[1],v=i[2],x=a[0],w=a[1],P=a[2];return l[0]=g*P-v*w,l[1]=v*x-d*P,l[2]=d*w-g*x,l},f.aS=function(l,i){return l[0]*i[0]+l[1]*i[1]+l[2]*i[2]},f.aT=ST,f.aU=Ud,f.aV=function(l,i,a,d,g){var v,x=1/Math.tan(i/2);return l[0]=x/a,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=x,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,g!=null&&g!==1/0?(l[10]=(g+d)*(v=1/(d-g)),l[14]=2*g*d*v):(l[10]=-1,l[14]=-2*d),l},f.aW=function(l){var i=new Re(16);return i[0]=l[0],i[1]=l[1],i[2]=l[2],i[3]=l[3],i[4]=l[4],i[5]=l[5],i[6]=l[6],i[7]=l[7],i[8]=l[8],i[9]=l[9],i[10]=l[10],i[11]=l[11],i[12]=l[12],i[13]=l[13],i[14]=l[14],i[15]=l[15],i},f.aX=function(l,i,a){var d=Math.sin(a),g=Math.cos(a),v=i[0],x=i[1],w=i[2],P=i[3],k=i[4],D=i[5],j=i[6],Z=i[7];return i!==l&&(l[8]=i[8],l[9]=i[9],l[10]=i[10],l[11]=i[11],l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15]),l[0]=v*g+k*d,l[1]=x*g+D*d,l[2]=w*g+j*d,l[3]=P*g+Z*d,l[4]=k*g-v*d,l[5]=D*g-x*d,l[6]=j*g-w*d,l[7]=Z*g-P*d,l},f.aY=function(l,i,a){var d=Math.sin(a),g=Math.cos(a),v=i[4],x=i[5],w=i[6],P=i[7],k=i[8],D=i[9],j=i[10],Z=i[11];return i!==l&&(l[0]=i[0],l[1]=i[1],l[2]=i[2],l[3]=i[3],l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15]),l[4]=v*g+k*d,l[5]=x*g+D*d,l[6]=w*g+j*d,l[7]=P*g+Z*d,l[8]=k*g-v*d,l[9]=D*g-x*d,l[10]=j*g-w*d,l[11]=Z*g-P*d,l},f.aZ=function(){const l=new Float32Array(16);return We(l),l},f.a_=function(){const l=new Float64Array(16);return We(l),l},f.aa=function(l){return l*Math.PI/180},f.ab=Lt,f.ac=function(l,i){const a=[];for(const d in l)d in i||a.push(d);return a},f.ad=_t,f.ae=function(l){return Math.hypot(l[0],l[1])},f.af=function(l){return l[0]=0,l[1]=0,l},f.ag=function(l,i,a){return l[0]=i[0]*a,l[1]=i[1]*a,l},f.ah=function(l,i){let a=0,d=0;if(l.kind==="constant")d=l.layoutSize;else if(l.kind!=="source"){const{interpolationType:g,minZoom:v,maxZoom:x}=l,w=g?Lt(ni.interpolationFactor(g,i,v,x),0,1):0;l.kind==="camera"?d=Ki.number(l.minSize,l.maxSize,w):a=w}return{uSizeT:a,uSize:d}},f.aj=function(l,{uSize:i,uSizeT:a},{lowerSize:d,upperSize:g}){return l.kind==="source"?d/Ko:l.kind==="composite"?Ki.number(d/Ko,g/Ko,a):i},f.ak=yx,f.al=st,f.am=function(l,i,a,d){const g=i.y-l.y,v=i.x-l.x,x=d.y-a.y,w=d.x-a.x,P=x*v-w*g;if(P===0)return null;const k=(w*(l.y-a.y)-x*(l.x-a.x))/P;return new F(l.x+k*v,l.y+k*g)},f.an=function(l,i){var a=i[0],d=i[1],g=i[2],v=i[3],x=i[4],w=i[5],P=i[6],k=i[7],D=i[8],j=i[9],Z=i[10],H=i[11],W=i[12],J=i[13],ie=i[14],ue=i[15],Me=a*w-d*x,ge=a*P-g*x,G=a*k-v*x,ne=d*P-g*w,ye=d*k-v*w,Ne=g*k-v*P,rt=D*J-j*W,Ue=D*ie-Z*W,Ze=D*ue-H*W,it=j*ie-Z*J,nt=j*ue-H*J,ot=Z*ue-H*ie,Qe=Me*ot-ge*nt+G*it+ne*Ze-ye*Ue+Ne*rt;return Qe?(l[0]=(w*ot-P*nt+k*it)*(Qe=1/Qe),l[1]=(g*nt-d*ot-v*it)*Qe,l[2]=(J*Ne-ie*ye+ue*ne)*Qe,l[3]=(Z*ye-j*Ne-H*ne)*Qe,l[4]=(P*Ze-x*ot-k*Ue)*Qe,l[5]=(a*ot-g*Ze+v*Ue)*Qe,l[6]=(ie*G-W*Ne-ue*ge)*Qe,l[7]=(D*Ne-Z*G+H*ge)*Qe,l[8]=(x*nt-w*Ze+k*rt)*Qe,l[9]=(d*Ze-a*nt-v*rt)*Qe,l[10]=(W*ye-J*G+ue*Me)*Qe,l[11]=(j*G-D*ye-H*Me)*Qe,l[12]=(w*Ue-x*it-P*rt)*Qe,l[13]=(a*it-d*Ue+g*rt)*Qe,l[14]=(J*ge-W*ne-ie*Me)*Qe,l[15]=(D*ne-j*ge+Z*Me)*Qe,l):null},f.ao=IT,f.ap=uf,f.aq=We,f.ar=function(l){let i=1/0,a=1/0,d=-1/0,g=-1/0;for(const v of l)i=Math.min(i,v.x),a=Math.min(a,v.y),d=Math.max(d,v.x),g=Math.max(g,v.y);return[i,a,d,g]},f.as=Nn,f.at=Pt,f.au=function(l,i,a,d,g=!1){if(!a[0]&&!a[1])return[0,0];const v=g?d==="map"?-l.bearingInRadians:0:d==="viewport"?l.bearingInRadians:0;if(v){const x=Math.sin(v),w=Math.cos(v);a=[a[0]*w-a[1]*x,a[0]*x+a[1]*w]}return[g?a[0]:Pt(i,a[0],l.zoom),g?a[1]:Pt(i,a[1],l.zoom)]},f.aw=gx,f.ax=Cx,f.ay=mx,f.az=Px,f.b=Qr,f.b$=l=>l.type==="line",f.b0=function(l,i,a){const d=new Float64Array(4);return function(g,v,x,w){var P=.5*Math.PI/180;v*=P,x*=P,w*=P;var k=Math.sin(v),D=Math.cos(v),j=Math.sin(x),Z=Math.cos(x),H=Math.sin(w),W=Math.cos(w);g[0]=k*Z*W-D*j*H,g[1]=D*j*W+k*Z*H,g[2]=D*Z*H-k*j*W,g[3]=D*Z*W+k*j*H}(d,l,i-90,a),d},f.b1=function(l,i,a,d){var g,v,x,w,P,k=i[0],D=i[1],j=i[2],Z=i[3],H=a[0],W=a[1],J=a[2],ie=a[3];return(v=k*H+D*W+j*J+Z*ie)<0&&(v=-v,H=-H,W=-W,J=-J,ie=-ie),1-v>ce?(g=Math.acos(v),x=Math.sin(g),w=Math.sin((1-d)*g)/x,P=Math.sin(d*g)/x):(w=1-d,P=d),l[0]=w*k+P*H,l[1]=w*D+P*W,l[2]=w*j+P*J,l[3]=w*Z+P*ie,l},f.b2=function(l){const i=new Float64Array(9);var a,d,g,v,x,w,P,k,D,j,Z,H,W,J,ie,ue,Me,ge;j=(g=(d=l)[0])*(P=g+g),Z=(v=d[1])*P,W=(x=d[2])*P,J=x*(k=v+v),ue=(w=d[3])*P,Me=w*k,ge=w*(D=x+x),(a=i)[0]=1-(H=v*k)-(ie=x*D),a[3]=Z-ge,a[6]=W+Me,a[1]=Z+ge,a[4]=1-j-ie,a[7]=J-ue,a[2]=W-Me,a[5]=J+ue,a[8]=1-j-H;const G=mn(-Math.asin(Lt(i[2],-1,1)));let ne,ye;return Math.hypot(i[5],i[8])<.001?(ne=0,ye=-mn(Math.atan2(i[3],i[4]))):(ne=mn(i[5]===0&&i[8]===0?0:Math.atan2(i[5],i[8])),ye=mn(i[1]===0&&i[0]===0?0:Math.atan2(i[1],i[0]))),{roll:ne,pitch:G+90,bearing:ye}},f.b3=function(l,i){return l.roll==i.roll&&l.pitch==i.pitch&&l.bearing==i.bearing},f.b4=lr,f.b5=so,f.b6=Od,f.b7=yf,f.b8=Nd,f.b9=Oe,f.bA=gt,f.bB=or,f.bC=class extends Qi{constructor(l,i){super(l,i),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},f.bD=class extends Qi{constructor(l,i){super(l,i),this.current=Ad}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let i=1;i<16;i++)if(l[i]!==this.current[i]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},f.bE=Da,f.bF=Jc,f.bG=class extends Qi{constructor(l,i){super(l,i),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},f.bH=class extends Qi{constructor(l,i){super(l,i),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},f.bI=Ie,f.bJ=function(l,i){var a=Math.sin(i),d=Math.cos(i);return l[0]=d,l[1]=a,l[2]=0,l[3]=-a,l[4]=d,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},f.bK=function(l,i,a){var d=i[0],g=i[1],v=i[2];return l[0]=d*a[0]+g*a[3]+v*a[6],l[1]=d*a[1]+g*a[4]+v*a[7],l[2]=d*a[2]+g*a[5]+v*a[8],l},f.bL=function(l,i,a,d,g,v,x){var w=1/(i-a),P=1/(d-g),k=1/(v-x);return l[0]=-2*w,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*P,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*k,l[11]=0,l[12]=(i+a)*w,l[13]=(g+d)*P,l[14]=(x+v)*k,l[15]=1,l},f.bM=class extends Ra{},f.bN=NL,f.bO=class extends Qc{},f.bP=Y0,f.bQ=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},f.bR=PS,f.bS=function(l,i,a){var d=i[0],g=i[1],v=i[2],x=a[3]*d+a[7]*g+a[11]*v+a[15];return l[0]=(a[0]*d+a[4]*g+a[8]*v+a[12])/(x=x||1),l[1]=(a[1]*d+a[5]*g+a[9]*v+a[13])/x,l[2]=(a[2]*d+a[6]*g+a[10]*v+a[14])/x,l},f.bT=class extends Ed{},f.bU=class extends r{},f.bV=function(l,i){return l[0]===i[0]&&l[1]===i[1]&&l[2]===i[2]&&l[3]===i[3]&&l[4]===i[4]&&l[5]===i[5]&&l[6]===i[6]&&l[7]===i[7]&&l[8]===i[8]&&l[9]===i[9]&&l[10]===i[10]&&l[11]===i[11]&&l[12]===i[12]&&l[13]===i[13]&&l[14]===i[14]&&l[15]===i[15]},f.bW=function(l,i){var a=l[0],d=l[1],g=l[2],v=l[3],x=l[4],w=l[5],P=l[6],k=l[7],D=l[8],j=l[9],Z=l[10],H=l[11],W=l[12],J=l[13],ie=l[14],ue=l[15],Me=i[0],ge=i[1],G=i[2],ne=i[3],ye=i[4],Ne=i[5],rt=i[6],Ue=i[7],Ze=i[8],it=i[9],nt=i[10],ot=i[11],Qe=i[12],Ct=i[13],Vt=i[14],Bt=i[15];return Math.abs(a-Me)<=ce*Math.max(1,Math.abs(a),Math.abs(Me))&&Math.abs(d-ge)<=ce*Math.max(1,Math.abs(d),Math.abs(ge))&&Math.abs(g-G)<=ce*Math.max(1,Math.abs(g),Math.abs(G))&&Math.abs(v-ne)<=ce*Math.max(1,Math.abs(v),Math.abs(ne))&&Math.abs(x-ye)<=ce*Math.max(1,Math.abs(x),Math.abs(ye))&&Math.abs(w-Ne)<=ce*Math.max(1,Math.abs(w),Math.abs(Ne))&&Math.abs(P-rt)<=ce*Math.max(1,Math.abs(P),Math.abs(rt))&&Math.abs(k-Ue)<=ce*Math.max(1,Math.abs(k),Math.abs(Ue))&&Math.abs(D-Ze)<=ce*Math.max(1,Math.abs(D),Math.abs(Ze))&&Math.abs(j-it)<=ce*Math.max(1,Math.abs(j),Math.abs(it))&&Math.abs(Z-nt)<=ce*Math.max(1,Math.abs(Z),Math.abs(nt))&&Math.abs(H-ot)<=ce*Math.max(1,Math.abs(H),Math.abs(ot))&&Math.abs(W-Qe)<=ce*Math.max(1,Math.abs(W),Math.abs(Qe))&&Math.abs(J-Ct)<=ce*Math.max(1,Math.abs(J),Math.abs(Ct))&&Math.abs(ie-Vt)<=ce*Math.max(1,Math.abs(ie),Math.abs(Vt))&&Math.abs(ue-Bt)<=ce*Math.max(1,Math.abs(ue),Math.abs(Bt))},f.bX=function(l,i){return l[0]=i[0],l[1]=i[1],l[2]=i[2],l[3]=i[3],l[4]=i[4],l[5]=i[5],l[6]=i[6],l[7]=i[7],l[8]=i[8],l[9]=i[9],l[10]=i[10],l[11]=i[11],l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15],l},f.bY=l=>l.type==="symbol",f.bZ=l=>l.type==="circle",f.b_=l=>l.type==="heatmap",f.ba=at,f.bb=ri,f.bc=function(l,i,a,d,g){return Oe(d,g,Lt((l-i)/(a-i),0,1))},f.bd=Xe,f.be=function(){return new Float64Array(4)},f.bf=function(){return new Float64Array(3)},f.bg=function(l,i,a,d){var g=[],v=[];return g[0]=i[0]-a[0],g[1]=i[1]-a[1],g[2]=i[2]-a[2],v[0]=g[0]*Math.cos(d)-g[1]*Math.sin(d),v[1]=g[0]*Math.sin(d)+g[1]*Math.cos(d),v[2]=g[2],l[0]=v[0]+a[0],l[1]=v[1]+a[1],l[2]=v[2]+a[2],l},f.bh=function(l,i,a,d){var g=[],v=[];return g[0]=i[0]-a[0],g[1]=i[1]-a[1],g[2]=i[2]-a[2],v[0]=g[0],v[1]=g[1]*Math.cos(d)-g[2]*Math.sin(d),v[2]=g[1]*Math.sin(d)+g[2]*Math.cos(d),l[0]=v[0]+a[0],l[1]=v[1]+a[1],l[2]=v[2]+a[2],l},f.bi=function(l,i,a,d){var g=[],v=[];return g[0]=i[0]-a[0],g[1]=i[1]-a[1],g[2]=i[2]-a[2],v[0]=g[2]*Math.sin(d)+g[0]*Math.cos(d),v[1]=g[1],v[2]=g[2]*Math.cos(d)-g[0]*Math.sin(d),l[0]=v[0]+a[0],l[1]=v[1]+a[1],l[2]=v[2]+a[2],l},f.bj=function(l,i,a){var d=Math.sin(a),g=Math.cos(a),v=i[0],x=i[1],w=i[2],P=i[3],k=i[8],D=i[9],j=i[10],Z=i[11];return i!==l&&(l[4]=i[4],l[5]=i[5],l[6]=i[6],l[7]=i[7],l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15]),l[0]=v*g-k*d,l[1]=x*g-D*d,l[2]=w*g-j*d,l[3]=P*g-Z*d,l[8]=v*d+k*g,l[9]=x*d+D*g,l[10]=w*d+j*g,l[11]=P*d+Z*g,l},f.bk=function(l,i){const a=Xe(l,360),d=Xe(i,360),g=d-a,v=d>a?g-360:g+360;return Math.abs(g)<Math.abs(v)?g:v},f.bl=function(l){return l[0]=0,l[1]=0,l[2]=0,l},f.bm=function(l,i,a,d){const g=Math.sqrt(l*l+i*i),v=Math.sqrt(a*a+d*d);l/=g,i/=g,a/=v,d/=v;const x=Math.acos(l*a+i*d);return-i*a+l*d>0?x:-x},f.bn=function(l,i){return l[0]*i[0]+l[1]*i[1]+l[2]*i[2]+l[3]},f.bo=bx,f.bp=function(l,i){const a=Xe(l,2*Math.PI),d=Xe(i,2*Math.PI);return Math.min(Math.abs(a-d),Math.abs(a-d+2*Math.PI),Math.abs(a-d-2*Math.PI))},f.bq=function(l){return Math.hypot(l[0],l[1],l[2])},f.br=function(){const l={},i=se.$version;for(const a in se.$root){const d=se.$root[a];if(d.required){let g=null;g=a==="version"?i:d.type==="array"?[]:{},g!=null&&(l[a]=g)}}return l},f.bs=Gc,f.bt=bn,f.bu=function(l){l=l.slice();const i=Object.create(null);for(let a=0;a<l.length;a++)i[l[a].id]=l[a];for(let a=0;a<l.length;a++)"ref"in l[a]&&(l[a]=te(l[a],i[l[a].ref]));return l},f.bv=function(l){if(l.type==="custom")return new rN(l);switch(l.type){case"background":return new JL(l);case"circle":return new Qj(l);case"fill":return new yL(l);case"fill-extrusion":return new CL(l);case"heatmap":return new eL(l);case"hillshade":return new rL(l);case"line":return new DL(l);case"raster":return new tN(l);case"symbol":return new xy(l)}},f.bw=Yt,f.bx=function(l,i){if(!l)return[{command:"setStyle",args:[i]}];let a=[];try{if(!re(l.version,i.version))return[{command:"setStyle",args:[i]}];re(l.center,i.center)||a.push({command:"setCenter",args:[i.center]}),re(l.centerAltitude,i.centerAltitude)||a.push({command:"setCenterAltitude",args:[i.centerAltitude]}),re(l.zoom,i.zoom)||a.push({command:"setZoom",args:[i.zoom]}),re(l.bearing,i.bearing)||a.push({command:"setBearing",args:[i.bearing]}),re(l.pitch,i.pitch)||a.push({command:"setPitch",args:[i.pitch]}),re(l.roll,i.roll)||a.push({command:"setRoll",args:[i.roll]}),re(l.sprite,i.sprite)||a.push({command:"setSprite",args:[i.sprite]}),re(l.glyphs,i.glyphs)||a.push({command:"setGlyphs",args:[i.glyphs]}),re(l.transition,i.transition)||a.push({command:"setTransition",args:[i.transition]}),re(l.light,i.light)||a.push({command:"setLight",args:[i.light]}),re(l.terrain,i.terrain)||a.push({command:"setTerrain",args:[i.terrain]}),re(l.sky,i.sky)||a.push({command:"setSky",args:[i.sky]}),re(l.projection,i.projection)||a.push({command:"setProjection",args:[i.projection]});const d={},g=[];(function(x,w,P,k){let D;for(D in w=w||{},x=x||{})Object.prototype.hasOwnProperty.call(x,D)&&(Object.prototype.hasOwnProperty.call(w,D)||ve(D,P,k));for(D in w)Object.prototype.hasOwnProperty.call(w,D)&&(Object.prototype.hasOwnProperty.call(x,D)?re(x[D],w[D])||(x[D].type==="geojson"&&w[D].type==="geojson"&&we(x,w,D)?pe(P,{command:"setGeoJSONSourceData",args:[D,w[D].data]}):Ae(D,w,P,k)):Te(D,w,P))})(l.sources,i.sources,g,d);const v=[];l.layers&&l.layers.forEach(x=>{"source"in x&&d[x.source]?a.push({command:"removeLayer",args:[x.id]}):v.push(x)}),a=a.concat(g),function(x,w,P){w=w||[];const k=(x=x||[]).map(Be),D=w.map(Be),j=x.reduce(ze,{}),Z=w.reduce(ze,{}),H=k.slice(),W=Object.create(null);let J,ie,ue,Me,ge;for(let G=0,ne=0;G<k.length;G++)J=k[G],Object.prototype.hasOwnProperty.call(Z,J)?ne++:(pe(P,{command:"removeLayer",args:[J]}),H.splice(H.indexOf(J,ne),1));for(let G=0,ne=0;G<D.length;G++)J=D[D.length-1-G],H[H.length-1-G]!==J&&(Object.prototype.hasOwnProperty.call(j,J)?(pe(P,{command:"removeLayer",args:[J]}),H.splice(H.lastIndexOf(J,H.length-ne),1)):ne++,Me=H[H.length-G],pe(P,{command:"addLayer",args:[Z[J],Me]}),H.splice(H.length-G,0,J),W[J]=!0);for(let G=0;G<D.length;G++)if(J=D[G],ie=j[J],ue=Z[J],!W[J]&&!re(ie,ue))if(re(ie.source,ue.source)&&re(ie["source-layer"],ue["source-layer"])&&re(ie.type,ue.type)){for(ge in Ve(ie.layout,ue.layout,P,J,null,"setLayoutProperty"),Ve(ie.paint,ue.paint,P,J,null,"setPaintProperty"),re(ie.filter,ue.filter)||pe(P,{command:"setFilter",args:[J,ue.filter]}),re(ie.minzoom,ue.minzoom)&&re(ie.maxzoom,ue.maxzoom)||pe(P,{command:"setLayerZoomRange",args:[J,ue.minzoom,ue.maxzoom]}),ie)Object.prototype.hasOwnProperty.call(ie,ge)&&ge!=="layout"&&ge!=="paint"&&ge!=="filter"&&ge!=="metadata"&&ge!=="minzoom"&&ge!=="maxzoom"&&(ge.indexOf("paint.")===0?Ve(ie[ge],ue[ge],P,J,ge.slice(6),"setPaintProperty"):re(ie[ge],ue[ge])||pe(P,{command:"setLayerProperty",args:[J,ge,ue[ge]]}));for(ge in ue)Object.prototype.hasOwnProperty.call(ue,ge)&&!Object.prototype.hasOwnProperty.call(ie,ge)&&ge!=="layout"&&ge!=="paint"&&ge!=="filter"&&ge!=="metadata"&&ge!=="minzoom"&&ge!=="maxzoom"&&(ge.indexOf("paint.")===0?Ve(ie[ge],ue[ge],P,J,ge.slice(6),"setPaintProperty"):re(ie[ge],ue[ge])||pe(P,{command:"setLayerProperty",args:[J,ge,ue[ge]]}))}else pe(P,{command:"removeLayer",args:[J]}),Me=H[H.lastIndexOf(J)+1],pe(P,{command:"addLayer",args:[ue,Me]})}(v,i.layers,a)}catch(d){console.warn("Unable to compute style diff:",d),a=[{command:"setStyle",args:[i]}]}return a},f.by=function(l){const i=[],a=l.id;return a===void 0&&i.push({message:`layers.${a}: missing required property "id"`}),l.render===void 0&&i.push({message:`layers.${a}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&i.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),i},f.bz=function l(i,a){if(Array.isArray(i)){if(!Array.isArray(a)||i.length!==a.length)return!1;for(let d=0;d<i.length;d++)if(!l(i[d],a[d]))return!1;return!0}if(typeof i=="object"&&i!==null&&a!==null){if(typeof a!="object"||Object.keys(i).length!==Object.keys(a).length)return!1;for(const d in i)if(!l(i[d],a[d]))return!1;return!0}return i===a},f.c=Ts,f.c0=l=>l.type==="fill",f.c1=l=>l.type==="fill-extrusion",f.c2=l=>l.type==="hillshade",f.c3=l=>l.type==="raster",f.c4=l=>l.type==="background",f.c5=l=>l.type==="custom",f.c6=Et,f.c7=function(l,i,a){const d=Kt(i.x-a.x,i.y-a.y),g=Kt(l.x-a.x,l.y-a.y);var v,x;return mn(Math.atan2(d[0]*g[1]-d[1]*g[0],(v=d)[0]*(x=g)[0]+v[1]*x[1]))},f.c8=wt,f.c9=function(l,i,a){var d=i[0],g=i[1];return l[0]=a[0]*d+a[4]*g+a[12],l[1]=a[1]*d+a[5]*g+a[13],l},f.cA=tT,f.cB=dd,f.cC=wo,f.ca=function(l,i){const{x:a,y:d}=Pf.fromLngLat(i);return!(l<0||l>25||d<0||d>=1||a<0||a>=1)},f.cb=function(l,i){return l[0]=i[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=i[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=i[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},f.cc=class extends Pd{},f.cd=hN,f.cf=function(l){return l.message===Ss},f.cg=_i,f.ch=function(l,i){Nr.REGISTERED_PROTOCOLS[l]=i},f.ci=function(l){delete Nr.REGISTERED_PROTOCOLS[l]},f.cj=function(l,i){const a={};for(let g=0;g<l.length;g++){const v=i&&i[l[g].id]||Bp(l[g]);i&&(i[l[g].id]=v);let x=a[v];x||(x=a[v]=[]),x.push(l[g])}const d=[];for(const g in a)d.push(a[g]);return d},f.ck=St,f.cl=CT,f.cm=ET,f.cn=nT,f.co=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=ct/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;const i=l.bucket.layers[0],a=i.layout,d=i._unevaluatedLayout._values,g={layoutIconSize:d["icon-size"].possiblyEvaluate(new Hr(l.bucket.zoom+1),l.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new Hr(l.bucket.zoom+1),l.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new Hr(18))};if(l.bucket.textSizeData.kind==="composite"){const{minZoom:k,maxZoom:D}=l.bucket.textSizeData;g.compositeTextSizes=[d["text-size"].possiblyEvaluate(new Hr(k),l.canonical),d["text-size"].possiblyEvaluate(new Hr(D),l.canonical)]}if(l.bucket.iconSizeData.kind==="composite"){const{minZoom:k,maxZoom:D}=l.bucket.iconSizeData;g.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new Hr(k),l.canonical),d["icon-size"].possiblyEvaluate(new Hr(D),l.canonical)]}const v=a.get("text-line-height")*Nn,x=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",w=a.get("text-keep-upright"),P=a.get("text-size");for(const k of l.bucket.features){const D=a.get("text-font").evaluate(k,{},l.canonical).join(","),j=P.evaluate(k,{},l.canonical),Z=g.layoutTextSize.evaluate(k,{},l.canonical),H=g.layoutIconSize.evaluate(k,{},l.canonical),W={horizontal:{},vertical:void 0},J=k.text;let ie,ue=[0,0];if(J){const G=J.toString(),ne=a.get("text-letter-spacing").evaluate(k,{},l.canonical)*Nn,ye=vd(G)?ne:0,Ne=a.get("text-anchor").evaluate(k,{},l.canonical),rt=FT(i,k,l.canonical);if(!rt){const nt=a.get("text-radial-offset").evaluate(k,{},l.canonical);ue=nt?OT(Ne,[nt*Nn,Tx]):a.get("text-offset").evaluate(k,{},l.canonical).map(ot=>ot*Nn)}let Ue=x?"center":a.get("text-justify").evaluate(k,{},l.canonical);const Ze=a.get("symbol-placement")==="point"?a.get("text-max-width").evaluate(k,{},l.canonical)*Nn:1/0,it=()=>{l.bucket.allowVerticalPlacement&&Hc(G)&&(W.vertical=yy(J,l.glyphMap,l.glyphPositions,l.imagePositions,D,Ze,v,Ne,"left",ye,ue,f.ai.vertical,!0,Z,j))};if(!x&&rt){const nt=new Set;if(Ue==="auto")for(let Qe=0;Qe<rt.values.length;Qe+=2)nt.add(Cx(rt.values[Qe]));else nt.add(Ue);let ot=!1;for(const Qe of nt)if(!W.horizontal[Qe])if(ot)W.horizontal[Qe]=W.horizontal[0];else{const Ct=yy(J,l.glyphMap,l.glyphPositions,l.imagePositions,D,Ze,v,"center",Qe,ye,ue,f.ai.horizontal,!1,Z,j);Ct&&(W.horizontal[Qe]=Ct,ot=Ct.positionedLines.length===1)}it()}else{Ue==="auto"&&(Ue=Cx(Ne));const nt=yy(J,l.glyphMap,l.glyphPositions,l.imagePositions,D,Ze,v,Ne,Ue,ye,ue,f.ai.horizontal,!1,Z,j);nt&&(W.horizontal[Ue]=nt),it(),Hc(G)&&x&&w&&(W.vertical=yy(J,l.glyphMap,l.glyphPositions,l.imagePositions,D,Ze,v,Ne,Ue,ye,ue,f.ai.vertical,!1,Z,j))}}let Me=!1;if(k.icon&&k.icon.name){const G=l.imageMap[k.icon.name];G&&(ie=WL(l.imagePositions[k.icon.name],a.get("icon-offset").evaluate(k,{},l.canonical),a.get("icon-anchor").evaluate(k,{},l.canonical)),Me=!!G.sdf,l.bucket.sdfIcons===void 0?l.bucket.sdfIcons=Me:l.bucket.sdfIcons!==Me&&At("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(G.pixelRatio!==l.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(l.bucket.iconsNeedLinear=!0))}const ge=UT(W.horizontal)||W.vertical;l.bucket.iconsInText=!!ge&&ge.iconsInText,(ge||ie)&&uN(l.bucket,k,W,ie,l.imageMap,g,Z,H,ue,Me,l.canonical,l.subdivisionGranularity)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},f.cp=lx,f.cq=rx,f.cr=ax,f.cs=vf,f.ct=dx,f.cu=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return l.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},f.cv=function(l,i,a,d,g){return c(this,void 0,void 0,function*(){if(de())try{return yield fn(l,i,a,d,g)}catch{}return function(v,x,w,P,k){const D=v.width,j=v.height;$n&&Zn||($n=new OffscreenCanvas(D,j),Zn=$n.getContext("2d",{willReadFrequently:!0})),$n.width=D,$n.height=j,Zn.drawImage(v,0,0,D,j);const Z=Zn.getImageData(x,w,P,k);return Zn.clearRect(0,0,D,j),Z.data}(l,i,a,d,g)})},f.cw=TT,f.cx=S,f.cy=z,f.cz=$S,f.d=l=>c(void 0,void 0,void 0,function*(){if(l.byteLength===0)return createImageBitmap(new ImageData(1,1));const i=new Blob([new Uint8Array(l)],{type:"image/png"});try{return createImageBitmap(i)}catch(a){throw new Error(`Could not load image because of ${a.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),f.e=Wt,f.f=l=>new Promise((i,a)=>{const d=new Image;d.onload=()=>{i(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=ei})},d.onerror=()=>a(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(l)],{type:"image/png"});d.src=l.byteLength?URL.createObjectURL(g):ei}),f.g=Gn,f.h=(l,i)=>wn(Wt(l,{type:"json"}),i),f.i=Lr,f.j=Ps,f.k=In,f.l=(l,i)=>wn(Wt(l,{type:"arrayBuffer"}),i),f.m=wn,f.n=function(l){return new dx(l).readFields(BL,[])},f.o=hf,f.p=rT,f.q=bi,f.r=$0,f.s=Ii,f.t=_d,f.u=Ia,f.v=se,f.w=At,f.x=function([l,i,a]){return i+=90,i*=Math.PI/180,a*=Math.PI/180,{x:l*Math.cos(i)*Math.sin(a),y:l*Math.sin(i)*Math.sin(a),z:l*Math.cos(a)}},f.y=Ki,f.z=Hr}),u("worker",["./shared"],function(f){class c{constructor(Q){this.keyCache={},Q&&this.replace(Q)}replace(Q){this._layerConfigs={},this._layers={},this.update(Q,[])}update(Q,te){for(const pe of Q){this._layerConfigs[pe.id]=pe;const Te=this._layers[pe.id]=f.bv(pe);Te._featureFilter=f.a4(Te.filter),this.keyCache[pe.id]&&delete this.keyCache[pe.id]}for(const pe of te)delete this.keyCache[pe],delete this._layerConfigs[pe],delete this._layers[pe];this.familiesBySource={};const re=f.cj(Object.values(this._layerConfigs),this.keyCache);for(const pe of re){const Te=pe.map(ze=>this._layers[ze.id]),ve=Te[0];if(ve.visibility==="none")continue;const Ae=ve.source||"";let we=this.familiesBySource[Ae];we||(we=this.familiesBySource[Ae]={});const Ve=ve.sourceLayer||"_geojsonTileLayer";let Be=we[Ve];Be||(Be=we[Ve]=[]),Be.push(Te)}}}class S{constructor(Q){const te={},re=[];for(const Ae in Q){const we=Q[Ae],Ve=te[Ae]={};for(const Be in we){const ze=we[+Be];if(!ze||ze.bitmap.width===0||ze.bitmap.height===0)continue;const Ee={x:0,y:0,w:ze.bitmap.width+2,h:ze.bitmap.height+2};re.push(Ee),Ve[Be]={rect:Ee,metrics:ze.metrics}}}const{w:pe,h:Te}=f.p(re),ve=new f.o({width:pe||1,height:Te||1});for(const Ae in Q){const we=Q[Ae];for(const Ve in we){const Be=we[+Ve];if(!Be||Be.bitmap.width===0||Be.bitmap.height===0)continue;const ze=te[Ae][Ve].rect;f.o.copy(Be.bitmap,ve,{x:0,y:0},{x:ze.x+1,y:ze.y+1},Be.bitmap)}}this.image=ve,this.positions=te}}f.ck("GlyphAtlas",S);class E{constructor(Q){this.tileID=new f.S(Q.tileID.overscaledZ,Q.tileID.wrap,Q.tileID.canonical.z,Q.tileID.canonical.x,Q.tileID.canonical.y),this.uid=Q.uid,this.zoom=Q.zoom,this.pixelRatio=Q.pixelRatio,this.tileSize=Q.tileSize,this.source=Q.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Q.showCollisionBoxes,this.collectResourceTiming=!!Q.collectResourceTiming,this.returnDependencies=!!Q.returnDependencies,this.promoteId=Q.promoteId,this.inFlightDependencies=[]}parse(Q,te,re,pe,Te){return f._(this,void 0,void 0,function*(){this.status="parsing",this.data=Q,this.collisionBoxArray=new f.a2;const ve=new f.cl(Object.keys(Q.layers).sort()),Ae=new f.cm(this.tileID,this.promoteId);Ae.bucketLayerIDs=[];const we={},Ve={featureIndex:Ae,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:re,subdivisionGranularity:Te},Be=te.familiesBySource[this.source];for(const et in Be){const Ge=Q.layers[et];if(!Ge)continue;Ge.version===1&&f.w(`Vector tile source "${this.source}" layer "${et}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const yt=ve.encode(et),Nt=[];for(let qt=0;qt<Ge.length;qt++){const Xt=Ge.feature(qt),sr=Ae.getId(Xt,et);Nt.push({feature:Xt,id:sr,index:qt,sourceLayerIndex:yt})}for(const qt of Be[et]){const Xt=qt[0];Xt.source!==this.source&&f.w(`layer.source = ${Xt.source} does not equal this.source = ${this.source}`),Xt.minzoom&&this.zoom<Math.floor(Xt.minzoom)||Xt.maxzoom&&this.zoom>=Xt.maxzoom||Xt.visibility!=="none"&&(A(qt,this.zoom,re),(we[Xt.id]=Xt.createBucket({index:Ae.bucketLayerIDs.length,layers:qt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:yt,sourceID:this.source})).populate(Nt,Ve,this.tileID.canonical),Ae.bucketLayerIDs.push(qt.map(sr=>sr.id)))}}const ze=f.bA(Ve.glyphDependencies,et=>Object.keys(et).map(Number));this.inFlightDependencies.forEach(et=>et==null?void 0:et.abort()),this.inFlightDependencies=[];let Ee=Promise.resolve({});if(Object.keys(ze).length){const et=new AbortController;this.inFlightDependencies.push(et),Ee=pe.sendAsync({type:"GG",data:{stacks:ze,source:this.source,tileID:this.tileID,type:"glyphs"}},et)}const ht=Object.keys(Ve.iconDependencies);let dt=Promise.resolve({});if(ht.length){const et=new AbortController;this.inFlightDependencies.push(et),dt=pe.sendAsync({type:"GI",data:{icons:ht,source:this.source,tileID:this.tileID,type:"icons"}},et)}const me=Object.keys(Ve.patternDependencies);let Ce=Promise.resolve({});if(me.length){const et=new AbortController;this.inFlightDependencies.push(et),Ce=pe.sendAsync({type:"GI",data:{icons:me,source:this.source,tileID:this.tileID,type:"patterns"}},et)}const[he,De,He]=yield Promise.all([Ee,dt,Ce]),lt=new S(he),bt=new f.cn(De,He);for(const et in we){const Ge=we[et];Ge instanceof f.a3?(A(Ge.layers,this.zoom,re),f.co({bucket:Ge,glyphMap:he,glyphPositions:lt.positions,imageMap:De,imagePositions:bt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Ve.subdivisionGranularity})):Ge.hasPattern&&(Ge instanceof f.cp||Ge instanceof f.cq||Ge instanceof f.cr)&&(A(Ge.layers,this.zoom,re),Ge.addFeatures(Ve,this.tileID.canonical,bt.patternPositions))}return this.status="done",{buckets:Object.values(we).filter(et=>!et.isEmpty()),featureIndex:Ae,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:lt.image,imageAtlas:bt,glyphMap:this.returnDependencies?he:null,iconMap:this.returnDependencies?De:null,glyphPositions:this.returnDependencies?lt.positions:null}})}}function A(se,Q,te){const re=new f.z(Q);for(const pe of se)pe.recalculate(re,te)}class z{constructor(Q,te,re){this.actor=Q,this.layerIndex=te,this.availableImages=re,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(Q,te){return f._(this,void 0,void 0,function*(){const re=yield f.l(Q.request,te);try{return{vectorTile:new f.cs.VectorTile(new f.ct(re.data)),rawData:re.data,cacheControl:re.cacheControl,expires:re.expires}}catch(pe){const Te=new Uint8Array(re.data);let ve=`Unable to parse the tile at ${Q.request.url}, `;throw ve+=Te[0]===31&&Te[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${pe.message}`,new Error(ve)}})}loadTile(Q){return f._(this,void 0,void 0,function*(){const te=Q.uid,re=!!(Q&&Q.request&&Q.request.collectResourceTiming)&&new f.cu(Q.request),pe=new E(Q);this.loading[te]=pe;const Te=new AbortController;pe.abort=Te;try{const ve=yield this.loadVectorTile(Q,Te);if(delete this.loading[te],!ve)return null;const Ae=ve.rawData,we={};ve.expires&&(we.expires=ve.expires),ve.cacheControl&&(we.cacheControl=ve.cacheControl);const Ve={};if(re){const ze=re.finish();ze&&(Ve.resourceTiming=JSON.parse(JSON.stringify(ze)))}pe.vectorTile=ve.vectorTile;const Be=pe.parse(ve.vectorTile,this.layerIndex,this.availableImages,this.actor,Q.subdivisionGranularity);this.loaded[te]=pe,this.fetching[te]={rawTileData:Ae,cacheControl:we,resourceTiming:Ve};try{const ze=yield Be;return f.e({rawTileData:Ae.slice(0)},ze,we,Ve)}finally{delete this.fetching[te]}}catch(ve){throw delete this.loading[te],pe.status="done",this.loaded[te]=pe,ve}})}reloadTile(Q){return f._(this,void 0,void 0,function*(){const te=Q.uid;if(!this.loaded||!this.loaded[te])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const re=this.loaded[te];if(re.showCollisionBoxes=Q.showCollisionBoxes,re.status==="parsing"){const pe=yield re.parse(re.vectorTile,this.layerIndex,this.availableImages,this.actor,Q.subdivisionGranularity);let Te;if(this.fetching[te]){const{rawTileData:ve,cacheControl:Ae,resourceTiming:we}=this.fetching[te];delete this.fetching[te],Te=f.e({rawTileData:ve.slice(0)},pe,Ae,we)}else Te=pe;return Te}if(re.status==="done"&&re.vectorTile)return re.parse(re.vectorTile,this.layerIndex,this.availableImages,this.actor,Q.subdivisionGranularity)})}abortTile(Q){return f._(this,void 0,void 0,function*(){const te=this.loading,re=Q.uid;te&&te[re]&&te[re].abort&&(te[re].abort.abort(),delete te[re])})}removeTile(Q){return f._(this,void 0,void 0,function*(){this.loaded&&this.loaded[Q.uid]&&delete this.loaded[Q.uid]})}}class L{constructor(){this.loaded={}}loadTile(Q){return f._(this,void 0,void 0,function*(){const{uid:te,encoding:re,rawImageData:pe,redFactor:Te,greenFactor:ve,blueFactor:Ae,baseShift:we}=Q,Ve=pe.width+2,Be=pe.height+2,ze=f.b(pe)?new f.R({width:Ve,height:Be},yield f.cv(pe,-1,-1,Ve,Be)):pe,Ee=new f.cw(te,ze,re,Te,ve,Ae,we);return this.loaded=this.loaded||{},this.loaded[te]=Ee,Ee})}removeTile(Q){const te=this.loaded,re=Q.uid;te&&te[re]&&delete te[re]}}var I,F,B=function(){if(F)return I;function se(te,re){if(te.length!==0){Q(te[0],re);for(var pe=1;pe<te.length;pe++)Q(te[pe],!re)}}function Q(te,re){for(var pe=0,Te=0,ve=0,Ae=te.length,we=Ae-1;ve<Ae;we=ve++){var Ve=(te[ve][0]-te[we][0])*(te[we][1]+te[ve][1]),Be=pe+Ve;Te+=Math.abs(pe)>=Math.abs(Ve)?pe-Be+Ve:Ve-Be+pe,pe=Be}pe+Te>=0!=!!re&&te.reverse()}return F=1,I=function te(re,pe){var Te,ve=re&&re.type;if(ve==="FeatureCollection")for(Te=0;Te<re.features.length;Te++)te(re.features[Te],pe);else if(ve==="GeometryCollection")for(Te=0;Te<re.geometries.length;Te++)te(re.geometries[Te],pe);else if(ve==="Feature")te(re.geometry,pe);else if(ve==="Polygon")se(re.coordinates,pe);else if(ve==="MultiPolygon")for(Te=0;Te<re.coordinates.length;Te++)se(re.coordinates[Te],pe);return re}}(),X=f.cx(B);const q=f.cs.VectorTileFeature.prototype.toGeoJSON;class V{constructor(Q){this._feature=Q,this.extent=f.X,this.type=Q.type,this.properties=Q.tags,"id"in Q&&!isNaN(Q.id)&&(this.id=parseInt(Q.id,10))}loadGeometry(){if(this._feature.type===1){const Q=[];for(const te of this._feature.geometry)Q.push([new f.P(te[0],te[1])]);return Q}{const Q=[];for(const te of this._feature.geometry){const re=[];for(const pe of te)re.push(new f.P(pe[0],pe[1]));Q.push(re)}return Q}}toGeoJSON(Q,te,re){return q.call(this,Q,te,re)}}class Y{constructor(Q){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=f.X,this.length=Q.length,this._features=Q}feature(Q){return new V(this._features[Q])}}var de,Se,ce,Re={exports:{}},Ie=function(){if(ce)return Re.exports;ce=1;var se=f.cA(),Q=function(){if(Se)return de;Se=1;var Be=f.cy(),ze=f.cz().VectorTileFeature;function Ee(dt,me){this.options=me||{},this.features=dt,this.length=dt.length}function ht(dt,me){this.id=typeof dt.id=="number"?dt.id:void 0,this.type=dt.type,this.rawGeometry=dt.type===1?[dt.geometry]:dt.geometry,this.properties=dt.tags,this.extent=me||4096}return de=Ee,Ee.prototype.feature=function(dt){return new ht(this.features[dt],this.options.extent)},ht.prototype.loadGeometry=function(){var dt=this.rawGeometry;this.geometry=[];for(var me=0;me<dt.length;me++){for(var Ce=dt[me],he=[],De=0;De<Ce.length;De++)he.push(new Be(Ce[De][0],Ce[De][1]));this.geometry.push(he)}return this.geometry},ht.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var dt=this.geometry,me=1/0,Ce=-1/0,he=1/0,De=-1/0,He=0;He<dt.length;He++)for(var lt=dt[He],bt=0;bt<lt.length;bt++){var et=lt[bt];me=Math.min(me,et.x),Ce=Math.max(Ce,et.x),he=Math.min(he,et.y),De=Math.max(De,et.y)}return[me,he,Ce,De]},ht.prototype.toGeoJSON=ze.prototype.toGeoJSON,de}();function te(Be){var ze=new se;return function(Ee,ht){for(var dt in Ee.layers)ht.writeMessage(3,re,Ee.layers[dt])}(Be,ze),ze.finish()}function re(Be,ze){var Ee;ze.writeVarintField(15,Be.version||1),ze.writeStringField(1,Be.name||""),ze.writeVarintField(5,Be.extent||4096);var ht={keys:[],values:[],keycache:{},valuecache:{}};for(Ee=0;Ee<Be.length;Ee++)ht.feature=Be.feature(Ee),ze.writeMessage(2,pe,ht);var dt=ht.keys;for(Ee=0;Ee<dt.length;Ee++)ze.writeStringField(3,dt[Ee]);var me=ht.values;for(Ee=0;Ee<me.length;Ee++)ze.writeMessage(4,Ve,me[Ee])}function pe(Be,ze){var Ee=Be.feature;Ee.id!==void 0&&ze.writeVarintField(1,Ee.id),ze.writeMessage(2,Te,Be),ze.writeVarintField(3,Ee.type),ze.writeMessage(4,we,Ee)}function Te(Be,ze){var Ee=Be.feature,ht=Be.keys,dt=Be.values,me=Be.keycache,Ce=Be.valuecache;for(var he in Ee.properties){var De=Ee.properties[he],He=me[he];if(De!==null){He===void 0&&(ht.push(he),me[he]=He=ht.length-1),ze.writeVarint(He);var lt=typeof De;lt!=="string"&&lt!=="boolean"&&lt!=="number"&&(De=JSON.stringify(De));var bt=lt+":"+De,et=Ce[bt];et===void 0&&(dt.push(De),Ce[bt]=et=dt.length-1),ze.writeVarint(et)}}}function ve(Be,ze){return(ze<<3)+(7&Be)}function Ae(Be){return Be<<1^Be>>31}function we(Be,ze){for(var Ee=Be.loadGeometry(),ht=Be.type,dt=0,me=0,Ce=Ee.length,he=0;he<Ce;he++){var De=Ee[he],He=1;ht===1&&(He=De.length),ze.writeVarint(ve(1,He));for(var lt=ht===3?De.length-1:De.length,bt=0;bt<lt;bt++){bt===1&&ht!==1&&ze.writeVarint(ve(2,lt-1));var et=De[bt].x-dt,Ge=De[bt].y-me;ze.writeVarint(Ae(et)),ze.writeVarint(Ae(Ge)),dt+=et,me+=Ge}ht===3&&ze.writeVarint(ve(7,1))}}function Ve(Be,ze){var Ee=typeof Be;Ee==="string"?ze.writeStringField(1,Be):Ee==="boolean"?ze.writeBooleanField(7,Be):Ee==="number"&&(Be%1!=0?ze.writeDoubleField(3,Be):Be<0?ze.writeSVarintField(6,Be):ze.writeVarintField(5,Be))}return Re.exports=te,Re.exports.fromVectorTileJs=te,Re.exports.fromGeojsonVt=function(Be,ze){ze=ze||{};var Ee={};for(var ht in Be)Ee[ht]=new Q(Be[ht].features,ze),Ee[ht].name=ht,Ee[ht].version=ze.version,Ee[ht].extent=ze.extent;return te({layers:Ee})},Re.exports.GeoJSONWrapper=Q,Re.exports}(),We=f.cx(Ie);const tt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:se=>se},vt=Math.fround||(st=new Float32Array(1),se=>(st[0]=+se,st[0]));var st;const Tt=3,_t=5,Kt=6;class ct{constructor(Q){this.options=Object.assign(Object.create(tt),Q),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Q){const{log:te,minZoom:re,maxZoom:pe}=this.options;te&&console.time("total time");const Te=`prepare ${Q.length} points`;te&&console.time(Te),this.points=Q;const ve=[];for(let we=0;we<Q.length;we++){const Ve=Q[we];if(!Ve.geometry)continue;const[Be,ze]=Ve.geometry.coordinates,Ee=vt(Oe(Be)),ht=vt(at(ze));ve.push(Ee,ht,1/0,we,-1,1),this.options.reduce&&ve.push(0)}let Ae=this.trees[pe+1]=this._createTree(ve);te&&console.timeEnd(Te);for(let we=pe;we>=re;we--){const Ve=+Date.now();Ae=this.trees[we]=this._createTree(this._cluster(Ae,we)),te&&console.log("z%d: %d clusters in %dms",we,Ae.numItems,+Date.now()-Ve)}return te&&console.timeEnd("total time"),this}getClusters(Q,te){let re=((Q[0]+180)%360+360)%360-180;const pe=Math.max(-90,Math.min(90,Q[1]));let Te=Q[2]===180?180:((Q[2]+180)%360+360)%360-180;const ve=Math.max(-90,Math.min(90,Q[3]));if(Q[2]-Q[0]>=360)re=-180,Te=180;else if(re>Te){const ze=this.getClusters([re,pe,180,ve],te),Ee=this.getClusters([-180,pe,Te,ve],te);return ze.concat(Ee)}const Ae=this.trees[this._limitZoom(te)],we=Ae.range(Oe(re),at(ve),Oe(Te),at(pe)),Ve=Ae.data,Be=[];for(const ze of we){const Ee=this.stride*ze;Be.push(Ve[Ee+_t]>1?Pt(Ve,Ee,this.clusterProps):this.points[Ve[Ee+Tt]])}return Be}getChildren(Q){const te=this._getOriginId(Q),re=this._getOriginZoom(Q),pe="No cluster with the specified id.",Te=this.trees[re];if(!Te)throw new Error(pe);const ve=Te.data;if(te*this.stride>=ve.length)throw new Error(pe);const Ae=this.options.radius/(this.options.extent*Math.pow(2,re-1)),we=Te.within(ve[te*this.stride],ve[te*this.stride+1],Ae),Ve=[];for(const Be of we){const ze=Be*this.stride;ve[ze+4]===Q&&Ve.push(ve[ze+_t]>1?Pt(ve,ze,this.clusterProps):this.points[ve[ze+Tt]])}if(Ve.length===0)throw new Error(pe);return Ve}getLeaves(Q,te,re){const pe=[];return this._appendLeaves(pe,Q,te=te||10,re=re||0,0),pe}getTile(Q,te,re){const pe=this.trees[this._limitZoom(Q)],Te=Math.pow(2,Q),{extent:ve,radius:Ae}=this.options,we=Ae/ve,Ve=(re-we)/Te,Be=(re+1+we)/Te,ze={features:[]};return this._addTileFeatures(pe.range((te-we)/Te,Ve,(te+1+we)/Te,Be),pe.data,te,re,Te,ze),te===0&&this._addTileFeatures(pe.range(1-we/Te,Ve,1,Be),pe.data,Te,re,Te,ze),te===Te-1&&this._addTileFeatures(pe.range(0,Ve,we/Te,Be),pe.data,-1,re,Te,ze),ze.features.length?ze:null}getClusterExpansionZoom(Q){let te=this._getOriginZoom(Q)-1;for(;te<=this.options.maxZoom;){const re=this.getChildren(Q);if(te++,re.length!==1)break;Q=re[0].properties.cluster_id}return te}_appendLeaves(Q,te,re,pe,Te){const ve=this.getChildren(te);for(const Ae of ve){const we=Ae.properties;if(we&&we.cluster?Te+we.point_count<=pe?Te+=we.point_count:Te=this._appendLeaves(Q,we.cluster_id,re,pe,Te):Te<pe?Te++:Q.push(Ae),Q.length===re)break}return Te}_createTree(Q){const te=new f.az(Q.length/this.stride|0,this.options.nodeSize,Float32Array);for(let re=0;re<Q.length;re+=this.stride)te.add(Q[re],Q[re+1]);return te.finish(),te.data=Q,te}_addTileFeatures(Q,te,re,pe,Te,ve){for(const Ae of Q){const we=Ae*this.stride,Ve=te[we+_t]>1;let Be,ze,Ee;if(Ve)Be=Xe(te,we,this.clusterProps),ze=te[we],Ee=te[we+1];else{const me=this.points[te[we+Tt]];Be=me.properties;const[Ce,he]=me.geometry.coordinates;ze=Oe(Ce),Ee=at(he)}const ht={type:1,geometry:[[Math.round(this.options.extent*(ze*Te-re)),Math.round(this.options.extent*(Ee*Te-pe))]],tags:Be};let dt;dt=Ve||this.options.generateId?te[we+Tt]:this.points[te[we+Tt]].id,dt!==void 0&&(ht.id=dt),ve.features.push(ht)}}_limitZoom(Q){return Math.max(this.options.minZoom,Math.min(Math.floor(+Q),this.options.maxZoom+1))}_cluster(Q,te){const{radius:re,extent:pe,reduce:Te,minPoints:ve}=this.options,Ae=re/(pe*Math.pow(2,te)),we=Q.data,Ve=[],Be=this.stride;for(let ze=0;ze<we.length;ze+=Be){if(we[ze+2]<=te)continue;we[ze+2]=te;const Ee=we[ze],ht=we[ze+1],dt=Q.within(we[ze],we[ze+1],Ae),me=we[ze+_t];let Ce=me;for(const he of dt){const De=he*Be;we[De+2]>te&&(Ce+=we[De+_t])}if(Ce>me&&Ce>=ve){let he,De=Ee*me,He=ht*me,lt=-1;const bt=((ze/Be|0)<<5)+(te+1)+this.points.length;for(const et of dt){const Ge=et*Be;if(we[Ge+2]<=te)continue;we[Ge+2]=te;const yt=we[Ge+_t];De+=we[Ge]*yt,He+=we[Ge+1]*yt,we[Ge+4]=bt,Te&&(he||(he=this._map(we,ze,!0),lt=this.clusterProps.length,this.clusterProps.push(he)),Te(he,this._map(we,Ge)))}we[ze+4]=bt,Ve.push(De/Ce,He/Ce,1/0,bt,-1,Ce),Te&&Ve.push(lt)}else{for(let he=0;he<Be;he++)Ve.push(we[ze+he]);if(Ce>1)for(const he of dt){const De=he*Be;if(!(we[De+2]<=te)){we[De+2]=te;for(let He=0;He<Be;He++)Ve.push(we[De+He])}}}}return Ve}_getOriginId(Q){return Q-this.points.length>>5}_getOriginZoom(Q){return(Q-this.points.length)%32}_map(Q,te,re){if(Q[te+_t]>1){const ve=this.clusterProps[Q[te+Kt]];return re?Object.assign({},ve):ve}const pe=this.points[Q[te+Tt]].properties,Te=this.options.map(pe);return re&&Te===pe?Object.assign({},Te):Te}}function Pt(se,Q,te){return{type:"Feature",id:se[Q+Tt],properties:Xe(se,Q,te),geometry:{type:"Point",coordinates:[(re=se[Q],360*(re-.5)),Et(se[Q+1])]}};var re}function Xe(se,Q,te){const re=se[Q+_t],pe=re>=1e4?`${Math.round(re/1e3)}k`:re>=1e3?Math.round(re/100)/10+"k":re,Te=se[Q+Kt],ve=Te===-1?{}:Object.assign({},te[Te]);return Object.assign(ve,{cluster:!0,cluster_id:se[Q+Tt],point_count:re,point_count_abbreviated:pe})}function Oe(se){return se/360+.5}function at(se){const Q=Math.sin(se*Math.PI/180),te=.5-.25*Math.log((1+Q)/(1-Q))/Math.PI;return te<0?0:te>1?1:te}function Et(se){const Q=(180-360*se)*Math.PI/180;return 360*Math.atan(Math.exp(Q))/Math.PI-90}function wt(se,Q,te,re){let pe=re;const Te=Q+(te-Q>>1);let ve,Ae=te-Q;const we=se[Q],Ve=se[Q+1],Be=se[te],ze=se[te+1];for(let Ee=Q+3;Ee<te;Ee+=3){const ht=Lt(se[Ee],se[Ee+1],we,Ve,Be,ze);if(ht>pe)ve=Ee,pe=ht;else if(ht===pe){const dt=Math.abs(Ee-Te);dt<Ae&&(ve=Ee,Ae=dt)}}pe>re&&(ve-Q>3&&wt(se,Q,ve,re),se[ve+2]=pe,te-ve>3&&wt(se,ve,te,re))}function Lt(se,Q,te,re,pe,Te){let ve=pe-te,Ae=Te-re;if(ve!==0||Ae!==0){const we=((se-te)*ve+(Q-re)*Ae)/(ve*ve+Ae*Ae);we>1?(te=pe,re=Te):we>0&&(te+=ve*we,re+=Ae*we)}return ve=se-te,Ae=Q-re,ve*ve+Ae*Ae}function It(se,Q,te,re){const pe={id:se??null,type:Q,geometry:te,tags:re,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(Q==="Point"||Q==="MultiPoint"||Q==="LineString")Wt(pe,te);else if(Q==="Polygon")Wt(pe,te[0]);else if(Q==="MultiLineString")for(const Te of te)Wt(pe,Te);else if(Q==="MultiPolygon")for(const Te of te)Wt(pe,Te[0]);return pe}function Wt(se,Q){for(let te=0;te<Q.length;te+=3)se.minX=Math.min(se.minX,Q[te]),se.minY=Math.min(se.minY,Q[te+1]),se.maxX=Math.max(se.maxX,Q[te]),se.maxY=Math.max(se.maxY,Q[te+1])}function tr(se,Q,te,re){if(!Q.geometry)return;const pe=Q.geometry.coordinates;if(pe&&pe.length===0)return;const Te=Q.geometry.type,ve=Math.pow(te.tolerance/((1<<te.maxZoom)*te.extent),2);let Ae=[],we=Q.id;if(te.promoteId?we=Q.properties[te.promoteId]:te.generateId&&(we=re||0),Te==="Point")gt(pe,Ae);else if(Te==="MultiPoint")for(const Ve of pe)gt(Ve,Ae);else if(Te==="LineString")or(pe,Ae,ve,!1);else if(Te==="MultiLineString"){if(te.lineMetrics){for(const Ve of pe)Ae=[],or(Ve,Ae,ve,!1),se.push(It(we,"LineString",Ae,Q.properties));return}Yt(pe,Ae,ve,!1)}else if(Te==="Polygon")Yt(pe,Ae,ve,!0);else{if(Te!=="MultiPolygon"){if(Te==="GeometryCollection"){for(const Ve of Q.geometry.geometries)tr(se,{id:we,geometry:Ve,properties:Q.properties},te,re);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Ve of pe){const Be=[];Yt(Ve,Be,ve,!0),Ae.push(Be)}}se.push(It(we,Te,Ae,Q.properties))}function gt(se,Q){Q.push(ir(se[0]),At(se[1]),0)}function or(se,Q,te,re){let pe,Te,ve=0;for(let we=0;we<se.length;we++){const Ve=ir(se[we][0]),Be=At(se[we][1]);Q.push(Ve,Be,0),we>0&&(ve+=re?(pe*Be-Ve*Te)/2:Math.sqrt(Math.pow(Ve-pe,2)+Math.pow(Be-Te,2))),pe=Ve,Te=Be}const Ae=Q.length-3;Q[2]=1,wt(Q,0,Ae,te),Q[Ae+2]=1,Q.size=Math.abs(ve),Q.start=0,Q.end=Q.size}function Yt(se,Q,te,re){for(let pe=0;pe<se.length;pe++){const Te=[];or(se[pe],Te,te,re),Q.push(Te)}}function ir(se){return se/360+.5}function At(se){const Q=Math.sin(se*Math.PI/180),te=.5-.25*Math.log((1+Q)/(1-Q))/Math.PI;return te<0?0:te>1?1:te}function Zt(se,Q,te,re,pe,Te,ve,Ae){if(re/=Q,Te>=(te/=Q)&&ve<re)return se;if(ve<te||Te>=re)return null;const we=[];for(const Ve of se){const Be=Ve.geometry;let ze=Ve.type;const Ee=pe===0?Ve.minX:Ve.minY,ht=pe===0?Ve.maxX:Ve.maxY;if(Ee>=te&&ht<re){we.push(Ve);continue}if(ht<te||Ee>=re)continue;let dt=[];if(ze==="Point"||ze==="MultiPoint")Lr(Be,dt,te,re,pe);else if(ze==="LineString")vr(Be,dt,te,re,pe,!1,Ae.lineMetrics);else if(ze==="MultiLineString")ei(Be,dt,te,re,pe,!1);else if(ze==="Polygon")ei(Be,dt,te,re,pe,!0);else if(ze==="MultiPolygon")for(const me of Be){const Ce=[];ei(me,Ce,te,re,pe,!0),Ce.length&&dt.push(Ce)}if(dt.length){if(Ae.lineMetrics&&ze==="LineString"){for(const me of dt)we.push(It(Ve.id,ze,me,Ve.tags));continue}ze!=="LineString"&&ze!=="MultiLineString"||(dt.length===1?(ze="LineString",dt=dt[0]):ze="MultiLineString"),ze!=="Point"&&ze!=="MultiPoint"||(ze=dt.length===3?"Point":"MultiPoint"),we.push(It(Ve.id,ze,dt,Ve.tags))}}return we.length?we:null}function Lr(se,Q,te,re,pe){for(let Te=0;Te<se.length;Te+=3){const ve=se[Te+pe];ve>=te&&ve<=re&&fn(Q,se[Te],se[Te+1],se[Te+2])}}function vr(se,Q,te,re,pe,Te,ve){let Ae=Qr(se);const we=pe===0?$n:Zn;let Ve,Be,ze=se.start;for(let Ce=0;Ce<se.length-3;Ce+=3){const he=se[Ce],De=se[Ce+1],He=se[Ce+2],lt=se[Ce+3],bt=se[Ce+4],et=pe===0?he:De,Ge=pe===0?lt:bt;let yt=!1;ve&&(Ve=Math.sqrt(Math.pow(he-lt,2)+Math.pow(De-bt,2))),et<te?Ge>te&&(Be=we(Ae,he,De,lt,bt,te),ve&&(Ae.start=ze+Ve*Be)):et>re?Ge<re&&(Be=we(Ae,he,De,lt,bt,re),ve&&(Ae.start=ze+Ve*Be)):fn(Ae,he,De,He),Ge<te&&et>=te&&(Be=we(Ae,he,De,lt,bt,te),yt=!0),Ge>re&&et<=re&&(Be=we(Ae,he,De,lt,bt,re),yt=!0),!Te&&yt&&(ve&&(Ae.end=ze+Ve*Be),Q.push(Ae),Ae=Qr(se)),ve&&(ze+=Ve)}let Ee=se.length-3;const ht=se[Ee],dt=se[Ee+1],me=pe===0?ht:dt;me>=te&&me<=re&&fn(Ae,ht,dt,se[Ee+2]),Ee=Ae.length-3,Te&&Ee>=3&&(Ae[Ee]!==Ae[0]||Ae[Ee+1]!==Ae[1])&&fn(Ae,Ae[0],Ae[1],Ae[2]),Ae.length&&Q.push(Ae)}function Qr(se){const Q=[];return Q.size=se.size,Q.start=se.start,Q.end=se.end,Q}function ei(se,Q,te,re,pe,Te){for(const ve of se)vr(ve,Q,te,re,pe,Te,!1)}function fn(se,Q,te,re){se.push(Q,te,re)}function $n(se,Q,te,re,pe,Te){const ve=(Te-Q)/(re-Q);return fn(se,Te,te+(pe-te)*ve,1),ve}function Zn(se,Q,te,re,pe,Te){const ve=(Te-te)/(pe-te);return fn(se,Q+(re-Q)*ve,Te,1),ve}function mn(se,Q){const te=[];for(let re=0;re<se.length;re++){const pe=se[re],Te=pe.type;let ve;if(Te==="Point"||Te==="MultiPoint"||Te==="LineString")ve=Ss(pe.geometry,Q);else if(Te==="MultiLineString"||Te==="Polygon"){ve=[];for(const Ae of pe.geometry)ve.push(Ss(Ae,Q))}else if(Te==="MultiPolygon"){ve=[];for(const Ae of pe.geometry){const we=[];for(const Ve of Ae)we.push(Ss(Ve,Q));ve.push(we)}}te.push(It(pe.id,Te,ve,pe.tags))}return te}function Ss(se,Q){const te=[];te.size=se.size,se.start!==void 0&&(te.start=se.start,te.end=se.end);for(let re=0;re<se.length;re+=3)te.push(se[re]+Q,se[re+1],se[re+2]);return te}function Ts(se,Q){if(se.transformed)return se;const te=1<<se.z,re=se.x,pe=se.y;for(const Te of se.features){const ve=Te.geometry,Ae=Te.type;if(Te.geometry=[],Ae===1)for(let we=0;we<ve.length;we+=2)Te.geometry.push(Nr(ve[we],ve[we+1],Q,te,re,pe));else for(let we=0;we<ve.length;we++){const Ve=[];for(let Be=0;Be<ve[we].length;Be+=2)Ve.push(Nr(ve[we][Be],ve[we][Be+1],Q,te,re,pe));Te.geometry.push(Ve)}}return se.transformed=!0,se}function Nr(se,Q,te,re,pe,Te){return[Math.round(te*(se*re-pe)),Math.round(te*(Q*re-Te))]}function Gn(se,Q,te,re,pe){const Te=Q===pe.maxZoom?0:pe.tolerance/((1<<Q)*pe.extent),ve={features:[],numPoints:0,numSimplified:0,numFeatures:se.length,source:null,x:te,y:re,z:Q,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ae of se)ds(ve,Ae,Te,pe);return ve}function ds(se,Q,te,re){const pe=Q.geometry,Te=Q.type,ve=[];if(se.minX=Math.min(se.minX,Q.minX),se.minY=Math.min(se.minY,Q.minY),se.maxX=Math.max(se.maxX,Q.maxX),se.maxY=Math.max(se.maxY,Q.maxY),Te==="Point"||Te==="MultiPoint")for(let Ae=0;Ae<pe.length;Ae+=3)ve.push(pe[Ae],pe[Ae+1]),se.numPoints++,se.numSimplified++;else if(Te==="LineString")_i(ve,pe,se,te,!1,!1);else if(Te==="MultiLineString"||Te==="Polygon")for(let Ae=0;Ae<pe.length;Ae++)_i(ve,pe[Ae],se,te,Te==="Polygon",Ae===0);else if(Te==="MultiPolygon")for(let Ae=0;Ae<pe.length;Ae++){const we=pe[Ae];for(let Ve=0;Ve<we.length;Ve++)_i(ve,we[Ve],se,te,!0,Ve===0)}if(ve.length){let Ae=Q.tags||null;if(Te==="LineString"&&re.lineMetrics){Ae={};for(const Ve in Q.tags)Ae[Ve]=Q.tags[Ve];Ae.mapbox_clip_start=pe.start/pe.size,Ae.mapbox_clip_end=pe.end/pe.size}const we={geometry:ve,type:Te==="Polygon"||Te==="MultiPolygon"?3:Te==="LineString"||Te==="MultiLineString"?2:1,tags:Ae};Q.id!==null&&(we.id=Q.id),se.features.push(we)}}function _i(se,Q,te,re,pe,Te){const ve=re*re;if(re>0&&Q.size<(pe?ve:re))return void(te.numPoints+=Q.length/3);const Ae=[];for(let we=0;we<Q.length;we+=3)(re===0||Q[we+2]>ve)&&(te.numSimplified++,Ae.push(Q[we],Q[we+1])),te.numPoints++;pe&&function(we,Ve){let Be=0;for(let ze=0,Ee=we.length,ht=Ee-2;ze<Ee;ht=ze,ze+=2)Be+=(we[ze]-we[ht])*(we[ze+1]+we[ht+1]);if(Be>0===Ve)for(let ze=0,Ee=we.length;ze<Ee/2;ze+=2){const ht=we[ze],dt=we[ze+1];we[ze]=we[Ee-2-ze],we[ze+1]=we[Ee-1-ze],we[Ee-2-ze]=ht,we[Ee-1-ze]=dt}}(Ae,Te),se.push(Ae)}const bn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class wn{constructor(Q,te){const re=(te=this.options=function(Te,ve){for(const Ae in ve)Te[Ae]=ve[Ae];return Te}(Object.create(bn),te)).debug;if(re&&console.time("preprocess data"),te.maxZoom<0||te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(te.promoteId&&te.generateId)throw new Error("promoteId and generateId cannot be used together.");let pe=function(Te,ve){const Ae=[];if(Te.type==="FeatureCollection")for(let we=0;we<Te.features.length;we++)tr(Ae,Te.features[we],ve,we);else tr(Ae,Te.type==="Feature"?Te:{geometry:Te},ve);return Ae}(Q,te);this.tiles={},this.tileCoords=[],re&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",te.indexMaxZoom,te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),pe=function(Te,ve){const Ae=ve.buffer/ve.extent;let we=Te;const Ve=Zt(Te,1,-1-Ae,Ae,0,-1,2,ve),Be=Zt(Te,1,1-Ae,2+Ae,0,-1,2,ve);return(Ve||Be)&&(we=Zt(Te,1,-Ae,1+Ae,0,-1,2,ve)||[],Ve&&(we=mn(Ve,1).concat(we)),Be&&(we=we.concat(mn(Be,-1)))),we}(pe,te),pe.length&&this.splitTile(pe,0,0,0),re&&(pe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(Q,te,re,pe,Te,ve,Ae){const we=[Q,te,re,pe],Ve=this.options,Be=Ve.debug;for(;we.length;){pe=we.pop(),re=we.pop(),te=we.pop(),Q=we.pop();const ze=1<<te,Ee=Ii(te,re,pe);let ht=this.tiles[Ee];if(!ht&&(Be>1&&console.time("creation"),ht=this.tiles[Ee]=Gn(Q,te,re,pe,Ve),this.tileCoords.push({z:te,x:re,y:pe}),Be)){Be>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",te,re,pe,ht.numFeatures,ht.numPoints,ht.numSimplified),console.timeEnd("creation"));const yt=`z${te}`;this.stats[yt]=(this.stats[yt]||0)+1,this.total++}if(ht.source=Q,Te==null){if(te===Ve.indexMaxZoom||ht.numPoints<=Ve.indexMaxPoints)continue}else{if(te===Ve.maxZoom||te===Te)continue;if(Te!=null){const yt=Te-te;if(re!==ve>>yt||pe!==Ae>>yt)continue}}if(ht.source=null,Q.length===0)continue;Be>1&&console.time("clipping");const dt=.5*Ve.buffer/Ve.extent,me=.5-dt,Ce=.5+dt,he=1+dt;let De=null,He=null,lt=null,bt=null,et=Zt(Q,ze,re-dt,re+Ce,0,ht.minX,ht.maxX,Ve),Ge=Zt(Q,ze,re+me,re+he,0,ht.minX,ht.maxX,Ve);Q=null,et&&(De=Zt(et,ze,pe-dt,pe+Ce,1,ht.minY,ht.maxY,Ve),He=Zt(et,ze,pe+me,pe+he,1,ht.minY,ht.maxY,Ve),et=null),Ge&&(lt=Zt(Ge,ze,pe-dt,pe+Ce,1,ht.minY,ht.maxY,Ve),bt=Zt(Ge,ze,pe+me,pe+he,1,ht.minY,ht.maxY,Ve),Ge=null),Be>1&&console.timeEnd("clipping"),we.push(De||[],te+1,2*re,2*pe),we.push(He||[],te+1,2*re,2*pe+1),we.push(lt||[],te+1,2*re+1,2*pe),we.push(bt||[],te+1,2*re+1,2*pe+1)}}getTile(Q,te,re){Q=+Q,te=+te,re=+re;const pe=this.options,{extent:Te,debug:ve}=pe;if(Q<0||Q>24)return null;const Ae=1<<Q,we=Ii(Q,te=te+Ae&Ae-1,re);if(this.tiles[we])return Ts(this.tiles[we],Te);ve>1&&console.log("drilling down to z%d-%d-%d",Q,te,re);let Ve,Be=Q,ze=te,Ee=re;for(;!Ve&&Be>0;)Be--,ze>>=1,Ee>>=1,Ve=this.tiles[Ii(Be,ze,Ee)];return Ve&&Ve.source?(ve>1&&(console.log("found parent tile z%d-%d-%d",Be,ze,Ee),console.time("drilling down")),this.splitTile(Ve.source,Be,ze,Ee,Q,te,re),ve>1&&console.timeEnd("drilling down"),this.tiles[we]?Ts(this.tiles[we],Te):null):null}}function Ii(se,Q,te){return 32*((1<<se)*te+Q)+se}function kn(se,Q){return Q?se.properties[Q]:se.id}function Cs(se,Q){if(se==null)return!0;if(se.type==="Feature")return kn(se,Q)!=null;if(se.type==="FeatureCollection"){const te=new Set;for(const re of se.features){const pe=kn(re,Q);if(pe==null||te.has(pe))return!1;te.add(pe)}return!0}return!1}function In(se,Q){const te=new Map;if(se!=null)if(se.type==="Feature")te.set(kn(se,Q),se);else for(const re of se.features)te.set(kn(re,Q),re);return te}class Ps extends z{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(Q,te){return f._(this,void 0,void 0,function*(){const re=Q.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const pe=this._geoJSONIndex.getTile(re.z,re.x,re.y);if(!pe)return null;const Te=new Y(pe.features);let ve=We(Te);return ve.byteOffset===0&&ve.byteLength===ve.buffer.byteLength||(ve=new Uint8Array(ve)),{vectorTile:Te,rawData:ve.buffer}})}loadData(Q){return f._(this,void 0,void 0,function*(){var te;(te=this._pendingRequest)===null||te===void 0||te.abort();const re=!!(Q&&Q.request&&Q.request.collectResourceTiming)&&new f.cu(Q.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(Q,this._pendingRequest),this._geoJSONIndex=Q.cluster?new ct(function({superclusterOptions:ve,clusterProperties:Ae}){if(!Ae||!ve)return ve;const we={},Ve={},Be={accumulated:null,zoom:0},ze={properties:null},Ee=Object.keys(Ae);for(const ht of Ee){const[dt,me]=Ae[ht],Ce=f.cB(me),he=f.cB(typeof dt=="string"?[dt,["accumulated"],["get",ht]]:dt);we[ht]=Ce.value,Ve[ht]=he.value}return ve.map=ht=>{ze.properties=ht;const dt={};for(const me of Ee)dt[me]=we[me].evaluate(Be,ze);return dt},ve.reduce=(ht,dt)=>{ze.properties=dt;for(const me of Ee)Be.accumulated=ht[me],ht[me]=Ve[me].evaluate(Be,ze)},ve}(Q)).load((yield this._pendingData).features):(pe=yield this._pendingData,new wn(pe,Q.geojsonVtOptions)),this.loaded={};const Te={};if(re){const ve=re.finish();ve&&(Te.resourceTiming={},Te.resourceTiming[Q.source]=JSON.parse(JSON.stringify(ve)))}return Te}catch(Te){if(delete this._pendingRequest,f.cf(Te))return{abandoned:!0};throw Te}var pe})}getData(){return f._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(Q){const te=this.loaded;return te&&te[Q.uid]?super.reloadTile(Q):this.loadTile(Q)}loadAndProcessGeoJSON(Q,te){return f._(this,void 0,void 0,function*(){let re=yield this.loadGeoJSON(Q,te);if(delete this._pendingRequest,typeof re!="object")throw new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`);if(X(re,!0),Q.filter){const pe=f.cB(Q.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(pe.result==="error")throw new Error(pe.value.map(ve=>`${ve.key}: ${ve.message}`).join(", "));re={type:"FeatureCollection",features:re.features.filter(ve=>pe.value.evaluate({zoom:0},ve))}}return re})}loadGeoJSON(Q,te){return f._(this,void 0,void 0,function*(){const{promoteId:re}=Q;if(Q.request){const pe=yield f.h(Q.request,te);return this._dataUpdateable=Cs(pe.data,re)?In(pe.data,re):void 0,pe.data}if(typeof Q.data=="string")try{const pe=JSON.parse(Q.data);return this._dataUpdateable=Cs(pe,re)?In(pe,re):void 0,pe}catch{throw new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`)}if(!Q.dataDiff)throw new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${Q.source}`);return function(pe,Te,ve){var Ae,we,Ve,Be;if(Te.removeAll&&pe.clear(),Te.remove)for(const ze of Te.remove)pe.delete(ze);if(Te.add)for(const ze of Te.add){const Ee=kn(ze,ve);Ee!=null&&pe.set(Ee,ze)}if(Te.update)for(const ze of Te.update){let Ee=pe.get(ze.id);if(Ee==null)continue;const ht=!ze.removeAllProperties&&(((Ae=ze.removeProperties)===null||Ae===void 0?void 0:Ae.length)>0||((we=ze.addOrUpdateProperties)===null||we===void 0?void 0:we.length)>0);if((ze.newGeometry||ze.removeAllProperties||ht)&&(Ee=Object.assign({},Ee),pe.set(ze.id,Ee),ht&&(Ee.properties=Object.assign({},Ee.properties))),ze.newGeometry&&(Ee.geometry=ze.newGeometry),ze.removeAllProperties)Ee.properties={};else if(((Ve=ze.removeProperties)===null||Ve===void 0?void 0:Ve.length)>0)for(const dt of ze.removeProperties)Object.prototype.hasOwnProperty.call(Ee.properties,dt)&&delete Ee.properties[dt];if(((Be=ze.addOrUpdateProperties)===null||Be===void 0?void 0:Be.length)>0)for(const{key:dt,value:me}of ze.addOrUpdateProperties)Ee.properties[dt]=me}}(this._dataUpdateable,Q.dataDiff,re),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(Q){return f._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(Q){return this._geoJSONIndex.getClusterExpansionZoom(Q.clusterId)}getClusterChildren(Q){return this._geoJSONIndex.getChildren(Q.clusterId)}getClusterLeaves(Q){return this._geoJSONIndex.getLeaves(Q.clusterId,Q.limit,Q.offset)}}class Wi{constructor(Q){this.self=Q,this.actor=new f.F(Q),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(te,re)=>{if(this.externalWorkerSourceTypes[te])throw new Error(`Worker source with name "${te}" already registered.`);this.externalWorkerSourceTypes[te]=re},this.self.addProtocol=f.ch,this.self.removeProtocol=f.ci,this.self.registerRTLTextPlugin=te=>{f.cC.setMethods(te)},this.actor.registerMessageHandler("LDT",(te,re)=>this._getDEMWorkerSource(te,re.source).loadTile(re)),this.actor.registerMessageHandler("RDT",(te,re)=>f._(this,void 0,void 0,function*(){this._getDEMWorkerSource(te,re.source).removeTile(re)})),this.actor.registerMessageHandler("GCEZ",(te,re)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(te,re.type,re.source).getClusterExpansionZoom(re)})),this.actor.registerMessageHandler("GCC",(te,re)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(te,re.type,re.source).getClusterChildren(re)})),this.actor.registerMessageHandler("GCL",(te,re)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(te,re.type,re.source).getClusterLeaves(re)})),this.actor.registerMessageHandler("LD",(te,re)=>this._getWorkerSource(te,re.type,re.source).loadData(re)),this.actor.registerMessageHandler("GD",(te,re)=>this._getWorkerSource(te,re.type,re.source).getData()),this.actor.registerMessageHandler("LT",(te,re)=>this._getWorkerSource(te,re.type,re.source).loadTile(re)),this.actor.registerMessageHandler("RT",(te,re)=>this._getWorkerSource(te,re.type,re.source).reloadTile(re)),this.actor.registerMessageHandler("AT",(te,re)=>this._getWorkerSource(te,re.type,re.source).abortTile(re)),this.actor.registerMessageHandler("RMT",(te,re)=>this._getWorkerSource(te,re.type,re.source).removeTile(re)),this.actor.registerMessageHandler("RS",(te,re)=>f._(this,void 0,void 0,function*(){if(!this.workerSources[te]||!this.workerSources[te][re.type]||!this.workerSources[te][re.type][re.source])return;const pe=this.workerSources[te][re.type][re.source];delete this.workerSources[te][re.type][re.source],pe.removeSource!==void 0&&pe.removeSource(re)})),this.actor.registerMessageHandler("RM",te=>f._(this,void 0,void 0,function*(){delete this.layerIndexes[te],delete this.availableImages[te],delete this.workerSources[te],delete this.demWorkerSources[te]})),this.actor.registerMessageHandler("SR",(te,re)=>f._(this,void 0,void 0,function*(){this.referrer=re})),this.actor.registerMessageHandler("SRPS",(te,re)=>this._syncRTLPluginState(te,re)),this.actor.registerMessageHandler("IS",(te,re)=>f._(this,void 0,void 0,function*(){this.self.importScripts(re)})),this.actor.registerMessageHandler("SI",(te,re)=>this._setImages(te,re)),this.actor.registerMessageHandler("UL",(te,re)=>f._(this,void 0,void 0,function*(){this._getLayerIndex(te).update(re.layers,re.removedIds)})),this.actor.registerMessageHandler("SL",(te,re)=>f._(this,void 0,void 0,function*(){this._getLayerIndex(te).replace(re)}))}_setImages(Q,te){return f._(this,void 0,void 0,function*(){this.availableImages[Q]=te;for(const re in this.workerSources[Q]){const pe=this.workerSources[Q][re];for(const Te in pe)pe[Te].availableImages=te}})}_syncRTLPluginState(Q,te){return f._(this,void 0,void 0,function*(){return yield f.cC.syncState(te,this.self.importScripts)})}_getAvailableImages(Q){let te=this.availableImages[Q];return te||(te=[]),te}_getLayerIndex(Q){let te=this.layerIndexes[Q];return te||(te=this.layerIndexes[Q]=new c),te}_getWorkerSource(Q,te,re){if(this.workerSources[Q]||(this.workerSources[Q]={}),this.workerSources[Q][te]||(this.workerSources[Q][te]={}),!this.workerSources[Q][te][re]){const pe={sendAsync:(Te,ve)=>(Te.targetMapId=Q,this.actor.sendAsync(Te,ve))};switch(te){case"vector":this.workerSources[Q][te][re]=new z(pe,this._getLayerIndex(Q),this._getAvailableImages(Q));break;case"geojson":this.workerSources[Q][te][re]=new Ps(pe,this._getLayerIndex(Q),this._getAvailableImages(Q));break;default:this.workerSources[Q][te][re]=new this.externalWorkerSourceTypes[te](pe,this._getLayerIndex(Q),this._getAvailableImages(Q))}}return this.workerSources[Q][te][re]}_getDEMWorkerSource(Q,te){return this.demWorkerSources[Q]||(this.demWorkerSources[Q]={}),this.demWorkerSources[Q][te]||(this.demWorkerSources[Q][te]=new L),this.demWorkerSources[Q][te]}}return f.i(self)&&(self.worker=new Wi(self)),Wi}),u("index",["exports","./shared"],function(f,c){var S="5.0.1";function E(){var y=new c.A(4);return c.A!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y}let A,z;const L={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:y=>new Promise((r,o)=>{const h=requestAnimationFrame(r);y.signal.addEventListener("abort",()=>{cancelAnimationFrame(h),o(c.c())})}),getImageData(y,r=0){return this.getImageCanvasContext(y).getImageData(-r,-r,y.width+2*r,y.height+2*r)},getImageCanvasContext(y){const r=window.document.createElement("canvas"),o=r.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return r.width=y.width,r.height=y.height,o.drawImage(y,0,0,y.width,y.height),o},resolveURL:y=>(A||(A=document.createElement("a")),A.href=y,A.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(z==null&&(z=matchMedia("(prefers-reduced-motion: reduce)")),z.matches)}};class I{static testProp(r){if(!I.docStyle)return r[0];for(let o=0;o<r.length;o++)if(r[o]in I.docStyle)return r[o];return r[0]}static create(r,o,h){const m=window.document.createElement(r);return o!==void 0&&(m.className=o),h&&h.appendChild(m),m}static createNS(r,o){return window.document.createElementNS(r,o)}static disableDrag(){I.docStyle&&I.selectProp&&(I.userSelect=I.docStyle[I.selectProp],I.docStyle[I.selectProp]="none")}static enableDrag(){I.docStyle&&I.selectProp&&(I.docStyle[I.selectProp]=I.userSelect)}static setTransform(r,o){r.style[I.transformProp]=o}static addEventListener(r,o,h,m={}){r.addEventListener(o,h,"passive"in m?m:m.capture)}static removeEventListener(r,o,h,m={}){r.removeEventListener(o,h,"passive"in m?m:m.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",I.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",I.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",I.suppressClickInternal,!0)},0)}static getScale(r){const o=r.getBoundingClientRect();return{x:o.width/r.offsetWidth||1,y:o.height/r.offsetHeight||1,boundingClientRect:o}}static getPoint(r,o,h){const m=o.boundingClientRect;return new c.P((h.clientX-m.left)/o.x-r.clientLeft,(h.clientY-m.top)/o.y-r.clientTop)}static mousePos(r,o){const h=I.getScale(r);return I.getPoint(r,h,o)}static touchPos(r,o){const h=[],m=I.getScale(r);for(let _=0;_<o.length;_++)h.push(I.getPoint(r,m,o[_]));return h}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){const o=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),h=o.querySelectorAll("script");for(const m of h)m.remove();return I.clean(o),o.innerHTML}static isPossiblyDangerous(r,o){const h=o.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!h.includes("javascript:")&&!h.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){const o=r.children;for(const h of o)I.removeAttributes(h),I.clean(h)}static removeAttributes(r){for(const{name:o,value:h}of r.attributes)I.isPossiblyDangerous(o,h)&&r.removeAttribute(o)}}I.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,I.selectProp=I.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),I.transformProp=I.testProp(["transform","WebkitTransform"]);const F={supported:!1,testSupport:function(y){!q&&X&&(V?Y(y):B=y)}};let B,X,q=!1,V=!1;function Y(y){const r=y.createTexture();y.bindTexture(y.TEXTURE_2D,r);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,X),y.isContextLost())return;F.supported=!0}catch{}y.deleteTexture(r),q=!0}var de;typeof document<"u"&&(X=document.createElement("img"),X.onload=()=>{B&&Y(B),B=null,V=!0},X.onerror=()=>{q=!0,B=null},X.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let r,o,h,m;y.resetRequestQueue=()=>{r=[],o=0,h=0,m={}},y.addThrottleControl=M=>{const R=h++;return m[R]=M,R},y.removeThrottleControl=M=>{delete m[M],b()},y.getImage=(M,R,O=!0)=>new Promise((U,$)=>{F.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),c.e(M,{type:"image"}),r.push({abortController:R,requestParameters:M,supportImageRefresh:O,state:"queued",onError:K=>{$(K)},onSuccess:K=>{U(K)}}),b()});const _=M=>c._(this,void 0,void 0,function*(){M.state="running";const{requestParameters:R,supportImageRefresh:O,onError:U,onSuccess:$,abortController:K}=M,ee=O===!1&&!c.i(self)&&!c.g(R.url)&&(!R.headers||Object.keys(R.headers).reduce((le,fe)=>le&&fe==="accept",!0));o++;const ae=ee?T(R,K):c.m(R,K);try{const le=yield ae;delete M.abortController,M.state="completed",le.data instanceof HTMLImageElement||c.b(le.data)?$(le):le.data&&$({data:yield(oe=le.data,typeof createImageBitmap=="function"?c.d(oe):c.f(oe)),cacheControl:le.cacheControl,expires:le.expires})}catch(le){delete M.abortController,U(le)}finally{o--,b()}var oe}),b=()=>{const M=(()=>{for(const R of Object.keys(m))if(m[R]())return!0;return!1})()?c.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let R=o;R<M&&r.length>0;R++){const O=r.shift();O.abortController.signal.aborted?R--:_(O)}},T=(M,R)=>new Promise((O,U)=>{const $=new Image,K=M.url,ee=M.credentials;ee&&ee==="include"?$.crossOrigin="use-credentials":(ee&&ee==="same-origin"||!c.s(K))&&($.crossOrigin="anonymous"),R.signal.addEventListener("abort",()=>{$.src="",U(c.c())}),$.fetchPriority="high",$.onload=()=>{$.onerror=$.onload=null,O({data:$})},$.onerror=()=>{$.onerror=$.onload=null,R.signal.aborted||U(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},$.src=K})}(de||(de={})),de.resetRequestQueue();class Se{constructor(r){this._transformRequestFn=r}transformRequest(r,o){return this._transformRequestFn&&this._transformRequestFn(r,o)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function ce(y){const r=[];if(typeof y=="string")r.push({id:"default",url:y});else if(y&&y.length>0){const o=[];for(const{id:h,url:m}of y){const _=`${h}${m}`;o.indexOf(_)===-1&&(o.push(_),r.push({id:h,url:m}))}}return r}function Re(y,r,o){try{const h=new URL(y);return h.pathname+=`${r}${o}`,h.toString()}catch{throw new Error(`Invalid sprite URL "${y}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class Ie{constructor(r,o,h,m){this.context=r,this.format=h,this.texture=r.gl.createTexture(),this.update(o,m)}update(r,o,h){const{width:m,height:_}=r,b=!(this.size&&this.size[0]===m&&this.size[1]===_||h),{context:T}=this,{gl:M}=T;if(this.useMipmap=!!(o&&o.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!o||o.premultiply!==!1)),b)this.size=[m,_],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||c.b(r)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,r):M.texImage2D(M.TEXTURE_2D,0,this.format,m,_,0,this.format,M.UNSIGNED_BYTE,r.data);else{const{x:R,y:O}=h||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||c.b(r)?M.texSubImage2D(M.TEXTURE_2D,0,R,O,M.RGBA,M.UNSIGNED_BYTE,r):M.texSubImage2D(M.TEXTURE_2D,0,R,O,m,_,M.RGBA,M.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(r,o,h){const{context:m}=this,{gl:_}=m;_.bindTexture(_.TEXTURE_2D,this.texture),h!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=_.LINEAR),r!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,r),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,h||r),this.filter=r),o!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,o),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function We(y){const{userImage:r}=y;return!!(r&&r.render&&r.render())&&(y.data.replace(new Uint8Array(r.data.buffer)),!0)}class tt extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:o,promiseResolve:h}of this.requestors)h(this._getImagesForIds(o));this.requestors=[]}}getImage(r){const o=this.images[r];if(o&&!o.data&&o.spriteData){const h=o.spriteData;o.data=new c.R({width:h.width,height:h.height},h.context.getImageData(h.x,h.y,h.width,h.height).data),o.spriteData=null}return o}addImage(r,o){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,o)&&(this.images[r]=o)}_validate(r,o){let h=!0;const m=o.data||o.spriteData;return this._validateStretch(o.stretchX,m&&m.width)||(this.fire(new c.j(new Error(`Image "${r}" has invalid "stretchX" value`))),h=!1),this._validateStretch(o.stretchY,m&&m.height)||(this.fire(new c.j(new Error(`Image "${r}" has invalid "stretchY" value`))),h=!1),this._validateContent(o.content,o)||(this.fire(new c.j(new Error(`Image "${r}" has invalid "content" value`))),h=!1),h}_validateStretch(r,o){if(!r)return!0;let h=0;for(const m of r){if(m[0]<h||m[1]<m[0]||o<m[1])return!1;h=m[1]}return!0}_validateContent(r,o){if(!r)return!0;if(r.length!==4)return!1;const h=o.spriteData,m=h&&h.width||o.data.width,_=h&&h.height||o.data.height;return!(r[0]<0||m<r[0]||r[1]<0||_<r[1]||r[2]<0||m<r[2]||r[3]<0||_<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,o,h=!0){const m=this.getImage(r);if(h&&(m.data.width!==o.data.width||m.data.height!==o.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${o.data.width}x${o.data.height}).`);o.version=m.version+1,this.images[r]=o,this.updatedImages[r]=!0}removeImage(r){const o=this.images[r];delete this.images[r],delete this.patterns[r],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((o,h)=>{let m=!0;if(!this.isLoaded())for(const _ of r)this.images[_]||(m=!1);this.isLoaded()||m?o(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:o})})}_getImagesForIds(r){const o={};for(const h of r){let m=this.getImage(h);m||(this.fire(new c.k("styleimagemissing",{id:h})),m=this.getImage(h)),m?o[h]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:c.w(`Image "${h}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return o}getPixelSize(){const{width:r,height:o}=this.atlasImage;return{width:r,height:o}}getPattern(r){const o=this.patterns[r],h=this.getImage(r);if(!h)return null;if(o&&o.position.version===h.version)return o.position;if(o)o.position.version=h.version;else{const m={w:h.data.width+2,h:h.data.height+2,x:0,y:0},_=new c.I(m,h);this.patterns[r]={bin:m,position:_}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const o=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ie(r,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const _ in this.patterns)r.push(this.patterns[_].bin);const{w:o,h}=c.p(r),m=this.atlasImage;m.resize({width:o||1,height:h||1});for(const _ in this.patterns){const{bin:b}=this.patterns[_],T=b.x+1,M=b.y+1,R=this.getImage(_).data,O=R.width,U=R.height;c.R.copy(R,m,{x:0,y:0},{x:T,y:M},{width:O,height:U}),c.R.copy(R,m,{x:0,y:U-1},{x:T,y:M-1},{width:O,height:1}),c.R.copy(R,m,{x:0,y:0},{x:T,y:M+U},{width:O,height:1}),c.R.copy(R,m,{x:O-1,y:0},{x:T-1,y:M},{width:1,height:U}),c.R.copy(R,m,{x:0,y:0},{x:T+O,y:M},{width:1,height:U})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const o of r){if(this.callbackDispatchedThisFrame[o])continue;this.callbackDispatchedThisFrame[o]=!0;const h=this.getImage(o);h||c.w(`Image with ID: "${o}" was not found`),We(h)&&this.updateImage(o,h)}}}const vt=1e20;function st(y,r,o,h,m,_,b,T,M){for(let R=r;R<r+h;R++)Tt(y,o*_+R,_,m,b,T,M);for(let R=o;R<o+m;R++)Tt(y,R*_+r,1,h,b,T,M)}function Tt(y,r,o,h,m,_,b){_[0]=0,b[0]=-1e20,b[1]=vt,m[0]=y[r];for(let T=1,M=0,R=0;T<h;T++){m[T]=y[r+T*o];const O=T*T;do{const U=_[M];R=(m[T]-m[U]+O-U*U)/(T-U)/2}while(R<=b[M]&&--M>-1);M++,_[M]=T,b[M]=R,b[M+1]=vt}for(let T=0,M=0;T<h;T++){for(;b[M+1]<T;)M++;const R=_[M],O=T-R;y[r+T*o]=m[R]+O*O}}class _t{constructor(r,o){this.requestManager=r,this.localIdeographFontFamily=o,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return c._(this,void 0,void 0,function*(){const o=[];for(const _ in r)for(const b of r[_])o.push(this._getAndCacheGlyphsPromise(_,b));const h=yield Promise.all(o),m={};for(const{stack:_,id:b,glyph:T}of h)m[_]||(m[_]={}),m[_][b]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics};return m})}_getAndCacheGlyphsPromise(r,o){return c._(this,void 0,void 0,function*(){let h=this.entries[r];h||(h=this.entries[r]={glyphs:{},requests:{},ranges:{}});let m=h.glyphs[o];if(m!==void 0)return{stack:r,id:o,glyph:m};if(m=this._tinySDF(h,r,o),m)return h.glyphs[o]=m,{stack:r,id:o,glyph:m};const _=Math.floor(o/256);if(256*_>65535)throw new Error("glyphs > 65535 not supported");if(h.ranges[_])return{stack:r,id:o,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!h.requests[_]){const T=_t.loadGlyphRange(r,_,this.url,this.requestManager);h.requests[_]=T}const b=yield h.requests[_];for(const T in b)this._doesCharSupportLocalGlyph(+T)||(h.glyphs[+T]=b[+T]);return h.ranges[_]=!0,{stack:r,id:o,glyph:b[o]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))}_tinySDF(r,o,h){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(h))return;let _=r.tinySDF;if(!_){let T="400";/bold/i.test(o)?T="900":/medium/i.test(o)?T="500":/light/i.test(o)&&(T="200"),_=r.tinySDF=new _t.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:T})}const b=_.draw(String.fromCharCode(h));return{id:h,bitmap:new c.o({width:b.width||60,height:b.height||60},b.data),metrics:{width:b.glyphWidth/2||24,height:b.glyphHeight/2||24,left:b.glyphLeft/2+.5||0,top:b.glyphTop/2-27.5||-8,advance:b.glyphAdvance/2||24,isDoubleResolution:!0}}}}_t.loadGlyphRange=function(y,r,o,h){return c._(this,void 0,void 0,function*(){const m=256*r,_=m+255,b=h.transformRequest(o.replace("{fontstack}",y).replace("{range}",`${m}-${_}`),"Glyphs"),T=yield c.l(b,new AbortController);if(!T||!T.data)throw new Error(`Could not load glyph range. range: ${r}, ${m}-${_}`);const M={};for(const R of c.n(T.data))M[R.id]=R;return M})},_t.TinySDF=class{constructor({fontSize:y=24,buffer:r=3,radius:o=8,cutoff:h=.25,fontFamily:m="sans-serif",fontWeight:_="normal",fontStyle:b="normal"}={}){this.buffer=r,this.cutoff=h,this.radius=o;const T=this.size=y+4*r,M=this._createCanvas(T),R=this.ctx=M.getContext("2d",{willReadFrequently:!0});R.font=`${b} ${_} ${y}px ${m}`,R.textBaseline="alphabetic",R.textAlign="left",R.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(y){const r=document.createElement("canvas");return r.width=r.height=y,r}draw(y){const{width:r,actualBoundingBoxAscent:o,actualBoundingBoxDescent:h,actualBoundingBoxLeft:m,actualBoundingBoxRight:_}=this.ctx.measureText(y),b=Math.ceil(o),T=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-m))),M=Math.min(this.size-this.buffer,b+Math.ceil(h)),R=T+2*this.buffer,O=M+2*this.buffer,U=Math.max(R*O,0),$=new Uint8ClampedArray(U),K={data:$,width:R,height:O,glyphWidth:T,glyphHeight:M,glyphTop:b,glyphLeft:0,glyphAdvance:r};if(T===0||M===0)return K;const{ctx:ee,buffer:ae,gridInner:oe,gridOuter:le}=this;ee.clearRect(ae,ae,T,M),ee.fillText(y,ae,ae+b);const fe=ee.getImageData(ae,ae,T,M);le.fill(vt,0,U),oe.fill(0,0,U);for(let _e=0;_e<M;_e++)for(let xe=0;xe<T;xe++){const be=fe.data[4*(_e*T+xe)+3]/255;if(be===0)continue;const ke=(_e+ae)*R+xe+ae;if(be===1)le[ke]=0,oe[ke]=vt;else{const Pe=.5-be;le[ke]=Pe>0?Pe*Pe:0,oe[ke]=Pe<0?Pe*Pe:0}}st(le,0,0,R,O,R,this.f,this.v,this.z),st(oe,ae,ae,T,M,R,this.f,this.v,this.z);for(let _e=0;_e<U;_e++){const xe=Math.sqrt(le[_e])-Math.sqrt(oe[_e]);$[_e]=Math.round(255-255*(xe/this.radius+this.cutoff))}return K}};class Kt{constructor(){this.specification=c.v.light.position}possiblyEvaluate(r,o){return c.x(r.expression.evaluate(o))}interpolate(r,o,h){return{x:c.y.number(r.x,o.x,h),y:c.y.number(r.y,o.y,h),z:c.y.number(r.z,o.z,h)}}}let ct;class Pt extends c.E{constructor(r){super(),ct=ct||new c.q({anchor:new c.D(c.v.light.anchor),position:new Kt,color:new c.D(c.v.light.color),intensity:new c.D(c.v.light.intensity)}),this._transitionable=new c.T(ct),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,o={}){if(!this._validate(c.r,r,o))for(const h in r){const m=r[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),m):this._transitionable.setValue(h,m)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,o,h){return(!h||h.validate!==!1)&&c.t(this,r.call(c.u,{value:o,style:{glyphs:!0,sprite:!0},styleSpec:c.v}))}}const Xe=new c.q({"sky-color":new c.D(c.v.sky["sky-color"]),"horizon-color":new c.D(c.v.sky["horizon-color"]),"fog-color":new c.D(c.v.sky["fog-color"]),"fog-ground-blend":new c.D(c.v.sky["fog-ground-blend"]),"horizon-fog-blend":new c.D(c.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new c.D(c.v.sky["sky-horizon-blend"]),"atmosphere-blend":new c.D(c.v.sky["atmosphere-blend"])});class Oe extends c.E{constructor(r){super(),this._transitionable=new c.T(Xe),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.z(0))}setSky(r,o={}){if(!this._validate(c.B,r,o)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const h in r){const m=r[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),m):this._transitionable.setValue(h,m)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,o,h={}){return(h==null?void 0:h.validate)!==!1&&c.t(this,r.call(c.u,c.e({value:o,style:{glyphs:!0,sprite:!0},styleSpec:c.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class at{constructor(r,o){this.width=r,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,o){const h=r.join(",")+String(o);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(r,o)),this.dashEntry[h]}getDashRanges(r,o,h){const m=[];let _=r.length%2==1?-r[r.length-1]*h:0,b=r[0]*h,T=!0;m.push({left:_,right:b,isDash:T,zeroLength:r[0]===0});let M=r[0];for(let R=1;R<r.length;R++){T=!T;const O=r[R];_=M*h,M+=O,b=M*h,m.push({left:_,right:b,isDash:T,zeroLength:O===0})}return m}addRoundDash(r,o,h){const m=o/2;for(let _=-h;_<=h;_++){const b=this.width*(this.nextRow+h+_);let T=0,M=r[T];for(let R=0;R<this.width;R++){R/M.right>1&&(M=r[++T]);const O=Math.abs(R-M.left),U=Math.abs(R-M.right),$=Math.min(O,U);let K;const ee=_/h*(m+1);if(M.isDash){const ae=m-Math.abs(ee);K=Math.sqrt($*$+ae*ae)}else K=m-Math.sqrt($*$+ee*ee);this.data[b+R]=Math.max(0,Math.min(255,K+128))}}}addRegularDash(r){for(let T=r.length-1;T>=0;--T){const M=r[T],R=r[T+1];M.zeroLength?r.splice(T,1):R&&R.isDash===M.isDash&&(R.left=M.left,r.splice(T,1))}const o=r[0],h=r[r.length-1];o.isDash===h.isDash&&(o.left=h.left-this.width,h.right=o.right+this.width);const m=this.width*this.nextRow;let _=0,b=r[_];for(let T=0;T<this.width;T++){T/b.right>1&&(b=r[++_]);const M=Math.abs(T-b.left),R=Math.abs(T-b.right),O=Math.min(M,R);this.data[m+T]=Math.max(0,Math.min(255,(b.isDash?O:-O)+128))}}addDash(r,o){const h=o?7:0,m=2*h+1;if(this.nextRow+m>this.height)return c.w("LineAtlas out of space"),null;let _=0;for(let T=0;T<r.length;T++)_+=r[T];if(_!==0){const T=this.width/_,M=this.getDashRanges(r,this.width,T);o?this.addRoundDash(M,T,h):this.addRegularDash(M)}const b={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:_};return this.nextRow+=m,this.dirty=!0,b}bind(r){const o=r.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))}}const Et="maplibre_preloaded_worker_pool";class wt{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<wt.workerCount;)this.workers.push(new Worker(c.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(o=>{o.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Et]}numActive(){return Object.keys(this.active).length}}const Lt=Math.floor(L.hardwareConcurrency/2);let It,Wt;function tr(){return It||(It=new wt),It}wt.workerCount=c.C(globalThis)?Math.max(Math.min(Lt,3),1):1;class gt{constructor(r,o){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=o;const h=this.workerPool.acquire(o);for(let m=0;m<h.length;m++){const _=new c.F(h[m],o);_.name=`Worker ${m}`,this.actors.push(_)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,o){const h=[];for(const m of this.actors)h.push(m.sendAsync({type:r,data:o}));return Promise.all(h)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(o=>{o.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,o){for(const h of this.actors)h.registerMessageHandler(r,o)}}function or(){return Wt||(Wt=new gt(tr(),c.G),Wt.registerMessageHandler("GR",(y,r,o)=>c.m(r,o))),Wt}function Yt(y,r){const o=c.H();return c.J(o,o,[1,1,0]),c.K(o,o,[.5*y.width,.5*y.height,1]),y.calculatePosMatrix?c.L(o,o,y.calculatePosMatrix(r.toUnwrapped())):o}function ir(y,r,o,h,m,_){var b;const T=function(U,$,K){if(U)for(const ee of U){const ae=$[ee];if(ae&&ae.source===K&&ae.type==="fill-extrusion")return!0}else for(const ee in $){const ae=$[ee];if(ae.source===K&&ae.type==="fill-extrusion")return!0}return!1}((b=m==null?void 0:m.layers)!==null&&b!==void 0?b:null,r,y.id),M=_.maxPitchScaleFactor(),R=y.tilesIn(h,M,T);R.sort(At);const O=[];for(const U of R)O.push({wrappedTileID:U.tileID.wrapped().key,queryResults:U.tile.queryRenderedFeatures(r,o,y._state,U.queryGeometry,U.cameraQueryGeometry,U.scale,m,_,M,Yt(y.transform,U.tileID))});return function(U,$){for(const K in U)for(const ee of U[K])Zt(ee,$);return U}(function(U){const $={},K={};for(const ee of U){const ae=ee.queryResults,oe=ee.wrappedTileID,le=K[oe]=K[oe]||{};for(const fe in ae){const _e=ae[fe],xe=le[fe]=le[fe]||{},be=$[fe]=$[fe]||[];for(const ke of _e)xe[ke.featureIndex]||(xe[ke.featureIndex]=!0,be.push(ke))}}return $}(O),y)}function At(y,r){const o=y.tileID,h=r.tileID;return o.overscaledZ-h.overscaledZ||o.canonical.y-h.canonical.y||o.wrap-h.wrap||o.canonical.x-h.canonical.x}function Zt(y,r){const o=y.feature,h=r.getFeatureState(o.layer["source-layer"],o.id);o.source=o.layer.source,o.layer["source-layer"]&&(o.sourceLayer=o.layer["source-layer"]),o.state=h}function Lr(y,r,o){return c._(this,void 0,void 0,function*(){let h=y;if(y.url?h=(yield c.h(r.transformRequest(y.url,"Source"),o)).data:yield L.frameAsync(o),!h)return null;const m=c.M(c.e(h,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in h&&h.vector_layers&&(m.vectorLayerIds=h.vector_layers.map(_=>_.id)),m})}class vr{constructor(r,o){r&&(o?this.setSouthWest(r).setNorthEast(o):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof c.N?new c.N(r.lng,r.lat):c.N.convert(r),this}setSouthWest(r){return this._sw=r instanceof c.N?new c.N(r.lng,r.lat):c.N.convert(r),this}extend(r){const o=this._sw,h=this._ne;let m,_;if(r instanceof c.N)m=r,_=r;else{if(!(r instanceof vr))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(vr.convert(r)):this.extend(c.N.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(c.N.convert(r)):this;if(m=r._sw,_=r._ne,!m||!_)return this}return o||h?(o.lng=Math.min(m.lng,o.lng),o.lat=Math.min(m.lat,o.lat),h.lng=Math.max(_.lng,h.lng),h.lat=Math.max(_.lat,h.lat)):(this._sw=new c.N(m.lng,m.lat),this._ne=new c.N(_.lng,_.lat)),this}getCenter(){return new c.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.N(this.getWest(),this.getNorth())}getSouthEast(){return new c.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:o,lat:h}=c.N.convert(r);let m=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&m}static convert(r){return r instanceof vr?r:r&&new vr(r)}static fromLngLat(r,o=0){const h=360*o/40075017,m=h/Math.cos(Math.PI/180*r.lat);return new vr(new c.N(r.lng-m,r.lat-h),new c.N(r.lng+m,r.lat+h))}adjustAntiMeridian(){const r=new c.N(this._sw.lng,this._sw.lat),o=new c.N(this._ne.lng,this._ne.lat);return new vr(r,r.lng>o.lng?new c.N(o.lng+360,o.lat):o)}}class Qr{constructor(r,o,h){this.bounds=vr.convert(this.validateBounds(r)),this.minzoom=o||0,this.maxzoom=h||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const o=Math.pow(2,r.z),h=Math.floor(c.O(this.bounds.getWest())*o),m=Math.floor(c.Q(this.bounds.getNorth())*o),_=Math.ceil(c.O(this.bounds.getEast())*o),b=Math.ceil(c.Q(this.bounds.getSouth())*o);return r.x>=h&&r.x<_&&r.y>=m&&r.y<b}}class ei extends c.E{constructor(r,o,h,m){if(super(),this.id=r,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.M(o,["url","scheme","tileSize","promoteId"])),this._options=c.e({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Lr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(c.e(this,r),r.bounds&&(this.tileBounds=new Qr(r.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new c.j(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return c.e({},this._options)}loadTile(r){return c._(this,void 0,void 0,function*(){const o=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h={request:this.map._requestManager.transformRequest(o,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};h.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((_,b)=>{r.reloadPromise={resolve:_,reject:b}})}else r.actor=this.dispatcher.getActor(),m="LT";r.abortController=new AbortController;try{const _=yield r.actor.sendAsync({type:m,data:h},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,_)}catch(_){if(delete r.abortController,r.aborted)return;if(_&&_.status!==404)throw _;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,o){if(o&&o.resourceTiming&&(r.resourceTiming=o.resourceTiming),o&&this.map._refreshExpiredTiles&&r.setExpiryData(o),r.loadVectorData(o,this.map.painter),r.reloadPromise){const h=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(h.resolve).catch(h.reject)}}abortTile(r){return c._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return c._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class fn extends c.E{constructor(r,o,h,m){super(),this.id=r,this.dispatcher=h,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},o),c.e(this,c.M(o,["url","scheme","tileSize"]))}load(){return c._(this,arguments,void 0,function*(r=!1){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const o=yield Lr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,o&&(c.e(this,o),o.bounds&&(this.tileBounds=new Qr(o.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(o){this._tileJSONRequest=null,this.fire(new c.j(o))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return c.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return c._(this,void 0,void 0,function*(){const o=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const h=yield de.getImage(this.map._requestManager.transformRequest(o,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(h&&h.data){this.map._refreshExpiredTiles&&h.cacheControl&&h.expires&&r.setExpiryData({cacheControl:h.cacheControl,expires:h.expires});const m=this.map.painter.context,_=m.gl,b=h.data;r.texture=this.map.painter.getTileTexture(b.width),r.texture?r.texture.update(b,{useMipmap:!0}):(r.texture=new Ie(m,b,_.RGBA,{useMipmap:!0}),r.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(h){if(delete r.abortController,r.aborted)r.state="unloaded";else if(h)throw r.state="errored",h}})}abortTile(r){return c._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return c._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class $n extends fn{constructor(r,o,h,m){super(r,o,h,m),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox",this.redFactor=o.redFactor,this.greenFactor=o.greenFactor,this.blueFactor=o.blueFactor,this.baseShift=o.baseShift}loadTile(r){return c._(this,void 0,void 0,function*(){const o=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h=this.map._requestManager.transformRequest(o,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const m=yield de.getImage(h,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(m&&m.data){const _=m.data;this.map._refreshExpiredTiles&&m.cacheControl&&m.expires&&r.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const b=c.b(_)&&c.U()?_:yield this.readImageNow(_),T={type:this.type,uid:r.uid,source:this.id,rawImageData:b,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const M=yield r.actor.sendAsync({type:"LDT",data:T});r.dem=M,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(m){if(delete r.abortController,r.aborted)r.state="unloaded";else if(m)throw r.state="errored",m}})}readImageNow(r){return c._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&c.V()){const o=r.width+2,h=r.height+2;try{return new c.R({width:o,height:h},yield c.W(r,-1,-1,o,h))}catch{}}return L.getImageData(r,1)})}_getNeighboringTiles(r){const o=r.canonical,h=Math.pow(2,o.z),m=(o.x-1+h)%h,_=o.x===0?r.wrap-1:r.wrap,b=(o.x+1+h)%h,T=o.x+1===h?r.wrap+1:r.wrap,M={};return M[new c.S(r.overscaledZ,_,o.z,m,o.y).key]={backfilled:!1},M[new c.S(r.overscaledZ,T,o.z,b,o.y).key]={backfilled:!1},o.y>0&&(M[new c.S(r.overscaledZ,_,o.z,m,o.y-1).key]={backfilled:!1},M[new c.S(r.overscaledZ,r.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},M[new c.S(r.overscaledZ,T,o.z,b,o.y-1).key]={backfilled:!1}),o.y+1<h&&(M[new c.S(r.overscaledZ,_,o.z,m,o.y+1).key]={backfilled:!1},M[new c.S(r.overscaledZ,r.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},M[new c.S(r.overscaledZ,T,o.z,b,o.y+1).key]={backfilled:!1}),M}unloadTile(r){return c._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class Zn extends c.E{constructor(r,o,h,m){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=h.getActor(),this.setEventedParent(m),this._data=o.data,this._options=c.e({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId,o.clusterMaxZoom!==void 0&&this.maxzoom<=o.clusterMaxZoom&&c.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${o.clusterMaxZoom}".`),this.workerOptions=c.e({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(o.buffer!==void 0?o.buffer:128),tolerance:this._pixelsToTileUnits(o.tolerance!==void 0?o.tolerance:.375),extent:c.X,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:c.X,radius:this._pixelsToTileUnits(o.clusterRadius||50),log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(r){return r*(c.X/this.tileSize)}load(){return c._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return c._(this,void 0,void 0,function*(){const r=c.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,o,h){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:o,offset:h}})}_updateWorkerData(r){return c._(this,void 0,void 0,function*(){const o=c.e({type:this.type},this.workerOptions);r?o.dataDiff=r:typeof this._data=="string"?(o.request=this.map._requestManager.transformRequest(L.resolveURL(this._data),"Source"),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new c.k("dataloading",{dataType:"source"}));try{const h=yield this.actor.sendAsync({type:"LD",data:o});if(this._pendingLoads--,this._removed||h.abandoned)return void this.fire(new c.k("dataabort",{dataType:"source"}));let m=null;h.resourceTiming&&h.resourceTiming[this.id]&&(m=h.resourceTiming[this.id].slice(0));const _={dataType:"source"};this._collectResourceTiming&&m&&m.length>0&&c.e(_,{resourceTiming:m}),this.fire(new c.k("data",Object.assign(Object.assign({},_),{sourceDataType:"metadata"}))),this.fire(new c.k("data",Object.assign(Object.assign({},_),{sourceDataType:"content"})))}catch(h){if(this._pendingLoads--,this._removed)return void this.fire(new c.k("dataabort",{dataType:"source"}));this.fire(new c.j(h))}})}loaded(){return this._pendingLoads===0}loadTile(r){return c._(this,void 0,void 0,function*(){const o=r.actor?"RT":"LT";r.actor=this.actor;const h={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};r.abortController=new AbortController;const m=yield this.actor.sendAsync({type:o,data:h},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(m,this.map.painter,o==="RT")})}abortTile(r){return c._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return c._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return c.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class mn extends c.E{constructor(r,o,h,m){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=h,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=o}load(r){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const o=yield de.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,o&&o.data&&(this.image=o.data,r&&(this.coordinates=r),this._finishLoading())}catch(o){this._request=null,this._loaded=!0,this.fire(new c.j(o))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const o=r.map(c.Y.fromLngLat);var h;return this.tileID=function(m){let _=1/0,b=1/0,T=-1/0,M=-1/0;for(const $ of m)_=Math.min(_,$.x),b=Math.min(b,$.y),T=Math.max(T,$.x),M=Math.max(M,$.y);const R=Math.max(T-_,M-b),O=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),U=Math.pow(2,O);return new c.Z(O,Math.floor((_+T)/2*U),Math.floor((b+M)/2*U))}(o),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=o.map(m=>this.tileID.getTilePoint(m)._round()),this.flippedWindingOrder=((h=this.tileCoords)[1].x-h[0].x)*(h[2].y-h[0].y)-(h[1].y-h[0].y)*(h[2].x-h[0].x)<0,this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,o=r.gl;this.texture||(this.texture=new Ie(r,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let h=!1;for(const m in this.tiles){const _=this.tiles[m];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,h=!0)}h&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return c._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Ss extends mn{constructor(r,o,h,m){super(r,o,h,m),this.roundZoom=!0,this.type="video",this.options=o}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const o of r.urls)this.urls.push(this.map._requestManager.transformRequest(o,"Source").url);try{const o=yield c.a0(this.urls);if(this._loaded=!0,!o)return;this.video=o,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(o){this.fire(new c.j(o))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const o=this.video.seekable;r<o.start(0)||r>o.end(0)?this.fire(new c.j(new c.$(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,o=r.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new Ie(r,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let h=!1;for(const m in this.tiles){const _=this.tiles[m];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,h=!0)}h&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ts extends mn{constructor(r,o,h,m){super(r,o,h,m),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(b=>typeof b!="number"))||this.fire(new c.j(new c.$(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.j(new c.$(`sources.${r}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new c.j(new c.$(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new c.j(new c.$(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.j(new c.$(`sources.${r}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){return c._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context,h=o.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ie(o,this.canvas,h.RGBA,{premultiply:!0});let m=!1;for(const _ in this.tiles){const b=this.tiles[_];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,m=!0)}m&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Nr={},Gn=y=>{switch(y){case"geojson":return Zn;case"image":return mn;case"raster":return fn;case"raster-dem":return $n;case"vector":return ei;case"video":return Ss;case"canvas":return Ts}return Nr[y]},ds="RTLPluginLoaded";class _i extends c.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=or()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(o=>{throw this.status="error",o})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return c._(this,arguments,void 0,function*(o,h=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=L.resolveURL(o),!this.url)throw new Error(`requested url ${o} is invalid`);if(this.status==="unavailable"){if(!h)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return c._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new c.k(ds))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let bn=null;function wn(){return bn||(bn=new _i),bn}class Ii{constructor(r,o){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=c.a1(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const o=r+this.timeAdded;o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,o,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(m,_){const b={};if(!_)return b;for(const T of m){const M=T.layerIds.map(R=>_.getLayer(R)).filter(Boolean);if(M.length!==0){T.layers=M,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(R=>M.filter(O=>O.id===R)[0]));for(const R of M)b[R.id]=T}}return b}(r.buckets,o==null?void 0:o.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof c.a3){if(this.hasSymbolBuckets=!0,!h)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof c.a3&&_.hasRTLText){this.hasRTLText=!0,wn().lazyLoad();break}}this.queryPadding=0;for(const m in this.buckets){const _=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(m).queryRadius(_))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new c.a2}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const h in this.buckets){const m=this.buckets[h];m.uploadPending()&&m.upload(r)}const o=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ie(r,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ie(r,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,o,h,m,_,b,T,M,R,O){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:_,scale:b,tileSize:this.tileSize,pixelPosMatrix:O,transform:M,params:T,queryPadding:this.queryPadding*R},r,o,h):{}}querySourceFeatures(r,o){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const m=h.loadVTLayers(),_=o&&o.sourceLayer?o.sourceLayer:"",b=m._geojsonTileLayer||m[_];if(!b)return;const T=c.a4(o&&o.filter),{z:M,x:R,y:O}=this.tileID.canonical,U={z:M,x:R,y:O};for(let $=0;$<b.length;$++){const K=b.feature($);if(T.needGeometry){const oe=c.a5(K,!0);if(!T.filter(new c.z(this.tileID.overscaledZ),oe,this.tileID.canonical))continue}else if(!T.filter(new c.z(this.tileID.overscaledZ),K))continue;const ee=h.getId(K,_),ae=new c.a6(K,M,R,O,ee);ae.tile=U,r.push(ae)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const o=this.expirationTime;if(r.cacheControl){const h=c.a7(r.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const h=Date.now();let m=!1;if(this.expirationTime>h)m=!1;else if(o)if(this.expirationTime<o)m=!0;else{const _=this.expirationTime-o;_?this.expirationTime=h+Math.max(_,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const h=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!o.style.hasLayer(m))continue;const _=this.buckets[m],b=_.layers[0].sourceLayer||"_geojsonTileLayer",T=h[b],M=r[b];if(!T||!M||Object.keys(M).length===0)continue;_.update(M,T,this.imageAtlas&&this.imageAtlas.patternPositions||{});const R=o&&o.style&&o.style.getLayer(m);R&&(this.queryPadding=Math.max(this.queryPadding,R.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<L.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=L.now()+r}setDependencies(r,o){const h={};for(const m of o)h[m]=!0;this.dependencies[r]=h}hasDependency(r,o){for(const h of r){const m=this.dependencies[h];if(m){for(const _ of o)if(m[_])return!0}}return!1}}class kn{constructor(r,o){this.max=r,this.onRemove=o,this.reset()}reset(){for(const r in this.data)for(const o of this.data[r])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(r,o,h){const m=r.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const _={value:o,timeout:void 0};if(h!==void 0&&(_.timeout=setTimeout(()=>{this.remove(r,_)},h)),this.data[m].push(_),this.order.push(m),this.order.length>this.max){const b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const o=this.data[r].shift();return o.timeout&&clearTimeout(o.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),o.value}getByKey(r){const o=this.data[r];return o?o[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,o){if(!this.has(r))return this;const h=r.wrapped().key,m=o===void 0?0:this.data[h].indexOf(o),_=this.data[h][m];return this.data[h].splice(m,1),_.timeout&&clearTimeout(_.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(_.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(r){const o=[];for(const h in this.data)for(const m of this.data[h])r(m.value)||o.push(m);for(const h of o)this.remove(h.value.tileID,h)}}class Cs{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,o,h){const m=String(o);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][m]=this.stateChanges[r][m]||{},c.e(this.stateChanges[r][m],h),this.deletedStates[r]===null){this.deletedStates[r]={};for(const _ in this.state[r])_!==m&&(this.deletedStates[r][_]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][m]===null){this.deletedStates[r][m]={};for(const _ in this.state[r][m])h[_]||(this.deletedStates[r][m][_]=null)}else for(const _ in h)this.deletedStates[r]&&this.deletedStates[r][m]&&this.deletedStates[r][m][_]===null&&delete this.deletedStates[r][m][_]}removeFeatureState(r,o,h){if(this.deletedStates[r]===null)return;const m=String(o);if(this.deletedStates[r]=this.deletedStates[r]||{},h&&o!==void 0)this.deletedStates[r][m]!==null&&(this.deletedStates[r][m]=this.deletedStates[r][m]||{},this.deletedStates[r][m][h]=null);else if(o!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][m])for(h in this.deletedStates[r][m]={},this.stateChanges[r][m])this.deletedStates[r][m][h]=null;else this.deletedStates[r][m]=null;else this.deletedStates[r]=null}getState(r,o){const h=String(o),m=c.e({},(this.state[r]||{})[h],(this.stateChanges[r]||{})[h]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const _=this.deletedStates[r][o];if(_===null)return{};for(const b in _)delete m[b]}return m}initializeTileState(r,o){r.setFeatureState(this.state,o)}coalesceChanges(r,o){const h={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const _={};for(const b in this.stateChanges[m])this.state[m][b]||(this.state[m][b]={}),c.e(this.state[m][b],this.stateChanges[m][b]),_[b]=this.state[m][b];h[m]=_}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const _={};if(this.deletedStates[m]===null)for(const b in this.state[m])_[b]={},this.state[m][b]={};else for(const b in this.deletedStates[m]){if(this.deletedStates[m][b]===null)this.state[m][b]={};else for(const T of Object.keys(this.deletedStates[m][b]))delete this.state[m][b][T];_[b]=this.state[m][b]}h[m]=h[m]||{},c.e(h[m],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const m in r)r[m].setFeatureState(h,o)}}function In(y,r,o){const h=r.intersectsFrustum(y);if(!o)return h;const m=r.intersectsPlane(o);return h===0||m===0?0:h===2&&m===2?2:1}function Ps(y,r,o,h,m){let _=y;const b=Math.atan(r/o),T=Math.hypot(r,o);return _=y+c.a8(h/T/Math.max(.5,Math.cos(c.aa(m/2)))),_+=1*c.a8(Math.cos(b))/2,_+=c.ab(y-_,-0,0),_}function Wi(y,r){const o=(r.roundZoom?Math.round:Math.floor)(y.zoom+c.a8(y.tileSize/r.tileSize));return Math.max(0,o)}function se(y,r){const o=y.getCameraFrustum(),h=y.getClippingPlane(),m=y.screenPointToMercatorCoordinate(y.getCameraPoint()),_=c.Y.fromLngLat(y.center,y.elevation);m.z=_.z+Math.cos(y.pitchInRadians)*y.cameraToCenterDistance/y.worldSize;const b=y.getCoveringTilesDetailsProvider(),T=b.allowVariableZoom(y,r),M=Wi(y,r),R=r.minzoom||0,O=r.maxzoom!==void 0?r.maxzoom:y.maxZoom,U=Math.min(Math.max(0,M),O),$=Math.pow(2,U),K=[$*m.x,$*m.y,0],ee=[$*_.x,$*_.y,0],ae=Math.hypot(_.x-m.x,_.y-m.y),oe=Math.abs(_.z-m.z),le=Math.hypot(ae,oe),fe=be=>({zoom:0,x:0,y:0,wrap:be,fullyVisible:!1}),_e=[],xe=[];if(y.renderWorldCopies&&b.allowWorldCopies())for(let be=1;be<=3;be++)_e.push(fe(-be)),_e.push(fe(be));for(_e.push(fe(0));_e.length>0;){const be=_e.pop(),ke=be.x,Pe=be.y;let Le=be.fullyVisible;const Fe={x:ke,y:Pe,z:be.zoom},Ke=b.getTileAABB(Fe,be.wrap,y.elevation,r);if(!Le){const ut=In(o,Ke,h);if(ut===0)continue;Le=ut===2}const qe=b.distanceToTile2d(m.x,m.y,Fe,Ke);let $e=M;T&&($e=(r.calculateTileZoom||Ps)(y.zoom+c.a8(y.tileSize/r.tileSize),qe,oe,le,y.fov)),$e=(r.roundZoom?Math.round:Math.floor)($e),$e=Math.max(0,$e);const ft=Math.min($e,O);if(be.wrap=b.getWrap(_,Fe,be.wrap),be.zoom>=ft){if(be.zoom<R)continue;const ut=U-be.zoom,Ye=K[0]-.5-(ke<<ut),kt=K[1]-.5-(Pe<<ut),Qt=r.reparseOverscaled?Math.max(be.zoom,$e):be.zoom;xe.push({tileID:new c.S(be.zoom===O?Qt:be.zoom,be.wrap,be.zoom,ke,Pe),distanceSq:c.a9([ee[0]-.5-ke,ee[1]-.5-Pe]),tileDistanceToCamera:Math.sqrt(Ye*Ye+kt*kt)})}else for(let ut=0;ut<4;ut++)_e.push({zoom:be.zoom+1,x:(ke<<1)+ut%2,y:(Pe<<1)+(ut>>1),wrap:be.wrap,fullyVisible:Le})}return xe.sort((be,ke)=>be.distanceSq-ke.distanceSq).map(be=>be.tileID)}class Q extends c.E{constructor(r,o,h){super(),this.id=r,this.dispatcher=h,this.on("data",m=>this._dataHandler(m)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,_,b,T)=>{const M=new(Gn(_.type))(m,_,b,T);if(M.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${M.id}`);return M})(r,o,h,this),this._tiles={},this._cache=new kn(0,m=>this._unloadTile(m)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Cs,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const o=this._tiles[r];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,o,h){return c._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,o,h)}catch(m){r.state="errored",m.status!==404?this._source.fire(new c.j(m,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new c.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const h=this._tiles[o];h.upload(r),h.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(te).map(r=>r.key)}getRenderableIds(r){const o=[];for(const h in this._tiles)this._isIdRenderable(h,r)&&o.push(this._tiles[h]);return r?o.sort((h,m)=>{const _=h.tileID,b=m.tileID,T=new c.P(_.canonical.x,_.canonical.y)._rotate(-this.transform.bearingInRadians),M=new c.P(b.canonical.x,b.canonical.y)._rotate(-this.transform.bearingInRadians);return _.overscaledZ-b.overscaledZ||M.y-T.y||M.x-T.x}).map(h=>h.tileID.key):o.map(h=>h.tileID).sort(te).map(h=>h.key)}hasRenderableParent(r){const o=this.findLoadedParent(r,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(r,o){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(o||!this._tiles[r].holdingForFade())}reload(r){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)(r||this._tiles[o].state!=="errored")&&this._reloadTile(o,"reloading")}}_reloadTile(r,o){return c._(this,void 0,void 0,function*(){const h=this._tiles[r];h&&(h.state!=="loading"&&(h.state=o),yield this._loadTile(h,r,o))})}_tileLoaded(r,o,h){r.timeAdded=L.now(),h==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(o,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new c.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const o=this.getRenderableIds();for(let m=0;m<o.length;m++){const _=o[m];if(r.neighboringTiles&&r.neighboringTiles[_]){const b=this.getTileByID(_);h(r,b),h(b,r)}}function h(m,_){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let b=_.tileID.canonical.x-m.tileID.canonical.x;const T=_.tileID.canonical.y-m.tileID.canonical.y,M=Math.pow(2,m.tileID.canonical.z),R=_.tileID.key;b===0&&T===0||Math.abs(T)>1||(Math.abs(b)>1&&(Math.abs(b+M)===1?b+=M:Math.abs(b-M)===1&&(b-=M)),_.dem&&m.dem&&(m.dem.backfillBorder(_.dem,b,T),m.neighboringTiles&&m.neighboringTiles[R]&&(m.neighboringTiles[R].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,o,h,m){for(const _ in this._tiles){let b=this._tiles[_];if(m[_]||!b.hasData()||b.tileID.overscaledZ<=o||b.tileID.overscaledZ>h)continue;let T=b.tileID;for(;b&&b.tileID.overscaledZ>o+1;){const R=b.tileID.scaledTo(b.tileID.overscaledZ-1);b=this._tiles[R.key],b&&b.hasData()&&(T=R)}let M=T;for(;M.overscaledZ>o;)if(M=M.scaledTo(M.overscaledZ-1),r[M.key]||r[M.canonical.key]){m[T.key]=T;break}}}findLoadedParent(r,o){if(r.key in this._loadedParentTiles){const h=this._loadedParentTiles[r.key];return h&&h.tileID.overscaledZ>=o?h:null}for(let h=r.overscaledZ-1;h>=o;h--){const m=r.scaledTo(h),_=this._getLoadedTile(m);if(_)return _}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const o=this._tiles[r.key];return o&&o.hasData()?o:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const o=Math.ceil(r.width/this._source.tileSize)+1,h=Math.ceil(r.height/this._source.tileSize)+1,m=Math.floor(o*h*(this._maxTileCacheZoomLevels===null?c.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(_)}handleWrapJump(r){const o=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,o){const h={};for(const m in this._tiles){const _=this._tiles[m];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+o),h[_.tileID.key]=_}this._tiles=h;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}_updateCoveredAndRetainedTiles(r,o,h,m,_,b){const T={},M={},R=Object.keys(r),O=L.now();for(const U of R){const $=r[U],K=this._tiles[U];if(!K||K.fadeEndTime!==0&&K.fadeEndTime<=O)continue;const ee=this.findLoadedParent($,o),ae=this.findLoadedSibling($),oe=ee||ae||null;oe&&(this._addTile(oe.tileID),T[oe.tileID.key]=oe.tileID),M[U]=$}this._retainLoadedChildren(M,m,h,r);for(const U in T)r[U]||(this._coveredTiles[U]=!0,r[U]=T[U]);if(b){const U={},$={};for(const K of _)this._tiles[K.key].hasData()?U[K.key]=K:$[K.key]=K;for(const K in $){const ee=$[K].children(this._source.maxzoom);this._tiles[ee[0].key]&&this._tiles[ee[1].key]&&this._tiles[ee[2].key]&&this._tiles[ee[3].key]&&(U[ee[0].key]=r[ee[0].key]=ee[0],U[ee[1].key]=r[ee[1].key]=ee[1],U[ee[2].key]=r[ee[2].key]=ee[2],U[ee[3].key]=r[ee[3].key]=ee[3],delete $[K])}for(const K in $){const ee=$[K],ae=this.findLoadedParent(ee,this._source.minzoom),oe=this.findLoadedSibling(ee),le=ae||oe||null;if(le){U[le.tileID.key]=r[le.tileID.key]=le.tileID;for(const fe in U)U[fe].isChildOf(le.tileID)&&delete U[fe]}}for(const K in this._tiles)U[K]||(this._coveredTiles[K]=!0)}}update(r,o){if(!this._sourceLoaded||this._paused)return;let h;this.transform=r,this.terrain=o,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(O=>new c.S(O.canonical.z,O.wrap,O.canonical.z,O.canonical.x,O.canonical.y)):(h=se(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:o,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(h=h.filter(O=>this._source.hasTile(O)))):h=[];const m=Wi(r,this._source),_=Math.max(m-Q.maxOverzooming,this._source.minzoom),b=Math.max(m+Q.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const O={};for(const U of h)if(U.canonical.z>this._source.minzoom){const $=U.scaledTo(U.canonical.z-1);O[$.key]=$;const K=U.scaledTo(Math.max(this._source.minzoom,Math.min(U.canonical.z,5)));O[K.key]=K}h=h.concat(Object.values(O))}const T=h.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,T&&this.fire(new c.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(h,m);re(this._source.type)&&this._updateCoveredAndRetainedTiles(M,_,b,m,h,o);for(const O in M)this._tiles[O].clearFadeHold();const R=c.ac(this._tiles,M);for(const O of R){const U=this._tiles[O];U.hasSymbolBuckets&&!U.holdingForFade()?U.setHoldDuration(this.map._fadeDuration):U.hasSymbolBuckets&&!U.symbolFadeFinished()||this._removeTile(O)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,o){var h;const m={},_={},b=Math.max(o-Q.maxOverzooming,this._source.minzoom),T=Math.max(o+Q.maxUnderzooming,this._source.minzoom),M={};for(const R of r){const O=this._addTile(R);m[R.key]=R,O.hasData()||o<this._source.maxzoom&&(M[R.key]=R)}this._retainLoadedChildren(M,o,T,m);for(const R of r){let O=this._tiles[R.key];if(O.hasData())continue;if(o+1>this._source.maxzoom){const $=R.children(this._source.maxzoom)[0],K=this.getTile($);if(K&&K.hasData()){m[$.key]=$;continue}}else{const $=R.children(this._source.maxzoom);if(m[$[0].key]&&m[$[1].key]&&m[$[2].key]&&m[$[3].key])continue}let U=O.wasRequested();for(let $=R.overscaledZ-1;$>=b;--$){const K=R.scaledTo($);if(_[K.key])break;if(_[K.key]=!0,O=this.getTile(K),!O&&U&&(O=this._addTile(K)),O){const ee=O.hasData();if((ee||!(!((h=this.map)===null||h===void 0)&&h.cancelPendingTileRequestsWhileZooming)||U)&&(m[K.key]=K),U=O.wasRequested(),ee)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const o=[];let h,m=this._tiles[r].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){h=this._loadedParentTiles[m.key];break}o.push(m.key);const _=m.scaledTo(m.overscaledZ-1);if(h=this._getLoadedTile(_),h)break;m=_}for(const _ of o)this._loadedParentTiles[_]=h}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const o=this._tiles[r].tileID,h=this._getLoadedTile(o);this._loadedSiblingTiles[o.key]=h}}_addTile(r){let o=this._tiles[r.key];if(o)return o;o=this._cache.getAndRemove(r),o&&(this._setTileReloadTimer(r.key,o),o.tileID=r,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,o)));const h=o;return o||(o=new Ii(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(o,r.key,o.state)),o.uses++,this._tiles[r.key]=o,h||this._source.fire(new c.k("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o}_setTileReloadTimer(r,o){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const h=o.getExpiryTimeout();h&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},h))}_removeTile(r){const o=this._tiles[r];o&&(o.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}_dataHandler(r){const o=r.sourceDataType;r.dataType==="source"&&o==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&o==="content"&&(this.reload(r.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,o,h){const m=[],_=this.transform;if(!_)return m;const b=h?_.getCameraQueryGeometry(r):r,T=r.map(ee=>_.screenPointToMercatorCoordinate(ee,this.terrain)),M=b.map(ee=>_.screenPointToMercatorCoordinate(ee,this.terrain)),R=this.getIds();let O=1/0,U=1/0,$=-1/0,K=-1/0;for(const ee of M)O=Math.min(O,ee.x),U=Math.min(U,ee.y),$=Math.max($,ee.x),K=Math.max(K,ee.y);for(let ee=0;ee<R.length;ee++){const ae=this._tiles[R[ee]];if(ae.holdingForFade())continue;const oe=ae.tileID,le=Math.pow(2,_.zoom-ae.tileID.overscaledZ),fe=o*ae.queryPadding*c.X/ae.tileSize/le,_e=[oe.getTilePoint(new c.Y(O,U)),oe.getTilePoint(new c.Y($,K))];if(_e[0].x-fe<c.X&&_e[0].y-fe<c.X&&_e[1].x+fe>=0&&_e[1].y+fe>=0){const xe=T.map(ke=>oe.getTilePoint(ke)),be=M.map(ke=>oe.getTilePoint(ke));m.push({tile:ae,tileID:oe,queryGeometry:xe,cameraQueryGeometry:be,scale:le})}}return m}getVisibleCoordinates(r){const o=this.getRenderableIds(r).map(h=>this._tiles[h].tileID);return this.transform&&this.transform.populateCache(o),o}hasTransition(){if(this._source.hasTransition())return!0;if(re(this._source.type)){const r=L.now();for(const o in this._tiles)if(this._tiles[o].fadeEndTime>=r)return!0}return!1}setFeatureState(r,o,h){this._state.updateState(r=r||"_geojsonTileLayer",o,h)}removeFeatureState(r,o,h){this._state.removeFeatureState(r=r||"_geojsonTileLayer",o,h)}getFeatureState(r,o){return this._state.getState(r=r||"_geojsonTileLayer",o)}setDependencies(r,o,h){const m=this._tiles[r];m&&m.setDependencies(o,h)}reloadTilesForDependencies(r,o){for(const h in this._tiles)this._tiles[h].hasDependency(r,o)&&this._reloadTile(h,"reloading");this._cache.filter(h=>!h.hasDependency(r,o))}}function te(y,r){const o=Math.abs(2*y.wrap)-+(y.wrap<0),h=Math.abs(2*r.wrap)-+(r.wrap<0);return y.overscaledZ-r.overscaledZ||h-o||r.canonical.y-y.canonical.y||r.canonical.x-y.canonical.x}function re(y){return y==="raster"||y==="image"||y==="video"}Q.maxOverzooming=10,Q.maxUnderzooming=3;class pe{constructor(r,o){this.reset(r,o)}reset(r,o){this.points=r||[],this._distances=[0];for(let h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=c.ab(r,0,1);let o=1,h=this._distances[o];const m=r*this.paddedLength+this.padding;for(;h<m&&o<this._distances.length;)h=this._distances[++o];const _=o-1,b=this._distances[_],T=h-b,M=T>0?(m-b)/T:0;return this.points[_].mult(1-M).add(this.points[o].mult(M))}}function Te(y,r){let o=!0;return y==="always"||y!=="never"&&r!=="never"||(o=!1),o}class ve{constructor(r,o,h){const m=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(r/h),this.yCellCount=Math.ceil(o/h);for(let b=0;b<this.xCellCount*this.yCellCount;b++)m.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=o,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,o,h,m,_){this._forEachCell(o,h,m,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(o),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(_)}insertCircle(r,o,h,m){this._forEachCell(o-m,h-m,o+m,h+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(o),this.circles.push(h),this.circles.push(m)}_insertBoxCell(r,o,h,m,_,b){this.boxCells[_].push(b)}_insertCircleCell(r,o,h,m,_,b){this.circleCells[_].push(b)}_query(r,o,h,m,_,b,T){if(h<0||r>this.width||m<0||o>this.height)return[];const M=[];if(r<=0&&o<=0&&this.width<=h&&this.height<=m){if(_)return[{key:null,x1:r,y1:o,x2:h,y2:m}];for(let R=0;R<this.boxKeys.length;R++)M.push({key:this.boxKeys[R],x1:this.bboxes[4*R],y1:this.bboxes[4*R+1],x2:this.bboxes[4*R+2],y2:this.bboxes[4*R+3]});for(let R=0;R<this.circleKeys.length;R++){const O=this.circles[3*R],U=this.circles[3*R+1],$=this.circles[3*R+2];M.push({key:this.circleKeys[R],x1:O-$,y1:U-$,x2:O+$,y2:U+$})}}else this._forEachCell(r,o,h,m,this._queryCell,M,{hitTest:_,overlapMode:b,seenUids:{box:{},circle:{}}},T);return M}query(r,o,h,m){return this._query(r,o,h,m,!1,null)}hitTest(r,o,h,m,_,b){return this._query(r,o,h,m,!0,_,b).length>0}hitTestCircle(r,o,h,m,_){const b=r-h,T=r+h,M=o-h,R=o+h;if(T<0||b>this.width||R<0||M>this.height)return!1;const O=[];return this._forEachCell(b,M,T,R,this._queryCellCircle,O,{hitTest:!0,overlapMode:m,circle:{x:r,y:o,radius:h},seenUids:{box:{},circle:{}}},_),O.length>0}_queryCell(r,o,h,m,_,b,T,M){const{seenUids:R,hitTest:O,overlapMode:U}=T,$=this.boxCells[_];if($!==null){const ee=this.bboxes;for(const ae of $)if(!R.box[ae]){R.box[ae]=!0;const oe=4*ae,le=this.boxKeys[ae];if(r<=ee[oe+2]&&o<=ee[oe+3]&&h>=ee[oe+0]&&m>=ee[oe+1]&&(!M||M(le))&&(!O||!Te(U,le.overlapMode))&&(b.push({key:le,x1:ee[oe],y1:ee[oe+1],x2:ee[oe+2],y2:ee[oe+3]}),O))return!0}}const K=this.circleCells[_];if(K!==null){const ee=this.circles;for(const ae of K)if(!R.circle[ae]){R.circle[ae]=!0;const oe=3*ae,le=this.circleKeys[ae];if(this._circleAndRectCollide(ee[oe],ee[oe+1],ee[oe+2],r,o,h,m)&&(!M||M(le))&&(!O||!Te(U,le.overlapMode))){const fe=ee[oe],_e=ee[oe+1],xe=ee[oe+2];if(b.push({key:le,x1:fe-xe,y1:_e-xe,x2:fe+xe,y2:_e+xe}),O)return!0}}}return!1}_queryCellCircle(r,o,h,m,_,b,T,M){const{circle:R,seenUids:O,overlapMode:U}=T,$=this.boxCells[_];if($!==null){const ee=this.bboxes;for(const ae of $)if(!O.box[ae]){O.box[ae]=!0;const oe=4*ae,le=this.boxKeys[ae];if(this._circleAndRectCollide(R.x,R.y,R.radius,ee[oe+0],ee[oe+1],ee[oe+2],ee[oe+3])&&(!M||M(le))&&!Te(U,le.overlapMode))return b.push(!0),!0}}const K=this.circleCells[_];if(K!==null){const ee=this.circles;for(const ae of K)if(!O.circle[ae]){O.circle[ae]=!0;const oe=3*ae,le=this.circleKeys[ae];if(this._circlesCollide(ee[oe],ee[oe+1],ee[oe+2],R.x,R.y,R.radius)&&(!M||M(le))&&!Te(U,le.overlapMode))return b.push(!0),!0}}}_forEachCell(r,o,h,m,_,b,T,M){const R=this._convertToXCellCoord(r),O=this._convertToYCellCoord(o),U=this._convertToXCellCoord(h),$=this._convertToYCellCoord(m);for(let K=R;K<=U;K++)for(let ee=O;ee<=$;ee++)if(_.call(this,r,o,h,m,this.xCellCount*ee+K,b,T,M))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,o,h,m,_,b){const T=m-r,M=_-o,R=h+b;return R*R>T*T+M*M}_circleAndRectCollide(r,o,h,m,_,b,T){const M=(b-m)/2,R=Math.abs(r-(m+M));if(R>M+h)return!1;const O=(T-_)/2,U=Math.abs(o-(_+O));if(U>O+h)return!1;if(R<=M||U<=O)return!0;const $=R-M,K=U-O;return $*$+K*K<=h*h}}function Ae(y,r,o){const h=c.H();if(!y){const{vecSouth:U,vecEast:$}=Ve(r),K=E();K[0]=$[0],K[1]=$[1],K[2]=U[0],K[3]=U[1],m=K,(O=(b=(_=K)[0])*(R=_[3])-(M=_[2])*(T=_[1]))&&(m[0]=R*(O=1/O),m[1]=-T*O,m[2]=-M*O,m[3]=b*O),h[0]=K[0],h[1]=K[1],h[4]=K[2],h[5]=K[3]}var m,_,b,T,M,R,O;return c.K(h,h,[1/o,1/o,1]),h}function we(y,r,o,h){if(y){const m=c.H();if(!r){const{vecSouth:_,vecEast:b}=Ve(o);m[0]=b[0],m[1]=b[1],m[4]=_[0],m[5]=_[1]}return c.K(m,m,[h,h,1]),m}return o.pixelsToClipSpaceMatrix}function Ve(y){const r=Math.cos(y.rollInRadians),o=Math.sin(y.rollInRadians),h=Math.cos(y.pitchInRadians),m=Math.cos(y.bearingInRadians),_=Math.sin(y.bearingInRadians),b=c.ad();b[0]=-m*h*o-_*r,b[1]=-_*h*o+m*r;const T=c.ae(b);T<1e-9?c.af(b):c.ag(b,b,1/T);const M=c.ad();M[0]=m*h*r-_*o,M[1]=_*h*r+m*o;const R=c.ae(M);return R<1e-9?c.af(M):c.ag(M,M,1/R),{vecEast:M,vecSouth:b}}function Be(y,r,o,h){let m;h?(m=[y,r,h(y,r),1],c.al(m,m,o)):(m=[y,r,0,1],Xt(m,m,o));const _=m[3];return{point:new c.P(m[0]/_,m[1]/_),signedDistanceFromCamera:_,isOccluded:!1}}function ze(y,r){return .5+y/r*.5}function Ee(y,r){return y.x>=-r[0]&&y.x<=r[0]&&y.y>=-r[1]&&y.y<=r[1]}function ht(y,r,o,h,m,_,b,T,M,R,O,U,$){const K=o?y.textSizeData:y.iconSizeData,ee=c.ah(K,r.transform.zoom),ae=[256/r.width*2+1,256/r.height*2+1],oe=o?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;oe.clear();const le=y.lineVertexArray,fe=o?y.text.placedSymbolArray:y.icon.placedSymbolArray,_e=r.transform.width/r.transform.height;let xe=!1;for(let be=0;be<fe.length;be++){const ke=fe.get(be);if(ke.hidden||ke.writingMode===c.ai.vertical&&!xe){qt(ke.numGlyphs,oe);continue}xe=!1;const Pe=new c.P(ke.anchorX,ke.anchorY),Le={getElevation:$,pitchedLabelPlaneMatrix:h,lineVertexArray:le,pitchWithMap:_,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:Pe,unwrappedTileID:M,width:R,height:O,translation:U},Fe=bt(ke.anchorX,ke.anchorY,Le);if(!Ee(Fe.point,ae)){qt(ke.numGlyphs,oe);continue}const Ke=ze(r.transform.cameraToCenterDistance,Fe.signedDistanceFromCamera),qe=c.aj(K,ee,ke),$e=_?qe*r.transform.getPitchedTextCorrection(ke.anchorX,ke.anchorY,M)/Ke:qe*Ke,ft=Ce({projectionContext:Le,pitchedLabelPlaneMatrixInverse:m,symbol:ke,fontSize:$e,flip:!1,keepUpright:b,glyphOffsetArray:y.glyphOffsetArray,dynamicLayoutVertexArray:oe,aspectRatio:_e,rotateToLine:T});xe=ft.useVertical,(ft.notEnoughRoom||xe||ft.needsFlipping&&Ce({projectionContext:Le,pitchedLabelPlaneMatrixInverse:m,symbol:ke,fontSize:$e,flip:!0,keepUpright:b,glyphOffsetArray:y.glyphOffsetArray,dynamicLayoutVertexArray:oe,aspectRatio:_e,rotateToLine:T}).notEnoughRoom)&&qt(ke.numGlyphs,oe)}o?y.text.dynamicLayoutVertexBuffer.updateData(oe):y.icon.dynamicLayoutVertexBuffer.updateData(oe)}function dt(y,r,o,h,m,_,b,T){const M=_.glyphStartIndex+_.numGlyphs,R=_.lineStartIndex,O=_.lineStartIndex+_.lineLength,U=r.getoffsetX(_.glyphStartIndex),$=r.getoffsetX(M-1),K=yt(y*U,o,h,m,_.segment,R,O,T,b);if(!K)return null;const ee=yt(y*$,o,h,m,_.segment,R,O,T,b);return ee?T.projectionCache.anyProjectionOccluded?null:{first:K,last:ee}:null}function me(y,r,o,h){return y===c.ai.horizontal&&Math.abs(o.y-r.y)>Math.abs(o.x-r.x)*h?{useVertical:!0}:(y===c.ai.vertical?r.y<o.y:r.x>o.x)?{needsFlipping:!0}:null}function Ce(y){const{projectionContext:r,pitchedLabelPlaneMatrixInverse:o,symbol:h,fontSize:m,flip:_,keepUpright:b,glyphOffsetArray:T,dynamicLayoutVertexArray:M,aspectRatio:R,rotateToLine:O}=y,U=m/24,$=h.lineOffsetX*U,K=h.lineOffsetY*U;let ee;if(h.numGlyphs>1){const ae=h.glyphStartIndex+h.numGlyphs,oe=h.lineStartIndex,le=h.lineStartIndex+h.lineLength,fe=dt(U,T,$,K,_,h,O,r);if(!fe)return{notEnoughRoom:!0};const _e=lt(fe.first.point.x,fe.first.point.y,r,o),xe=lt(fe.last.point.x,fe.last.point.y,r,o);if(b&&!_){const be=me(h.writingMode,_e,xe,R);if(be)return be}ee=[fe.first];for(let be=h.glyphStartIndex+1;be<ae-1;be++)ee.push(yt(U*T.getoffsetX(be),$,K,_,h.segment,oe,le,r,O));ee.push(fe.last)}else{if(b&&!_){const oe=He(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,le=h.lineStartIndex+h.segment+1,fe=new c.P(r.lineVertexArray.getx(le),r.lineVertexArray.gety(le)),_e=He(fe.x,fe.y,r),xe=_e.signedDistanceFromCamera>0?_e.point:he(r.tileAnchorPoint,fe,oe,1,r),be=lt(oe.x,oe.y,r,o),ke=lt(xe.x,xe.y,r,o),Pe=me(h.writingMode,be,ke,R);if(Pe)return Pe}const ae=yt(U*T.getoffsetX(h.glyphStartIndex),$,K,_,h.segment,h.lineStartIndex,h.lineStartIndex+h.lineLength,r,O);if(!ae||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ee=[ae]}for(const ae of ee)c.ak(M,ae.point,ae.angle);return{}}function he(y,r,o,h,m){const _=y.add(y.sub(r)._unit()),b=He(_.x,_.y,m).point,T=o.sub(b);return o.add(T._mult(h/T.mag()))}function De(y,r,o){const h=r.projectionCache;if(h.projections[y])return h.projections[y];const m=new c.P(r.lineVertexArray.getx(y),r.lineVertexArray.gety(y)),_=He(m.x,m.y,r);if(_.signedDistanceFromCamera>0)return h.projections[y]=_.point,h.anyProjectionOccluded=h.anyProjectionOccluded||_.isOccluded,_.point;const b=y-o.direction;return he(o.distanceFromAnchor===0?r.tileAnchorPoint:new c.P(r.lineVertexArray.getx(b),r.lineVertexArray.gety(b)),m,o.previousVertex,o.absOffsetX-o.distanceFromAnchor+1,r)}function He(y,r,o){const h=y+o.translation[0],m=r+o.translation[1];let _;return o.pitchWithMap?(_=Be(h,m,o.pitchedLabelPlaneMatrix,o.getElevation),_.isOccluded=!1):(_=o.transform.projectTileCoordinates(h,m,o.unwrappedTileID,o.getElevation),_.point.x=(.5*_.point.x+.5)*o.width,_.point.y=(.5*-_.point.y+.5)*o.height),_}function lt(y,r,o,h){if(o.pitchWithMap){const m=[y,r,0,1];return c.al(m,m,h),o.transform.projectTileCoordinates(m[0]/m[3],m[1]/m[3],o.unwrappedTileID,o.getElevation).point}return{x:y/o.width*2-1,y:r/o.height*2-1}}function bt(y,r,o){return o.transform.projectTileCoordinates(y,r,o.unwrappedTileID,o.getElevation)}function et(y,r,o){return y._unit()._perp()._mult(r*o)}function Ge(y,r,o,h,m,_,b,T,M){if(T.projectionCache.offsets[y])return T.projectionCache.offsets[y];const R=o.add(r);if(y+M.direction<h||y+M.direction>=m)return T.projectionCache.offsets[y]=R,R;const O=De(y+M.direction,T,M),U=et(O.sub(o),b,M.direction),$=o.add(U),K=O.add(U);return T.projectionCache.offsets[y]=c.am(_,R,$,K)||R,T.projectionCache.offsets[y]}function yt(y,r,o,h,m,_,b,T,M){const R=h?y-r:y+r;let O=R>0?1:-1,U=0;h&&(O*=-1,U=Math.PI),O<0&&(U+=Math.PI);let $,K=O>0?_+m:_+m+1;T.projectionCache.cachedAnchorPoint?$=T.projectionCache.cachedAnchorPoint:($=He(T.tileAnchorPoint.x,T.tileAnchorPoint.y,T).point,T.projectionCache.cachedAnchorPoint=$);let ee,ae,oe=$,le=$,fe=0,_e=0;const xe=Math.abs(R),be=[];let ke;for(;fe+_e<=xe;){if(K+=O,K<_||K>=b)return null;fe+=_e,le=oe,ae=ee;const Fe={absOffsetX:xe,direction:O,distanceFromAnchor:fe,previousVertex:le};if(oe=De(K,T,Fe),o===0)be.push(le),ke=oe.sub(le);else{let Ke;const qe=oe.sub(le);Ke=qe.mag()===0?et(De(K+O,T,Fe).sub(oe),o,O):et(qe,o,O),ae||(ae=le.add(Ke)),ee=Ge(K,Ke,oe,_,b,ae,o,T,Fe),be.push(ae),ke=ee.sub(ae)}_e=ke.mag()}const Pe=ke._mult((xe-fe)/_e)._add(ae||le),Le=U+Math.atan2(oe.y-le.y,oe.x-le.x);return be.push(Pe),{point:Pe,angle:M?Le:0,path:be}}const Nt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function qt(y,r){for(let o=0;o<y;o++){const h=r.length;r.resize(h+4),r.float32.set(Nt,3*h)}}function Xt(y,r,o){const h=r[0],m=r[1];return y[0]=o[0]*h+o[4]*m+o[12],y[1]=o[1]*h+o[5]*m+o[13],y[3]=o[3]*h+o[7]*m+o[15],y}const sr=100;class ur{constructor(r,o=new ve(r.width+200,r.height+200,25),h=new ve(r.width+200,r.height+200,25)){this.transform=r,this.grid=o,this.ignoredGrid=h,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+sr,this.screenBottomBoundary=r.height+sr,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,o,h,m,_,b,T,M,R,O,U,$){const K=this.projectAndGetPerspectiveRatio(r.anchorPointX+M[0],r.anchorPointY+M[1],_,O,$),ee=h*K.perspectiveRatio;let ae;if(b||T)ae=this._projectCollisionBox(r,ee,m,_,b,T,M,K,O,U,$);else{const ke=K.x+(U?U.x*ee:0),Pe=K.y+(U?U.y*ee:0);ae={allPointsOccluded:!1,box:[ke+r.x1*ee,Pe+r.y1*ee,ke+r.x2*ee,Pe+r.y2*ee]}}const[oe,le,fe,_e]=ae.box,xe=b?ae.allPointsOccluded:K.isOccluded;let be=xe;return be||(be=K.perspectiveRatio<this.perspectiveRatioCutoff),be||(be=!this.isInsideGrid(oe,le,fe,_e)),be||o!=="always"&&this.grid.hitTest(oe,le,fe,_e,o,R)?{box:[oe,le,fe,_e],placeable:!1,offscreen:!1,occluded:xe}:{box:[oe,le,fe,_e],placeable:!0,offscreen:this.isOffscreen(oe,le,fe,_e),occluded:xe}}placeCollisionCircles(r,o,h,m,_,b,T,M,R,O,U,$,K,ee){const ae=[],oe=new c.P(o.anchorX,o.anchorY),le=this.getPerspectiveRatio(oe.x,oe.y,b,ee),fe=(R?_*this.transform.getPitchedTextCorrection(o.anchorX,o.anchorY,b)/le:_*le)/c.as,_e={getElevation:ee,pitchedLabelPlaneMatrix:T,lineVertexArray:h,pitchWithMap:R,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:oe,unwrappedTileID:b,width:this.transform.width,height:this.transform.height,translation:K},xe=dt(fe,m,o.lineOffsetX*fe,o.lineOffsetY*fe,!1,o,!1,_e);let be=!1,ke=!1,Pe=!0;if(xe){const Le=.5*U*le+$,Fe=new c.P(-100,-100),Ke=new c.P(this.screenRightBoundary,this.screenBottomBoundary),qe=new pe,$e=xe.first,ft=xe.last;let ut=[];for(let Qt=$e.path.length-1;Qt>=1;Qt--)ut.push($e.path[Qt]);for(let Qt=1;Qt<ft.path.length;Qt++)ut.push(ft.path[Qt]);const Ye=2.5*Le;if(R){const Qt=this.projectPathToScreenSpace(ut,_e);ut=Qt.some(Pr=>Pr.signedDistanceFromCamera<=0)?[]:Qt.map(Pr=>Pr.point)}let kt=[];if(ut.length>0){const Qt=ut[0].clone(),Pr=ut[0].clone();for(let en=1;en<ut.length;en++)Qt.x=Math.min(Qt.x,ut[en].x),Qt.y=Math.min(Qt.y,ut[en].y),Pr.x=Math.max(Pr.x,ut[en].x),Pr.y=Math.max(Pr.y,ut[en].y);kt=Qt.x>=Fe.x&&Pr.x<=Ke.x&&Qt.y>=Fe.y&&Pr.y<=Ke.y?[ut]:Pr.x<Fe.x||Qt.x>Ke.x||Pr.y<Fe.y||Qt.y>Ke.y?[]:c.ao([ut],Fe.x,Fe.y,Ke.x,Ke.y)}for(const Qt of kt){qe.reset(Qt,.25*Le);let Pr=0;Pr=qe.length<=.5*Le?1:Math.ceil(qe.paddedLength/Ye)+1;for(let en=0;en<Pr;en++){const Or=en/Math.max(Pr-1,1),Ur=qe.lerp(Or),Wr=Ur.x+sr,Dr=Ur.y+sr;ae.push(Wr,Dr,Le,0);const Vr=Wr-Le,jn=Dr-Le,Sn=Wr+Le,Wn=Dr+Le;if(Pe=Pe&&this.isOffscreen(Vr,jn,Sn,Wn),ke=ke||this.isInsideGrid(Vr,jn,Sn,Wn),r!=="always"&&this.grid.hitTestCircle(Wr,Dr,Le,r,O)&&(be=!0,!M))return{circles:[],offscreen:!1,collisionDetected:be}}}}return{circles:!M&&be||!ke||le<this.perspectiveRatioCutoff?[]:ae,offscreen:Pe,collisionDetected:be}}projectPathToScreenSpace(r,o){const h=function(m,_){const b=c.H();return c.an(b,_.pitchedLabelPlaneMatrix),m.map(T=>{const M=Be(T.x,T.y,b,_.getElevation),R=_.transform.projectTileCoordinates(M.point.x,M.point.y,_.unwrappedTileID,_.getElevation);return R.point.x=(.5*R.point.x+.5)*_.width,R.point.y=(.5*-R.point.y+.5)*_.height,R})}(r,o);return function(m){let _=0,b=0,T=0,M=0;for(let R=0;R<m.length;R++)m[R].isOccluded?(T=R+1,M=0):(M++,M>b&&(b=M,_=T));return m.slice(_,_+b)}(h)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[];let h=1/0,m=1/0,_=-1/0,b=-1/0;for(const O of r){const U=new c.P(O.x+sr,O.y+sr);h=Math.min(h,U.x),m=Math.min(m,U.y),_=Math.max(_,U.x),b=Math.max(b,U.y),o.push(U)}const T=this.grid.query(h,m,_,b).concat(this.ignoredGrid.query(h,m,_,b)),M={},R={};for(const O of T){const U=O.key;if(M[U.bucketInstanceId]===void 0&&(M[U.bucketInstanceId]={}),M[U.bucketInstanceId][U.featureIndex])continue;const $=[new c.P(O.x1,O.y1),new c.P(O.x2,O.y1),new c.P(O.x2,O.y2),new c.P(O.x1,O.y2)];c.ap(o,$)&&(M[U.bucketInstanceId][U.featureIndex]=!0,R[U.bucketInstanceId]===void 0&&(R[U.bucketInstanceId]=[]),R[U.bucketInstanceId].push(U.featureIndex))}return R}insertCollisionBox(r,o,h,m,_,b){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:_,collisionGroupID:b,overlapMode:o},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,o,h,m,_,b){const T=h?this.ignoredGrid:this.grid,M={bucketInstanceId:m,featureIndex:_,collisionGroupID:b,overlapMode:o};for(let R=0;R<r.length;R+=4)T.insertCircle(M,r[R],r[R+1],r[R+2])}projectAndGetPerspectiveRatio(r,o,h,m,_){if(_){let b;m?(b=[r,o,m(r,o),1],c.al(b,b,_)):(b=[r,o,0,1],Xt(b,b,_));const T=b[3];return{x:(b[0]/T+1)/2*this.transform.width+sr,y:(-b[1]/T+1)/2*this.transform.height+sr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/T*.5,isOccluded:!1,signedDistanceFromCamera:T}}{const b=this.transform.projectTileCoordinates(r,o,h,m);return{x:(b.point.x+1)/2*this.transform.width+sr,y:(1-b.point.y)/2*this.transform.height+sr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5,isOccluded:b.isOccluded,signedDistanceFromCamera:b.signedDistanceFromCamera}}}getPerspectiveRatio(r,o,h,m){const _=this.transform.projectTileCoordinates(r,o,h,m);return .5+this.transform.cameraToCenterDistance/_.signedDistanceFromCamera*.5}isOffscreen(r,o,h,m){return h<sr||r>=this.screenRightBoundary||m<sr||o>this.screenBottomBoundary}isInsideGrid(r,o,h,m){return h>=0&&r<this.gridRightBoundary&&m>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const r=c.aq([]);return c.J(r,r,[-100,-100,0]),r}_projectCollisionBox(r,o,h,m,_,b,T,M,R,O,U){let $=1,K=0,ee=0,ae=1;const oe=r.anchorPointX+T[0],le=r.anchorPointY+T[1];if(b&&!_){const ut=this.projectAndGetPerspectiveRatio(oe+1,le,m,R,U),Ye=ut.x-M.x,kt=Math.atan((ut.y-M.y)/Ye)+(Ye<0?Math.PI:0),Qt=Math.sin(kt),Pr=Math.cos(kt);$=Pr,K=Qt,ee=-Qt,ae=Pr}else if(!b&&_){const ut=Ve(this.transform);$=ut.vecEast[0],K=ut.vecEast[1],ee=ut.vecSouth[0],ae=ut.vecSouth[1]}let fe=M.x,_e=M.y,xe=o;_&&(fe=oe,_e=le,xe=Math.pow(2,-(this.transform.zoom-h.overscaledZ)),xe*=this.transform.getPitchedTextCorrection(oe,le,m),O||(xe*=c.ab(.5+M.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),O&&(fe+=$*O.x*xe+ee*O.y*xe,_e+=K*O.x*xe+ae*O.y*xe);const be=r.x1*xe,ke=r.x2*xe,Pe=(be+ke)/2,Le=r.y1*xe,Fe=r.y2*xe,Ke=(Le+Fe)/2,qe=[{offsetX:be,offsetY:Le},{offsetX:Pe,offsetY:Le},{offsetX:ke,offsetY:Le},{offsetX:ke,offsetY:Ke},{offsetX:ke,offsetY:Fe},{offsetX:Pe,offsetY:Fe},{offsetX:be,offsetY:Fe},{offsetX:be,offsetY:Ke}];let $e=[];for(const{offsetX:ut,offsetY:Ye}of qe)$e.push(new c.P(fe+$*ut+ee*Ye,_e+K*ut+ae*Ye));let ft=!1;if(_){const ut=$e.map(Ye=>this.projectAndGetPerspectiveRatio(Ye.x,Ye.y,m,R,U));ft=ut.some(Ye=>!Ye.isOccluded),$e=ut.map(Ye=>new c.P(Ye.x,Ye.y))}else ft=!0;return{box:c.ar($e),allPointsOccluded:!ft}}}class Gt{constructor(r,o,h,m){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?o:-o))):m&&h?1:0,this.placed=h}isHidden(){return this.opacity===0&&!this.placed}}class Fr{constructor(r,o,h,m,_){this.text=new Gt(r?r.text:null,o,h,_),this.icon=new Gt(r?r.icon:null,o,m,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Xi{constructor(r,o,h){this.text=r,this.icon=o,this.skipFade=h}}class vo{constructor(r,o,h,m,_){this.bucketInstanceId=r,this.featureIndex=o,this.sourceLayerIndex=h,this.bucketIndex=m,this.tileID=_}}class ti{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const o=++this.maxGroupID;this.collisionGroups[r]={ID:o,predicate:h=>h.collisionGroupID===o}}return this.collisionGroups[r]}}function Hn(y,r,o,h,m){const{horizontalAlign:_,verticalAlign:b}=c.ay(y);return new c.P(-(_-.5)*r+h[0]*m,-(b-.5)*o+h[1]*m)}class al{constructor(r,o,h,m,_){this.transform=r.clone(),this.terrain=o,this.collisionIndex=new ur(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new ti(m),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const o=this.terrain;return o?(h,m)=>o.getElevation(r,h,m):null}getBucketParts(r,o,h,m){const _=h.getBucket(o),b=h.latestFeatureIndex;if(!_||!b||o.id!==_.layerIds[0])return;const T=h.collisionBoxArray,M=_.layers[0].layout,R=_.layers[0].paint,O=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),U=h.tileSize/c.X,$=h.tileID.toUnwrapped(),K=M.get("text-rotation-alignment")==="map",ee=c.at(h,1,this.transform.zoom),ae=c.au(this.collisionIndex.transform,h,R.get("text-translate"),R.get("text-translate-anchor")),oe=c.au(this.collisionIndex.transform,h,R.get("icon-translate"),R.get("icon-translate-anchor")),le=Ae(K,this.transform,ee);this.retainedQueryData[_.bucketInstanceId]=new vo(_.bucketInstanceId,b,_.sourceLayerIndex,_.index,h.tileID);const fe={bucket:_,layout:M,translationText:ae,translationIcon:oe,unwrappedTileID:$,pitchedLabelPlaneMatrix:le,scale:O,textPixelRatio:U,holdingForFade:h.holdingForFade(),collisionBoxArray:T,partiallyEvaluatedTextSize:c.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(m)for(const _e of _.sortKeyRanges){const{sortKey:xe,symbolInstanceStart:be,symbolInstanceEnd:ke}=_e;r.push({sortKey:xe,symbolInstanceStart:be,symbolInstanceEnd:ke,parameters:fe})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:fe})}attemptAnchorPlacement(r,o,h,m,_,b,T,M,R,O,U,$,K,ee,ae,oe,le,fe,_e,xe){const be=c.av[r.textAnchor],ke=[r.textOffset0,r.textOffset1],Pe=Hn(be,h,m,ke,_),Le=this.collisionIndex.placeCollisionBox(o,$,M,R,O,T,b,oe,U.predicate,_e,Pe,xe);if((!fe||this.collisionIndex.placeCollisionBox(fe,$,M,R,O,T,b,le,U.predicate,_e,Pe,xe).placeable)&&Le.placeable){let Fe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID].text&&(Fe=this.prevPlacement.variableOffsets[K.crossTileID].anchor),K.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[K.crossTileID]={textOffset:ke,width:h,height:m,anchor:be,textBoxScale:_,prevAnchor:Fe},this.markUsedJustification(ee,be,K,ae),ee.allowVerticalPlacement&&(this.markUsedOrientation(ee,ae,K),this.placedOrientations[K.crossTileID]=ae),{shift:Pe,placedGlyphBoxes:Le}}}placeLayerBucketPart(r,o,h){const{bucket:m,layout:_,translationText:b,translationIcon:T,unwrappedTileID:M,pitchedLabelPlaneMatrix:R,textPixelRatio:O,holdingForFade:U,collisionBoxArray:$,partiallyEvaluatedTextSize:K,collisionGroup:ee}=r.parameters,ae=_.get("text-optional"),oe=_.get("icon-optional"),le=c.aw(_,"text-overlap","text-allow-overlap"),fe=le==="always",_e=c.aw(_,"icon-overlap","icon-allow-overlap"),xe=_e==="always",be=_.get("text-rotation-alignment")==="map",ke=_.get("text-pitch-alignment")==="map",Pe=_.get("icon-text-fit")!=="none",Le=_.get("symbol-z-order")==="viewport-y",Fe=fe&&(xe||!m.hasIconData()||oe),Ke=xe&&(fe||!m.hasTextData()||ae);!m.collisionArrays&&$&&m.deserializeCollisionBoxes($);const qe=this.retainedQueryData[m.bucketInstanceId].tileID,$e=this._getTerrainElevationFunc(qe),ft=this.transform.getFastPathSimpleProjectionMatrix(qe),ut=(Ye,kt,Qt)=>{var Pr,en;if(o[Ye.crossTileID])return;if(U)return void(this.placements[Ye.crossTileID]=new Xi(!1,!1,!1));let Or=!1,Ur=!1,Wr=!0,Dr=null,Vr={box:null,placeable:!1,offscreen:null,occluded:!1},jn={box:null,placeable:!1,offscreen:null},Sn=null,Wn=null,di=null,io=0,Qi=0,so=0;kt.textFeatureIndex?io=kt.textFeatureIndex:Ye.useRuntimeCollisionCircles&&(io=Ye.featureIndex),kt.verticalTextFeatureIndex&&(Qi=kt.verticalTextFeatureIndex);const Da=kt.textBox;if(Da){const hi=Xr=>{let Ln=c.ai.horizontal;if(m.allowVerticalPlacement&&!Xr&&this.prevPlacement){const Xn=this.prevPlacement.placedOrientations[Ye.crossTileID];Xn&&(this.placedOrientations[Ye.crossTileID]=Xn,Ln=Xn,this.markUsedOrientation(m,Ln,Ye))}return Ln},Ji=(Xr,Ln)=>{if(m.allowVerticalPlacement&&Ye.numVerticalGlyphVertices>0&&kt.verticalTextBox){for(const Xn of m.writingModes)if(Xn===c.ai.vertical?(Vr=Ln(),jn=Vr):Vr=Xr(),Vr&&Vr.placeable)break}else Vr=Xr()},wi=Ye.textAnchorOffsetStartIndex,Si=Ye.textAnchorOffsetEndIndex;if(Si===wi){const Xr=(Ln,Xn)=>{const Kn=this.collisionIndex.placeCollisionBox(Ln,le,O,qe,M,ke,be,b,ee.predicate,$e,void 0,ft);return Kn&&Kn.placeable&&(this.markUsedOrientation(m,Xn,Ye),this.placedOrientations[Ye.crossTileID]=Xn),Kn};Ji(()=>Xr(Da,c.ai.horizontal),()=>{const Ln=kt.verticalTextBox;return m.allowVerticalPlacement&&Ye.numVerticalGlyphVertices>0&&Ln?Xr(Ln,c.ai.vertical):{box:null,offscreen:null}}),hi(Vr&&Vr.placeable)}else{let Xr=c.av[(en=(Pr=this.prevPlacement)===null||Pr===void 0?void 0:Pr.variableOffsets[Ye.crossTileID])===null||en===void 0?void 0:en.anchor];const Ln=(Kn,sy,cf)=>{const oy=Kn.x2-Kn.x1,za=Kn.y2-Kn.y1,ja=Ye.textBoxScale,ay=Pe&&_e==="never"?sy:null;let La=null,Dd=le==="never"?1:2,uf="never";Xr&&Dd++;for(let ly=0;ly<Dd;ly++){for(let zd=wi;zd<Si;zd++){const cy=m.textAnchorOffsets.get(zd);if(Xr&&cy.textAnchor!==Xr)continue;const eu=this.attemptAnchorPlacement(cy,Kn,oy,za,ja,be,ke,O,qe,M,ee,uf,Ye,m,cf,b,T,ay,$e);if(eu&&(La=eu.placedGlyphBoxes,La&&La.placeable))return Or=!0,Dr=eu.shift,La}Xr?Xr=null:uf=le}return h&&!La&&(La={box:this.collisionIndex.placeCollisionBox(Da,"always",O,qe,M,ke,be,b,ee.predicate,$e,void 0,ft).box,offscreen:!1,placeable:!1,occluded:!1}),La};Ji(()=>Ln(Da,kt.iconBox,c.ai.horizontal),()=>{const Kn=kt.verticalTextBox;return m.allowVerticalPlacement&&(!Vr||!Vr.placeable)&&Ye.numVerticalGlyphVertices>0&&Kn?Ln(Kn,kt.verticalIconBox,c.ai.vertical):{box:null,occluded:!0,offscreen:null}}),Vr&&(Or=Vr.placeable,Wr=Vr.offscreen);const Xn=hi(Vr&&Vr.placeable);if(!Or&&this.prevPlacement){const Kn=this.prevPlacement.variableOffsets[Ye.crossTileID];Kn&&(this.variableOffsets[Ye.crossTileID]=Kn,this.markUsedJustification(m,Kn.anchor,Ye,Xn))}}}if(Sn=Vr,Or=Sn&&Sn.placeable,Wr=Sn&&Sn.offscreen,Ye.useRuntimeCollisionCircles){const hi=m.text.placedSymbolArray.get(Ye.centerJustifiedTextSymbolIndex),Ji=c.aj(m.textSizeData,K,hi),wi=_.get("text-padding");Wn=this.collisionIndex.placeCollisionCircles(le,hi,m.lineVertexArray,m.glyphOffsetArray,Ji,M,R,h,ke,ee.predicate,Ye.collisionCircleDiameter,wi,b,$e),Wn.circles.length&&Wn.collisionDetected&&!h&&c.w("Collisions detected, but collision boxes are not shown"),Or=fe||Wn.circles.length>0&&!Wn.collisionDetected,Wr=Wr&&Wn.offscreen}if(kt.iconFeatureIndex&&(so=kt.iconFeatureIndex),kt.iconBox){const hi=Ji=>this.collisionIndex.placeCollisionBox(Ji,_e,O,qe,M,ke,be,T,ee.predicate,$e,Pe&&Dr?Dr:void 0,ft);jn&&jn.placeable&&kt.verticalIconBox?(di=hi(kt.verticalIconBox),Ur=di.placeable):(di=hi(kt.iconBox),Ur=di.placeable),Wr=Wr&&di.offscreen}const Jc=ae||Ye.numHorizontalGlyphVertices===0&&Ye.numVerticalGlyphVertices===0,Ad=oe||Ye.numIconVertices===0;Jc||Ad?Ad?Jc||(Ur=Ur&&Or):Or=Ur&&Or:Ur=Or=Ur&&Or;const Xo=Ur&&di.placeable;if(Or&&Sn.placeable&&this.collisionIndex.insertCollisionBox(Sn.box,le,_.get("text-ignore-placement"),m.bucketInstanceId,jn&&jn.placeable&&Qi?Qi:io,ee.ID),Xo&&this.collisionIndex.insertCollisionBox(di.box,_e,_.get("icon-ignore-placement"),m.bucketInstanceId,so,ee.ID),Wn&&Or&&this.collisionIndex.insertCollisionCircles(Wn.circles,le,_.get("text-ignore-placement"),m.bucketInstanceId,io,ee.ID),h&&this.storeCollisionData(m.bucketInstanceId,Qt,kt,Sn,di,Wn),Ye.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ye.crossTileID]=new Xi((Or||Fe)&&!(Sn!=null&&Sn.occluded),(Ur||Ke)&&!(di!=null&&di.occluded),Wr||m.justReloaded),o[Ye.crossTileID]=!0};if(Le){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ye=m.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let kt=Ye.length-1;kt>=0;--kt){const Qt=Ye[kt];ut(m.symbolInstances.get(Qt),m.collisionArrays[Qt],Qt)}}else for(let Ye=r.symbolInstanceStart;Ye<r.symbolInstanceEnd;Ye++)ut(m.symbolInstances.get(Ye),m.collisionArrays[Ye],Ye);m.justReloaded=!1}storeCollisionData(r,o,h,m,_,b){if(h.textBox||h.iconBox){let T,M;this.collisionBoxArrays.has(r)?T=this.collisionBoxArrays.get(r):(T=new Map,this.collisionBoxArrays.set(r,T)),T.has(o)?M=T.get(o):(M={text:null,icon:null},T.set(o,M)),h.textBox&&(M.text=m.box),h.iconBox&&(M.icon=_.box)}if(b){let T=this.collisionCircleArrays[r];T===void 0&&(T=this.collisionCircleArrays[r]=[]);for(let M=0;M<b.circles.length;M+=4)T.push(b.circles[M+0]-sr),T.push(b.circles[M+1]-sr),T.push(b.circles[M+2]),T.push(b.collisionDetected?1:0)}}markUsedJustification(r,o,h,m){let _;_=m===c.ai.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[c.ax(o)];const b=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];for(const T of b)T>=0&&(r.text.placedSymbolArray.get(T).crossTileID=_>=0&&T!==_?0:h.crossTileID)}markUsedOrientation(r,o,h){const m=o===c.ai.horizontal||o===c.ai.horizontalOnly?o:0,_=o===c.ai.vertical?o:0,b=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];for(const T of b)r.text.placedSymbolArray.get(T).placedOrientation=m;h.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let h=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const m=o?o.symbolFadeChange(r):1,_=o?o.opacities:{},b=o?o.variableOffsets:{},T=o?o.placedOrientations:{};for(const M in this.placements){const R=this.placements[M],O=_[M];O?(this.opacities[M]=new Fr(O,m,R.text,R.icon),h=h||R.text!==O.text.placed||R.icon!==O.icon.placed):(this.opacities[M]=new Fr(null,m,R.text,R.icon,R.skipFade),h=h||R.text||R.icon)}for(const M in _){const R=_[M];if(!this.opacities[M]){const O=new Fr(R,m,!1,!1);O.isHidden()||(this.opacities[M]=O,h=h||R.text.placed||R.icon.placed)}}for(const M in b)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=b[M]);for(const M in T)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=T[M]);if(o&&o.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");h?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:r)}updateLayerOpacities(r,o){const h={};for(const m of o){const _=m.getBucket(r);_&&m.latestFeatureIndex&&r.id===_.layerIds[0]&&this.updateBucketOpacities(_,m.tileID,h,m.collisionBoxArray)}}updateBucketOpacities(r,o,h,m){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const _=r.layers[0],b=_.layout,T=new Fr(null,0,!1,!1,!0),M=b.get("text-allow-overlap"),R=b.get("icon-allow-overlap"),O=_._unevaluatedLayout.hasValue("text-variable-anchor")||_._unevaluatedLayout.hasValue("text-variable-anchor-offset"),U=b.get("text-rotation-alignment")==="map",$=b.get("text-pitch-alignment")==="map",K=b.get("icon-text-fit")!=="none",ee=new Fr(null,0,M&&(R||!r.hasIconData()||b.get("icon-optional")),R&&(M||!r.hasTextData()||b.get("text-optional")),!0);!r.collisionArrays&&m&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(m);const ae=(le,fe,_e)=>{for(let xe=0;xe<fe/4;xe++)le.opacityVertexArray.emplaceBack(_e);le.hasVisibleVertices=le.hasVisibleVertices||_e!==Ri},oe=this.collisionBoxArrays.get(r.bucketInstanceId);for(let le=0;le<r.symbolInstances.length;le++){const fe=r.symbolInstances.get(le),{numHorizontalGlyphVertices:_e,numVerticalGlyphVertices:xe,crossTileID:be}=fe;let ke=this.opacities[be];h[be]?ke=T:ke||(ke=ee,this.opacities[be]=ke),h[be]=!0;const Pe=fe.numIconVertices>0,Le=this.placedOrientations[fe.crossTileID],Fe=Le===c.ai.vertical,Ke=Le===c.ai.horizontal||Le===c.ai.horizontalOnly;if(_e>0||xe>0){const $e=rn(ke.text);ae(r.text,_e,Fe?Ri:$e),ae(r.text,xe,Ke?Ri:$e);const ft=ke.text.isHidden();[fe.rightJustifiedTextSymbolIndex,fe.centerJustifiedTextSymbolIndex,fe.leftJustifiedTextSymbolIndex].forEach(kt=>{kt>=0&&(r.text.placedSymbolArray.get(kt).hidden=ft||Fe?1:0)}),fe.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(fe.verticalPlacedTextSymbolIndex).hidden=ft||Ke?1:0);const ut=this.variableOffsets[fe.crossTileID];ut&&this.markUsedJustification(r,ut.anchor,fe,Le);const Ye=this.placedOrientations[fe.crossTileID];Ye&&(this.markUsedJustification(r,"left",fe,Ye),this.markUsedOrientation(r,Ye,fe))}if(Pe){const $e=rn(ke.icon),ft=!(K&&fe.verticalPlacedIconSymbolIndex&&Fe);fe.placedIconSymbolIndex>=0&&(ae(r.icon,fe.numIconVertices,ft?$e:Ri),r.icon.placedSymbolArray.get(fe.placedIconSymbolIndex).hidden=ke.icon.isHidden()),fe.verticalPlacedIconSymbolIndex>=0&&(ae(r.icon,fe.numVerticalIconVertices,ft?Ri:$e),r.icon.placedSymbolArray.get(fe.verticalPlacedIconSymbolIndex).hidden=ke.icon.isHidden())}const qe=oe&&oe.has(le)?oe.get(le):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const $e=r.collisionArrays[le];if($e){let ft=new c.P(0,0);if($e.textBox||$e.verticalTextBox){let ut=!0;if(O){const Ye=this.variableOffsets[be];Ye?(ft=Hn(Ye.anchor,Ye.width,Ye.height,Ye.textOffset,Ye.textBoxScale),U&&ft._rotate($?-this.transform.bearingInRadians:this.transform.bearingInRadians)):ut=!1}if($e.textBox||$e.verticalTextBox){let Ye;$e.textBox&&(Ye=Fe),$e.verticalTextBox&&(Ye=Ke),xo(r.textCollisionBox.collisionVertexArray,ke.text.placed,!ut||Ye,qe.text,ft.x,ft.y)}}if($e.iconBox||$e.verticalIconBox){const ut=!!(!Ke&&$e.verticalIconBox);let Ye;$e.iconBox&&(Ye=ut),$e.verticalIconBox&&(Ye=!ut),xo(r.iconCollisionBox.collisionVertexArray,ke.icon.placed,Ye,qe.icon,K?ft.x:0,K?ft.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,o){const h=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*h>r}setStale(){this.stale=!0}}function xo(y,r,o,h,m,_){h&&h.length!==0||(h=[0,0,0,0]);const b=h[0]-sr,T=h[1]-sr,M=h[2]-sr,R=h[3]-sr;y.emplaceBack(r?1:0,o?1:0,m||0,_||0,b,T),y.emplaceBack(r?1:0,o?1:0,m||0,_||0,M,T),y.emplaceBack(r?1:0,o?1:0,m||0,_||0,M,R),y.emplaceBack(r?1:0,o?1:0,m||0,_||0,b,R)}const Ys=Math.pow(2,25),Es=Math.pow(2,24),ya=Math.pow(2,17),Cr=Math.pow(2,16),tn=Math.pow(2,9),Ho=Math.pow(2,8),qo=Math.pow(2,1);function rn(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const r=y.placed?1:0,o=Math.floor(127*y.opacity);return o*Ys+r*Es+o*ya+r*Cr+o*tn+r*Ho+o*qo+r}const Ri=0;class ll{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,o,h,m,_){const b=this._bucketParts;for(;this._currentTileIndex<r.length;)if(o.getBucketParts(b,m,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,b.sort((T,M)=>T.sortKey-M.sortKey));this._currentPartIndex<b.length;)if(o.placeLayerBucketPart(b[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,_())return!0;return!1}}class Ku{constructor(r,o,h,m,_,b,T,M){this.placement=new al(r,o,b,T,M),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(r,o,h){const m=L.now(),_=()=>!this._forceFullPlacement&&L.now()-m>2;for(;this._currentPlacementIndex>=0;){const b=o[r[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if(b.type==="symbol"&&(!b.minzoom||b.minzoom<=T)&&(!b.maxzoom||b.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new ll(b)),this._inProgressLayer.continuePlacement(h[b.source],this.placement,this._showCollisionBoxes,b,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const _a=512/c.X/2;class ap{constructor(r,o,h){this.tileID=r,this.bucketInstanceId=h,this._symbolsByKey={};const m=new Map;for(let _=0;_<o.length;_++){const b=o.get(_),T=b.key,M=m.get(T);M?M.push(b):m.set(T,[b])}for(const[_,b]of m){const T={positions:b.map(M=>({x:Math.floor(M.anchorX*_a),y:Math.floor(M.anchorY*_a)})),crossTileIDs:b.map(M=>M.crossTileID)};if(T.positions.length>128){const M=new c.az(T.positions.length,16,Uint16Array);for(const{x:R,y:O}of T.positions)M.add(R,O);M.finish(),delete T.positions,T.index=M}this._symbolsByKey[_]=T}}getScaledCoordinates(r,o){const{x:h,y:m,z:_}=this.tileID.canonical,{x:b,y:T,z:M}=o.canonical,R=_a/Math.pow(2,M-_),O=(T*c.X+r.anchorY)*R,U=m*c.X*_a;return{x:Math.floor((b*c.X+r.anchorX)*R-h*c.X*_a),y:Math.floor(O-U)}}findMatches(r,o,h){const m=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z);for(let _=0;_<r.length;_++){const b=r.get(_);if(b.crossTileID)continue;const T=this._symbolsByKey[b.key];if(!T)continue;const M=this.getScaledCoordinates(b,o);if(T.index){const R=T.index.range(M.x-m,M.y-m,M.x+m,M.y+m).sort();for(const O of R){const U=T.crossTileIDs[O];if(!h[U]){h[U]=!0,b.crossTileID=U;break}}}else if(T.positions)for(let R=0;R<T.positions.length;R++){const O=T.positions[R],U=T.crossTileIDs[R];if(Math.abs(O.x-M.x)<=m&&Math.abs(O.y-M.y)<=m&&!h[U]){h[U]=!0,b.crossTileID=U;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class Yu{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class xg{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const o=Math.round((r-this.lng)/360);if(o!==0)for(const h in this.indexes){const m=this.indexes[h],_={};for(const b in m){const T=m[b];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+o),_[T.tileID.key]=T}this.indexes[h]=_}this.lng=r}addBucket(r,o,h){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let _=0;_<o.symbolInstances.length;_++)o.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const m=this.usedCrossTileIDs[r.overscaledZ];for(const _ in this.indexes){const b=this.indexes[_];if(Number(_)>r.overscaledZ)for(const T in b){const M=b[T];M.tileID.isChildOf(r)&&M.findMatches(o.symbolInstances,r,m)}else{const T=b[r.scaledTo(Number(_)).key];T&&T.findMatches(o.symbolInstances,r,m)}}for(let _=0;_<o.symbolInstances.length;_++){const b=o.symbolInstances.get(_);b.crossTileID||(b.crossTileID=h.generate(),m[b.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new ap(r,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(r,o){for(const h of o.getCrossTileIDsLists())for(const m of h)delete this.usedCrossTileIDs[r][m]}removeStaleBuckets(r){let o=!1;for(const h in this.indexes){const m=this.indexes[h];for(const _ in m)r[m[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,m[_]),delete m[_],o=!0)}return o}}class va{constructor(){this.layerIndexes={},this.crossTileIDs=new Yu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,o,h){let m=this.layerIndexes[r.id];m===void 0&&(m=this.layerIndexes[r.id]=new xg);let _=!1;const b={};m.handleWrapJump(h);for(const T of o){const M=T.getBucket(r);M&&r.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(T.tileID,M,this.crossTileIDs)&&(_=!0),b[M.bucketInstanceId]=!0)}return m.removeStaleBuckets(b)&&(_=!0),_}pruneUnusedLayers(r){const o={};r.forEach(h=>{o[h]=!0});for(const h in this.layerIndexes)o[h]||delete this.layerIndexes[h]}}var lp="void main() {fragColor=vec4(1.0);}";const Qs={prelude:ar(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:ar("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:ar("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:ar(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:ar(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ar(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ar(lp,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:ar(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:ar(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ar("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ar("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ar("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:ar(lp,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:ar(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:ar(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:ar(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:ar(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ar(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ar(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ar(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ar(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:ar(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ar(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ar(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ar(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:ar(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:ar(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ar(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ar(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ar("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:ar("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:ar("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:ar("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:ar(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:ar("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function ar(y,r){const o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=r.match(/in ([\w]+) ([\w]+)/g),m=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=_?_.concat(m):m,T={};return{fragmentSource:y=y.replace(o,(M,R,O,U,$)=>(T[$]=!0,R==="define"?`
#ifndef HAS_UNIFORM_u_${$}
in ${O} ${U} ${$};
#else
uniform ${O} ${U} u_${$};
#endif
`:`
#ifdef HAS_UNIFORM_u_${$}
    ${O} ${U} ${$} = u_${$};
#endif
`)),vertexSource:r=r.replace(o,(M,R,O,U,$)=>{const K=U==="float"?"vec2":"vec4",ee=$.match(/color/)?"color":K;return T[$]?R==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
in ${O} ${K} a_${$};
out ${O} ${U} ${$};
#else
uniform ${O} ${U} u_${$};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = a_${$};
#else
    ${O} ${U} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = unpack_mix_${ee}(a_${$}, u_${$}_t);
#else
    ${O} ${U} ${$} = u_${$};
#endif
`:R==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
in ${O} ${K} a_${$};
#else
uniform ${O} ${U} u_${$};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${O} ${U} ${$} = a_${$};
#else
    ${O} ${U} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${O} ${U} ${$} = unpack_mix_${ee}(a_${$}, u_${$}_t);
#else
    ${O} ${U} ${$} = u_${$};
#endif
`}),staticAttributes:h,staticUniforms:b}}class Js{constructor(r,o,h){this.vertexBuffer=r,this.indexBuffer=o,this.segments=h}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var lr=c.aA([{name:"a_pos",type:"Int16",components:2}]);const Qu="#define PROJECTION_MERCATOR",Ju="mercator";class vi{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Ju}get shaderDefine(){return Qu}get shaderPreludeCode(){return Qs.projectionMercator}get vertexShaderPreludeCode(){return Qs.projectionMercator.vertexSource}get subdivisionGranularity(){return c.aB.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,o,h,m,_){if(this._cachedMesh)return this._cachedMesh;const b=new c.aC;b.emplaceBack(0,0),b.emplaceBack(c.X,0),b.emplaceBack(0,c.X),b.emplaceBack(c.X,c.X);const T=r.createVertexBuffer(b,lr.members),M=c.aD.simpleSegment(0,0,4,2),R=new c.aE;R.emplaceBack(1,0,2),R.emplaceBack(1,2,3);const O=r.createIndexBuffer(R);return this._cachedMesh=new Js(T,O,M),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}function nn(y,r){const o=c.ab(r.lat,-85.051129,c.aF);return new c.P(c.O(r.lng)*y,c.Q(o)*y)}function Jr(y,r){return new c.Y(r.x/y,r.y/y).toLngLat()}function ed(y){return y.cameraToCenterDistance*Math.min(.85*Math.tan(c.aa(90-y.pitch)),Math.tan(c.aa(89.25-y.pitch)))}function ci(y,r){const o=y.canonical,h=r/c.aG(o.z),m=o.x+Math.pow(2,o.z)*y.wrap,_=c.aq(new Float64Array(16));return c.J(_,_,[m*h,o.y*h,0]),c.K(_,_,[h/c.X,h/c.X,1]),_}function Ai(y,r,o,h,m){const _=c.Y.fromLngLat(y,r),b=m*c.aH(1,y.lat),T=b*Math.cos(c.aa(o)),M=Math.sqrt(b*b-T*T),R=M*Math.sin(c.aa(-h)),O=M*Math.cos(c.aa(-h));return new c.Y(_.x+R,_.y+O,_.z+T)}class ri{constructor(r=0,o=0,h=0,m=0){if(isNaN(r)||r<0||isNaN(o)||o<0||isNaN(h)||h<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=o,this.left=h,this.right=m}interpolate(r,o,h){return o.top!=null&&r.top!=null&&(this.top=c.y.number(r.top,o.top,h)),o.bottom!=null&&r.bottom!=null&&(this.bottom=c.y.number(r.bottom,o.bottom,h)),o.left!=null&&r.left!=null&&(this.left=c.y.number(r.left,o.left,h)),o.right!=null&&r.right!=null&&(this.right=c.y.number(r.right,o.right,h)),this}getCenter(r,o){const h=c.ab((this.left+r-this.right)/2,0,r),m=c.ab((this.top+o-this.bottom)/2,0,o);return new c.P(h,m)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new ri(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Sc(y,r){if(!y.renderWorldCopies||y.lngRange)return;const o=r.lng-y.center.lng;r.lng+=o>180?-360:o<-180?360:0}function cl(y){return Math.max(0,Math.floor(y))}class gn{constructor(r,o,h,m,_,b){this._callbacks=r,this._tileSize=512,this._renderWorldCopies=b===void 0||!!b,this._minZoom=o||0,this._maxZoom=h||22,this._minPitch=m??0,this._maxPitch=_??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new c.N(0,0),this._elevation=0,this._zoom=0,this._tileZoom=cl(this._zoom),this._scale=c.aG(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new ri,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,o,h){this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=cl(this._zoom),this._scale=c.aG(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new ri(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!h&&r.autoCalculateNearFarZ,o&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){const o=c.aI(r,-180,180)*Math.PI/180;var h,m,_,b,T,M,R,O,U;this._bearingInRadians!==o&&(this._unmodified=!1,this._bearingInRadians=o,this._calcMatrices(),this._rotationMatrix=E(),h=this._rotationMatrix,_=-this._bearingInRadians,b=(m=this._rotationMatrix)[0],T=m[1],M=m[2],R=m[3],O=Math.sin(_),U=Math.cos(_),h[0]=b*U+M*O,h[1]=T*U+R*O,h[2]=b*-O+M*U,h[3]=T*-O+R*U)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){const o=c.ab(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==o&&(this._unmodified=!1,this._pitchInRadians=o,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){const o=r/180*Math.PI;this._rollInRadians!==o&&(this._unmodified=!1,this._rollInRadians=o,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return c.aJ(this._fovInRadians)}setFov(r){r=c.ab(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=c.aa(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){const o=this.getConstrained(this._center,r).zoom;this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this._tileZoom=Math.max(0,Math.floor(o)),this._scale=c.aG(o),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,o){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=o,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,o,h){this._unmodified=!1,this._edgeInsets.interpolate(r,o,h),this._constrain(),this._calcMatrices()}resize(r,o,h=!0){this._width=r,this._height=o,h&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new vr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,c.aF])}getConstrained(r,o){return this._callbacks.getConstrained(r,o)}getCameraQueryGeometry(r,o){if(o.length===1)return[o[0],r];{let h=r.x,m=r.y,_=r.x,b=r.y;for(const T of o)h=Math.min(h,T.x),m=Math.min(m,T.y),_=Math.max(_,T.x),b=Math.max(b,T.y);return[new c.P(h,m),new c.P(_,m),new c.P(_,b),new c.P(h,b),new c.P(h,m)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:o,zoom:h}=this.getConstrained(this.center,this.zoom);this.setCenter(o),this.setZoom(h),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=c.aq(new Float64Array(16));c.K(r,r,[this._width/2,-this._height/2,1]),c.J(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=c.aq(new Float64Array(16)),c.K(r,r,[1,-1,1]),c.J(r,r,[-1,-1,0]),c.K(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,o,h,m){const _=h!==void 0?h:this.bearing,b=m=m!==void 0?m:this.pitch,T=c.Y.fromLngLat(r,o),M=-Math.cos(c.aa(b)),R=Math.sin(c.aa(b)),O=R*Math.sin(c.aa(_)),U=-R*Math.cos(c.aa(_));let $=this.elevation;const K=o-$;let ee;M*K>=0||Math.abs(M)<.1?(ee=1e4,$=o+ee*M):ee=-K/M;let ae,oe,le=c.aK(1,T.y),fe=0;do{if(fe+=1,fe>10)break;oe=ee/le,ae=new c.Y(T.x+O*oe,T.y+U*oe),le=1/ae.meterInMercatorCoordinateUnits()}while(Math.abs(ee-oe*le)>1e-12);return{center:ae.toLngLat(),elevation:$,zoom:c.a8(this.height/2/Math.tan(this.fovInRadians/2)/oe/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;const o=c.aH(1,this.center.lat)*this.worldSize,h=this.cameraToCenterDistance/o,m=c.Y.fromLngLat(this.center,this.elevation),_=Ai(this.center,this.elevation,this.pitch,this.bearing,h);this._elevation=r;const b=this.calculateCenterFromCameraLngLatAlt(_.toLngLat(),c.aK(_.z,m.y),this.bearing,this.pitch);this._elevation=b.elevation,this._center=b.center,this.setZoom(b.zoom)}getCameraPoint(){const r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const r=c.aH(1,this.center.lat)*this.worldSize;return Ai(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];const o=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/o,r.canonical.y/o,1/o/c.X,1/o/c.X]}}class Ms{constructor(r,o){this.min=r,this.max=o,this.center=c.aL([],c.aM([],this.min,this.max),.5)}quadrant(r){const o=[r%2==0,r<2],h=c.aN(this.min),m=c.aN(this.max);for(let _=0;_<o.length;_++)h[_]=o[_]?this.min[_]:this.center[_],m[_]=o[_]?this.center[_]:this.max[_];return m[2]=this.max[2],new Ms(h,m)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let o=!0;for(let h=0;h<r.planes.length;h++){const m=this.intersectsPlane(r.planes[h]);if(m===0)return 0;m===1&&(o=!1)}return o?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let o=r[3],h=r[3];for(let m=0;m<3;m++)r[m]>0?(o+=r[m]*this.min[m],h+=r[m]*this.max[m]):(h+=r[m]*this.min[m],o+=r[m]*this.max[m]);return o>=0?2:h<0?0:1}}class xa{distanceToTile2d(r,o,h,m){const _=m.distanceX([r,o]),b=m.distanceY([r,o]);return Math.hypot(_,b)}getWrap(r,o,h){return h}getTileAABB(r,o,h,m){var _,b;let T=h,M=h;if(m.terrain){const O=new c.S(r.z,o,r.z,r.x,r.y),U=m.terrain.getMinMaxElevation(O);T=(_=U.minElevation)!==null&&_!==void 0?_:h,M=(b=U.maxElevation)!==null&&b!==void 0?b:h}const R=1<<r.z;return new Ms([o+r.x/R,r.y/R,T],[o+(r.x+1)/R,(r.y+1)/R,M])}allowVariableZoom(r,o){const h=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,m=c.ab(78.5-h/2,0,60);return!!o.terrain||r.pitch>m||r.padding.top>=.1}allowWorldCopies(){return!0}recalculateCache(){}}class ba{constructor(r,o,h){this.points=r,this.planes=o,this.aabb=h}static fromInvProjectionMatrix(r,o=1,h=0){const m=Math.pow(2,h),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(R=>{const O=1/(R=c.al([],R,r))[3]/o*m;return c.aO(R,R,[O,O,1/R[3],O])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(R=>{const O=c.aP([],_[R[0]],_[R[1]]),U=c.aP([],_[R[2]],_[R[1]]),$=c.aQ([],c.aR([],O,U)),K=-c.aS($,_[R[1]]);return $.concat(K)}),T=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],M=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const R of _)for(let O=0;O<3;O++)T[O]=Math.min(T[O],R[O]),M[O]=Math.max(M[O],R[O]);return new ba(_,b,new Ms(T,M))}}class ui{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,o,h){return this._helper.interpolatePadding(r,o,h)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,o,h=!0){this._helper.resize(r,o,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,o){this._helper.overrideNearFarZ(r,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,o){}constructor(r,o,h,m,_){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new gn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(b,T)=>this.getConstrained(b,T)},r,o,h,m,_),this._coveringTilesDetailsProvider=new xa}clone(){const r=new ui;return r.apply(this),r}apply(r,o,h){this._helper.apply(r,o,h)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){const o=[new c.aT(0,r)];if(this._helper._renderWorldCopies){const h=this.screenPointToMercatorCoordinate(new c.P(0,0)),m=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,0)),_=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,this._helper._height)),b=this.screenPointToMercatorCoordinate(new c.P(0,this._helper._height)),T=Math.floor(Math.min(h.x,m.x,_.x,b.x)),M=Math.floor(Math.max(h.x,m.x,_.x,b.x)),R=1;for(let O=T-R;O<=M+R;O++)O!==0&&o.push(new c.aT(O,r))}return o}getCameraFrustum(){return ba.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){const o=this.screenPointToLocation(this.centerPoint,r),h=r?r.getElevationForLngLatZoom(o,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(h)}setLocationAtPoint(r,o){const h=c.aH(this.elevation,this.center.lat),m=this.screenPointToMercatorCoordinateAtZ(o,h),_=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,h),b=c.Y.fromLngLat(r),T=new c.Y(b.x-(m.x-_.x),b.y-(m.y-_.y));this.setCenter(T==null?void 0:T.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,o){return o?this.coordinatePoint(c.Y.fromLngLat(r),o.getElevationForLngLatZoom(r,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(c.Y.fromLngLat(r))}screenPointToLocation(r,o){var h;return(h=this.screenPointToMercatorCoordinate(r,o))===null||h===void 0?void 0:h.toLngLat()}screenPointToMercatorCoordinate(r,o){if(o){const h=o.pointCoordinate(r);if(h!=null)return h}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,o){const h=o||0,m=[r.x,r.y,0,1],_=[r.x,r.y,1,1];c.al(m,m,this._pixelMatrixInverse),c.al(_,_,this._pixelMatrixInverse);const b=m[3],T=_[3],M=m[1]/b,R=_[1]/T,O=m[2]/b,U=_[2]/T,$=O===U?0:(h-O)/(U-O);return new c.Y(c.y.number(m[0]/b,_[0]/T,$)/this.worldSize,c.y.number(M,R,$)/this.worldSize,h)}coordinatePoint(r,o=0,h=this._pixelMatrix){const m=[r.x*this.worldSize,r.y*this.worldSize,o,1];return c.al(m,m,h),new c.P(m[0]/m[3],m[1]/m[3])}getBounds(){const r=Math.max(0,this._helper._height/2-ed(this));return new vr().extend(this.screenPointToLocation(new c.P(0,r))).extend(this.screenPointToLocation(new c.P(this._helper._width,r))).extend(this.screenPointToLocation(new c.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new c.P(0,this._helper._height)))}isPointOnMapSurface(r,o){return o?o.pointCoordinate(r)!=null:r.y>this.height/2-ed(this)}calculatePosMatrix(r,o=!1,h){var m;const _=(m=r.key)!==null&&m!==void 0?m:c.aU(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),b=o?this._alignedPosMatrixCache:this._posMatrixCache;if(b.has(_)){const R=b.get(_);return h?R.f32:R.f64}const T=ci(r,this.worldSize);c.L(T,o?this._alignedProjMatrix:this._viewProjMatrix,T);const M={f64:T,f32:new Float32Array(T)};return b.set(_,M),h?M.f32:M.f64}calculateFogMatrix(r){const o=r.key,h=this._fogMatrixCacheF32;if(h.has(o))return h.get(o);const m=ci(r,this.worldSize);return c.L(m,this._fogMatrix,m),h.set(o,new Float32Array(m)),h.get(o)}getConstrained(r,o){o=c.ab(+o,this.minZoom,this.maxZoom);const h={center:new c.N(r.lng,r.lat),zoom:o};let m=this._helper._lngRange;this._helper._renderWorldCopies||m!==null||(m=[-179.9999999999,180-1e-10]);const _=this.tileSize*c.aG(h.zoom);let b=0,T=_,M=0,R=_,O=0,U=0;const{x:$,y:K}=this.size;if(this._helper._latRange){const _e=this._helper._latRange;b=c.Q(_e[1])*_,T=c.Q(_e[0])*_,T-b<K&&(O=K/(T-b))}m&&(M=c.aI(c.O(m[0])*_,0,_),R=c.aI(c.O(m[1])*_,0,_),R<M&&(R+=_),R-M<$&&(U=$/(R-M)));const{x:ee,y:ae}=nn(_,r);let oe,le;const fe=Math.max(U||0,O||0);if(fe){const _e=new c.P(U?(R+M)/2:ee,O?(T+b)/2:ae);return h.center=Jr(_,_e).wrap(),h.zoom+=c.a8(fe),h}if(this._helper._latRange){const _e=K/2;ae-_e<b&&(le=b+_e),ae+_e>T&&(le=T-_e)}if(m){const _e=(M+R)/2;let xe=ee;this._helper._renderWorldCopies&&(xe=c.aI(ee,_e-_/2,_e+_/2));const be=$/2;xe-be<M&&(oe=M+be),xe+be>R&&(oe=R-be)}if(oe!==void 0||le!==void 0){const _e=new c.P(oe??ee,le??ae);h.center=Jr(_,_e).wrap()}return h}calculateCenterFromCameraLngLatAlt(r,o,h,m){return this._helper.calculateCenterFromCameraLngLatAlt(r,o,h,m)}_calculateNearFarZIfNeeded(r,o,h){if(!this._helper.autoCalculateNearFarZ)return;const m=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),_=r-m*this._helper._pixelPerMeter/Math.cos(o),b=m<0?_:r,T=Math.PI/2+this.pitchInRadians,M=c.aa(this.fov)*(Math.abs(Math.cos(c.aa(this.roll)))*this.height+Math.abs(Math.sin(c.aa(this.roll)))*this.width)/this.height*(.5+h.y/this.height),R=Math.sin(M)*b/Math.sin(c.ab(Math.PI-T-M,.01,Math.PI-.01)),O=ed(this),U=Math.atan(O/this._helper.cameraToCenterDistance),$=c.aa(.75),K=U>$?2*U*(.5+h.y/(2*O)):$,ee=Math.sin(K)*b/Math.sin(c.ab(Math.PI-T-K,.01,Math.PI-.01)),ae=Math.min(R,ee);this._helper._farZ=1.01*(Math.cos(Math.PI/2-o)*ae+b),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const r=this.centerOffset,o=nn(this.worldSize,this.center),h=o.x,m=o.y;this._helper._pixelPerMeter=c.aH(1,this.center.lat)*this.worldSize;const _=c.aa(Math.min(this.pitch,89.25)),b=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(_));let T;this._calculateNearFarZIfNeeded(b,_,r),T=new Float64Array(16),c.aV(T,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),c.an(this._invProjMatrix,T),T[8]=2*-r.x/this._helper._width,T[9]=2*r.y/this._helper._height,this._projectionMatrix=c.aW(T),c.K(T,T,[1,-1,1]),c.J(T,T,[0,0,-this._helper.cameraToCenterDistance]),c.aX(T,T,-this.rollInRadians),c.aY(T,T,this.pitchInRadians),c.aX(T,T,-this.bearingInRadians),c.J(T,T,[-h,-m,0]),this._mercatorMatrix=c.K([],T,[this.worldSize,this.worldSize,this.worldSize]),c.K(T,T,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=c.L(new Float64Array(16),this.clipSpaceToPixelsMatrix,T),c.J(T,T,[0,0,-this.elevation]),this._viewProjMatrix=T,this._invViewProjMatrix=c.an([],T);const M=[0,0,-1,1];c.al(M,M,this._invViewProjMatrix),this._cameraPosition=[M[0]/M[3],M[1]/M[3],M[2]/M[3]],this._fogMatrix=new Float64Array(16),c.aV(this._fogMatrix,this.fovInRadians,this.width/this.height,b,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,c.K(this._fogMatrix,this._fogMatrix,[1,-1,1]),c.J(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),c.aX(this._fogMatrix,this._fogMatrix,-this.rollInRadians),c.aY(this._fogMatrix,this._fogMatrix,this.pitchInRadians),c.aX(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),c.J(this._fogMatrix,this._fogMatrix,[-h,-m,0]),c.K(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),c.J(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=c.L(new Float64Array(16),this.clipSpaceToPixelsMatrix,T);const R=this._helper._width%2/2,O=this._helper._height%2/2,U=Math.cos(this.bearingInRadians),$=Math.sin(-this.bearingInRadians),K=h-Math.round(h)+U*R+$*O,ee=m-Math.round(m)+U*O+$*R,ae=new Float64Array(T);if(c.J(ae,ae,[K>.5?K-1:K,ee>.5?ee-1:ee,0]),this._alignedProjMatrix=ae,T=c.an(new Float64Array(16),this._pixelMatrix),!T)throw new Error("failed to invert matrix");this._pixelMatrixInverse=T,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const r=this.screenPointToMercatorCoordinate(new c.P(0,0)),o=[r.x*this.worldSize,r.y*this.worldSize,0,1];return c.al(o,o,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const r=c.aH(1,this.center.lat)*this.worldSize;return Ai(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,o){const h=c.Y.fromLngLat(r),m=[h.x*this.worldSize,h.y*this.worldSize,o,1];return c.al(m,m,this._viewProjMatrix),m[2]/m[3]}getProjectionData(r){const{overscaledTileID:o,aligned:h,applyTerrainMatrix:m}=r,_=this._helper.getMercatorTileCoordinates(o),b=o?this.calculatePosMatrix(o,h,!0):null;let T;return T=o&&o.terrainRttPosMatrix32f&&m?o.terrainRttPosMatrix32f:b||c.aZ(),{mainMatrix:T,tileMercatorCoords:_,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:T}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,o,h){return 1}transformLightDirection(r){return c.aN(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,o,h,m){const _=this.calculatePosMatrix(h);let b;m?(b=[r,o,m(r,o),1],c.al(b,b,_)):(b=[r,o,0,1],Xt(b,b,_));const T=b[3];return{point:new c.P(b[0]/T,b[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}populateCache(r){for(const o of r)this.calculatePosMatrix(o)}getMatrixForModel(r,o){const h=c.Y.fromLngLat(r,o),m=h.meterInMercatorCoordinateUnits(),_=c.a_();return c.J(_,_,[h.x,h.y,h.z]),c.aX(_,_,Math.PI),c.aY(_,_,Math.PI/2),c.K(_,_,[-m,m,m]),_}getProjectionDataForCustomLayer(r=!0){const o=new c.S(0,0,0,0,0),h=this.getProjectionData({overscaledTileID:o,applyGlobeMatrix:r}),m=ci(o,this.worldSize);c.L(m,this._viewProjMatrix,m),h.tileMercatorCoords=[0,0,1,1];const _=[c.X,c.X,this.worldSize/this._helper.pixelsPerMeter],b=c.a$();return c.K(b,m,_),h.fallbackMatrix=b,h.mainMatrix=b,h}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function cp(){c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function bo(y){if(y.useSlerp)if(y.k<1){const r=c.b0(y.startEulerAngles.roll,y.startEulerAngles.pitch,y.startEulerAngles.bearing),o=c.b0(y.endEulerAngles.roll,y.endEulerAngles.pitch,y.endEulerAngles.bearing),h=new Float64Array(4);c.b1(h,r,o,y.k);const m=c.b2(h);y.tr.setRoll(m.roll),y.tr.setPitch(m.pitch),y.tr.setBearing(m.bearing)}else y.tr.setRoll(y.endEulerAngles.roll),y.tr.setPitch(y.endEulerAngles.pitch),y.tr.setBearing(y.endEulerAngles.bearing);else y.tr.setRoll(c.y.number(y.startEulerAngles.roll,y.endEulerAngles.roll,y.k)),y.tr.setPitch(c.y.number(y.startEulerAngles.pitch,y.endEulerAngles.pitch,y.k)),y.tr.setBearing(c.y.number(y.startEulerAngles.bearing,y.endEulerAngles.bearing,y.k))}function bg(y,r,o,h,m){const _=m.padding,b=nn(m.worldSize,o.getNorthWest()),T=nn(m.worldSize,o.getNorthEast()),M=nn(m.worldSize,o.getSouthEast()),R=nn(m.worldSize,o.getSouthWest()),O=c.aa(-h),U=b.rotate(O),$=T.rotate(O),K=M.rotate(O),ee=R.rotate(O),ae=new c.P(Math.max(U.x,$.x,ee.x,K.x),Math.max(U.y,$.y,ee.y,K.y)),oe=new c.P(Math.min(U.x,$.x,ee.x,K.x),Math.min(U.y,$.y,ee.y,K.y)),le=ae.sub(oe),fe=(m.width-(_.left+_.right+r.left+r.right))/le.x,_e=(m.height-(_.top+_.bottom+r.top+r.bottom))/le.y;if(_e<0||fe<0)return void cp();const xe=Math.min(c.a8(m.scale*Math.min(fe,_e)),y.maxZoom),be=c.P.convert(y.offset),ke=new c.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(c.aa(h)),Pe=be.add(ke).mult(m.scale/c.aG(xe));return{center:Jr(m.worldSize,b.add(M).div(2).sub(Pe)),zoom:xe,bearing:h}}class Tc{get useGlobeControls(){return!1}handlePanInertia(r,o){return{easingOffset:r,easingCenter:o.center}}handleMapControlsRollPitchBearingZoom(r,o){r.bearingDelta&&o.setBearing(o.bearing+r.bearingDelta),r.pitchDelta&&o.setPitch(o.pitch+r.pitchDelta),r.rollDelta&&o.setRoll(o.roll+r.rollDelta),r.zoomDelta&&o.setZoom(o.zoom+r.zoomDelta)}handleMapControlsPan(r,o,h){r.around.distSqr(o.centerPoint)<.01||o.setLocationAtPoint(h,r.around)}cameraForBoxAndBearing(r,o,h,m,_){return bg(r,o,h,m,_)}handleJumpToCenterZoom(r,o){r.zoom!==(o.zoom!==void 0?+o.zoom:r.zoom)&&r.setZoom(+o.zoom),o.center!==void 0&&r.setCenter(c.N.convert(o.center))}handleEaseTo(r,o){const h=r.zoom,m=r.padding,_={roll:r.roll,pitch:r.pitch,bearing:r.bearing},b={roll:o.roll===void 0?r.roll:o.roll,pitch:o.pitch===void 0?r.pitch:o.pitch,bearing:o.bearing===void 0?r.bearing:o.bearing},T=o.zoom!==void 0,M=!r.isPaddingEqual(o.padding);let R=!1;const O=T?+o.zoom:r.zoom;let U=r.centerPoint.add(o.offsetAsPoint);const $=r.screenPointToLocation(U),{center:K,zoom:ee}=r.getConstrained(c.N.convert(o.center||$),O??h);Sc(r,K);const ae=nn(r.worldSize,$),oe=nn(r.worldSize,K).sub(ae),le=c.aG(ee-h);return R=ee!==h,{easeFunc:fe=>{if(R&&r.setZoom(c.y.number(h,ee,fe)),c.b3(_,b)||bo({startEulerAngles:_,endEulerAngles:b,tr:r,k:fe,useSlerp:_.roll!=b.roll}),M&&(r.interpolatePadding(m,o.padding,fe),U=r.centerPoint.add(o.offsetAsPoint)),o.around)r.setLocationAtPoint(o.around,o.aroundPoint);else{const _e=c.aG(r.zoom-h),xe=ee>h?Math.min(2,le):Math.max(.5,le),be=Math.pow(xe,1-fe),ke=Jr(r.worldSize,ae.add(oe.mult(fe*be)).mult(_e));r.setLocationAtPoint(r.renderWorldCopies?ke.wrap():ke,U)}},isZooming:R,elevationCenter:K}}handleFlyTo(r,o){const h=o.zoom!==void 0,m=r.zoom,_=r.getConstrained(c.N.convert(o.center||o.locationAtOffset),h?+o.zoom:m),b=_.center,T=_.zoom;Sc(r,b);const M=nn(r.worldSize,o.locationAtOffset),R=nn(r.worldSize,b).sub(M),O=R.mag(),U=c.aG(T-m);let $;if(o.minZoom!==void 0){const K=Math.min(+o.minZoom,m,T),ee=r.getConstrained(b,K).zoom;$=c.aG(ee-m)}return{easeFunc:(K,ee,ae,oe)=>{r.setZoom(K===1?T:m+c.a8(ee));const le=K===1?b:Jr(r.worldSize,M.add(R.mult(ae)).mult(ee));r.setLocationAtPoint(r.renderWorldCopies?le.wrap():le,oe)},scaleOfZoom:U,targetCenter:b,scaleOfMinZoom:$,pixelPathLength:O}}}class Br{constructor(r,o,h){this.blendFunction=r,this.blendColor=o,this.mask=h}}Br.Replace=[1,0],Br.disabled=new Br(Br.Replace,c.b4.transparent,[!1,!1,!1,!1]),Br.unblended=new Br(Br.Replace,c.b4.transparent,[!0,!0,!0,!0]),Br.alphaBlended=new Br([1,771],c.b4.transparent,[!0,!0,!0,!0]);const ul=2305;class yr{constructor(r,o,h){this.enable=r,this.mode=o,this.frontFace=h}}yr.disabled=new yr(!1,1029,ul),yr.backCCW=new yr(!0,1029,ul),yr.frontCCW=new yr(!0,1028,ul);class nr{constructor(r,o,h){this.func=r,this.mask=o,this.range=h}}nr.ReadOnly=!1,nr.ReadWrite=!0,nr.disabled=new nr(519,nr.ReadOnly,[0,1]);const Cc=7680;class _r{constructor(r,o,h,m,_,b){this.test=r,this.ref=o,this.mask=h,this.fail=m,this.depthFail=_,this.pass=b}}_r.disabled=new _r({func:519,mask:0},0,0,Cc,Cc,Cc);const Pc=new WeakMap;function ks(y){var r;if(Pc.has(y))return Pc.get(y);{const o=(r=y.getParameter(y.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Pc.set(y,o),o}}class dl{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;const o=r.context,h=o.gl;this._texFormat=h.RGBA,this._texType=h.UNSIGNED_BYTE;const m=new c.aC;m.emplaceBack(-1,-1),m.emplaceBack(2,-1),m.emplaceBack(-1,2);const _=new c.aE;_.emplaceBack(0,1,2),this._fullscreenTriangle=new Js(o.createVertexBuffer(m,lr.members),o.createIndexBuffer(_),c.aD.simpleSegment(0,0,m.length,_.length)),this._resultBuffer=new Uint8Array(4),o.activeTexture.set(h.TEXTURE1);const b=h.createTexture();h.bindTexture(h.TEXTURE_2D,b),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texImage2D(h.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=o.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(b),ks(h)&&(this._pbo=h.createBuffer(),h.bindBuffer(h.PIXEL_PACK_BUFFER,this._pbo),h.bufferData(h.PIXEL_PACK_BUFFER,4,h.STREAM_READ),h.bindBuffer(h.PIXEL_PACK_BUFFER,null))}destroy(){const r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,o){const h=this._updateCount;return this._readbackQueue?h>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():h>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,o),this._updateCount++,this._measuredError}_bindFramebuffer(){const r=this._cachedRenderContext.context,o=r.gl;r.activeTexture.set(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,o){const h=this._cachedRenderContext.context,m=h.gl;if(this._bindFramebuffer(),h.viewport.set([0,0,this._texWidth,this._texHeight]),h.clear({color:c.b4.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(h,m.TRIANGLES,nr.disabled,_r.disabled,Br.unblended,yr.disabled,((_,b)=>({u_input:_,u_output_expected:b}))(r,o),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&ks(m)){m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.readBuffer(m.COLOR_ATTACHMENT0),m.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),m.bindBuffer(m.PIXEL_PACK_BUFFER,null);const _=m.fenceSync(m.SYNC_GPU_COMMANDS_COMPLETE,0);m.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:_}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&ks(r)){const o=r.clientWaitSync(this._readbackQueue.sync,0,0);if(o===r.WAIT_FAILED)return c.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(o===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=dl._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let o=0;return o+=r[0]/256,o+=r[1]/65536,o+=r[2]/16777216,r[3]<127&&(o=-o),o/128}}const Ec=c.X/128;function hl(y,r){const o=y.granularity!==void 0?Math.max(y.granularity,1):1,h=o+(y.generateBorders?2:0),m=o+(y.extendToNorthPole||y.generateBorders?1:0)+(y.extendToSouthPole||y.generateBorders?1:0),_=h+1,b=m+1,T=y.generateBorders?-1:0,M=y.generateBorders||y.extendToNorthPole?-1:0,R=o+(y.generateBorders?1:0),O=o+(y.generateBorders||y.extendToSouthPole?1:0),U=_*b,$=h*m*6,K=_*b>65536;if(K&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ee=K||r==="32bit",ae=new Int16Array(2*U);let oe=0;for(let _e=M;_e<=O;_e++)for(let xe=T;xe<=R;xe++){let be=xe/o*c.X;xe===-1&&(be=-64),xe===o+1&&(be=c.X+Ec);let ke=_e/o*c.X;_e===-1&&(ke=y.extendToNorthPole?c.b6:-64),_e===o+1&&(ke=y.extendToSouthPole?c.b7:c.X+Ec),ae[oe++]=be,ae[oe++]=ke}const le=ee?new Uint32Array($):new Uint16Array($);let fe=0;for(let _e=0;_e<m;_e++)for(let xe=0;xe<h;xe++){const be=xe+1+_e*_,ke=xe+(_e+1)*_,Pe=xe+1+(_e+1)*_;le[fe++]=xe+_e*_,le[fe++]=ke,le[fe++]=be,le[fe++]=be,le[fe++]=ke,le[fe++]=Pe}return{vertices:ae.buffer.slice(0),indices:le.buffer.slice(0),uses32bitIndices:ee}}const up=new c.aB({fill:new c.b8(128,2),line:new c.b8(512,0),tile:new c.b8(128,32),stencil:new c.b8(128,1),circle:3});class td{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Qs.projectionGlobe}get vertexShaderPreludeCode(){return Qs.projectionMercator.vertexSource}get subdivisionGranularity(){return up}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new dl(r));const o=c.Q(this._errorQueryLatitudeDegrees),h=2*Math.atan(Math.exp(Math.PI-o*Math.PI*2))-.5*Math.PI,m=this._errorMeasurement.updateErrorLoop(o,h),_=L.now();m!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=m,this._errorMeasurementLastChangeTime=_);const b=Math.min(Math.max((_-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=c.b9(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,c.ba(b))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,o,h,m,_){const b=(_==="stencil"?up.stencil:up.tile).getGranularityForZoomLevel(o.z);return this._getMesh(r,{granularity:b,generateBorders:h,extendToNorthPole:o.y===0&&m,extendToSouthPole:o.y===(1<<o.z)-1&&m})}_getMesh(r,o){const h=this._getMeshKey(o);if(h in this._tileMeshCache)return this._tileMeshCache[h];const m=function(_,b){const T=hl(b,"16bit"),M=c.aC.deserialize({arrayBuffer:T.vertices,length:T.vertices.byteLength/2/2}),R=c.aE.deserialize({arrayBuffer:T.indices,length:T.indices.byteLength/2/3});return new Js(_.createVertexBuffer(M,lr.members),_.createIndexBuffer(R),c.aD.simpleSegment(0,0,M.length,R.length))}(r,o);return this._tileMeshCache[h]=m,m}recalculate(r){}hasTransition(){const r=L.now();let o=!1;return o=o||(r-this._errorMeasurementLastChangeTime)/1e3<.7,o=o||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,o}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}const wg=new c.q({type:new c.D(c.v.projection.type)});class Sg extends c.E{constructor(r){super(),this._transitionable=new c.T(wg),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.z(0)),this._mercatorProjection=new vi,this._verticalPerspectiveProjection=new td}get transitionState(){const r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof c.bb){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,o,h,m,_){return this.currentProjection.getMeshFromTileID(r,o,h,m,_)}setProjection(r){this._transitionable.setValue("type",(r==null?void 0:r.type)||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function Tg(y){const r=Ki(y.worldSize,y.center.lat);return 2*Math.PI*r}function ni(y,r,o,h,m){const _=1/(1<<m),b=r/c.X*_+h*_,T=c.bd((y/c.X*_+o*_)*Math.PI*2+Math.PI,2*Math.PI),M=2*Math.atan(Math.exp(Math.PI-b*Math.PI*2))-.5*Math.PI,R=Math.cos(M),O=new Float64Array(3);return O[0]=Math.sin(T)*R,O[1]=Math.sin(M),O[2]=Math.cos(T)*R,O}function qn(y){return function(r,o){const h=Math.cos(o),m=new Float64Array(3);return m[0]=Math.sin(r)*h,m[1]=Math.sin(o),m[2]=Math.cos(r)*h,m}(y.lng*Math.PI/180,y.lat*Math.PI/180)}function Ki(y,r){return y/(2*Math.PI)/Math.cos(r*Math.PI/180)}function Mc(y){const r=Math.asin(y[1])/Math.PI*180,o=Math.sqrt(y[0]*y[0]+y[2]*y[2]);if(o>1e-6){const h=y[0]/o,m=Math.acos(y[2]/o),_=(h>0?m:-m)/Math.PI*180;return new c.N(c.aI(_,-180,180),r)}return new c.N(0,r)}function kc(y){return Math.cos(y*Math.PI/180)}function zn(y,r){const o=kc(y),h=kc(r);return c.a8(h/o)}function wa(y,r){const o=y.rotate(r.bearingInRadians),h=r.zoom+zn(r.center.lat,0),m=c.b9(1/kc(r.center.lat),1/kc(Math.min(Math.abs(r.center.lat),60)),c.bc(h,7,3,0,1)),_=360/Tg({worldSize:r.worldSize,center:{lat:r.center.lat}});return new c.N(r.center.lng-o.x*_*m,c.ab(r.center.lat+o.y*_,-85.051129,c.aF))}function dp(y){const r=.5*y,o=Math.sin(r),h=Math.cos(r);return Math.log(o+h)-Math.log(h-o)}function Cg(y,r,o,h){const m=y.lat+o*h;if(Math.abs(o)>1){const _=(Math.sign(y.lat+o)!==Math.sign(y.lat)?-Math.abs(y.lat):Math.abs(y.lat))*Math.PI/180,b=Math.abs(y.lat+o)*Math.PI/180,T=dp(_+h*(b-_)),M=dp(_),R=dp(b);return new c.N(y.lng+r*((T-M)/(R-M)),m)}return new c.N(y.lng+r*h,m)}class M0{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=r}recalculateCache(){if(!this._hadAnyChanges)return;const r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(r,o,h,m){const _=`${r.z}_${r.x}_${r.y}`,b=this._cache.get(_);if(b)return b;const T=this._cachePrevious.get(_);if(T)return this._cache.set(_,T),T;const M=this._aabbFactory(r,o,h,m);return this._cache.set(_,M),this._hadAnyChanges=!0,M}}function rd(y,r,o){const h=y-r;return h<0?-h:Math.max(0,h-o)}function hp(y,r,o,h,m){const _=y-o;let b;return b=_<0?Math.min(-_,1+_-m):_>1?Math.min(Math.max(_-m,0),1-_):0,Math.max(b,rd(r,h,m))}class k0{constructor(){this._aabbCache=new M0(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(r,o,h,m){const _=1<<h.z,b=1/_,T=h.x/_,M=h.y/_;let R=2;return R=Math.min(R,hp(r,o,T,M,b)),R=Math.min(R,hp(r,o,T+.5,-M-b,b)),R=Math.min(R,hp(r,o,T+.5,2-M-b,b)),R}getWrap(r,o,h){const m=1<<o.z,_=1/m,b=o.x/m,T=rd(r.x,b,_),M=rd(r.x,b-1,_),R=rd(r.x,b+1,_),O=Math.min(T,M,R);return O===R?1:O===M?-1:0}allowVariableZoom(r,o){return Wi(r,o)>4}allowWorldCopies(){return!1}getTileAABB(r,o,h,m){return this._aabbCache.getTileAABB(r,o,h,m)}_computeTileAABB(r,o,h,m){if(r.z<=0)return new Ms([-1,-1,-1],[1,1,1]);if(r.z===1)return new Ms([r.x===0?-1:0,r.y===0?0:-1,-1],[r.x===0?0:1,r.y===0?1:0,1]);{const _=[ni(0,0,r.x,r.y,r.z),ni(c.X,0,r.x,r.y,r.z),ni(c.X,c.X,r.x,r.y,r.z),ni(0,c.X,r.x,r.y,r.z)],b=[1,1,1],T=[-1,-1,-1];for(const M of _)for(let R=0;R<3;R++)b[R]=Math.min(b[R],M[R]),T[R]=Math.max(T[R],M[R]);if(r.y===0||r.y===(1<<r.z)-1){const M=[0,r.y===0?1:-1,0];for(let R=0;R<3;R++)b[R]=Math.min(b[R],M[R]),T[R]=Math.max(T[R],M[R])}return new Ms(b,T)}}}class Sa{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,o,h){return this._helper.interpolatePadding(r,o,h)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,o){this._helper.resize(r,o)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,o){this._helper.overrideNearFarZ(r,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(){this._cachedClippingPlane=c.be(),this._projectionMatrix=c.a_(),this._globeViewProjMatrix32f=c.aZ(),this._globeViewProjMatrixNoCorrection=c.a_(),this._globeViewProjMatrixNoCorrectionInverted=c.a_(),this._globeProjMatrixInverted=c.a_(),this._cameraPosition=c.bf(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new gn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,o)=>this.getConstrained(r,o)}),this._coveringTilesDetailsProvider=new k0}clone(){const r=new Sa;return r.apply(this),r}apply(r,o){this._globeLatitudeErrorCorrectionRadians=o||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const r=c.bf();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){const{overscaledTileID:o,applyGlobeMatrix:h}=r,m=this._helper.getMercatorTileCoordinates(o);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:m,clippingPlane:this._cachedClippingPlane,projectionTransition:h?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){const o=this.pitchInRadians,h=this.cameraToCenterDistance/r,m=Math.sin(o)*h,_=Math.cos(o)*h+1,b=1/Math.sqrt(m*m+_*_)*1;let T=-m,M=_;const R=Math.sqrt(T*T+M*M);T/=R,M/=R;const O=[0,T,M];return c.bg(O,O,[0,0,0],-this.bearingInRadians),c.bh(O,O,[0,0,0],-1*this.center.lat*Math.PI/180),c.bi(O,O,[0,0,0],this.center.lng*Math.PI/180),c.aL(O,O,.25),[...O,.25*-b]}isLocationOccluded(r){return!this.isSurfacePointVisible(qn(r))}transformLightDirection(r){const o=this._helper._center.lng*Math.PI/180,h=this._helper._center.lat*Math.PI/180,m=Math.cos(h),_=[Math.sin(o)*m,Math.sin(h),Math.cos(o)*m],b=[_[2],0,-_[0]],T=[0,0,0];c.aR(T,b,_),c.aQ(b,b),c.aQ(T,T);const M=[0,0,0];return c.aQ(M,[b[0]*r[0]+T[0]*r[1]+_[0]*r[2],b[1]*r[0]+T[1]*r[1]+_[1]*r[2],b[2]*r[0]+T[2]*r[1]+_[2]*r[2]]),M}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,o,h){const m=function(T,M,R){const O=1/(1<<R.z);return new c.Y(T/c.X*O+R.x*O,M/c.X*O+R.y*O)}(r,o,h.canonical),_=(b=m.y,[c.bd(m.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-b*Math.PI*2))-.5*Math.PI]);var b;return this.getCircleRadiusCorrection()/Math.cos(_[1])}projectTileCoordinates(r,o,h,m){const _=h.canonical,b=ni(r,o,_.x,_.y,_.z),T=1+(m?m(r,o):0)/c.bo,M=[b[0]*T,b[1]*T,b[2]*T,1];c.al(M,M,this._globeViewProjMatrixNoCorrection);const R=this._cachedClippingPlane,O=R[0]*b[0]+R[1]*b[1]+R[2]*b[2]+R[3]<0;return{point:new c.P(M[0]/M[3],M[1]/M[3]),signedDistanceFromCamera:M[3],isOccluded:O}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const r=Ki(this.worldSize,this.center.lat),o=c.a$(),h=c.a$();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),c.aV(o,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const m=this.centerOffset;o[8]=2*-m.x/this._helper._width,o[9]=2*m.y/this._helper._height,this._projectionMatrix=c.aW(o),this._globeProjMatrixInverted=c.a$(),c.an(this._globeProjMatrixInverted,o),c.J(o,o,[0,0,-this.cameraToCenterDistance]),c.aX(o,o,this.rollInRadians),c.aY(o,o,-this.pitchInRadians),c.aX(o,o,this.bearingInRadians),c.J(o,o,[0,0,-r]);const _=c.bf();_[0]=r,_[1]=r,_[2]=r,c.aY(h,o,this.center.lat*Math.PI/180),c.bj(h,h,-this.center.lng*Math.PI/180),c.K(h,h,_),this._globeViewProjMatrixNoCorrection=h,c.aY(o,o,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),c.bj(o,o,-this.center.lng*Math.PI/180),c.K(o,o,_),this._globeViewProjMatrix32f=new Float32Array(o),this._globeViewProjMatrixNoCorrectionInverted=c.a$(),c.an(this._globeViewProjMatrixNoCorrectionInverted,h);const b=c.bf();this._cameraPosition=c.bf(),this._cameraPosition[2]=this.cameraToCenterDistance/r,c.bg(this._cameraPosition,this._cameraPosition,b,-this.rollInRadians),c.bh(this._cameraPosition,this._cameraPosition,b,this.pitchInRadians),c.bg(this._cameraPosition,this._cameraPosition,b,-this.bearingInRadians),c.aM(this._cameraPosition,this._cameraPosition,[0,0,1]),c.bh(this._cameraPosition,this._cameraPosition,b,-this.center.lat*Math.PI/180),c.bi(this._cameraPosition,this._cameraPosition,b,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);const T=c.aW(this._globeViewProjMatrixNoCorrectionInverted);c.K(T,T,[1,1,-1]),this._cachedFrustum=ba.fromInvProjectionMatrix(T)}calculateFogMatrix(r){c.w("calculateFogMatrix is not supported on globe projection.");const o=c.a$();return c.aq(o),o}getVisibleUnwrappedCoordinates(r){return[new c.aT(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&c.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,o){if(!this._globeViewProjMatrixNoCorrection)return 1;const h=qn(r);c.aL(h,h,1+o/c.bo);const m=c.be();return c.al(m,[h[0],h[1],h[2],1],this._globeViewProjMatrixNoCorrection),m[2]/m[3]}populateCache(r){}getBounds(){const r=.5*this.width,o=.5*this.height,h=[new c.P(0,0),new c.P(r,0),new c.P(this.width,0),new c.P(this.width,o),new c.P(this.width,this.height),new c.P(r,this.height),new c.P(0,this.height),new c.P(0,o)],m=[];for(const U of h)m.push(this.unprojectScreenPoint(U));let _=0,b=0,T=0,M=0;const R=this.center;for(const U of m){const $=c.bk(R.lng,U.lng),K=c.bk(R.lat,U.lat);$<b&&(b=$),$>_&&(_=$),K<M&&(M=K),K>T&&(T=K)}const O=[R.lng+b,R.lat+M,R.lng+_,R.lat+T];return this.isSurfacePointOnScreen([0,1,0])&&(O[3]=90,O[0]=-180,O[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(O[1]=-90,O[0]=-180,O[2]=180),new vr(O)}getConstrained(r,o){const h=c.ab(r.lat,-85.051129,c.aF),m=c.ab(+o,this.minZoom+zn(0,h),this.maxZoom);return{center:new c.N(r.lng,h),zoom:m}}calculateCenterFromCameraLngLatAlt(r,o,h,m){return this._helper.calculateCenterFromCameraLngLatAlt(r,o,h,m)}setLocationAtPoint(r,o){const h=qn(this.unprojectScreenPoint(o)),m=qn(r),_=c.bf();c.bl(_);const b=c.bf();c.bi(b,h,_,-this.center.lng*Math.PI/180),c.bh(b,b,_,this.center.lat*Math.PI/180);const T=m[0]*m[0]+m[2]*m[2],M=b[0]*b[0];if(T<M)return;const R=Math.sqrt(T-M),O=-R,U=c.bm(m[0],m[2],b[0],R),$=c.bm(m[0],m[2],b[0],O),K=c.bf();c.bi(K,m,_,-U);const ee=c.bm(K[1],K[2],b[1],b[2]),ae=c.bf();c.bi(ae,m,_,-$);const oe=c.bm(ae[1],ae[2],b[1],b[2]),le=.5*Math.PI,fe=ee>=-le&&ee<=le,_e=oe>=-le&&oe<=le;let xe,be;if(fe&&_e){const Fe=this.center.lng*Math.PI/180,Ke=this.center.lat*Math.PI/180;c.bp(U,Fe)+c.bp(ee,Ke)<c.bp($,Fe)+c.bp(oe,Ke)?(xe=U,be=ee):(xe=$,be=oe)}else if(fe)xe=U,be=ee;else{if(!_e)return;xe=$,be=oe}const ke=xe/Math.PI*180,Pe=be/Math.PI*180,Le=this.center.lat;this.setCenter(new c.N(ke,c.ab(Pe,-90,90))),this.setZoom(this.zoom+zn(Le,this.center.lat))}locationToScreenPoint(r,o){const h=qn(r);if(o){const m=o.getElevationForLngLatZoom(r,this._helper._tileZoom);c.aL(h,h,1+m/c.bo)}return this._projectSurfacePointToScreen(h)}_projectSurfacePointToScreen(r){const o=c.be();return c.al(o,[...r,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],new c.P((.5*o[0]+.5)*this.width,(.5*-o[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,o){if(o){const h=o.pointCoordinate(r);if(h)return h}return c.Y.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,o){var h;return(h=this.screenPointToMercatorCoordinate(r,o))===null||h===void 0?void 0:h.toLngLat()}isPointOnMapSurface(r,o){const h=this._cameraPosition,m=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(h,m)}getRayDirectionFromPixel(r){const o=c.be();o[0]=r.x/this.width*2-1,o[1]=-1*(r.y/this.height*2-1),o[2]=1,o[3]=1,c.al(o,o,this._globeViewProjMatrixNoCorrectionInverted),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3];const h=c.bf();h[0]=o[0]-this._cameraPosition[0],h[1]=o[1]-this._cameraPosition[1],h[2]=o[2]-this._cameraPosition[2];const m=c.bf();return c.aQ(m,h),m}isSurfacePointVisible(r){const o=this._cachedClippingPlane;return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;const o=c.be();return c.al(o,[...r,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3],o[0]>-1&&o[0]<1&&o[1]>-1&&o[1]<1&&o[2]>-1&&o[2]<1}rayPlanetIntersection(r,o){const h=c.aS(r,o),m=c.bf(),_=c.bf();c.aL(_,o,h),c.aP(m,r,_);const b=1-c.aS(m,m);if(b<0)return null;const T=c.aS(r,r)-1,M=-h+(h<0?1:-1)*Math.sqrt(b),R=T/M,O=M;return{tMin:Math.min(R,O),tMax:Math.max(R,O)}}unprojectScreenPoint(r){const o=this._cameraPosition,h=this.getRayDirectionFromPixel(r),m=this.rayPlanetIntersection(o,h);if(m){const R=c.bf();c.aM(R,o,[h[0]*m.tMin,h[1]*m.tMin,h[2]*m.tMin]);const O=c.bf();return c.aQ(O,R),Mc(O)}const _=this._cachedClippingPlane[0]*h[0]+this._cachedClippingPlane[1]*h[1]+this._cachedClippingPlane[2]*h[2],b=-c.bn(this._cachedClippingPlane,o)/_,T=c.bf();if(b>0)c.aM(T,o,[h[0]*b,h[1]*b,h[2]*b]);else{const R=c.bf();c.aM(R,o,[2*h[0],2*h[1],2*h[2]]);const O=c.bn(this._cachedClippingPlane,R);c.aP(T,R,[this._cachedClippingPlane[0]*O,this._cachedClippingPlane[1]*O,this._cachedClippingPlane[2]*O])}const M=c.bf();return c.aQ(M,T),Mc(M)}getMatrixForModel(r,o){const h=c.N.convert(r),m=1/c.bo,_=c.a_();return c.bj(_,_,h.lng/180*Math.PI),c.aY(_,_,-h.lat/180*Math.PI),c.J(_,_,[0,0,1+o/c.bo]),c.aY(_,_,.5*Math.PI),c.K(_,_,[m,m,m]),_}getProjectionDataForCustomLayer(r=!0){const o=this.getProjectionData({overscaledTileID:new c.S(0,0,0,0,0),applyGlobeMatrix:r});return o.tileMercatorCoords=[0,0,1,1],o}getFastPathSimpleProjectionMatrix(r){}}class pl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,o,h){return this._helper.interpolatePadding(r,o,h)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,o,h=!0){this._helper.resize(r,o,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,o){this._helper.overrideNearFarZ(r,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,o){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=o,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new gn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,o)=>this.getConstrained(r,o)}),this._globeness=1,this._mercatorTransform=new ui,this._verticalPerspectiveTransform=new Sa}clone(){const r=new pl;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){const o=this._mercatorTransform.getProjectionData(r),h=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?h.mainMatrix:o.mainMatrix,clippingPlane:h.clippingPlane,tileMercatorCoords:h.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:o.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return c.b9(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return c.b9(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,o,h){const m=this._mercatorTransform.getPitchedTextCorrection(r,o,h),_=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,o,h);return c.b9(m,_,this._globeness)}projectTileCoordinates(r,o,h,m){return this.currentTransform.projectTileCoordinates(r,o,h,m)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,o){return this.currentTransform.lngLatToCameraDepth(r,o)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}getConstrained(r,o){return this.currentTransform.getConstrained(r,o)}calculateCenterFromCameraLngLatAlt(r,o,h,m){return this._helper.calculateCenterFromCameraLngLatAlt(r,o,h,m)}setLocationAtPoint(r,o){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,o),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,o),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,o){return this.currentTransform.locationToScreenPoint(r,o)}screenPointToMercatorCoordinate(r,o){return this.currentTransform.screenPointToMercatorCoordinate(r,o)}screenPointToLocation(r,o){return this.currentTransform.screenPointToLocation(r,o)}isPointOnMapSurface(r,o){return this.currentTransform.isPointOnMapSurface(r,o)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,o){return this.currentTransform.getMatrixForModel(r,o)}getProjectionDataForCustomLayer(r=!0){const o=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return o;const h=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return h.fallbackMatrix=o.mainMatrix,h}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class Di{get useGlobeControls(){return!0}handlePanInertia(r,o){const h=wa(r,o);return Math.abs(h.lng-o.center.lng)>180&&(h.lng=o.center.lng+179.5*Math.sign(h.lng-o.center.lng)),{easingCenter:h,easingOffset:new c.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,o){const h=r.around,m=o.screenPointToLocation(h);r.bearingDelta&&o.setBearing(o.bearing+r.bearingDelta),r.pitchDelta&&o.setPitch(o.pitch+r.pitchDelta),r.rollDelta&&o.setRoll(o.roll+r.rollDelta);const _=o.zoom;r.zoomDelta&&o.setZoom(o.zoom+r.zoomDelta);const b=o.zoom-_;if(b===0)return;const T=c.bk(o.center.lng,m.lng),M=T/(Math.abs(T/180)+1),R=c.bk(o.center.lat,m.lat),O=o.getRayDirectionFromPixel(h),U=o.cameraPosition,$=-1*c.aS(U,O),K=c.bf();c.aM(K,U,[O[0]*$,O[1]*$,O[2]*$]);const ee=c.bq(K)-1,ae=Math.exp(.5*-Math.max(ee-.3,0)),oe=Ki(o.worldSize,o.center.lat)/Math.min(o.width,o.height),le=c.bc(oe,.9,.5,1,.25),fe=(1-c.aG(-b))*Math.min(ae,le),_e=o.center.lat,xe=o.zoom,be=new c.N(o.center.lng+M*fe,c.ab(o.center.lat+R*fe,-85.051129,c.aF));o.setLocationAtPoint(m,h);const ke=o.center,Pe=c.bc(Math.abs(T),45,85,0,1),Le=c.bc(oe,.75,.35,0,1),Fe=Math.pow(Math.max(Pe,Le),.25),Ke=c.bk(ke.lng,be.lng),qe=c.bk(ke.lat,be.lat);o.setCenter(new c.N(ke.lng+Ke*Fe,ke.lat+qe*Fe).wrap()),o.setZoom(xe+zn(_e,o.center.lat))}handleMapControlsPan(r,o,h){if(!r.panDelta)return;const m=o.center.lat,_=o.zoom;o.setCenter(wa(r.panDelta,o).wrap()),o.setZoom(_+zn(m,o.center.lat))}cameraForBoxAndBearing(r,o,h,m,_){const b=bg(r,o,h,m,_),T=o.left/_.width*2-1,M=(_.width-o.right)/_.width*2-1,R=o.top/_.height*-2+1,O=(_.height-o.bottom)/_.height*-2+1,U=c.bk(h.getWest(),h.getEast())<0,$=U?h.getEast():h.getWest(),K=U?h.getWest():h.getEast(),ee=Math.max(h.getNorth(),h.getSouth()),ae=Math.min(h.getNorth(),h.getSouth()),oe=$+.5*c.bk($,K),le=ee+.5*c.bk(ee,ae),fe=_.clone();fe.setCenter(b.center),fe.setBearing(b.bearing),fe.setPitch(0),fe.setRoll(0),fe.setZoom(b.zoom);const _e=fe.modelViewProjectionMatrix,xe=[qn(h.getNorthWest()),qn(h.getNorthEast()),qn(h.getSouthWest()),qn(h.getSouthEast()),qn(new c.N(K,le)),qn(new c.N($,le)),qn(new c.N(oe,ee)),qn(new c.N(oe,ae))],be=qn(b.center);let ke=Number.POSITIVE_INFINITY;for(const Pe of xe)T<0&&(ke=Di.getLesserNonNegativeNonNull(ke,Di.solveVectorScale(Pe,be,_e,"x",T))),M>0&&(ke=Di.getLesserNonNegativeNonNull(ke,Di.solveVectorScale(Pe,be,_e,"x",M))),R>0&&(ke=Di.getLesserNonNegativeNonNull(ke,Di.solveVectorScale(Pe,be,_e,"y",R))),O<0&&(ke=Di.getLesserNonNegativeNonNull(ke,Di.solveVectorScale(Pe,be,_e,"y",O)));if(Number.isFinite(ke)&&ke!==0)return b.zoom=fe.zoom+c.a8(ke),b;cp()}handleJumpToCenterZoom(r,o){const h=r.center.lat,m=r.getConstrained(o.center?c.N.convert(o.center):r.center,r.zoom).center;r.setCenter(m.wrap());const _=o.zoom!==void 0?+o.zoom:r.zoom+zn(h,m.lat);r.zoom!==_&&r.setZoom(_)}handleEaseTo(r,o){const h=r.zoom,m=r.center,_=r.padding,b={roll:r.roll,pitch:r.pitch,bearing:r.bearing},T={roll:o.roll===void 0?r.roll:o.roll,pitch:o.pitch===void 0?r.pitch:o.pitch,bearing:o.bearing===void 0?r.bearing:o.bearing},M=o.zoom!==void 0,R=!r.isPaddingEqual(o.padding);let O=!1;const U=o.center?c.N.convert(o.center):m,$=r.getConstrained(U,h).center;Sc(r,$);const K=r.clone();K.setCenter($),K.setZoom(M?+o.zoom:h+zn(m.lat,U.lat)),K.setBearing(o.bearing);const ee=new c.P(c.ab(r.centerPoint.x+o.offsetAsPoint.x,0,r.width),c.ab(r.centerPoint.y+o.offsetAsPoint.y,0,r.height));K.setLocationAtPoint($,ee);const ae=(o.offset&&o.offsetAsPoint.mag())>0?K.center:$,oe=M?+o.zoom:h+zn(m.lat,ae.lat),le=h+zn(m.lat,0),fe=oe+zn(ae.lat,0),_e=c.bk(m.lng,ae.lng),xe=c.bk(m.lat,ae.lat),be=c.aG(fe-le);return O=oe!==h,{easeFunc:ke=>{if(c.b3(b,T)||bo({startEulerAngles:b,endEulerAngles:T,tr:r,k:ke,useSlerp:b.roll!=T.roll}),R&&r.interpolatePadding(_,o.padding,ke),o.around)c.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(o.around,o.aroundPoint);else{const Pe=fe>le?Math.min(2,be):Math.max(.5,be),Le=Math.pow(Pe,1-ke),Fe=Cg(m,_e,xe,ke*Le);r.setCenter(Fe.wrap())}if(O){const Pe=c.y.number(le,fe,ke)+zn(0,r.center.lat);r.setZoom(Pe)}},isZooming:O,elevationCenter:ae}}handleFlyTo(r,o){const h=o.zoom!==void 0,m=r.center,_=r.zoom,b=!r.isPaddingEqual(o.padding),T=r.getConstrained(c.N.convert(o.center||o.locationAtOffset),_).center,M=h?+o.zoom:r.zoom+zn(r.center.lat,T.lat),R=r.clone();R.setCenter(T),b&&R.setPadding(o.padding),R.setZoom(M),R.setBearing(o.bearing);const O=new c.P(c.ab(r.centerPoint.x+o.offsetAsPoint.x,0,r.width),c.ab(r.centerPoint.y+o.offsetAsPoint.y,0,r.height));R.setLocationAtPoint(T,O);const U=R.center;Sc(r,U);const $=function(_e,xe,be){const ke=qn(xe),Pe=qn(be),Le=c.aS(ke,Pe),Fe=Math.acos(Le),Ke=Tg(_e);return Fe/(2*Math.PI)*Ke}(r,m,U),K=_+zn(m.lat,0),ee=M+zn(U.lat,0),ae=c.aG(ee-K);let oe;if(typeof o.minZoom=="number"){const _e=+o.minZoom+zn(U.lat,0),xe=Math.min(_e,K,ee)+zn(0,U.lat),be=r.getConstrained(U,xe).zoom+zn(U.lat,0);oe=c.aG(be-K)}const le=c.bk(m.lng,U.lng),fe=c.bk(m.lat,U.lat);return{easeFunc:(_e,xe,be,ke)=>{const Pe=Cg(m,le,fe,be),Le=_e===1?U:Pe;r.setCenter(Le.wrap());const Fe=K+c.a8(xe);r.setZoom(_e===1?M:Fe+zn(0,Le.lat))},scaleOfZoom:ae,targetCenter:U,scaleOfMinZoom:oe,pixelPathLength:$}}static solveVectorScale(r,o,h,m,_){const b=m==="x"?[h[0],h[4],h[8],h[12]]:[h[1],h[5],h[9],h[13]],T=[h[3],h[7],h[11],h[15]],M=r[0]*b[0]+r[1]*b[1]+r[2]*b[2],R=r[0]*T[0]+r[1]*T[1]+r[2]*T[2],O=o[0]*b[0]+o[1]*b[1]+o[2]*b[2],U=o[0]*T[0]+o[1]*T[1]+o[2]*T[2];return O+_*R===M+_*U||T[3]*(M-O)+b[3]*(U-R)+M*U==O*R?null:(O+b[3]-_*U-_*T[3])/(O-M-_*U+_*R)}static getLesserNonNegativeNonNull(r,o){return o!==null&&o>=0&&o<r?o:r}}class nd{constructor(r){this._globe=r,this._mercatorCameraHelper=new Tc,this._verticalPerspectiveCameraHelper=new Di}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,o){return this.currentHelper.handlePanInertia(r,o)}handleMapControlsRollPitchBearingZoom(r,o){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,o)}handleMapControlsPan(r,o,h){this.currentHelper.handleMapControlsPan(r,o,h)}cameraForBoxAndBearing(r,o,h,m,_){return this.currentHelper.cameraForBoxAndBearing(r,o,h,m,_)}handleJumpToCenterZoom(r,o){this.currentHelper.handleJumpToCenterZoom(r,o)}handleEaseTo(r,o){return this.currentHelper.handleEaseTo(r,o)}handleFlyTo(r,o){return this.currentHelper.handleFlyTo(r,o)}}const fl=(y,r)=>c.t(y,r&&r.filter(o=>o.identifier!=="source.canvas")),eo=c.br();class pp extends c.E{constructor(r,o={}){super(),this._rtlPluginLoaded=()=>{for(const h in this.sourceCaches){const m=this.sourceCaches[h].getSource().type;m!=="vector"&&m!=="geojson"||this.sourceCaches[h].reload()}},this.map=r,this.dispatcher=new gt(tr(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(h,m)=>this.getGlyphs(h,m)),this.dispatcher.registerMessageHandler("GI",(h,m)=>this.getImages(h,m)),this.imageManager=new tt,this.imageManager.setEventedParent(this),this.glyphManager=new _t(r._requestManager,o.localIdeographFontFamily),this.lineAtlas=new at(256,512),this.crossTileSymbolIndex=new va,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.bs,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",c.bt()),wn().on(ds,this._rtlPluginLoaded),this.on("data",h=>{if(h.dataType!=="source"||h.sourceDataType!=="metadata")return;const m=this.sourceCaches[h.sourceId];if(!m)return;const _=m.getSource();if(_&&_.vectorLayerIds)for(const b in this._layers){const T=this._layers[b];T.source===_.id&&this._validateLayer(T)}})}loadURL(r,o={},h){this.fire(new c.k("dataloading",{dataType:"style"})),o.validate=typeof o.validate!="boolean"||o.validate;const m=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const _=this._loadStyleRequest;c.h(m,this._loadStyleRequest).then(b=>{this._loadStyleRequest=null,this._load(b.data,o,h)}).catch(b=>{this._loadStyleRequest=null,b&&!_.signal.aborted&&this.fire(new c.j(b))})}loadJSON(r,o={},h){this.fire(new c.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,L.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,o.validate=o.validate!==!1,this._load(r,o,h)}).catch(()=>{})}loadEmpty(){this.fire(new c.k("dataloading",{dataType:"style"})),this._load(eo,{validate:!1})}_load(r,o,h){var m,_;const b=o.transformStyle?o.transformStyle(h,r):r;if(!o.validate||!fl(this,c.u(b))){this._loaded=!0,this.stylesheet=b;for(const T in b.sources)this.addSource(T,b.sources[T],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new Pt(this.stylesheet.light),this._setProjectionInternal(((m=this.stylesheet.projection)===null||m===void 0?void 0:m.type)||"mercator"),this.sky=new Oe(this.stylesheet.sky),this.map.setTerrain((_=this.stylesheet.terrain)!==null&&_!==void 0?_:null),this.fire(new c.k("data",{dataType:"style"})),this.fire(new c.k("style.load"))}}_createLayers(){const r=c.bu(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(o=>o.id),this._layers={},this._serializedLayers=null;for(const o of r){const h=c.bv(o);h.setEventedParent(this,{layer:{id:o.id}}),this._layers[o.id]=h}}_loadSprite(r,o=!1,h=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(_,b,T,M){return c._(this,void 0,void 0,function*(){const R=ce(_),O=T>1?"@2x":"",U={},$={};for(const{id:K,url:ee}of R){const ae=b.transformRequest(Re(ee,O,".json"),"SpriteJSON");U[K]=c.h(ae,M);const oe=b.transformRequest(Re(ee,O,".png"),"SpriteImage");$[K]=de.getImage(oe,M)}return yield Promise.all([...Object.values(U),...Object.values($)]),function(K,ee){return c._(this,void 0,void 0,function*(){const ae={};for(const oe in K){ae[oe]={};const le=L.getImageCanvasContext((yield ee[oe]).data),fe=(yield K[oe]).data;for(const _e in fe){const{width:xe,height:be,x:ke,y:Pe,sdf:Le,pixelRatio:Fe,stretchX:Ke,stretchY:qe,content:$e,textFitWidth:ft,textFitHeight:ut}=fe[_e];ae[oe][_e]={data:null,pixelRatio:Fe,sdf:Le,stretchX:Ke,stretchY:qe,content:$e,textFitWidth:ft,textFitHeight:ut,spriteData:{width:xe,height:be,x:ke,y:Pe,context:le}}}}return ae})}(U,$)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(_=>{if(this._spriteRequest=null,_)for(const b in _){this._spritesImagesIds[b]=[];const T=this._spritesImagesIds[b]?this._spritesImagesIds[b].filter(M=>!(M in _)):[];for(const M of T)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in _[b]){const R=b==="default"?M:`${b}:${M}`;this._spritesImagesIds[b].push(R),R in this.imageManager.images?this.imageManager.updateImage(R,_[b][M],!1):this.imageManager.addImage(R,_[b][M]),o&&(this._changedImages[R]=!0)}}}).catch(_=>{this._spriteRequest=null,m=_,this.fire(new c.j(m))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),o&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"})),h&&h(m)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}_validateLayer(r){const o=this.sourceCaches[r.source];if(!o)return;const h=r.sourceLayer;if(!h)return;const m=o.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(h)===-1)&&this.fire(new c.j(new Error(`Source layer "${h}" does not exist on source "${m.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,o=!1){const h=this._serializedAllLayers();if(!r||r.length===0)return Object.values(o?c.bw(h):h);const m=[];for(const _ of r)if(h[_]){const b=o?c.bw(h[_]):h[_];m.push(b)}return m}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const o=Object.keys(this._layers);for(const h of o){const m=this._layers[h];m.type!=="custom"&&(r[h]=m.serialize())}return r}hasTransitions(){var r,o,h;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((o=this.sky)===null||o===void 0)&&o.hasTransition()||!((h=this.projection)===null||h===void 0)&&h.hasTransition())return!0;for(const m in this.sourceCaches)if(this.sourceCaches[m].hasTransition())return!0;for(const m in this._layers)if(this._layers[m].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const o=this._changed;if(o){const m=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(m.length||_.length)&&this._updateWorkerLayers(m,_);for(const b in this._updatedSources){const T=this._updatedSources[b];if(T==="reload")this._reloadSource(b);else{if(T!=="clear")throw new Error(`Invalid action ${T}`);this._clearSource(b)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const b in this._updatedPaintProps)this._layers[b].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const h={};for(const m in this.sourceCaches){const _=this.sourceCaches[m];h[m]=_.used,_.used=!1}for(const m of this._order){const _=this._layers[m];_.recalculate(r,this._availableImages),!_.isHidden(r.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const m in h){const _=this.sourceCaches[m];!!h[m]!=!!_.used&&_.fire(new c.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,o&&this.fire(new c.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,o){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:o})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,o={}){var h;this._checkLoaded();const m=this.serialize();if(r=o.transformStyle?o.transformStyle(m,r):r,((h=o.validate)===null||h===void 0||h)&&fl(this,c.u(r)))return!1;(r=c.bw(r)).layers=c.bu(r.layers);const _=c.bx(m,r),b=this._getOperationsToPerform(_);if(b.unimplemented.length>0)throw new Error(`Unimplemented: ${b.unimplemented.join(", ")}.`);if(b.operations.length===0)return!1;for(const T of b.operations)T();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const o=[],h=[];for(const m of r)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":o.push(()=>this.addLayer.apply(this,m.args));break;case"removeLayer":o.push(()=>this.removeLayer.apply(this,m.args));break;case"setPaintProperty":o.push(()=>this.setPaintProperty.apply(this,m.args));break;case"setLayoutProperty":o.push(()=>this.setLayoutProperty.apply(this,m.args));break;case"setFilter":o.push(()=>this.setFilter.apply(this,m.args));break;case"addSource":o.push(()=>this.addSource.apply(this,m.args));break;case"removeSource":o.push(()=>this.removeSource.apply(this,m.args));break;case"setLayerZoomRange":o.push(()=>this.setLayerZoomRange.apply(this,m.args));break;case"setLight":o.push(()=>this.setLight.apply(this,m.args));break;case"setGeoJSONSourceData":o.push(()=>this.setGeoJSONSourceData.apply(this,m.args));break;case"setGlyphs":o.push(()=>this.setGlyphs.apply(this,m.args));break;case"setSprite":o.push(()=>this.setSprite.apply(this,m.args));break;case"setTerrain":o.push(()=>this.map.setTerrain.apply(this,m.args));break;case"setSky":o.push(()=>this.setSky.apply(this,m.args));break;case"setProjection":this.setProjection.apply(this,m.args);break;case"setTransition":o.push(()=>{});break;default:h.push(m.command)}return{operations:o,unimplemented:h}}addImage(r,o){if(this.getImage(r))return this.fire(new c.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,o),this._afterImageUpdated(r)}updateImage(r,o){this.imageManager.updateImage(r,o)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new c.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,o,h={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(c.u.source,`sources.${r}`,o,null,h))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const m=this.sourceCaches[r]=new Q(r,o,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:r})),m.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const h in this._layers)if(this._layers[h].source===r)return this.fire(new c.j(new Error(`Source "${r}" cannot be removed while layer "${h}" is using it.`)));const o=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],o.fire(new c.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),o.setEventedParent(null),o.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,o){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const h=this.sourceCaches[r].getSource();if(h.type!=="geojson")throw new Error(`geojsonSource.type is ${h.type}, which is !== 'geojson`);h.setData(o),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,o,h={}){this._checkLoaded();const m=r.id;if(this.getLayer(m))return void this.fire(new c.j(new Error(`Layer "${m}" already exists on this map.`)));let _;if(r.type==="custom"){if(fl(this,c.by(r)))return;_=c.bv(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(m,r.source),r=c.bw(r),r=c.e(r,{source:m})),this._validate(c.u.layer,`layers.${m}`,r,{arrayIndex:-1},h))return;_=c.bv(r),this._validateLayer(_),_.setEventedParent(this,{layer:{id:m}})}const b=o?this._order.indexOf(o):this._order.length;if(o&&b===-1)this.fire(new c.j(new Error(`Cannot add layer "${m}" before non-existing layer "${o}".`)));else{if(this._order.splice(b,0,m),this._layerOrderChanged=!0,this._layers[m]=_,this._removedLayers[m]&&_.source&&_.type!=="custom"){const T=this._removedLayers[m];delete this._removedLayers[m],T.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(r,o){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new c.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===o)return;const h=this._order.indexOf(r);this._order.splice(h,1);const m=o?this._order.indexOf(o):this._order.length;o&&m===-1?this.fire(new c.j(new Error(`Cannot move layer "${r}" before non-existing layer "${o}".`))):(this._order.splice(m,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const o=this._layers[r];if(!o)return void this.fire(new c.j(new Error(`Cannot remove non-existing layer "${r}".`)));o.setEventedParent(null);const h=this._order.indexOf(r);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=o,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],o.onRemove&&o.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,o,h){this._checkLoaded();const m=this.getLayer(r);m?m.minzoom===o&&m.maxzoom===h||(o!=null&&(m.minzoom=o),h!=null&&(m.maxzoom=h),this._updateLayer(m)):this.fire(new c.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,o,h={}){this._checkLoaded();const m=this.getLayer(r);if(m){if(!c.bz(m.filter,o))return o==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(c.u.filter,`layers.${m.id}.filter`,o,null,h)||(m.filter=c.bw(o),this._updateLayer(m)))}else this.fire(new c.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return c.bw(this.getLayer(r).filter)}setLayoutProperty(r,o,h,m={}){this._checkLoaded();const _=this.getLayer(r);_?c.bz(_.getLayoutProperty(o),h)||(_.setLayoutProperty(o,h,m),this._updateLayer(_)):this.fire(new c.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,o){const h=this.getLayer(r);if(h)return h.getLayoutProperty(o);this.fire(new c.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,o,h,m={}){this._checkLoaded();const _=this.getLayer(r);_?c.bz(_.getPaintProperty(o),h)||(_.setPaintProperty(o,h,m)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new c.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,o){return this.getLayer(r).getPaintProperty(o)}setFeatureState(r,o){this._checkLoaded();const h=r.source,m=r.sourceLayer,_=this.sourceCaches[h];if(_===void 0)return void this.fire(new c.j(new Error(`The source '${h}' does not exist in the map's style.`)));const b=_.getSource().type;b==="geojson"&&m?this.fire(new c.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):b!=="vector"||m?(r.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(m,r.id,o)):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,o){this._checkLoaded();const h=r.source,m=this.sourceCaches[h];if(m===void 0)return void this.fire(new c.j(new Error(`The source '${h}' does not exist in the map's style.`)));const _=m.getSource().type,b=_==="vector"?r.sourceLayer:void 0;_!=="vector"||b?o&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new c.j(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(b,r.id,o):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const o=r.source,h=r.sourceLayer,m=this.sourceCaches[o];if(m!==void 0)return m.getSource().type!=="vector"||h?(r.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),m.getFeatureState(h,r.id)):void this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.j(new Error(`The source '${o}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=c.bA(this.sourceCaches,_=>_.serialize()),o=this._serializeByIds(this._order,!0),h=this.map.getTerrain()||void 0,m=this.stylesheet;return c.bB({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,projection:m.projection,sources:r,layers:o,terrain:h},_=>_!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const o=b=>this._layers[b].type==="fill-extrusion",h={},m=[];for(let b=this._order.length-1;b>=0;b--){const T=this._order[b];if(o(T)){h[T]=b;for(const M of r){const R=M[T];if(R)for(const O of R)m.push(O)}}}m.sort((b,T)=>T.intersectionZ-b.intersectionZ);const _=[];for(let b=this._order.length-1;b>=0;b--){const T=this._order[b];if(o(T))for(let M=m.length-1;M>=0;M--){const R=m[M].feature;if(h[R.layer.id]<b)break;_.push(R),m.pop()}else for(const M of r){const R=M[T];if(R)for(const O of R)_.push(O.feature)}}return _}queryRenderedFeatures(r,o,h){o&&o.filter&&this._validate(c.u.filter,"queryRenderedFeatures.filter",o.filter,null,o);const m={};if(o&&o.layers){if(!(Array.isArray(o.layers)||o.layers instanceof Set))return this.fire(new c.j(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const R of o.layers){const O=this._layers[R];if(!O)return this.fire(new c.j(new Error(`The layer '${R}' does not exist in the map's style and cannot be queried for features.`))),[];m[O.source]=!0}}const _=[];o.availableImages=this._availableImages;const b=this._serializedAllLayers(),T=o.layers instanceof Set?o.layers:Array.isArray(o.layers)?new Set(o.layers):null,M=Object.assign(Object.assign({},o),{layers:T});for(const R in this.sourceCaches)o.layers&&!m[R]||_.push(ir(this.sourceCaches[R],this._layers,b,r,M,h));return this.placement&&_.push(function(R,O,U,$,K,ee,ae){const oe={},le=ee.queryRenderedSymbols($),fe=[];for(const _e of Object.keys(le).map(Number))fe.push(ae[_e]);fe.sort(At);for(const _e of fe){const xe=_e.featureIndex.lookupSymbolFeatures(le[_e.bucketInstanceId],O,_e.bucketIndex,_e.sourceLayerIndex,K.filter,K.layers,K.availableImages,R);for(const be in xe){const ke=oe[be]=oe[be]||[],Pe=xe[be];Pe.sort((Le,Fe)=>{const Ke=_e.featureSortOrder;if(Ke){const qe=Ke.indexOf(Le.featureIndex);return Ke.indexOf(Fe.featureIndex)-qe}return Fe.featureIndex-Le.featureIndex});for(const Le of Pe)ke.push(Le)}}return function(_e,xe,be){for(const ke in _e)for(const Pe of _e[ke])Zt(Pe,be[xe[ke].source]);return _e}(oe,R,U)}(this._layers,b,this.sourceCaches,r,M,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(r,o){o&&o.filter&&this._validate(c.u.filter,"querySourceFeatures.filter",o.filter,null,o);const h=this.sourceCaches[r];return h?function(m,_){const b=m.getRenderableIds().map(R=>m.getTileByID(R)),T=[],M={};for(let R=0;R<b.length;R++){const O=b[R],U=O.tileID.canonical.key;M[U]||(M[U]=!0,O.querySourceFeatures(T,_))}return T}(h,o):[]}getLight(){return this.light.getLight()}setLight(r,o={}){this._checkLoaded();const h=this.light.getLight();let m=!1;for(const b in r)if(!c.bz(r[b],h[b])){m=!0;break}if(!m)return;const _={now:L.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,o),this.light.updateTransitions(_)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,o={}){this._checkLoaded();const h=this.getSky();let m=!1;if(!r&&!h)return;if(r&&!h)m=!0;else if(!r&&h)m=!0;else for(const b in r)if(!c.bz(r[b],h[b])){m=!0;break}if(!m)return;const _={now:L.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,o),this.sky.updateTransitions(_)}_setProjectionInternal(r){const o=function(h){if(Array.isArray(h)){const m=new Sg({type:h});return{projection:m,transform:new pl,cameraHelper:new nd(m)}}switch(h){case"mercator":return{projection:new vi,transform:new ui,cameraHelper:new Tc};case"globe":{const m=new Sg({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:m,transform:new pl,cameraHelper:new nd(m)}}case"vertical-perspective":return{projection:new td,transform:new Sa,cameraHelper:new Di};default:return c.w(`Unknown projection name: ${h}. Falling back to mercator projection.`),{projection:new vi,transform:new ui,cameraHelper:new Tc}}}(r);this.projection=o.projection,this.map.migrateProjection(o.transform,o.cameraHelper);for(const h in this.sourceCaches)this.sourceCaches[h].reload()}_validate(r,o,h,m,_={}){return(!_||_.validate!==!1)&&fl(this,r.call(c.u,c.e({key:o,style:this.serialize(),value:h,styleSpec:c.v},m)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),wn().off(ds,this._rtlPluginLoaded);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.sourceCaches){const h=this.sourceCaches[o];h.setEventedParent(null),h.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const o in this.sourceCaches)this.sourceCaches[o].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,o,h,m,_=!1){let b=!1,T=!1;const M={};for(const R of this._order){const O=this._layers[R];if(O.type!=="symbol")continue;if(!M[O.source]){const $=this.sourceCaches[O.source];M[O.source]=$.getRenderableIds(!0).map(K=>$.getTileByID(K)).sort((K,ee)=>ee.tileID.overscaledZ-K.tileID.overscaledZ||(K.tileID.isLessThan(ee.tileID)?-1:1))}const U=this.crossTileSymbolIndex.addLayer(O,M[O.source],r.center.lng);b=b||U}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||h===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(L.now(),r.zoom))&&(this.pauseablePlacement=new Ku(r,this.map.terrain,this._order,_,o,h,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(L.now()),T=!0),b&&this.pauseablePlacement.placement.setStale()),T||b)for(const R of this._order){const O=this._layers[R];O.type==="symbol"&&this.placement.updateLayerOpacities(O,M[O.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(L.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,o){return c._(this,void 0,void 0,function*(){const h=yield this.imageManager.getImages(o.icons);this._updateTilesForChangedImages();const m=this.sourceCaches[o.source];return m&&m.setDependencies(o.tileID.key,o.type,o.icons),h})}getGlyphs(r,o){return c._(this,void 0,void 0,function*(){const h=yield this.glyphManager.getGlyphs(o.stacks),m=this.sourceCaches[o.source];return m&&m.setDependencies(o.tileID.key,o.type,[""]),h})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,o={}){this._checkLoaded(),r&&this._validate(c.u.glyphs,"glyphs",r,null,o)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,o,h={},m){this._checkLoaded();const _=[{id:r,url:o}],b=[...ce(this.stylesheet.sprite),..._];this._validate(c.u.sprite,"sprite",b,null,h)||(this.stylesheet.sprite=b,this._loadSprite(_,!0,m))}removeSprite(r){this._checkLoaded();const o=ce(this.stylesheet.sprite);if(o.find(h=>h.id===r)){if(this._spritesImagesIds[r])for(const h of this._spritesImagesIds[r])this.imageManager.removeImage(h),this._changedImages[h]=!0;o.splice(o.findIndex(h=>h.id===r),1),this.stylesheet.sprite=o.length>0?o:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}else this.fire(new c.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return ce(this.stylesheet.sprite)}setSprite(r,o={},h){this._checkLoaded(),r&&this._validate(c.u.sprite,"sprite",r,null,o)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,h):(this._unloadSprite(),h&&h(null)))}}var fp=c.aA([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ic{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,o,h,m,_,b,T,M,R){this.context=r;let O=this.boundPaintVertexBuffers.length!==m.length;for(let U=0;!O&&U<m.length;U++)this.boundPaintVertexBuffers[U]!==m[U]&&(O=!0);!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==h||O||this.boundIndexBuffer!==_||this.boundVertexOffset!==b||this.boundDynamicVertexBuffer!==T||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==R?this.freshBind(o,h,m,_,b,T,M,R):(r.bindVertexArray.set(this.vao),T&&T.bind(),_&&_.dynamicDraw&&_.bind(),M&&M.bind(),R&&R.bind())}freshBind(r,o,h,m,_,b,T,M){const R=r.numAttributes,O=this.context,U=O.gl;this.vao&&this.destroy(),this.vao=O.createVertexArray(),O.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=m,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=b,this.boundDynamicVertexBuffer2=T,this.boundDynamicVertexBuffer3=M,o.enableAttributes(U,r);for(const $ of h)$.enableAttributes(U,r);b&&b.enableAttributes(U,r),T&&T.enableAttributes(U,r),M&&M.enableAttributes(U,r),o.bind(),o.setVertexAttribPointers(U,r,_);for(const $ of h)$.bind(),$.setVertexAttribPointers(U,r,_);b&&(b.bind(),b.setVertexAttribPointers(U,r,_)),m&&m.bind(),T&&(T.bind(),T.setVertexAttribPointers(U,r,_)),M&&(M.bind(),M.setVertexAttribPointers(U,r,_)),O.currentNumAttributes=R}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Rc=(y,r,o,h,m)=>({u_texture:0,u_ele_delta:y,u_fog_matrix:r,u_fog_color:o?o.properties.get("fog-color"):c.b4.white,u_fog_ground_blend:o?o.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:m?0:o?o.calculateFogBlendOpacity(h):0,u_horizon_color:o?o.properties.get("horizon-color"):c.b4.white,u_horizon_fog_blend:o?o.properties.get("horizon-fog-blend"):1,u_is_globe_mode:m?1:0}),I0={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Ta(y){const r=[];for(let o=0;o<y.length;o++){if(y[o]===null)continue;const h=y[o].split(" ");r.push(h.pop())}return r}class R0{constructor(r,o,h,m,_,b,T,M){const R=r.gl;this.program=R.createProgram();const O=Ta(o.staticAttributes),U=h?h.getBinderAttributes():[],$=O.concat(U),K=Qs.prelude.staticUniforms?Ta(Qs.prelude.staticUniforms):[],ee=T.staticUniforms?Ta(T.staticUniforms):[],ae=o.staticUniforms?Ta(o.staticUniforms):[],oe=h?h.getBinderUniforms():[],le=K.concat(ee).concat(ae).concat(oe),fe=[];for(const Fe of le)fe.indexOf(Fe)<0&&fe.push(Fe);const _e=h?h.defines():[];ks(R)&&_e.unshift("#version 300 es"),_&&_e.push("#define OVERDRAW_INSPECTOR;"),b&&_e.push("#define TERRAIN3D;"),M&&_e.push(M);let xe=_e.concat(Qs.prelude.fragmentSource,T.fragmentSource,o.fragmentSource).join(`
`),be=_e.concat(Qs.prelude.vertexSource,T.vertexSource,o.vertexSource).join(`
`);ks(R)||(xe=function(Fe){return Fe.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(xe),be=function(Fe){return Fe.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(be));const ke=R.createShader(R.FRAGMENT_SHADER);if(R.isContextLost())return void(this.failedToCreate=!0);if(R.shaderSource(ke,xe),R.compileShader(ke),!R.getShaderParameter(ke,R.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${R.getShaderInfoLog(ke)}`);R.attachShader(this.program,ke);const Pe=R.createShader(R.VERTEX_SHADER);if(R.isContextLost())return void(this.failedToCreate=!0);if(R.shaderSource(Pe,be),R.compileShader(Pe),!R.getShaderParameter(Pe,R.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${R.getShaderInfoLog(Pe)}`);R.attachShader(this.program,Pe),this.attributes={};const Le={};this.numAttributes=$.length;for(let Fe=0;Fe<this.numAttributes;Fe++)$[Fe]&&(R.bindAttribLocation(this.program,Fe,$[Fe]),this.attributes[$[Fe]]=Fe);if(R.linkProgram(this.program),!R.getProgramParameter(this.program,R.LINK_STATUS))throw new Error(`Program failed to link: ${R.getProgramInfoLog(this.program)}`);R.deleteShader(Pe),R.deleteShader(ke);for(let Fe=0;Fe<fe.length;Fe++){const Ke=fe[Fe];if(Ke&&!Le[Ke]){const qe=R.getUniformLocation(this.program,Ke);qe&&(Le[Ke]=qe)}}this.fixedUniforms=m(r,Le),this.terrainUniforms=((Fe,Ke)=>({u_depth:new c.bC(Fe,Ke.u_depth),u_terrain:new c.bC(Fe,Ke.u_terrain),u_terrain_dim:new c.b5(Fe,Ke.u_terrain_dim),u_terrain_matrix:new c.bD(Fe,Ke.u_terrain_matrix),u_terrain_unpack:new c.bE(Fe,Ke.u_terrain_unpack),u_terrain_exaggeration:new c.b5(Fe,Ke.u_terrain_exaggeration)}))(r,Le),this.projectionUniforms=((Fe,Ke)=>({u_projection_matrix:new c.bD(Fe,Ke.u_projection_matrix),u_projection_tile_mercator_coords:new c.bE(Fe,Ke.u_projection_tile_mercator_coords),u_projection_clipping_plane:new c.bE(Fe,Ke.u_projection_clipping_plane),u_projection_transition:new c.b5(Fe,Ke.u_projection_transition),u_projection_fallback_matrix:new c.bD(Fe,Ke.u_projection_fallback_matrix)}))(r,Le),this.binderUniforms=h?h.getUniforms(r,Le):[]}draw(r,o,h,m,_,b,T,M,R,O,U,$,K,ee,ae,oe,le,fe,_e){const xe=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(h),r.setStencilMode(m),r.setColorMode(_),r.setCullFace(b),M){r.activeTexture.set(xe.TEXTURE2),xe.bindTexture(xe.TEXTURE_2D,M.depthTexture),r.activeTexture.set(xe.TEXTURE3),xe.bindTexture(xe.TEXTURE_2D,M.texture);for(const ke in this.terrainUniforms)this.terrainUniforms[ke].set(M[ke])}if(R)for(const ke in R)this.projectionUniforms[I0[ke]].set(R[ke]);if(T)for(const ke in this.fixedUniforms)this.fixedUniforms[ke].set(T[ke]);oe&&oe.setUniforms(r,this.binderUniforms,ee,{zoom:ae});let be=0;switch(o){case xe.LINES:be=2;break;case xe.TRIANGLES:be=3;break;case xe.LINE_STRIP:be=1}for(const ke of K.get()){const Pe=ke.vaos||(ke.vaos={});(Pe[O]||(Pe[O]=new Ic)).bind(r,this,U,oe?oe.getPaintVertexBuffers():[],$,ke.vertexOffset,le,fe,_e),xe.drawElements(o,ke.primitiveLength*be,xe.UNSIGNED_SHORT,ke.primitiveOffset*be*2)}}}function Ca(y,r,o){const h=1/c.at(o,1,r.transform.tileZoom),m=Math.pow(2,o.tileID.overscaledZ),_=o.tileSize*Math.pow(2,r.transform.tileZoom)/m,b=_*(o.tileID.canonical.x+o.tileID.wrap*m),T=_*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[h,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[b>>16,T>>16],u_pixel_coord_lower:[65535&b,65535&T]}}const Pg=(y,r,o,h)=>{const m=y.style.light,_=m.properties.get("position"),b=[_.x,_.y,_.z],T=c.bI();m.properties.get("anchor")==="viewport"&&c.bJ(T,y.transform.bearingInRadians),c.bK(b,b,T);const M=y.transform.transformLightDirection(b),R=m.properties.get("color");return{u_lightpos:b,u_lightpos_globe:M,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[R.r,R.g,R.b],u_vertical_gradient:+r,u_opacity:o,u_fill_translate:h}},Eg=(y,r,o,h,m,_,b)=>c.e(Pg(y,r,o,h),Ca(_,y,b),{u_height_factor:-Math.pow(2,m.overscaledZ)/b.tileSize/8}),Mg=(y,r,o,h)=>c.e(Ca(r,y,o),{u_fill_translate:h}),kg=(y,r)=>({u_world:y,u_fill_translate:r}),mp=(y,r,o,h,m)=>c.e(Mg(y,r,o,m),{u_world:h}),Ig=(y,r,o,h,m)=>{const _=y.transform;let b,T,M=0;if(o.paint.get("circle-pitch-alignment")==="map"){const R=c.at(r,1,_.zoom);b=!0,T=[R,R],M=R/(c.X*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*m}else b=!1,T=_.pixelsToGLUnits;return{u_camera_to_center_distance:_.cameraToCenterDistance,u_scale_with_map:+(o.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+b,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:T,u_globe_extrude_scale:M,u_translate:h}},Rg=y=>({u_pixel_extrude_scale:[1/y.width,1/y.height]}),Ag=y=>({u_viewport_size:[y.width,y.height]}),gp=(y,r=1)=>({u_color:y,u_overlay:0,u_overlay_scale:r}),Wo=(y,r,o,h)=>{const m=c.at(y,1,r)/(c.X*Math.pow(2,y.tileID.overscaledZ))*2*Math.PI*h;return{u_extrude_scale:c.at(y,1,r),u_intensity:o,u_globe_extrude_scale:m}},yp=(y,r,o,h)=>{const m=c.H();c.bL(m,0,y.width,y.height,0,0,1);const _=y.context.gl;return{u_matrix:m,u_world:[_.drawingBufferWidth,_.drawingBufferHeight],u_image:o,u_color_ramp:h,u_opacity:r.paint.get("heatmap-opacity")}},Dg=(y,r,o)=>{const h=o.paint.get("hillshade-shadow-color"),m=o.paint.get("hillshade-highlight-color"),_=o.paint.get("hillshade-accent-color");let b=o.paint.get("hillshade-illumination-direction")*(Math.PI/180);return o.paint.get("hillshade-illumination-anchor")==="viewport"&&(b+=y.transform.bearingInRadians),{u_image:0,u_latrange:A0(0,r.tileID),u_light:[o.paint.get("hillshade-exaggeration"),b],u_shadow:h,u_highlight:m,u_accent:_}},Ac=(y,r)=>{const o=r.stride,h=c.H();return c.bL(h,0,c.X,-8192,0,0,1),c.J(h,h,[0,-8192,0]),{u_matrix:h,u_image:1,u_dimension:[o,o],u_zoom:y.overscaledZ,u_unpack:r.getUnpackVector()}};function A0(y,r){const o=Math.pow(2,r.canonical.z),h=r.canonical.y;return[new c.Y(0,h/o).toLngLat().lat,new c.Y(0,(h+1)/o).toLngLat().lat]}const ml=(y,r,o,h)=>{const m=y.transform;return{u_translation:vp(y,r,o),u_ratio:h/c.at(r,1,m.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},D0=(y,r,o,h,m)=>c.e(ml(y,r,o,h),{u_image:0,u_image_height:m}),z0=(y,r,o,h,m)=>{const _=y.transform,b=_p(r,_);return{u_translation:vp(y,r,o),u_texsize:r.imageAtlasTexture.size,u_ratio:h/c.at(r,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[b,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},zg=(y,r,o,h,m,_)=>{const b=y.lineAtlas,T=_p(r,y.transform),M=o.layout.get("line-cap")==="round",R=b.getDash(m.from,M),O=b.getDash(m.to,M),U=R.width*_.fromScale,$=O.width*_.toScale;return c.e(ml(y,r,o,h),{u_patternscale_a:[T/U,-R.height/2],u_patternscale_b:[T/$,-O.height/2],u_sdfgamma:b.width/(256*Math.min(U,$)*y.pixelRatio)/2,u_image:0,u_tex_y_a:R.y,u_tex_y_b:O.y,u_mix:_.t})};function _p(y,r){return 1/c.at(y,1,r.tileZoom)}function vp(y,r,o){return c.au(y.transform,r,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}const xp=(y,r,o,h,m)=>{return{u_tl_parent:y,u_scale_parent:r,u_buffer_scale:1,u_fade_t:o.mix,u_opacity:o.opacity*h.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:h.paint.get("raster-brightness-min"),u_brightness_high:h.paint.get("raster-brightness-max"),u_saturation_factor:(b=h.paint.get("raster-saturation"),b>0?1-1/(1.001-b):-b),u_contrast_factor:(_=h.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:jg(h.paint.get("raster-hue-rotate")),u_coords_top:[m[0].x,m[0].y,m[1].x,m[1].y],u_coords_bottom:[m[3].x,m[3].y,m[2].x,m[2].y]};var _,b};function jg(y){y*=Math.PI/180;const r=Math.sin(y),o=Math.cos(y);return[(2*o+1)/3,(-Math.sqrt(3)*r-o+1)/3,(Math.sqrt(3)*r-o+1)/3]}const Dc=(y,r,o,h,m,_,b,T,M,R,O,U,$)=>{const K=b.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:K.cameraToCenterDistance,u_pitch:K.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:K.width/K.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_label_plane_matrix:T,u_coord_matrix:M,u_is_text:+O,u_pitch_with_map:+h,u_is_along_line:m,u_is_variable_anchor:_,u_texsize:U,u_texture:0,u_translation:R,u_pitched_scale:$}},to=(y,r,o,h,m,_,b,T,M,R,O,U,$,K)=>{const ee=b.transform;return c.e(Dc(y,r,o,h,m,_,b,T,M,R,O,U,K),{u_gamma_scale:h?Math.cos(ee.pitch*Math.PI/180)*ee.cameraToCenterDistance:1,u_device_pixel_ratio:b.pixelRatio,u_is_halo:1})},bp=(y,r,o,h,m,_,b,T,M,R,O,U,$)=>c.e(to(y,r,o,h,m,_,b,T,M,R,!0,O,0,$),{u_texsize_icon:U,u_texture_icon:1}),wp=(y,r)=>({u_opacity:y,u_color:r}),Sp=(y,r,o,h,m)=>c.e(function(_,b,T,M){const R=T.imageManager.getPattern(_.from.toString()),O=T.imageManager.getPattern(_.to.toString()),{width:U,height:$}=T.imageManager.getPixelSize(),K=Math.pow(2,M.tileID.overscaledZ),ee=M.tileSize*Math.pow(2,T.transform.tileZoom)/K,ae=ee*(M.tileID.canonical.x+M.tileID.wrap*K),oe=ee*M.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:O.tl,u_pattern_br_b:O.br,u_texsize:[U,$],u_mix:b.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:O.displaySize,u_scale_a:b.fromScale,u_scale_b:b.toScale,u_tile_units_to_pixels:1/c.at(M,1,T.transform.tileZoom),u_pixel_coord_upper:[ae>>16,oe>>16],u_pixel_coord_lower:[65535&ae,65535&oe]}}(o,m,r,h),{u_opacity:y}),Tp=(y,r)=>{},Cp={fillExtrusion:(y,r)=>({u_lightpos:new c.bG(y,r.u_lightpos),u_lightpos_globe:new c.bG(y,r.u_lightpos_globe),u_lightintensity:new c.b5(y,r.u_lightintensity),u_lightcolor:new c.bG(y,r.u_lightcolor),u_vertical_gradient:new c.b5(y,r.u_vertical_gradient),u_opacity:new c.b5(y,r.u_opacity),u_fill_translate:new c.bH(y,r.u_fill_translate)}),fillExtrusionPattern:(y,r)=>({u_lightpos:new c.bG(y,r.u_lightpos),u_lightpos_globe:new c.bG(y,r.u_lightpos_globe),u_lightintensity:new c.b5(y,r.u_lightintensity),u_lightcolor:new c.bG(y,r.u_lightcolor),u_vertical_gradient:new c.b5(y,r.u_vertical_gradient),u_height_factor:new c.b5(y,r.u_height_factor),u_opacity:new c.b5(y,r.u_opacity),u_fill_translate:new c.bH(y,r.u_fill_translate),u_image:new c.bC(y,r.u_image),u_texsize:new c.bH(y,r.u_texsize),u_pixel_coord_upper:new c.bH(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new c.bH(y,r.u_pixel_coord_lower),u_scale:new c.bG(y,r.u_scale),u_fade:new c.b5(y,r.u_fade)}),fill:(y,r)=>({u_fill_translate:new c.bH(y,r.u_fill_translate)}),fillPattern:(y,r)=>({u_image:new c.bC(y,r.u_image),u_texsize:new c.bH(y,r.u_texsize),u_pixel_coord_upper:new c.bH(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new c.bH(y,r.u_pixel_coord_lower),u_scale:new c.bG(y,r.u_scale),u_fade:new c.b5(y,r.u_fade),u_fill_translate:new c.bH(y,r.u_fill_translate)}),fillOutline:(y,r)=>({u_world:new c.bH(y,r.u_world),u_fill_translate:new c.bH(y,r.u_fill_translate)}),fillOutlinePattern:(y,r)=>({u_world:new c.bH(y,r.u_world),u_image:new c.bC(y,r.u_image),u_texsize:new c.bH(y,r.u_texsize),u_pixel_coord_upper:new c.bH(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new c.bH(y,r.u_pixel_coord_lower),u_scale:new c.bG(y,r.u_scale),u_fade:new c.b5(y,r.u_fade),u_fill_translate:new c.bH(y,r.u_fill_translate)}),circle:(y,r)=>({u_camera_to_center_distance:new c.b5(y,r.u_camera_to_center_distance),u_scale_with_map:new c.bC(y,r.u_scale_with_map),u_pitch_with_map:new c.bC(y,r.u_pitch_with_map),u_extrude_scale:new c.bH(y,r.u_extrude_scale),u_device_pixel_ratio:new c.b5(y,r.u_device_pixel_ratio),u_globe_extrude_scale:new c.b5(y,r.u_globe_extrude_scale),u_translate:new c.bH(y,r.u_translate)}),collisionBox:(y,r)=>({u_pixel_extrude_scale:new c.bH(y,r.u_pixel_extrude_scale)}),collisionCircle:(y,r)=>({u_viewport_size:new c.bH(y,r.u_viewport_size)}),debug:(y,r)=>({u_color:new c.bF(y,r.u_color),u_overlay:new c.bC(y,r.u_overlay),u_overlay_scale:new c.b5(y,r.u_overlay_scale)}),depth:Tp,clippingMask:Tp,heatmap:(y,r)=>({u_extrude_scale:new c.b5(y,r.u_extrude_scale),u_intensity:new c.b5(y,r.u_intensity),u_globe_extrude_scale:new c.b5(y,r.u_globe_extrude_scale)}),heatmapTexture:(y,r)=>({u_matrix:new c.bD(y,r.u_matrix),u_world:new c.bH(y,r.u_world),u_image:new c.bC(y,r.u_image),u_color_ramp:new c.bC(y,r.u_color_ramp),u_opacity:new c.b5(y,r.u_opacity)}),hillshade:(y,r)=>({u_image:new c.bC(y,r.u_image),u_latrange:new c.bH(y,r.u_latrange),u_light:new c.bH(y,r.u_light),u_shadow:new c.bF(y,r.u_shadow),u_highlight:new c.bF(y,r.u_highlight),u_accent:new c.bF(y,r.u_accent)}),hillshadePrepare:(y,r)=>({u_matrix:new c.bD(y,r.u_matrix),u_image:new c.bC(y,r.u_image),u_dimension:new c.bH(y,r.u_dimension),u_zoom:new c.b5(y,r.u_zoom),u_unpack:new c.bE(y,r.u_unpack)}),line:(y,r)=>({u_translation:new c.bH(y,r.u_translation),u_ratio:new c.b5(y,r.u_ratio),u_device_pixel_ratio:new c.b5(y,r.u_device_pixel_ratio),u_units_to_pixels:new c.bH(y,r.u_units_to_pixels)}),lineGradient:(y,r)=>({u_translation:new c.bH(y,r.u_translation),u_ratio:new c.b5(y,r.u_ratio),u_device_pixel_ratio:new c.b5(y,r.u_device_pixel_ratio),u_units_to_pixels:new c.bH(y,r.u_units_to_pixels),u_image:new c.bC(y,r.u_image),u_image_height:new c.b5(y,r.u_image_height)}),linePattern:(y,r)=>({u_translation:new c.bH(y,r.u_translation),u_texsize:new c.bH(y,r.u_texsize),u_ratio:new c.b5(y,r.u_ratio),u_device_pixel_ratio:new c.b5(y,r.u_device_pixel_ratio),u_image:new c.bC(y,r.u_image),u_units_to_pixels:new c.bH(y,r.u_units_to_pixels),u_scale:new c.bG(y,r.u_scale),u_fade:new c.b5(y,r.u_fade)}),lineSDF:(y,r)=>({u_translation:new c.bH(y,r.u_translation),u_ratio:new c.b5(y,r.u_ratio),u_device_pixel_ratio:new c.b5(y,r.u_device_pixel_ratio),u_units_to_pixels:new c.bH(y,r.u_units_to_pixels),u_patternscale_a:new c.bH(y,r.u_patternscale_a),u_patternscale_b:new c.bH(y,r.u_patternscale_b),u_sdfgamma:new c.b5(y,r.u_sdfgamma),u_image:new c.bC(y,r.u_image),u_tex_y_a:new c.b5(y,r.u_tex_y_a),u_tex_y_b:new c.b5(y,r.u_tex_y_b),u_mix:new c.b5(y,r.u_mix)}),raster:(y,r)=>({u_tl_parent:new c.bH(y,r.u_tl_parent),u_scale_parent:new c.b5(y,r.u_scale_parent),u_buffer_scale:new c.b5(y,r.u_buffer_scale),u_fade_t:new c.b5(y,r.u_fade_t),u_opacity:new c.b5(y,r.u_opacity),u_image0:new c.bC(y,r.u_image0),u_image1:new c.bC(y,r.u_image1),u_brightness_low:new c.b5(y,r.u_brightness_low),u_brightness_high:new c.b5(y,r.u_brightness_high),u_saturation_factor:new c.b5(y,r.u_saturation_factor),u_contrast_factor:new c.b5(y,r.u_contrast_factor),u_spin_weights:new c.bG(y,r.u_spin_weights),u_coords_top:new c.bE(y,r.u_coords_top),u_coords_bottom:new c.bE(y,r.u_coords_bottom)}),symbolIcon:(y,r)=>({u_is_size_zoom_constant:new c.bC(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new c.bC(y,r.u_is_size_feature_constant),u_size_t:new c.b5(y,r.u_size_t),u_size:new c.b5(y,r.u_size),u_camera_to_center_distance:new c.b5(y,r.u_camera_to_center_distance),u_pitch:new c.b5(y,r.u_pitch),u_rotate_symbol:new c.bC(y,r.u_rotate_symbol),u_aspect_ratio:new c.b5(y,r.u_aspect_ratio),u_fade_change:new c.b5(y,r.u_fade_change),u_label_plane_matrix:new c.bD(y,r.u_label_plane_matrix),u_coord_matrix:new c.bD(y,r.u_coord_matrix),u_is_text:new c.bC(y,r.u_is_text),u_pitch_with_map:new c.bC(y,r.u_pitch_with_map),u_is_along_line:new c.bC(y,r.u_is_along_line),u_is_variable_anchor:new c.bC(y,r.u_is_variable_anchor),u_texsize:new c.bH(y,r.u_texsize),u_texture:new c.bC(y,r.u_texture),u_translation:new c.bH(y,r.u_translation),u_pitched_scale:new c.b5(y,r.u_pitched_scale)}),symbolSDF:(y,r)=>({u_is_size_zoom_constant:new c.bC(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new c.bC(y,r.u_is_size_feature_constant),u_size_t:new c.b5(y,r.u_size_t),u_size:new c.b5(y,r.u_size),u_camera_to_center_distance:new c.b5(y,r.u_camera_to_center_distance),u_pitch:new c.b5(y,r.u_pitch),u_rotate_symbol:new c.bC(y,r.u_rotate_symbol),u_aspect_ratio:new c.b5(y,r.u_aspect_ratio),u_fade_change:new c.b5(y,r.u_fade_change),u_label_plane_matrix:new c.bD(y,r.u_label_plane_matrix),u_coord_matrix:new c.bD(y,r.u_coord_matrix),u_is_text:new c.bC(y,r.u_is_text),u_pitch_with_map:new c.bC(y,r.u_pitch_with_map),u_is_along_line:new c.bC(y,r.u_is_along_line),u_is_variable_anchor:new c.bC(y,r.u_is_variable_anchor),u_texsize:new c.bH(y,r.u_texsize),u_texture:new c.bC(y,r.u_texture),u_gamma_scale:new c.b5(y,r.u_gamma_scale),u_device_pixel_ratio:new c.b5(y,r.u_device_pixel_ratio),u_is_halo:new c.bC(y,r.u_is_halo),u_translation:new c.bH(y,r.u_translation),u_pitched_scale:new c.b5(y,r.u_pitched_scale)}),symbolTextAndIcon:(y,r)=>({u_is_size_zoom_constant:new c.bC(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new c.bC(y,r.u_is_size_feature_constant),u_size_t:new c.b5(y,r.u_size_t),u_size:new c.b5(y,r.u_size),u_camera_to_center_distance:new c.b5(y,r.u_camera_to_center_distance),u_pitch:new c.b5(y,r.u_pitch),u_rotate_symbol:new c.bC(y,r.u_rotate_symbol),u_aspect_ratio:new c.b5(y,r.u_aspect_ratio),u_fade_change:new c.b5(y,r.u_fade_change),u_label_plane_matrix:new c.bD(y,r.u_label_plane_matrix),u_coord_matrix:new c.bD(y,r.u_coord_matrix),u_is_text:new c.bC(y,r.u_is_text),u_pitch_with_map:new c.bC(y,r.u_pitch_with_map),u_is_along_line:new c.bC(y,r.u_is_along_line),u_is_variable_anchor:new c.bC(y,r.u_is_variable_anchor),u_texsize:new c.bH(y,r.u_texsize),u_texsize_icon:new c.bH(y,r.u_texsize_icon),u_texture:new c.bC(y,r.u_texture),u_texture_icon:new c.bC(y,r.u_texture_icon),u_gamma_scale:new c.b5(y,r.u_gamma_scale),u_device_pixel_ratio:new c.b5(y,r.u_device_pixel_ratio),u_is_halo:new c.bC(y,r.u_is_halo),u_translation:new c.bH(y,r.u_translation),u_pitched_scale:new c.b5(y,r.u_pitched_scale)}),background:(y,r)=>({u_opacity:new c.b5(y,r.u_opacity),u_color:new c.bF(y,r.u_color)}),backgroundPattern:(y,r)=>({u_opacity:new c.b5(y,r.u_opacity),u_image:new c.bC(y,r.u_image),u_pattern_tl_a:new c.bH(y,r.u_pattern_tl_a),u_pattern_br_a:new c.bH(y,r.u_pattern_br_a),u_pattern_tl_b:new c.bH(y,r.u_pattern_tl_b),u_pattern_br_b:new c.bH(y,r.u_pattern_br_b),u_texsize:new c.bH(y,r.u_texsize),u_mix:new c.b5(y,r.u_mix),u_pattern_size_a:new c.bH(y,r.u_pattern_size_a),u_pattern_size_b:new c.bH(y,r.u_pattern_size_b),u_scale_a:new c.b5(y,r.u_scale_a),u_scale_b:new c.b5(y,r.u_scale_b),u_pixel_coord_upper:new c.bH(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new c.bH(y,r.u_pixel_coord_lower),u_tile_units_to_pixels:new c.b5(y,r.u_tile_units_to_pixels)}),terrain:(y,r)=>({u_texture:new c.bC(y,r.u_texture),u_ele_delta:new c.b5(y,r.u_ele_delta),u_fog_matrix:new c.bD(y,r.u_fog_matrix),u_fog_color:new c.bF(y,r.u_fog_color),u_fog_ground_blend:new c.b5(y,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new c.b5(y,r.u_fog_ground_blend_opacity),u_horizon_color:new c.bF(y,r.u_horizon_color),u_horizon_fog_blend:new c.b5(y,r.u_horizon_fog_blend),u_is_globe_mode:new c.b5(y,r.u_is_globe_mode)}),terrainDepth:(y,r)=>({u_ele_delta:new c.b5(y,r.u_ele_delta)}),terrainCoords:(y,r)=>({u_texture:new c.bC(y,r.u_texture),u_terrain_coords_id:new c.b5(y,r.u_terrain_coords_id),u_ele_delta:new c.b5(y,r.u_ele_delta)}),projectionErrorMeasurement:(y,r)=>({u_input:new c.b5(y,r.u_input),u_output_expected:new c.b5(y,r.u_output_expected)}),atmosphere:(y,r)=>({u_sun_pos:new c.bG(y,r.u_sun_pos),u_atmosphere_blend:new c.b5(y,r.u_atmosphere_blend),u_globe_position:new c.bG(y,r.u_globe_position),u_globe_radius:new c.b5(y,r.u_globe_radius),u_inv_proj_matrix:new c.bD(y,r.u_inv_proj_matrix)}),sky:(y,r)=>({u_sky_color:new c.bF(y,r.u_sky_color),u_horizon_color:new c.bF(y,r.u_horizon_color),u_horizon:new c.bH(y,r.u_horizon),u_horizon_normal:new c.bH(y,r.u_horizon_normal),u_sky_horizon_blend:new c.b5(y,r.u_sky_horizon_blend),u_sky_blend:new c.b5(y,r.u_sky_blend)})};class Pa{constructor(r,o,h){this.context=r;const m=r.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!h,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const o=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Pp={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class j0{constructor(r,o,h,m){this.length=o.length,this.attributes=h,this.itemSize=o.bytesPerElement,this.dynamicDraw=m,this.context=r;const _=r.gl;this.buffer=_.createBuffer(),r.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,o){for(let h=0;h<this.attributes.length;h++){const m=o.attributes[this.attributes[h].name];m!==void 0&&r.enableVertexAttribArray(m)}}setVertexAttribPointers(r,o,h){for(let m=0;m<this.attributes.length;m++){const _=this.attributes[m],b=o.attributes[_.name];b!==void 0&&r.vertexAttribPointer(b,_.components,r[Pp[_.type]],!1,this.itemSize,_.offset+this.itemSize*(h||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ir{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class L0 extends Ir{getDefault(){return c.b4.transparent}set(r){const o=this.current;(r.r!==o.r||r.g!==o.g||r.b!==o.b||r.a!==o.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class N0 extends Ir{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class Lg extends Ir{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class O0 extends Ir{getDefault(){return[!0,!0,!0,!0]}set(r){const o=this.current;(r[0]!==o[0]||r[1]!==o[1]||r[2]!==o[2]||r[3]!==o[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Ng extends Ir{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class id extends Ir{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class sd extends Ir{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const o=this.current;(r.func!==o.func||r.ref!==o.ref||r.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class od extends Ir{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const o=this.current;(r[0]!==o[0]||r[1]!==o[1]||r[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Ep extends Ir{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;r?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=r,this.dirty=!1}}class Ea extends Ir{getDefault(){return[0,1]}set(r){const o=this.current;(r[0]!==o[0]||r[1]!==o[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class gl extends Ir{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;r?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=r,this.dirty=!1}}class hs extends Ir{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class Og extends Ir{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;r?o.enable(o.BLEND):o.disable(o.BLEND),this.current=r,this.dirty=!1}}class Fg extends Ir{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const o=this.current;(r[0]!==o[0]||r[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Mp extends Ir{getDefault(){return c.b4.transparent}set(r){const o=this.current;(r.r!==o.r||r.g!==o.g||r.b!==o.b||r.a!==o.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ma extends Ir{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class ad extends Ir{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;r?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=r,this.dirty=!1}}class ld extends Ir{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class zc extends Ir{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class cd extends Ir{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Bg extends Ir{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class yl extends Ir{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const o=this.current;(r[0]!==o[0]||r[1]!==o[1]||r[2]!==o[2]||r[3]!==o[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class _l extends Ir{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Ug extends Ir{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class kp extends Ir{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class wr extends Ir{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class ud extends Ir{getDefault(){return null}set(r){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class F0 extends Ir{getDefault(){return null}set(r){var o;if(r===this.current&&!this.dirty)return;const h=this.gl;ks(h)?h.bindVertexArray(r):(o=h.getExtension("OES_vertex_array_object"))===null||o===void 0||o.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class Vg extends Ir{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class jc extends Ir{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class B0 extends Ir{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Ip extends Ir{constructor(r,o){super(r),this.context=r,this.parent=o}getDefault(){return null}}class $g extends Ip{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class U0 extends Ip{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Rp extends Ip{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,r),this.current=r,this.dirty=!1}}const Lc="Framebuffer is not complete";class dd{constructor(r,o,h,m,_){this.context=r,this.width=o,this.height=h;const b=r.gl,T=this.framebuffer=b.createFramebuffer();if(this.colorAttachment=new $g(r,T),m)this.depthAttachment=_?new Rp(r,T):new U0(r,T);else if(_)throw new Error("Stencil cannot be set without depth");if(b.checkFramebufferStatus(b.FRAMEBUFFER)!==b.FRAMEBUFFER_COMPLETE)throw new Error(Lc)}destroy(){const r=this.context.gl,o=this.colorAttachment.get();if(o&&r.deleteTexture(o),this.depthAttachment){const h=this.depthAttachment.get();h&&r.deleteRenderbuffer(h)}r.deleteFramebuffer(this.framebuffer)}}class Ap{constructor(r){var o,h;if(this.gl=r,this.clearColor=new L0(this),this.clearDepth=new N0(this),this.clearStencil=new Lg(this),this.colorMask=new O0(this),this.depthMask=new Ng(this),this.stencilMask=new id(this),this.stencilFunc=new sd(this),this.stencilOp=new od(this),this.stencilTest=new Ep(this),this.depthRange=new Ea(this),this.depthTest=new gl(this),this.depthFunc=new hs(this),this.blend=new Og(this),this.blendFunc=new Fg(this),this.blendColor=new Mp(this),this.blendEquation=new Ma(this),this.cullFace=new ad(this),this.cullFaceSide=new ld(this),this.frontFace=new zc(this),this.program=new cd(this),this.activeTexture=new Bg(this),this.viewport=new yl(this),this.bindFramebuffer=new _l(this),this.bindRenderbuffer=new Ug(this),this.bindTexture=new kp(this),this.bindVertexBuffer=new wr(this),this.bindElementBuffer=new ud(this),this.bindVertexArray=new F0(this),this.pixelStoreUnpack=new Vg(this),this.pixelStoreUnpackPremultiplyAlpha=new jc(this),this.pixelStoreUnpackFlipY=new B0(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),ks(r)){this.HALF_FLOAT=r.HALF_FLOAT;const m=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(o=r.RGBA16F)!==null&&o!==void 0?o:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(h=r.RGB16F)!==null&&h!==void 0?h:m==null?void 0:m.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const m=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,o){return new Pa(this,r,o)}createVertexBuffer(r,o,h){return new j0(this,r,o,h)}createRenderbuffer(r,o,h){const m=this.gl,_=m.createRenderbuffer();return this.bindRenderbuffer.set(_),m.renderbufferStorage(m.RENDERBUFFER,r,o,h),this.bindRenderbuffer.set(null),_}createFramebuffer(r,o,h,m){return new dd(this,r,o,h,m)}clear({color:r,depth:o,stencil:h}){const m=this.gl;let _=0;r&&(_|=m.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(_|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),h!==void 0&&(_|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(h),this.stencilMask.set(255)),m.clear(_)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){c.bz(r.blendFunction,Br.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return ks(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var o;return ks(this.gl)?this.gl.deleteVertexArray(r):(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let vl;function Dp(y,r,o,h,m){const _=y.context,b=y.transform,T=_.gl,M=y.useProgram("collisionBox"),R=[];let O=0,U=0;for(let le=0;le<h.length;le++){const fe=h[le],_e=r.getTile(fe).getBucket(o);if(!_e)continue;const xe=m?_e.textCollisionBox:_e.iconCollisionBox,be=_e.collisionCircleArray;be.length>0&&(R.push({circleArray:be,circleOffset:U,coord:fe}),O+=be.length/4,U=O),xe&&M.draw(_,T.LINES,nr.disabled,_r.disabled,y.colorModeForRenderPass(),yr.disabled,Rg(y.transform),y.style.map.terrain&&y.style.map.terrain.getTerrainData(fe),b.getProjectionData({overscaledTileID:fe,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),o.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,null,y.transform.zoom,null,null,xe.collisionVertexBuffer)}if(!m||!R.length)return;const $=y.useProgram("collisionCircle"),K=new c.bM;K.resize(4*O),K._trim();let ee=0;for(const le of R)for(let fe=0;fe<le.circleArray.length/4;fe++){const _e=4*fe,xe=le.circleArray[_e+0],be=le.circleArray[_e+1],ke=le.circleArray[_e+2],Pe=le.circleArray[_e+3];K.emplace(ee++,xe,be,ke,Pe,0),K.emplace(ee++,xe,be,ke,Pe,1),K.emplace(ee++,xe,be,ke,Pe,2),K.emplace(ee++,xe,be,ke,Pe,3)}(!vl||vl.length<2*O)&&(vl=function(le){const fe=2*le,_e=new c.bO;_e.resize(fe),_e._trim();for(let xe=0;xe<fe;xe++){const be=6*xe;_e.uint16[be+0]=4*xe+0,_e.uint16[be+1]=4*xe+1,_e.uint16[be+2]=4*xe+2,_e.uint16[be+3]=4*xe+2,_e.uint16[be+4]=4*xe+3,_e.uint16[be+5]=4*xe+0}return _e}(O));const ae=_.createIndexBuffer(vl,!0),oe=_.createVertexBuffer(K,c.bN.members,!0);for(const le of R){const fe=Ag(y.transform);$.draw(_,T.TRIANGLES,nr.disabled,_r.disabled,y.colorModeForRenderPass(),yr.disabled,fe,y.style.map.terrain&&y.style.map.terrain.getTerrainData(le.coord),null,o.id,oe,ae,c.aD.simpleSegment(0,2*le.circleOffset,le.circleArray.length,le.circleArray.length/2),null,y.transform.zoom,null,null,null)}oe.destroy(),ae.destroy()}const hd=c.aq(new Float32Array(16));function pd(y,r,o,h,m,_){const{horizontalAlign:b,verticalAlign:T}=c.ay(y);return new c.P((-(b-.5)*r/m+h[0])*_,(-(T-.5)*o/m+h[1])*_)}function zp(y,r,o,h,m,_){const b=r.tileAnchorPoint.add(new c.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let T=h.mult(_);o||(T=T.rotate(-m));const M=b.add(T);return Be(M.x,M.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(o){const T=He(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(y),M=Math.atan(T.y/T.x)+(T.x<0?Math.PI:0);return y.add(h.rotate(M))}return y.add(h)}function V0(y,r,o,h,m,_,b,T,M,R,O,U){const $=y.text.placedSymbolArray,K=y.text.dynamicLayoutVertexArray,ee=y.icon.dynamicLayoutVertexArray,ae={};K.clear();for(let oe=0;oe<$.length;oe++){const le=$.get(oe),fe=le.hidden||!le.crossTileID||y.allowVerticalPlacement&&!le.placedOrientation?null:h[le.crossTileID];if(fe){const _e=new c.P(le.anchorX,le.anchorY),xe={getElevation:U,width:m.width,height:m.height,pitchedLabelPlaneMatrix:_,lineVertexArray:null,pitchWithMap:o,transform:m,projectionCache:null,tileAnchorPoint:_e,translation:R,unwrappedTileID:O},be=o?bt(_e.x,_e.y,xe):He(_e.x,_e.y,xe),ke=ze(m.cameraToCenterDistance,be.signedDistanceFromCamera);let Pe=c.aj(y.textSizeData,T,le)*ke/c.as;o&&(Pe*=y.tilePixelRatio/b);const{width:Le,height:Fe,anchor:Ke,textOffset:qe,textBoxScale:$e}=fe,ft=pd(Ke,Le,Fe,qe,$e,Pe),ut=m.getPitchedTextCorrection(_e.x+R[0],_e.y+R[1],O),Ye=zp(be.point,xe,r,ft,-m.bearingInRadians,ut),kt=y.allowVerticalPlacement&&le.placedOrientation===c.ai.vertical?Math.PI/2:0;for(let Qt=0;Qt<le.numGlyphs;Qt++)c.ak(K,Ye,kt);M&&le.associatedIconIndex>=0&&(ae[le.associatedIconIndex]={shiftedAnchor:Ye,angle:kt})}else qt(le.numGlyphs,K)}if(M){ee.clear();const oe=y.icon.placedSymbolArray;for(let le=0;le<oe.length;le++){const fe=oe.get(le);if(fe.hidden)qt(fe.numGlyphs,ee);else{const _e=ae[le];if(_e)for(let xe=0;xe<fe.numGlyphs;xe++)c.ak(ee,_e.shiftedAnchor,_e.angle);else qt(fe.numGlyphs,ee)}}y.icon.dynamicLayoutVertexBuffer.updateData(ee)}y.text.dynamicLayoutVertexBuffer.updateData(K)}function jp(y,r,o){return o.iconsInText&&r?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Zg(y,r,o,h,m,_,b,T,M,R,O,U,$){const K=y.context,ee=K.gl,ae=y.transform,oe=T==="map",le=M==="map",fe=T!=="viewport"&&o.layout.get("symbol-placement")!=="point",_e=oe&&!le&&!fe,xe=!o.layout.get("symbol-sort-key").isConstant();let be=!1;const ke=y.getDepthModeForSublayer(0,nr.ReadOnly),Pe=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Le=[],Fe=ae.getCircleRadiusCorrection();for(const Ke of h){const qe=r.getTile(Ke),$e=qe.getBucket(o);if(!$e)continue;const ft=m?$e.text:$e.icon;if(!ft||!ft.segments.get().length||!ft.hasVisibleVertices)continue;const ut=ft.programConfigurations.get(o.id),Ye=m||$e.sdfIcons,kt=m?$e.textSizeData:$e.iconSizeData,Qt=le||ae.pitch!==0,Pr=y.useProgram(jp(Ye,m,$e),ut),en=c.ah(kt,ae.zoom),Or=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ke);let Ur,Wr,Dr,Vr,jn=[0,0],Sn=null;if(m)Wr=qe.glyphAtlasTexture,Dr=ee.LINEAR,Ur=qe.glyphAtlasTexture.size,$e.iconsInText&&(jn=qe.imageAtlasTexture.size,Sn=qe.imageAtlasTexture,Vr=Qt||y.options.rotating||y.options.zooming||kt.kind==="composite"||kt.kind==="camera"?ee.LINEAR:ee.NEAREST);else{const Xr=o.layout.get("icon-size").constantOr(0)!==1||$e.iconsNeedLinear;Wr=qe.imageAtlasTexture,Dr=Ye||y.options.rotating||y.options.zooming||Xr||Qt?ee.LINEAR:ee.NEAREST,Ur=qe.imageAtlasTexture.size}const Wn=c.at(qe,1,y.transform.zoom),di=Ae(oe,y.transform,Wn),io=c.H();c.an(io,di);const Qi=we(le,oe,y.transform,Wn),so=c.au(ae,qe,_,b),Da=ae.getProjectionData({overscaledTileID:Ke,applyGlobeMatrix:!$,applyTerrainMatrix:!0}),Jc=Pe&&$e.hasTextData(),Ad=o.layout.get("icon-text-fit")!=="none"&&Jc&&$e.hasIconData();if(fe){const Xr=y.style.map.terrain?(Xn,Kn)=>y.style.map.terrain.getElevation(Ke,Xn,Kn):null,Ln=o.layout.get("text-rotation-alignment")==="map";ht($e,y,m,di,io,le,R,Ln,Ke.toUnwrapped(),ae.width,ae.height,so,Xr)}const Xo=m&&Pe||Ad,hi=fe||Xo?hd:le?di:y.transform.clipSpaceToPixelsMatrix,Ji=Ye&&o.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let wi;wi=Ye?$e.iconsInText?bp(kt.kind,en,_e,le,fe,Xo,y,hi,Qi,so,Ur,jn,Fe):to(kt.kind,en,_e,le,fe,Xo,y,hi,Qi,so,m,Ur,0,Fe):Dc(kt.kind,en,_e,le,fe,Xo,y,hi,Qi,so,m,Ur,Fe);const Si={program:Pr,buffers:ft,uniformValues:wi,projectionData:Da,atlasTexture:Wr,atlasTextureIcon:Sn,atlasInterpolation:Dr,atlasInterpolationIcon:Vr,isSDF:Ye,hasHalo:Ji};if(xe&&$e.canOverlap){be=!0;const Xr=ft.segments.get();for(const Ln of Xr)Le.push({segments:new c.aD([Ln]),sortKey:Ln.sortKey,state:Si,terrainData:Or})}else Le.push({segments:ft.segments,sortKey:0,state:Si,terrainData:Or})}be&&Le.sort((Ke,qe)=>Ke.sortKey-qe.sortKey);for(const Ke of Le){const qe=Ke.state;if(K.activeTexture.set(ee.TEXTURE0),qe.atlasTexture.bind(qe.atlasInterpolation,ee.CLAMP_TO_EDGE),qe.atlasTextureIcon&&(K.activeTexture.set(ee.TEXTURE1),qe.atlasTextureIcon&&qe.atlasTextureIcon.bind(qe.atlasInterpolationIcon,ee.CLAMP_TO_EDGE)),qe.isSDF){const $e=qe.uniformValues;qe.hasHalo&&($e.u_is_halo=1,Lp(qe.buffers,Ke.segments,o,y,qe.program,ke,O,U,$e,qe.projectionData,Ke.terrainData)),$e.u_is_halo=0}Lp(qe.buffers,Ke.segments,o,y,qe.program,ke,O,U,qe.uniformValues,qe.projectionData,Ke.terrainData)}}function Lp(y,r,o,h,m,_,b,T,M,R,O){const U=h.context;m.draw(U,U.gl.TRIANGLES,_,b,T,yr.backCCW,M,O,R,o.id,y.layoutVertexBuffer,y.indexBuffer,r,o.paint,h.transform.zoom,y.programConfigurations.get(o.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function fd(y,r,o,h,m){const _=y.context,b=_.gl,T=_r.disabled,M=new Br([b.ONE,b.ONE],c.b4.transparent,[!0,!0,!0,!0]),R=r.getBucket(o);if(!R)return;const O=h.key;let U=o.heatmapFbos.get(O);U||(U=Op(_,r.tileSize,r.tileSize),o.heatmapFbos.set(O,U)),_.bindFramebuffer.set(U.framebuffer),_.viewport.set([0,0,r.tileSize,r.tileSize]),_.clear({color:c.b4.transparent});const $=R.programConfigurations.get(o.id),K=y.useProgram("heatmap",$,!m),ee=y.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ae=y.style.map.terrain.getTerrainData(h);K.draw(_,b.TRIANGLES,nr.disabled,T,M,yr.disabled,Wo(r,y.transform.zoom,o.paint.get("heatmap-intensity"),1),ae,ee,o.id,R.layoutVertexBuffer,R.indexBuffer,R.segments,o.paint,y.transform.zoom,$)}function Np(y,r,o,h,m){const _=y.context,b=_.gl,T=y.transform;_.setColorMode(y.colorModeForRenderPass());const M=Fp(_,r),R=o.key,O=r.heatmapFbos.get(R);if(!O)return;_.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,O.colorAttachment.get()),_.activeTexture.set(b.TEXTURE1),M.bind(b.LINEAR,b.CLAMP_TO_EDGE);const U=T.getProjectionData({overscaledTileID:o,applyTerrainMatrix:m,applyGlobeMatrix:!h});y.useProgram("heatmapTexture").draw(_,b.TRIANGLES,nr.disabled,_r.disabled,y.colorModeForRenderPass(),yr.disabled,yp(y,r,0,1),null,U,r.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments,r.paint,T.zoom),O.destroy(),r.heatmapFbos.delete(R)}function Op(y,r,o){var h,m;const _=y.gl,b=_.createTexture();_.bindTexture(_.TEXTURE_2D,b),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR);const T=(h=y.HALF_FLOAT)!==null&&h!==void 0?h:_.UNSIGNED_BYTE,M=(m=y.RGBA16F)!==null&&m!==void 0?m:_.RGBA;_.texImage2D(_.TEXTURE_2D,0,M,r,o,0,_.RGBA,T,null);const R=y.createFramebuffer(r,o,!1,!1);return R.colorAttachment.set(b),R}function Fp(y,r){return r.colorRampTexture||(r.colorRampTexture=new Ie(y,r.colorRamp,y.gl.RGBA)),r.colorRampTexture}function Nc(y,r,o,h,m){if(!o||!h||!h.imageAtlas)return;const _=h.imageAtlas.patternPositions;let b=_[o.to.toString()],T=_[o.from.toString()];if(!b&&T&&(b=T),!T&&b&&(T=b),!b||!T){const M=m.getPaintProperty(r);b=_[M],T=_[M]}b&&T&&y.setConstantPatternPositions(b,T)}function md(y,r,o,h,m,_,b,T){const M=y.context.gl,R="fill-pattern",O=o.paint.get(R),U=O&&O.constantOr(1),$=o.getCrossfadeParameters();let K,ee,ae,oe,le;const fe=y.transform,_e=o.paint.get("fill-translate"),xe=o.paint.get("fill-translate-anchor");b?(ee=U&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",K=M.LINES):(ee=U?"fillPattern":"fill",K=M.TRIANGLES);const be=O.constantOr(null);for(const ke of h){const Pe=r.getTile(ke);if(U&&!Pe.patternsLoaded())continue;const Le=Pe.getBucket(o);if(!Le)continue;const Fe=Le.programConfigurations.get(o.id),Ke=y.useProgram(ee,Fe),qe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ke);U&&(y.context.activeTexture.set(M.TEXTURE0),Pe.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),Fe.updatePaintBuffers($)),Nc(Fe,R,be,Pe,o);const $e=fe.getProjectionData({overscaledTileID:ke,applyGlobeMatrix:!T,applyTerrainMatrix:!0}),ft=c.au(fe,Pe,_e,xe);if(b){oe=Le.indexBuffer2,le=Le.segments2;const Ye=[M.drawingBufferWidth,M.drawingBufferHeight];ae=ee==="fillOutlinePattern"&&U?mp(y,$,Pe,Ye,ft):kg(Ye,ft)}else oe=Le.indexBuffer,le=Le.segments,ae=U?Mg(y,$,Pe,ft):{u_fill_translate:ft};let ut;if(y.renderPass==="translucent"&&T){const[Ye]=y.getStencilConfigForOverlapAndUpdateStencilID(h);ut=Ye[ke.overscaledZ]}else ut=y.stencilModeForClipping(ke);Ke.draw(y.context,K,m,ut,_,yr.backCCW,ae,qe,$e,o.id,Le.layoutVertexBuffer,oe,le,o.paint,y.transform.zoom,Fe)}}function Bp(y,r,o,h,m,_,b,T){const M=y.context,R=M.gl,O="fill-extrusion-pattern",U=o.paint.get(O),$=U.constantOr(1),K=o.getCrossfadeParameters(),ee=o.paint.get("fill-extrusion-opacity"),ae=U.constantOr(null),oe=y.transform;for(const le of h){const fe=r.getTile(le),_e=fe.getBucket(o);if(!_e)continue;const xe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(le),be=_e.programConfigurations.get(o.id),ke=y.useProgram($?"fillExtrusionPattern":"fillExtrusion",be);$&&(y.context.activeTexture.set(R.TEXTURE0),fe.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),be.updatePaintBuffers(K));const Pe=oe.getProjectionData({overscaledTileID:le,applyGlobeMatrix:!T,applyTerrainMatrix:!0});Nc(be,O,ae,fe,o);const Le=c.au(oe,fe,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),Fe=o.paint.get("fill-extrusion-vertical-gradient"),Ke=$?Eg(y,Fe,ee,Le,le,K,fe):Pg(y,Fe,ee,Le);ke.draw(M,M.gl.TRIANGLES,m,_,b,yr.backCCW,Ke,xe,Pe,o.id,_e.layoutVertexBuffer,_e.indexBuffer,_e.segments,o.paint,y.transform.zoom,be,y.style.map.terrain&&_e.centroidVertexBuffer)}}function gd(y,r,o,h,m,_,b,T,M){var R;const O=y.style.projection,U=y.context,$=y.transform,K=U.gl,ee=y.useProgram("hillshade"),ae=!y.options.moving;for(const oe of h){const le=r.getTile(oe),fe=le.fbo;if(!fe)continue;const _e=O.getMeshFromTileID(U,oe.canonical,T,!0,"raster"),xe=(R=y.style.map.terrain)===null||R===void 0?void 0:R.getTerrainData(oe);U.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,fe.colorAttachment.get());const be=$.getProjectionData({overscaledTileID:oe,aligned:ae,applyGlobeMatrix:!M,applyTerrainMatrix:!0});ee.draw(U,K.TRIANGLES,_,m[oe.overscaledZ],b,yr.backCCW,Dg(y,le,o),xe,be,o.id,_e.vertexBuffer,_e.indexBuffer,_e.segments)}}const sn=[new c.P(0,0),new c.P(c.X,0),new c.P(c.X,c.X),new c.P(0,c.X)];function ro(y,r,o,h,m,_,b,T,M=!1,R=!1){const O=h[h.length-1].overscaledZ,U=y.context,$=U.gl,K=y.useProgram("raster"),ee=y.transform,ae=y.style.projection,oe=y.colorModeForRenderPass(),le=!y.options.moving;for(const fe of h){const _e=y.getDepthModeForSublayer(fe.overscaledZ-O,o.paint.get("raster-opacity")===1?nr.ReadWrite:nr.ReadOnly,$.LESS),xe=r.getTile(fe);xe.registerFadeDuration(o.paint.get("raster-fade-duration"));const be=r.findLoadedParent(fe,0),ke=r.findLoadedSibling(fe),Pe=ps(xe,be||ke||null,r,o,y.transform,y.style.map.terrain);let Le,Fe;const Ke=o.paint.get("raster-resampling")==="nearest"?$.NEAREST:$.LINEAR;U.activeTexture.set($.TEXTURE0),xe.texture.bind(Ke,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),U.activeTexture.set($.TEXTURE1),be?(be.texture.bind(Ke,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),Le=Math.pow(2,be.tileID.overscaledZ-xe.tileID.overscaledZ),Fe=[xe.tileID.canonical.x*Le%1,xe.tileID.canonical.y*Le%1]):xe.texture.bind(Ke,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),xe.texture.useMipmap&&U.extTextureFilterAnisotropic&&y.transform.pitch>20&&$.texParameterf($.TEXTURE_2D,U.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,U.extTextureFilterAnisotropicMax);const qe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(fe),$e=ee.getProjectionData({overscaledTileID:fe,aligned:le,applyGlobeMatrix:!R,applyTerrainMatrix:!0}),ft=xp(Fe||[0,0],Le||1,Pe,o,T),ut=ae.getMeshFromTileID(U,fe.canonical,_,b,"raster");K.draw(U,$.TRIANGLES,_e,m?m[fe.overscaledZ]:_r.disabled,oe,M?yr.frontCCW:yr.backCCW,ft,qe,$e,o.id,ut.vertexBuffer,ut.indexBuffer,ut.segments)}}function ps(y,r,o,h,m,_){const b=h.paint.get("raster-fade-duration");if(!_&&b>0){const T=L.now(),M=(T-y.timeAdded)/b,R=r?(T-r.timeAdded)/b:-1,O=o.getSource(),U=Wi(m,{tileSize:O.tileSize,roundZoom:O.roundZoom}),$=!r||Math.abs(r.tileID.overscaledZ-U)>Math.abs(y.tileID.overscaledZ-U),K=$&&y.refreshedUponExpiration?1:c.ab($?M:1-R,0,1);return y.refreshedUponExpiration&&M>=1&&(y.refreshedUponExpiration=!1),r?{opacity:1,mix:1-K}:{opacity:K,mix:0}}return{opacity:1,mix:0}}const Up=new c.b4(1,0,0,1),Vp=new c.b4(0,1,0,1),Gg=new c.b4(0,0,1,1),xl=new c.b4(1,0,1,1),Oc=new c.b4(0,1,1,1);function yd(y,r,o,h){Fc(y,0,r+o/2,y.transform.width,o,h)}function $p(y,r,o,h){Fc(y,r-o/2,0,o,y.transform.height,h)}function Fc(y,r,o,h,m,_){const b=y.context,T=b.gl;T.enable(T.SCISSOR_TEST),T.scissor(r*y.pixelRatio,o*y.pixelRatio,h*y.pixelRatio,m*y.pixelRatio),b.clear({color:_}),T.disable(T.SCISSOR_TEST)}function Hg(y,r,o){const h=y.context,m=h.gl,_=y.useProgram("debug"),b=nr.disabled,T=_r.disabled,M=y.colorModeForRenderPass(),R="$debug",O=y.style.map.terrain&&y.style.map.terrain.getTerrainData(o);h.activeTexture.set(m.TEXTURE0);const U=r.getTileByID(o.key).latestRawTileData,$=Math.floor((U&&U.byteLength||0)/1024),K=r.getTile(o).tileSize,ee=512/Math.min(K,512)*(o.overscaledZ/y.transform.zoom)*.5;let ae=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(ae+=` => ${o.overscaledZ}`),function(le,fe){le.initDebugOverlayCanvas();const _e=le.debugOverlayCanvas,xe=le.context.gl,be=le.debugOverlayCanvas.getContext("2d");be.clearRect(0,0,_e.width,_e.height),be.shadowColor="white",be.shadowBlur=2,be.lineWidth=1.5,be.strokeStyle="white",be.textBaseline="top",be.font="bold 36px Open Sans, sans-serif",be.fillText(fe,5,5),be.strokeText(fe,5,5),le.debugOverlayTexture.update(_e),le.debugOverlayTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE)}(y,`${ae} ${$}kB`);const oe=y.transform.getProjectionData({overscaledTileID:o,applyGlobeMatrix:!0,applyTerrainMatrix:!0});_.draw(h,m.TRIANGLES,b,T,Br.alphaBlended,yr.disabled,gp(c.b4.transparent,ee),null,oe,R,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),_.draw(h,m.LINE_STRIP,b,T,M,yr.disabled,gp(c.b4.red),O,oe,R,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Zp(y,r,o,h){const{isRenderingGlobe:m}=h,_=y.context,b=_.gl,T=y.transform,M=y.colorModeForRenderPass(),R=y.getDepthModeFor3D(),O=y.useProgram("terrain");_.bindFramebuffer.set(null),_.viewport.set([0,0,y.width,y.height]);for(const U of o){const $=r.getTerrainMesh(U.tileID),K=y.renderToTexture.getTexture(U),ee=r.getTerrainData(U.tileID);_.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,K.texture);const ae=r.getMeshFrameDelta(T.zoom),oe=T.calculateFogMatrix(U.tileID.toUnwrapped()),le=Rc(ae,oe,y.style.sky,T.pitch,m),fe=T.getProjectionData({overscaledTileID:U.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});O.draw(_,b.TRIANGLES,R,_r.disabled,M,yr.backCCW,le,ee,fe,"terrain",$.vertexBuffer,$.indexBuffer,$.segments)}}function Gp(y,r){if(!r.mesh){const o=new c.aC;o.emplaceBack(-1,-1),o.emplaceBack(1,-1),o.emplaceBack(1,1),o.emplaceBack(-1,1);const h=new c.aE;h.emplaceBack(0,1,2),h.emplaceBack(0,2,3),r.mesh=new Js(y.createVertexBuffer(o,lr.members),y.createIndexBuffer(h),c.aD.simpleSegment(0,0,o.length,h.length))}return r.mesh}class ka{constructor(r,o){this.context=new Ap(r),this.transform=o,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.aq(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Q.maxUnderzooming+Q.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new va}resize(r,o,h){if(this.width=Math.floor(r*h),this.height=Math.floor(o*h),this.pixelRatio=h,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const r=this.context,o=new c.aC;o.emplaceBack(0,0),o.emplaceBack(c.X,0),o.emplaceBack(0,c.X),o.emplaceBack(c.X,c.X),this.tileExtentBuffer=r.createVertexBuffer(o,lr.members),this.tileExtentSegments=c.aD.simpleSegment(0,0,4,2);const h=new c.aC;h.emplaceBack(0,0),h.emplaceBack(c.X,0),h.emplaceBack(0,c.X),h.emplaceBack(c.X,c.X),this.debugBuffer=r.createVertexBuffer(h,lr.members),this.debugSegments=c.aD.simpleSegment(0,0,4,5);const m=new c.bT;m.emplaceBack(0,0,0,0),m.emplaceBack(c.X,0,c.X,0),m.emplaceBack(0,c.X,0,c.X),m.emplaceBack(c.X,c.X,c.X,c.X),this.rasterBoundsBuffer=r.createVertexBuffer(m,fp.members),this.rasterBoundsSegments=c.aD.simpleSegment(0,0,4,2);const _=new c.aC;_.emplaceBack(0,0),_.emplaceBack(c.X,0),_.emplaceBack(0,c.X),_.emplaceBack(c.X,c.X),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(_,lr.members),this.rasterBoundsSegmentsPosOnly=c.aD.simpleSegment(0,0,4,5);const b=new c.aC;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(b,lr.members),this.viewportSegments=c.aD.simpleSegment(0,0,4,2);const T=new c.bU;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(T);const M=new c.aE;M.emplaceBack(1,0,2),M.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(M);const R=this.context.gl;this.stencilClearMode=new _r({func:R.ALWAYS,mask:0},0,255,R.ZERO,R.ZERO,R.ZERO),this.tileExtentMesh=new Js(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const r=this.context,o=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const h=c.H();c.bL(h,0,this.width,this.height,0,0,1),c.K(h,h,[o.drawingBufferWidth,o.drawingBufferHeight,0]);const m={mainMatrix:h,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:h};this.useProgram("clippingMask",null,!0).draw(r,o.TRIANGLES,nr.disabled,this.stencilClearMode,Br.disabled,yr.disabled,null,null,m,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,o,h){if(this.currentStencilSource===r.source||!r.isTileClipped()||!o||!o.length)return;this.currentStencilSource=r.source,this.nextStencilID+o.length>256&&this.clearStencil();const m=this.context;m.setColorMode(Br.disabled),m.setDepthMode(nr.disabled);const _={};for(const b of o)_[b.key]=this.nextStencilID++;this._renderTileMasks(_,o,h,!0),this._renderTileMasks(_,o,h,!1),this._tileClippingMaskIDs=_}_renderTileMasks(r,o,h,m){const _=this.context,b=_.gl,T=this.style.projection,M=this.transform,R=this.useProgram("clippingMask");for(const O of o){const U=r[O.key],$=this.style.map.terrain&&this.style.map.terrain.getTerrainData(O),K=T.getMeshFromTileID(this.context,O.canonical,m,!0,"stencil"),ee=M.getProjectionData({overscaledTileID:O,applyGlobeMatrix:!0,applyTerrainMatrix:!0});R.draw(_,b.TRIANGLES,nr.disabled,new _r({func:b.ALWAYS,mask:0},U,255,b.KEEP,b.KEEP,b.REPLACE),Br.disabled,h?yr.disabled:yr.backCCW,null,$,ee,"$clipping",K.vertexBuffer,K.indexBuffer,K.segments)}}_renderTilesDepthBuffer(){const r=this.context,o=r.gl,h=this.style.projection,m=this.transform,_=this.useProgram("depth"),b=this.getDepthModeFor3D(),T=se(m,{tileSize:m.tileSize});for(const M of T){const R=this.style.map.terrain&&this.style.map.terrain.getTerrainData(M),O=h.getMeshFromTileID(this.context,M.canonical,!0,!0,"raster"),U=m.getProjectionData({overscaledTileID:M,applyGlobeMatrix:!0,applyTerrainMatrix:!0});_.draw(r,o.TRIANGLES,b,_r.disabled,Br.disabled,yr.backCCW,null,R,U,"$clipping",O.vertexBuffer,O.indexBuffer,O.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,o=this.context.gl;return new _r({func:o.NOTEQUAL,mask:255},r,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(r){const o=this.context.gl;return new _r({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,o.KEEP,o.KEEP,o.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){const o=this.context.gl,h=r.sort((b,T)=>T.overscaledZ-b.overscaledZ),m=h[h.length-1].overscaledZ,_=h[0].overscaledZ-m+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const b={};for(let T=0;T<_;T++)b[T+m]=new _r({func:o.GEQUAL,mask:255},T+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=_,[b,h]}return[{[m]:_r.disabled},h]}stencilConfigForOverlapTwoPass(r){const o=this.context.gl,h=r.sort((b,T)=>T.overscaledZ-b.overscaledZ),m=h[h.length-1].overscaledZ,_=h[0].overscaledZ-m+1;if(this.clearStencil(),_>1){const b={},T={};for(let M=0;M<_;M++)b[M+m]=new _r({func:o.GREATER,mask:255},_+1+M,255,o.KEEP,o.KEEP,o.REPLACE),T[M+m]=new _r({func:o.GREATER,mask:255},1+M,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID=2*_+1,[b,T,h]}return this.nextStencilID=3,[{[m]:new _r({func:o.GREATER,mask:255},2,255,o.KEEP,o.KEEP,o.REPLACE)},{[m]:new _r({func:o.GREATER,mask:255},1,255,o.KEEP,o.KEEP,o.REPLACE)},h]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Br([r.CONSTANT_COLOR,r.ONE],new c.b4(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Br.unblended:Br.alphaBlended}getDepthModeForSublayer(r,o,h){if(!this.opaquePassEnabledForLayer())return nr.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new nr(h||this.context.gl.LEQUAL,o,[m,m])}getDepthModeFor3D(){return new nr(this.context.gl.LEQUAL,nr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,o){var h,m;this.style=r,this.options=o,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(L.now()),this.imageManager.beginFrame();const _=this.style._order,b=this.style.sourceCaches,T={},M={},R={},O={isRenderingToTexture:!1,isRenderingGlobe:((h=r.projection)===null||h===void 0?void 0:h.transitionState)>0};for(const $ in b){const K=b[$];K.used&&K.prepare(this.context),T[$]=K.getVisibleCoordinates(!1),M[$]=T[$].slice().reverse(),R[$]=K.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let $=0;$<_.length;$++)if(this.style._layers[_[$]].is3D()){this.opaquePassCutoff=$;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const $ of _){const K=this.style._layers[$];if(!K.hasOffscreenPass()||K.isHidden(this.transform.zoom))continue;const ee=M[K.source];(K.type==="custom"||ee.length)&&this.renderLayer(this,b[K.source],K,ee,O)}if((m=this.style.projection)===null||m===void 0||m.updateGPUdependent({context:this.context,useProgram:$=>this.useProgram($)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?c.b4.black:c.b4.transparent,depth:1}),this.clearStencil(),this.style.sky&&function($,K){const ee=$.context,ae=ee.gl,oe=((ke,Pe,Le)=>{const Fe=Math.cos(Pe.rollInRadians),Ke=Math.sin(Pe.rollInRadians),qe=ed(Pe),$e=Pe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:ke.properties.get("sky-color"),u_horizon_color:ke.properties.get("horizon-color"),u_horizon:[(Pe.width/2-qe*Ke)*Le,(Pe.height/2+qe*Fe)*Le],u_horizon_normal:[-Ke,Fe],u_sky_horizon_blend:ke.properties.get("sky-horizon-blend")*Pe.height/2*Le,u_sky_blend:$e}})(K,$.style.map.transform,$.pixelRatio),le=new nr(ae.LEQUAL,nr.ReadWrite,[0,1]),fe=_r.disabled,_e=$.colorModeForRenderPass(),xe=$.useProgram("sky"),be=Gp(ee,K);xe.draw(ee,ae.TRIANGLES,le,fe,_e,yr.disabled,oe,null,void 0,"sky",be.vertexBuffer,be.indexBuffer,be.segments)}(this,this.style.sky),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const $=this.style._layers[_[this.currentLayer]],K=b[$.source],ee=T[$.source];this._renderTileClippingMasks($,ee,!1),this.renderLayer(this,K,$,ee,O)}this.renderPass="translucent";let U=!1;for(this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const $=this.style._layers[_[this.currentLayer]],K=b[$.source];if(this.renderToTexture&&this.renderToTexture.renderLayer($,O))continue;this.opaquePassEnabledForLayer()||U||(U=!0,O.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ee=($.type==="symbol"?R:M)[$.source];this._renderTileClippingMasks($,T[$.source],!1),this.renderLayer(this,K,$,ee,O)}if(O.isRenderingGlobe&&function($,K,ee){const ae=$.context,oe=ae.gl,le=$.useProgram("atmosphere"),fe=new nr(oe.LEQUAL,nr.ReadOnly,[0,1]),_e=$.transform,xe=function($e,ft){const ut=$e.properties.get("position"),Ye=[-ut.x,-ut.y,-ut.z],kt=c.aq(new Float64Array(16));return $e.properties.get("anchor")==="map"&&(c.aX(kt,kt,ft.rollInRadians),c.aY(kt,kt,-ft.pitchInRadians),c.aX(kt,kt,ft.bearingInRadians),c.aY(kt,kt,ft.center.lat*Math.PI/180),c.bj(kt,kt,-ft.center.lng*Math.PI/180)),c.bS(Ye,Ye,kt),Ye}(ee,$.transform),be=_e.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ke=K.properties.get("atmosphere-blend")*be.projectionTransition;if(ke===0)return;const Pe=Ki(_e.worldSize,_e.center.lat),Le=_e.inverseProjectionMatrix,Fe=new Float64Array(4);Fe[3]=1,c.al(Fe,Fe,_e.modelViewProjectionMatrix),Fe[0]/=Fe[3],Fe[1]/=Fe[3],Fe[2]/=Fe[3],Fe[3]=1,c.al(Fe,Fe,Le),Fe[0]/=Fe[3],Fe[1]/=Fe[3],Fe[2]/=Fe[3],Fe[3]=1;const Ke=(($e,ft,ut,Ye,kt)=>({u_sun_pos:$e,u_atmosphere_blend:ft,u_globe_position:ut,u_globe_radius:Ye,u_inv_proj_matrix:kt}))(xe,ke,[Fe[0],Fe[1],Fe[2]],Pe,Le),qe=Gp(ae,K);le.draw(ae,oe.TRIANGLES,fe,_r.disabled,Br.alphaBlended,yr.disabled,Ke,null,null,"atmosphere",qe.vertexBuffer,qe.indexBuffer,qe.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const $=function(K,ee){let ae=null;const oe=Object.values(K._layers).flatMap(xe=>xe.source&&!xe.isHidden(ee)?[K.sourceCaches[xe.source]]:[]),le=oe.filter(xe=>xe.getSource().type==="vector"),fe=oe.filter(xe=>xe.getSource().type!=="vector"),_e=xe=>{(!ae||ae.getSource().maxzoom<xe.getSource().maxzoom)&&(ae=xe)};return le.forEach(xe=>_e(xe)),ae||fe.forEach(xe=>_e(xe)),ae}(this.style,this.transform.zoom);$&&function(K,ee,ae){for(let oe=0;oe<ae.length;oe++)Hg(K,ee,ae[oe])}(this,$,$.getVisibleCoordinates())}this.options.showPadding&&function($){const K=$.transform.padding;yd($,$.transform.height-(K.top||0),3,Up),yd($,K.bottom||0,3,Vp),$p($,K.left||0,3,Gg),$p($,$.transform.width-(K.right||0),3,xl);const ee=$.transform.centerPoint;(function(ae,oe,le,fe){Fc(ae,oe-1,le-10,2,20,fe),Fc(ae,oe-10,le-1,20,2,fe)})($,ee.x,$.transform.height-ee.y,Oc)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const o=this.terrainFacilitator.matrix,h=this.transform.modelViewProjectionMatrix;let m=this.terrainFacilitator.dirty;m||(m=r?!c.bV(o,h):!c.bW(o,h)),m||(m=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),m&&(c.bX(o,h),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(_,b){const T=_.context,M=T.gl,R=_.transform,O=Br.unblended,U=new nr(M.LEQUAL,nr.ReadWrite,[0,1]),$=b.sourceCache.getRenderableTiles(),K=_.useProgram("terrainDepth");T.bindFramebuffer.set(b.getFramebuffer("depth").framebuffer),T.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),T.clear({color:c.b4.transparent,depth:1});for(const ee of $){const ae=b.getTerrainMesh(ee.tileID),oe=b.getTerrainData(ee.tileID),le=R.getProjectionData({overscaledTileID:ee.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),fe={u_ele_delta:b.getMeshFrameDelta(R.zoom)};K.draw(T,M.TRIANGLES,U,_r.disabled,O,yr.backCCW,fe,oe,le,"terrain",ae.vertexBuffer,ae.indexBuffer,ae.segments)}T.bindFramebuffer.set(null),T.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain),function(_,b){const T=_.context,M=T.gl,R=_.transform,O=Br.unblended,U=new nr(M.LEQUAL,nr.ReadWrite,[0,1]),$=b.getCoordsTexture(),K=b.sourceCache.getRenderableTiles(),ee=_.useProgram("terrainCoords");T.bindFramebuffer.set(b.getFramebuffer("coords").framebuffer),T.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),T.clear({color:c.b4.transparent,depth:1}),b.coordsIndex=[];for(const ae of K){const oe=b.getTerrainMesh(ae.tileID),le=b.getTerrainData(ae.tileID);T.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,$.texture);const fe={u_terrain_coords_id:(255-b.coordsIndex.length)/255,u_texture:0,u_ele_delta:b.getMeshFrameDelta(R.zoom)},_e=R.getProjectionData({overscaledTileID:ae.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ee.draw(T,M.TRIANGLES,U,_r.disabled,O,yr.backCCW,fe,le,_e,"terrain",oe.vertexBuffer,oe.indexBuffer,oe.segments),b.coordsIndex.push(ae.tileID.key)}T.bindFramebuffer.set(null),T.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain))}renderLayer(r,o,h,m,_){h.isHidden(this.transform.zoom)||(h.type==="background"||h.type==="custom"||(m||[]).length)&&(this.id=h.id,c.bY(h)?function(b,T,M,R,O,U){if(b.renderPass!=="translucent")return;const{isRenderingToTexture:$}=U,K=_r.disabled,ee=b.colorModeForRenderPass();(M._unevaluatedLayout.hasValue("text-variable-anchor")||M._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ae,oe,le,fe,_e,xe,be,ke,Pe){const Le=oe.transform,Fe=oe.style.map.terrain,Ke=_e==="map",qe=xe==="map";for(const $e of ae){const ft=fe.getTile($e),ut=ft.getBucket(le);if(!ut||!ut.text||!ut.text.segments.get().length)continue;const Ye=c.ah(ut.textSizeData,Le.zoom),kt=c.at(ft,1,oe.transform.zoom),Qt=Ae(Ke,oe.transform,kt),Pr=le.layout.get("icon-text-fit")!=="none"&&ut.hasIconData();{const en=Math.pow(2,Le.zoom-ft.tileID.overscaledZ),Or=Fe?(Ur,Wr)=>Fe.getElevation($e,Ur,Wr):null;V0(ut,Ke,qe,Pe,Le,Qt,en,Ye,Pr,c.au(Le,ft,be,ke),$e.toUnwrapped(),Or)}}}(R,b,M,T,M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),O),M.paint.get("icon-opacity").constantOr(1)!==0&&Zg(b,T,M,R,!1,M.paint.get("icon-translate"),M.paint.get("icon-translate-anchor"),M.layout.get("icon-rotation-alignment"),M.layout.get("icon-pitch-alignment"),M.layout.get("icon-keep-upright"),K,ee,$),M.paint.get("text-opacity").constantOr(1)!==0&&Zg(b,T,M,R,!0,M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.layout.get("text-keep-upright"),K,ee,$),T.map.showCollisionBoxes&&(Dp(b,T,M,R,!0),Dp(b,T,M,R,!1))}(r,o,h,m,this.style.placement.variableOffsets,_):c.bZ(h)?function(b,T,M,R,O){if(b.renderPass!=="translucent")return;const{isRenderingToTexture:U}=O,$=M.paint.get("circle-opacity"),K=M.paint.get("circle-stroke-width"),ee=M.paint.get("circle-stroke-opacity"),ae=!M.layout.get("circle-sort-key").isConstant();if($.constantOr(1)===0&&(K.constantOr(1)===0||ee.constantOr(1)===0))return;const oe=b.context,le=oe.gl,fe=b.transform,_e=b.getDepthModeForSublayer(0,nr.ReadOnly),xe=_r.disabled,be=b.colorModeForRenderPass(),ke=[],Pe=fe.getCircleRadiusCorrection();for(let Le=0;Le<R.length;Le++){const Fe=R[Le],Ke=T.getTile(Fe),qe=Ke.getBucket(M);if(!qe)continue;const $e=M.paint.get("circle-translate"),ft=M.paint.get("circle-translate-anchor"),ut=c.au(fe,Ke,$e,ft),Ye=qe.programConfigurations.get(M.id),kt=b.useProgram("circle",Ye),Qt=qe.layoutVertexBuffer,Pr=qe.indexBuffer,en=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Fe),Or={programConfiguration:Ye,program:kt,layoutVertexBuffer:Qt,indexBuffer:Pr,uniformValues:Ig(b,Ke,M,ut,Pe),terrainData:en,projectionData:fe.getProjectionData({overscaledTileID:Fe,applyGlobeMatrix:!U,applyTerrainMatrix:!0})};if(ae){const Ur=qe.segments.get();for(const Wr of Ur)ke.push({segments:new c.aD([Wr]),sortKey:Wr.sortKey,state:Or})}else ke.push({segments:qe.segments,sortKey:0,state:Or})}ae&&ke.sort((Le,Fe)=>Le.sortKey-Fe.sortKey);for(const Le of ke){const{programConfiguration:Fe,program:Ke,layoutVertexBuffer:qe,indexBuffer:$e,uniformValues:ft,terrainData:ut,projectionData:Ye}=Le.state;Ke.draw(oe,le.TRIANGLES,_e,xe,be,yr.backCCW,ft,ut,Ye,M.id,qe,$e,Le.segments,M.paint,b.transform.zoom,Fe)}}(r,o,h,m,_):c.b_(h)?function(b,T,M,R,O){if(M.paint.get("heatmap-opacity")===0)return;const U=b.context,{isRenderingToTexture:$,isRenderingGlobe:K}=O;if(b.style.map.terrain){for(const ee of R){const ae=T.getTile(ee);T.hasRenderableParent(ee)||(b.renderPass==="offscreen"?fd(b,ae,M,ee,K):b.renderPass==="translucent"&&Np(b,M,ee,$,K))}U.viewport.set([0,0,b.width,b.height])}else b.renderPass==="offscreen"?function(ee,ae,oe,le){const fe=ee.context,_e=fe.gl,xe=ee.transform,be=_r.disabled,ke=new Br([_e.ONE,_e.ONE],c.b4.transparent,[!0,!0,!0,!0]);(function(Pe,Le,Fe){const Ke=Pe.gl;Pe.activeTexture.set(Ke.TEXTURE1),Pe.viewport.set([0,0,Le.width/4,Le.height/4]);let qe=Fe.heatmapFbos.get(c.bP);qe?(Ke.bindTexture(Ke.TEXTURE_2D,qe.colorAttachment.get()),Pe.bindFramebuffer.set(qe.framebuffer)):(qe=Op(Pe,Le.width/4,Le.height/4),Fe.heatmapFbos.set(c.bP,qe))})(fe,ee,oe),fe.clear({color:c.b4.transparent});for(let Pe=0;Pe<le.length;Pe++){const Le=le[Pe];if(ae.hasRenderableParent(Le))continue;const Fe=ae.getTile(Le),Ke=Fe.getBucket(oe);if(!Ke)continue;const qe=Ke.programConfigurations.get(oe.id),$e=ee.useProgram("heatmap",qe),ft=xe.getProjectionData({overscaledTileID:Le,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),ut=xe.getCircleRadiusCorrection();$e.draw(fe,_e.TRIANGLES,nr.disabled,be,ke,yr.backCCW,Wo(Fe,xe.zoom,oe.paint.get("heatmap-intensity"),ut),null,ft,oe.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,oe.paint,xe.zoom,qe)}fe.viewport.set([0,0,ee.width,ee.height])}(b,T,M,R):b.renderPass==="translucent"&&function(ee,ae){const oe=ee.context,le=oe.gl;oe.setColorMode(ee.colorModeForRenderPass());const fe=ae.heatmapFbos.get(c.bP);fe&&(oe.activeTexture.set(le.TEXTURE0),le.bindTexture(le.TEXTURE_2D,fe.colorAttachment.get()),oe.activeTexture.set(le.TEXTURE1),Fp(oe,ae).bind(le.LINEAR,le.CLAMP_TO_EDGE),ee.useProgram("heatmapTexture").draw(oe,le.TRIANGLES,nr.disabled,_r.disabled,ee.colorModeForRenderPass(),yr.disabled,yp(ee,ae,0,1),null,null,ae.id,ee.viewportBuffer,ee.quadTriangleIndexBuffer,ee.viewportSegments,ae.paint,ee.transform.zoom))}(b,M)}(r,o,h,m,_):c.b$(h)?function(b,T,M,R,O){if(b.renderPass!=="translucent")return;const{isRenderingToTexture:U}=O,$=M.paint.get("line-opacity"),K=M.paint.get("line-width");if($.constantOr(1)===0||K.constantOr(1)===0)return;const ee=b.getDepthModeForSublayer(0,nr.ReadOnly),ae=b.colorModeForRenderPass(),oe=M.paint.get("line-dasharray"),le=M.paint.get("line-pattern"),fe=le.constantOr(1),_e=M.paint.get("line-gradient"),xe=M.getCrossfadeParameters(),be=fe?"linePattern":oe?"lineSDF":_e?"lineGradient":"line",ke=b.context,Pe=ke.gl,Le=b.transform;let Fe=!0;for(const Ke of R){const qe=T.getTile(Ke);if(fe&&!qe.patternsLoaded())continue;const $e=qe.getBucket(M);if(!$e)continue;const ft=$e.programConfigurations.get(M.id),ut=b.context.program.get(),Ye=b.useProgram(be,ft),kt=Fe||Ye.program!==ut,Qt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ke),Pr=le.constantOr(null);if(Pr&&qe.imageAtlas){const Dr=qe.imageAtlas,Vr=Dr.patternPositions[Pr.to.toString()],jn=Dr.patternPositions[Pr.from.toString()];Vr&&jn&&ft.setConstantPatternPositions(Vr,jn)}const en=Le.getProjectionData({overscaledTileID:Ke,applyGlobeMatrix:!U,applyTerrainMatrix:!0}),Or=Le.getPixelScale(),Ur=fe?z0(b,qe,M,Or,xe):oe?zg(b,qe,M,Or,oe,xe):_e?D0(b,qe,M,Or,$e.lineClipsArray.length):ml(b,qe,M,Or);if(fe)ke.activeTexture.set(Pe.TEXTURE0),qe.imageAtlasTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),ft.updatePaintBuffers(xe);else if(oe&&(kt||b.lineAtlas.dirty))ke.activeTexture.set(Pe.TEXTURE0),b.lineAtlas.bind(ke);else if(_e){const Dr=$e.gradients[M.id];let Vr=Dr.texture;if(M.gradientVersion!==Dr.version){let jn=256;if(M.stepInterpolant){const Sn=T.getSource().maxzoom,Wn=Ke.canonical.z===Sn?Math.ceil(1<<b.transform.maxZoom-Ke.canonical.z):1;jn=c.ab(c.bQ($e.maxLineLength/c.X*1024*Wn),256,ke.maxTextureSize)}Dr.gradient=c.bR({expression:M.gradientExpression(),evaluationKey:"lineProgress",resolution:jn,image:Dr.gradient||void 0,clips:$e.lineClipsArray}),Dr.texture?Dr.texture.update(Dr.gradient):Dr.texture=new Ie(ke,Dr.gradient,Pe.RGBA),Dr.version=M.gradientVersion,Vr=Dr.texture}ke.activeTexture.set(Pe.TEXTURE0),Vr.bind(M.stepInterpolant?Pe.NEAREST:Pe.LINEAR,Pe.CLAMP_TO_EDGE)}let Wr;if(U){const[Dr]=b.getStencilConfigForOverlapAndUpdateStencilID(R);Wr=Dr[Ke.overscaledZ]}else Wr=b.stencilModeForClipping(Ke);Ye.draw(ke,Pe.TRIANGLES,ee,Wr,ae,yr.disabled,Ur,Qt,en,M.id,$e.layoutVertexBuffer,$e.indexBuffer,$e.segments,M.paint,b.transform.zoom,ft,$e.layoutVertexBuffer2),Fe=!1}}(r,o,h,m,_):c.c0(h)?function(b,T,M,R,O){const U=M.paint.get("fill-color"),$=M.paint.get("fill-opacity");if($.constantOr(1)===0)return;const{isRenderingToTexture:K}=O,ee=b.colorModeForRenderPass(),ae=M.paint.get("fill-pattern"),oe=b.opaquePassEnabledForLayer()&&!ae.constantOr(1)&&U.constantOr(c.b4.transparent).a===1&&$.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===oe){const le=b.getDepthModeForSublayer(1,b.renderPass==="opaque"?nr.ReadWrite:nr.ReadOnly);md(b,T,M,R,le,ee,!1,K)}if(b.renderPass==="translucent"&&M.paint.get("fill-antialias")){const le=b.getDepthModeForSublayer(M.getPaintProperty("fill-outline-color")?2:0,nr.ReadOnly);md(b,T,M,R,le,ee,!0,K)}}(r,o,h,m,_):c.c1(h)?function(b,T,M,R,O){const U=M.paint.get("fill-extrusion-opacity");if(U===0)return;const{isRenderingToTexture:$}=O;if(b.renderPass==="translucent"){const K=new nr(b.context.gl.LEQUAL,nr.ReadWrite,b.depthRangeFor3D);if(U!==1||M.paint.get("fill-extrusion-pattern").constantOr(1))Bp(b,T,M,R,K,_r.disabled,Br.disabled,$),Bp(b,T,M,R,K,b.stencilModeFor3D(),b.colorModeForRenderPass(),$);else{const ee=b.colorModeForRenderPass();Bp(b,T,M,R,K,_r.disabled,ee,$)}}}(r,o,h,m,_):c.c2(h)?function(b,T,M,R,O){if(b.renderPass!=="offscreen"&&b.renderPass!=="translucent")return;const{isRenderingToTexture:U}=O,$=b.context,K=b.style.projection.useSubdivision,ee=b.getDepthModeForSublayer(0,nr.ReadOnly),ae=b.colorModeForRenderPass();if(b.renderPass==="offscreen")(function(oe,le,fe,_e,xe,be,ke){const Pe=oe.context,Le=Pe.gl;for(const Fe of fe){const Ke=le.getTile(Fe),qe=Ke.dem;if(!qe||!qe.data||!Ke.needsHillshadePrepare)continue;const $e=qe.dim,ft=qe.stride,ut=qe.getPixels();if(Pe.activeTexture.set(Le.TEXTURE1),Pe.pixelStoreUnpackPremultiplyAlpha.set(!1),Ke.demTexture=Ke.demTexture||oe.getTileTexture(ft),Ke.demTexture){const kt=Ke.demTexture;kt.update(ut,{premultiply:!1}),kt.bind(Le.NEAREST,Le.CLAMP_TO_EDGE)}else Ke.demTexture=new Ie(Pe,ut,Le.RGBA,{premultiply:!1}),Ke.demTexture.bind(Le.NEAREST,Le.CLAMP_TO_EDGE);Pe.activeTexture.set(Le.TEXTURE0);let Ye=Ke.fbo;if(!Ye){const kt=new Ie(Pe,{width:$e,height:$e,data:null},Le.RGBA);kt.bind(Le.LINEAR,Le.CLAMP_TO_EDGE),Ye=Ke.fbo=Pe.createFramebuffer($e,$e,!0,!1),Ye.colorAttachment.set(kt.texture)}Pe.bindFramebuffer.set(Ye.framebuffer),Pe.viewport.set([0,0,$e,$e]),oe.useProgram("hillshadePrepare").draw(Pe,Le.TRIANGLES,xe,be,ke,yr.disabled,Ac(Ke.tileID,qe),null,null,_e.id,oe.rasterBoundsBuffer,oe.quadTriangleIndexBuffer,oe.rasterBoundsSegments),Ke.needsHillshadePrepare=!1}})(b,T,R,M,ee,_r.disabled,ae),$.viewport.set([0,0,b.width,b.height]);else if(b.renderPass==="translucent")if(K){const[oe,le,fe]=b.stencilConfigForOverlapTwoPass(R);gd(b,T,M,fe,oe,ee,ae,!1,U),gd(b,T,M,fe,le,ee,ae,!0,U)}else{const[oe,le]=b.getStencilConfigForOverlapAndUpdateStencilID(R);gd(b,T,M,le,oe,ee,ae,!1,U)}}(r,o,h,m,_):c.c3(h)?function(b,T,M,R,O){if(b.renderPass!=="translucent"||M.paint.get("raster-opacity")===0||!R.length)return;const{isRenderingToTexture:U}=O,$=T.getSource(),K=b.style.projection.useSubdivision;if($ instanceof mn)ro(b,T,M,R,null,!1,!1,$.tileCoords,$.flippedWindingOrder,U);else if(K){const[ee,ae,oe]=b.stencilConfigForOverlapTwoPass(R);ro(b,T,M,oe,ee,!1,!0,sn,!1,U),ro(b,T,M,oe,ae,!0,!0,sn,!1,U)}else{const[ee,ae]=b.getStencilConfigForOverlapAndUpdateStencilID(R);ro(b,T,M,ae,ee,!1,!0,sn,!1,U)}}(r,o,h,m,_):c.c4(h)?function(b,T,M,R,O){const U=M.paint.get("background-color"),$=M.paint.get("background-opacity");if($===0)return;const{isRenderingToTexture:K}=O,ee=b.context,ae=ee.gl,oe=b.style.projection,le=b.transform,fe=le.tileSize,_e=M.paint.get("background-pattern");if(b.isPatternMissing(_e))return;const xe=!_e&&U.a===1&&$===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass!==xe)return;const be=_r.disabled,ke=b.getDepthModeForSublayer(0,xe==="opaque"?nr.ReadWrite:nr.ReadOnly),Pe=b.colorModeForRenderPass(),Le=b.useProgram(_e?"backgroundPattern":"background"),Fe=R||se(le,{tileSize:fe,terrain:b.style.map.terrain});_e&&(ee.activeTexture.set(ae.TEXTURE0),b.imageManager.bind(b.context));const Ke=M.getCrossfadeParameters();for(const qe of Fe){const $e=le.getProjectionData({overscaledTileID:qe,applyGlobeMatrix:!K,applyTerrainMatrix:!0}),ft=_e?Sp($,b,_e,{tileID:qe,tileSize:fe},Ke):wp($,U),ut=b.style.map.terrain&&b.style.map.terrain.getTerrainData(qe),Ye=oe.getMeshFromTileID(ee,qe.canonical,!1,!0,"raster");Le.draw(ee,ae.TRIANGLES,ke,be,Pe,yr.backCCW,ft,ut,$e,M.id,Ye.vertexBuffer,Ye.indexBuffer,Ye.segments)}}(r,0,h,m,_):c.c5(h)&&function(b,T,M,R){const{isRenderingGlobe:O}=R,U=b.context,$=M.implementation,K=b.style.projection,ee=b.transform,ae=ee.getProjectionDataForCustomLayer(O),oe={farZ:ee.farZ,nearZ:ee.nearZ,fov:ee.fov*Math.PI/180,modelViewProjectionMatrix:ee.modelViewProjectionMatrix,projectionMatrix:ee.projectionMatrix,shaderData:{variantName:K.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${K.shaderPreludeCode.vertexSource}`,define:K.shaderDefine},defaultProjectionData:ae},le=$.renderingMode?$.renderingMode:"2d";if(b.renderPass==="offscreen"){const fe=$.prerender;fe&&(b.setCustomLayerDefaults(),U.setColorMode(b.colorModeForRenderPass()),fe.call($,U.gl,oe),U.setDirty(),b.setBaseState())}else if(b.renderPass==="translucent"){b.setCustomLayerDefaults(),U.setColorMode(b.colorModeForRenderPass()),U.setStencilMode(_r.disabled);const fe=le==="3d"?b.getDepthModeFor3D():b.getDepthModeForSublayer(0,nr.ReadOnly);U.setDepthMode(fe),$.render(U.gl,oe),U.setDirty(),b.setBaseState(),U.bindFramebuffer.set(null)}}(r,0,h,_))}saveTileTexture(r){const o=this._tileTextures[r.size[0]];o?o.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const o=this._tileTextures[r];return o&&o.length>0?o.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const o=this.imageManager.getPattern(r.from.toString()),h=this.imageManager.getPattern(r.to.toString());return!o||!h}useProgram(r,o,h=!1){this.cache=this.cache||{};const m=!!this.style.map.terrain,_=this.style.projection,b=r+(o?o.cacheKey:"")+`/${h?Ju:_.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(m?"/terrain":"");return this.cache[b]||(this.cache[b]=new R0(this.context,Qs[r],o,Cp[r],this._showOverdrawInspector,m,h?Qs.projectionMercator:_.shaderPreludeCode,h?Qu:_.shaderDefine)),this.cache[b]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ie(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:o}=this.context.gl;return this.width!==r||this.height!==o}}function Hp(y,r){let o,h=!1,m=null,_=null;const b=()=>{m=null,h&&(y.apply(_,o),m=setTimeout(b,r),h=!1)};return(...T)=>(h=!0,_=this,o=T,m||b(),m)}class qp{constructor(r){this._getCurrentHash=()=>{const o=window.location.hash.replace("#","");if(this._hashName){let h;return o.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(h=m)}),(h&&h[1]||"").split("/")}return o.split("/")},this._onHashChange=()=>{const o=this._getCurrentHash();if(!this._isValidHash(o))return!1;const h=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:h,pitch:+(o[4]||0)}),!0},this._updateHashUnthrottled=()=>{const o=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,o)},this._removeHash=()=>{const o=this._getCurrentHash();if(o.length===0)return;const h=o.join("/");let m=h;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${h}`);let _=window.location.hash.replace(m,"");_.startsWith("#&")?_=_.slice(0,1)+_.slice(2):_==="#"&&(_="");let b=window.location.href.replace(/(#.+)?$/,_);b=b.replace("&&","&"),window.history.replaceState(window.history.state,null,b)},this._updateHash=Hp(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const o=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,m=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,m),b=Math.round(o.lng*_)/_,T=Math.round(o.lat*_)/_,M=this._map.getBearing(),R=this._map.getPitch();let O="";if(O+=r?`/${b}/${T}/${h}`:`${h}/${T}/${b}`,(M||R)&&(O+="/"+Math.round(10*M)/10),R&&(O+=`/${Math.round(R)}`),this._hashName){const U=this._hashName;let $=!1;const K=window.location.hash.slice(1).split("&").map(ee=>{const ae=ee.split("=")[0];return ae===U?($=!0,`${ae}=${O}`):ee}).filter(ee=>ee);return $||K.push(`${U}=${O}`),`#${K.join("&")}`}return`#${O}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new c.N(+r[2],+r[1])}catch{return!1}const o=+r[0],h=+(r[3]||0),m=+(r[4]||0);return o>=this._map.getMinZoom()&&o<=this._map.getMaxZoom()&&h>=0&&h<=180&&m>=this._map.getMinPitch()&&m<=this._map.getMaxPitch()}}const bl={linearity:.3,easing:c.c6(0,0,.3,1)},qg=c.e({deceleration:2500,maxSpeed:1400},bl),Wg=c.e({deceleration:20,maxSpeed:1400},bl),Xg=c.e({deceleration:1e3,maxSpeed:360},bl),Kg=c.e({deceleration:1e3,maxSpeed:90},bl),Bc=c.e({deceleration:1e3,maxSpeed:360},bl);class Yg{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:L.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,o=L.now();for(;r.length>0&&o-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const o={zoom:0,bearing:0,pitch:0,roll:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)o.zoom+=_.zoomDelta||0,o.bearing+=_.bearingDelta||0,o.pitch+=_.pitchDelta||0,o.roll+=_.rollDelta||0,_.panDelta&&o.pan._add(_.panDelta),_.around&&(o.around=_.around),_.pinchAround&&(o.pinchAround=_.pinchAround);const h=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(o.pan.mag()){const _=zi(o.pan.mag(),h,c.e({},qg,r||{})),b=o.pan.mult(_.amount/o.pan.mag()),T=this._map.cameraHelper.handlePanInertia(b,this._map.transform);m.center=T.easingCenter,m.offset=T.easingOffset,xi(m,_)}if(o.zoom){const _=zi(o.zoom,h,Wg);m.zoom=this._map.transform.zoom+_.amount,xi(m,_)}if(o.bearing){const _=zi(o.bearing,h,Xg);m.bearing=this._map.transform.bearing+c.ab(_.amount,-179,179),xi(m,_)}if(o.pitch){const _=zi(o.pitch,h,Kg);m.pitch=this._map.transform.pitch+_.amount,xi(m,_)}if(o.roll){const _=zi(o.roll,h,Bc);m.roll=this._map.transform.roll+c.ab(_.amount,-179,179),xi(m,_)}if(m.zoom||m.bearing){const _=o.pinchAround===void 0?o.around:o.pinchAround;m.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),c.e(m,{noMoveStart:!0})}}function xi(y,r){(!y.duration||y.duration<r.duration)&&(y.duration=r.duration,y.easing=r.easing)}function zi(y,r,o){const{maxSpeed:h,linearity:m,deceleration:_}=o,b=c.ab(y*m/(r/1e3),-h,h),T=Math.abs(b)/(_*m);return{easing:o.easing,duration:1e3*T,amount:b*(T/2)}}class ji extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,o,h,m={}){const _=I.mousePos(o.getCanvas(),h),b=o.unproject(_);super(r,c.e({point:_,lngLat:b,originalEvent:h},m)),this._defaultPrevented=!1,this.target=o}}class Li extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,o,h){const m=r==="touchend"?h.changedTouches:h.touches,_=I.touchPos(o.getCanvasContainer(),m),b=_.map(M=>o.unproject(M)),T=_.reduce((M,R,O,U)=>M.add(R.div(U.length)),new c.P(0,0));super(r,{points:_,point:T,lngLats:b,lngLat:o.unproject(T),originalEvent:h}),this._defaultPrevented=!1}}class Ia extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,o,h){super(r,{originalEvent:h}),this._defaultPrevented=!1}}class $0{constructor(r,o){this._map=r,this._clickTolerance=o.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Ia(r.type,this._map,r))}mousedown(r,o){return this._mousedownPos=o,this._firePreventable(new ji(r.type,this._map,r))}mouseup(r){this._map.fire(new ji(r.type,this._map,r))}click(r,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new ji(r.type,this._map,r))}dblclick(r){return this._firePreventable(new ji(r.type,this._map,r))}mouseover(r){this._map.fire(new ji(r.type,this._map,r))}mouseout(r){this._map.fire(new ji(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Li(r.type,this._map,r))}touchmove(r){this._map.fire(new Li(r.type,this._map,r))}touchend(r){this._map.fire(new Li(r.type,this._map,r))}touchcancel(r){this._map.fire(new Li(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Z0{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new ji(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ji("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new ji(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Uc{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(c.P.convert(r),this._map.terrain)}}class Qg{constructor(r,o){this._map=r,this._tr=new Uc(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,o){this.isEnabled()&&r.shiftKey&&r.button===0&&(I.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(r,o){if(!this._active)return;const h=o;if(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=h,this._box||(this._box=I.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const _=Math.min(m.x,h.x),b=Math.max(m.x,h.x),T=Math.min(m.y,h.y),M=Math.max(m.y,h.y);I.setTransform(this._box,`translate(${_}px,${T}px)`),this._box.style.width=b-_+"px",this._box.style.height=M-T+"px"}mouseupWindow(r,o){if(!this._active||r.button!==0)return;const h=this._startPos,m=o;if(this.reset(),I.suppressClick(),h.x!==m.x||h.y!==m.y)return this._map.fire(new c.k("boxzoomend",{originalEvent:r})),{cameraAnimation:_=>_.fitScreenCoordinates(h,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(I.remove(this._box),this._box=null),I.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,o){return this._map.fire(new c.k(r,{originalEvent:o}))}}function _d(y,r){if(y.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${r.length}`);const o={};for(let h=0;h<y.length;h++)o[y[h].identifier]=r[h];return o}class Vc{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,o,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),h.length===this.numTouches&&(this.centroid=function(m){const _=new c.P(0,0);for(const b of m)_._add(b);return _.div(m.length)}(o),this.touches=_d(h,o)))}touchmove(r,o,h){if(this.aborted||!this.centroid)return;const m=_d(h,o);for(const _ in this.touches){const b=m[_];(!b||b.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(r,o,h){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),h.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class Is{constructor(r){this.singleTap=new Vc(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,o,h){this.singleTap.touchstart(r,o,h)}touchmove(r,o,h){this.singleTap.touchmove(r,o,h)}touchend(r,o,h){const m=this.singleTap.touchend(r,o,h);if(m){const _=r.timeStamp-this.lastTime<500,b=!this.lastTap||this.lastTap.dist(m)<30;if(_&&b||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class St{constructor(r){this._tr=new Uc(r),this._zoomIn=new Is({numTouches:1,numTaps:2}),this._zoomOut=new Is({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,o,h){this._zoomIn.touchstart(r,o,h),this._zoomOut.touchstart(r,o,h)}touchmove(r,o,h){this._zoomIn.touchmove(r,o,h),this._zoomOut.touchmove(r,o,h)}touchend(r,o,h){const m=this._zoomIn.touchend(r,o,h),_=this._zoomOut.touchend(r,o,h),b=this._tr;return m?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:b.zoom+1,around:b.unproject(m)},{originalEvent:r})}):_?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:b.zoom-1,around:b.unproject(_)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wl{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const o=this._moveFunction(...r);if(o.bearingDelta||o.pitchDelta||o.rollDelta||o.around||o.panDelta)return this._active=!0,o}dragStart(r,o){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(o)?o[0]:o,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,o){if(!this.isEnabled())return;const h=this._lastPoint;if(!h)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const m=Array.isArray(o)?o[0]:o;return!this._moved&&m.dist(h)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(h,m))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&I.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Wp={0:1,2:2};class Sl{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const o=I.mouseButton(r);this._eventButton=o}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(o,h){const m=Wp[h];return o.buttons===void 0||(o.buttons&m)!==m}(r,this._eventButton)}isValidEndEvent(r){return I.mouseButton(r)===this._eventButton}}class $c{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class Zc{constructor(r=new Sl({checkCorrectEvent:()=>!0}),o=new $c){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=o}_executeRelevantHandler(r,o,h){return r instanceof MouseEvent?o(r):typeof TouchEvent<"u"&&r instanceof TouchEvent?h(r):void 0}startMove(r){this._executeRelevantHandler(r,o=>this.mouseMoveStateManager.startMove(o),o=>this.oneFingerTouchMoveStateManager.startMove(o))}endMove(r){this._executeRelevantHandler(r,o=>this.mouseMoveStateManager.endMove(o),o=>this.oneFingerTouchMoveStateManager.endMove(o))}isValidStartEvent(r){return this._executeRelevantHandler(r,o=>this.mouseMoveStateManager.isValidStartEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidStartEvent(o))}isValidMoveEvent(r){return this._executeRelevantHandler(r,o=>this.mouseMoveStateManager.isValidMoveEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(o))}isValidEndEvent(r){return this._executeRelevantHandler(r,o=>this.mouseMoveStateManager.isValidEndEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidEndEvent(o))}}const Gc=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=r=>{r.preventDefault()}};class mr{constructor(r,o){this._clickTolerance=r.clickTolerance||1,this._map=o,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,o,h){return this._calculateTransform(r,o,h)}touchmove(r,o,h){if(this._active){if(!this._shouldBePrevented(h.length))return r.preventDefault(),this._calculateTransform(r,o,h);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,o,h){this._calculateTransform(r,o,h),this._active&&this._shouldBePrevented(h.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,o,h){h.length>0&&(this._active=!0);const m=_d(h,o),_=new c.P(0,0),b=new c.P(0,0);let T=0;for(const R in m){const O=m[R],U=this._touches[R];U&&(_._add(O),b._add(O.sub(U)),T++,m[R]=O)}if(this._touches=m,this._shouldBePrevented(T)||!b.mag())return;const M=b.div(T);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(T),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,o,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([o[0],o[1]]))}touchmove(r,o,h){if(!this._firstTwoTouches)return;r.preventDefault();const[m,_]=this._firstTwoTouches,b=vd(h,o,m),T=vd(h,o,_);if(!b||!T)return;const M=this._aroundCenter?null:b.add(T).div(2);return this._move([b,T],M,r)}touchend(r,o,h){if(!this._firstTwoTouches)return;const[m,_]=this._firstTwoTouches,b=vd(h,o,m),T=vd(h,o,_);b&&T||(this._active&&I.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function vd(y,r,o){for(let h=0;h<y.length;h++)if(y[h].identifier===o)return r[h]}function xd(y,r){return Math.log(y/r)/Math.LN2}class Jg extends Hc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,o){const h=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(xd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:xd(this._distance,h),pinchAround:o}}}function ey(y,r){return 180*y.angleWith(r)/Math.PI}class Xp extends Hc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,o,h){const m=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ey(this._vector,m),pinchAround:o}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const o=25/(Math.PI*this._minDiameter)*360,h=ey(r,this._startVector);return Math.abs(h)<o}}function qc(y){return Math.abs(y.y)>Math.abs(y.x)}class Kp extends Hc{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,o,h){super.touchstart(r,o,h),this._currentTouchCount=h.length}_start(r){this._lastPoints=r,qc(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,o,h){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const m=r[0].sub(this._lastPoints[0]),_=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,_,h.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(m.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(r,o,h){if(this._valid!==void 0)return this._valid;const m=r.mag()>=2,_=o.mag()>=2;if(!m&&!_)return;if(!m||!_)return this._firstMove===void 0&&(this._firstMove=h),h-this._firstMove<100&&void 0;const b=r.y>0==o.y>0;return qc(r)&&qc(o)&&b}}const G0={panStep:100,bearingStep:15,pitchStep:10};class Yp{constructor(r){this._tr=new Uc(r);const o=G0;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let o=0,h=0,m=0,_=0,b=0;switch(r.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:r.shiftKey?h=-1:(r.preventDefault(),_=-1);break;case 39:r.shiftKey?h=1:(r.preventDefault(),_=1);break;case 38:r.shiftKey?m=1:(r.preventDefault(),b=-1);break;case 40:r.shiftKey?m=-1:(r.preventDefault(),b=1);break;default:return}return this._rotationDisabled&&(h=0,m=0),{cameraAnimation:T=>{const M=this._tr;T.easeTo({duration:300,easeId:"keyboardHandler",easing:H0,zoom:o?Math.round(M.zoom)+o*(r.shiftKey?2:1):M.zoom,bearing:M.bearing+h*this._bearingStep,pitch:M.pitch+m*this._pitchStep,offset:[-_*this._panStep,-b*this._panStep],center:M.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function H0(y){return y*(2-y)}const ty=4.000244140625;class wo{constructor(r,o){this._onTimeout=h=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(h)},this._map=r,this._tr=new Uc(r),this._triggerRenderFrame=o,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let o=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const h=L.now(),m=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,o!==0&&o%ty==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(m*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),r.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=r,this._delta-=o,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=I.mousePos(this._map.getCanvas(),r),h=this._tr;this._aroundPoint=this._aroundCenter?h.transform.locationToScreenPoint(c.N.convert(h.center)):o,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const T=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=T),typeof this._targetZoom=="number"&&(this._targetZoom+=T)}if(this._delta!==0){const T=this._type==="wheel"&&Math.abs(this._delta)>ty?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*T)));this._delta<0&&M!==0&&(M=1/M);const R=typeof this._targetZoom!="number"?r.scale:c.aG(this._targetZoom);this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,c.a8(R*M))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const o=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,h=this._startZoom,m=this._easing;let _,b=!1;if(this._type==="wheel"&&h&&m){const T=L.now()-this._lastWheelEventTime,M=Math.min((T+5)/200,1),R=m(M);_=c.y.number(h,o,R),M<1?this._frameId||(this._frameId=!0):b=!0}else _=o,b=!0;return this._active=!0,b&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=_,{noInertia:!0,needsRenderFrame:!b,zoomDelta:_-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let o=c.c8;if(this._prevEase){const h=this._prevEase,m=(L.now()-h.start)/h.duration,_=h.easing(m+.01)-h.easing(m),b=.27/Math.sqrt(_*_+1e-4)*.01,T=Math.sqrt(.0729-b*b);o=c.c6(b,T,.25,1)}return this._prevEase={start:L.now(),duration:r,easing:o},o}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Hr{constructor(r,o){this._clickZoom=r,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class bd{constructor(r){this._tr=new Uc(r),this.reset()}reset(){this._active=!1}dblclick(r,o){return r.preventDefault(),{cameraAnimation:h=>{h.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(o)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qp{constructor(){this._tap=new Is({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,o,h){if(!this._swipePoint)if(this._tapTime){const m=o[0],_=r.timeStamp-this._tapTime<500,b=this._tapPoint.dist(m)<30;_&&b?h.length>0&&(this._swipePoint=m,this._swipeTouch=h[0].identifier):this.reset()}else this._tap.touchstart(r,o,h)}touchmove(r,o,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;const m=o[0],_=m.y-this._swipePoint.y;return this._swipePoint=m,r.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(r,o,h)}touchend(r,o,h){if(this._tapTime)this._swipePoint&&h.length===0&&this.reset();else{const m=this._tap.touchend(r,o,h);m&&(this._tapTime=r.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Jp{constructor(r,o,h){this._el=r,this._mousePan=o,this._touchPan=h}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ef{constructor(r,o,h,m){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=o,this._mousePitch=h,this._mouseRoll=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class tf{constructor(r,o,h,m){this._el=r,this._touchZoom=o,this._touchRotate=h,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class ry{constructor(r,o){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=o,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=I.create("div","maplibregl-cooperative-gesture-screen",r);let o=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(o=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const h=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=o,this._container.appendChild(m);const _=document.createElement("div");_.className="maplibregl-mobile-message",_.textContent=h,this._container.appendChild(_),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(I.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,o){this._enabled&&(this._map.fire(new c.k("cooperativegestureprevented",{gestureType:r,originalEvent:o})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Yi=y=>y.zoom||y.drag||y.roll||y.pitch||y.rotate;class wd extends c.k{}function Dt(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta||y.rollDelta}class Ht{constructor(r,o){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,_)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const b=m.type==="renderFrame"?void 0:m,T={needsRenderFrame:!1},M={},R={},O=m.touches,U=O?this._getMapTouches(O):void 0,$=U?I.touchPos(this._map.getCanvas(),U):I.mousePos(this._map.getCanvas(),m);for(const{handlerName:ae,handler:oe,allowed:le}of this._handlers){if(!oe.isEnabled())continue;let fe;this._blockedByActive(R,le,ae)?oe.reset():oe[_||m.type]&&(fe=oe[_||m.type](m,$,U),this.mergeHandlerResult(T,M,fe,ae,b),fe&&fe.needsRenderFrame&&this._triggerRenderFrame()),(fe||oe.isActive())&&(R[ae]=oe)}const K={};for(const ae in this._previousActiveHandlers)R[ae]||(K[ae]=b);this._previousActiveHandlers=R,(Object.keys(K).length||Dt(T))&&(this._changes.push([T,M,K]),this._triggerRenderFrame()),(Object.keys(R).length||Dt(T))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ee}=T;ee&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ee(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Yg(r),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(o);const h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,_,b]of this._listeners)I.addEventListener(m,_,m===document?this.handleWindowEvent:this.handleEvent,b)}destroy(){for(const[r,o,h]of this._listeners)I.removeEventListener(r,o,r===document?this.handleWindowEvent:this.handleEvent,h)}_addDefaultHandlers(r){const o=this._map,h=o.getCanvasContainer();this._add("mapEvent",new $0(o,r));const m=o.boxZoom=new Qg(o,r);this._add("boxZoom",m),r.interactive&&r.boxZoom&&m.enable();const _=o.cooperativeGestures=new ry(o,r.cooperativeGestures);this._add("cooperativeGestures",_),r.cooperativeGestures&&_.enable();const b=new St(o),T=new bd(o);o.doubleClickZoom=new Hr(T,b),this._add("tapZoom",b),this._add("clickZoom",T),r.interactive&&r.doubleClickZoom&&o.doubleClickZoom.enable();const M=new Qp;this._add("tapDragZoom",M);const R=o.touchPitch=new Kp(o);this._add("touchPitch",R),r.interactive&&r.touchPitch&&o.touchPitch.enable(r.touchPitch);const O=()=>o.project(o.getCenter()),U=function({enable:xe,clickTolerance:be,aroundCenter:ke=!0,minPixelCenterThreshold:Pe=100,rotateDegreesPerPixelMoved:Le=.8},Fe){const Ke=new Sl({checkCorrectEvent:qe=>I.mouseButton(qe)===0&&qe.ctrlKey||I.mouseButton(qe)===2&&!qe.ctrlKey});return new wl({clickTolerance:be,move:(qe,$e)=>{const ft=Fe();if(ke&&Math.abs(ft.y-qe.y)>Pe)return{bearingDelta:c.c7(new c.P(qe.x,$e.y),$e,ft)};let ut=($e.x-qe.x)*Le;return ke&&$e.y<ft.y&&(ut=-ut),{bearingDelta:ut}},moveStateManager:Ke,enable:xe,assignEvents:Gc})}(r,O),$=function({enable:xe,clickTolerance:be,pitchDegreesPerPixelMoved:ke=-.5}){const Pe=new Sl({checkCorrectEvent:Le=>I.mouseButton(Le)===0&&Le.ctrlKey||I.mouseButton(Le)===2});return new wl({clickTolerance:be,move:(Le,Fe)=>({pitchDelta:(Fe.y-Le.y)*ke}),moveStateManager:Pe,enable:xe,assignEvents:Gc})}(r),K=function({enable:xe,clickTolerance:be,rollDegreesPerPixelMoved:ke=.3},Pe){const Le=new Sl({checkCorrectEvent:Fe=>I.mouseButton(Fe)===2&&Fe.ctrlKey});return new wl({clickTolerance:be,move:(Fe,Ke)=>{const qe=Pe();let $e=(Ke.x-Fe.x)*ke;return Ke.y<qe.y&&($e=-$e),{rollDelta:$e}},moveStateManager:Le,enable:xe,assignEvents:Gc})}(r,O);o.dragRotate=new ef(r,U,$,K),this._add("mouseRotate",U,["mousePitch"]),this._add("mousePitch",$,["mouseRotate","mouseRoll"]),this._add("mouseRoll",K,["mousePitch"]),r.interactive&&r.dragRotate&&o.dragRotate.enable();const ee=function({enable:xe,clickTolerance:be}){const ke=new Sl({checkCorrectEvent:Pe=>I.mouseButton(Pe)===0&&!Pe.ctrlKey});return new wl({clickTolerance:be,move:(Pe,Le)=>({around:Le,panDelta:Le.sub(Pe)}),activateOnStart:!0,moveStateManager:ke,enable:xe,assignEvents:Gc})}(r),ae=new mr(r,o);o.dragPan=new Jp(h,ee,ae),this._add("mousePan",ee),this._add("touchPan",ae,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&o.dragPan.enable(r.dragPan);const oe=new Xp,le=new Jg;o.touchZoomRotate=new tf(h,le,oe,M),this._add("touchRotate",oe,["touchPan","touchZoom"]),this._add("touchZoom",le,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&o.touchZoomRotate.enable(r.touchZoomRotate);const fe=o.scrollZoom=new wo(o,()=>this._triggerRenderFrame());this._add("scrollZoom",fe,["mousePan"]),r.interactive&&r.scrollZoom&&o.scrollZoom.enable(r.scrollZoom);const _e=o.keyboard=new Yp(o);this._add("keyboard",_e),r.interactive&&r.keyboard&&o.keyboard.enable(),this._add("blockableMapEvent",new Z0(o))}_add(r,o,h){this._handlers.push({handlerName:r,handler:o,allowed:h}),this._handlersById[r]=o}stop(r){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Yi(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,o,h){for(const m in r)if(m!==h&&(!o||o.indexOf(m)<0))return!0;return!1}_getMapTouches(r){const o=[];for(const h of r)this._el.contains(h.target)&&o.push(h);return o}mergeHandlerResult(r,o,h,m,_){if(!h)return;c.e(r,h);const b={handlerName:m,originalEvent:h.originalEvent||_};h.zoomDelta!==void 0&&(o.zoom=b),h.panDelta!==void 0&&(o.drag=b),h.rollDelta!==void 0&&(o.roll=b),h.pitchDelta!==void 0&&(o.pitch=b),h.bearingDelta!==void 0&&(o.rotate=b)}_applyChanges(){const r={},o={},h={};for(const[m,_,b]of this._changes)m.panDelta&&(r.panDelta=(r.panDelta||new c.P(0,0))._add(m.panDelta)),m.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+m.pitchDelta),m.rollDelta&&(r.rollDelta=(r.rollDelta||0)+m.rollDelta),m.around!==void 0&&(r.around=m.around),m.pinchAround!==void 0&&(r.pinchAround=m.pinchAround),m.noInertia&&(r.noInertia=m.noInertia),c.e(o,_),c.e(h,b);this._updateMapTransform(r,o,h),this._changes=[]}_updateMapTransform(r,o,h){const m=this._map,_=m._getTransformForUpdate(),b=m.terrain;if(!(Dt(r)||b&&this._terrainMovement))return this._fireEvents(o,h,!0);m._stop(!0);let{panDelta:T,zoomDelta:M,bearingDelta:R,pitchDelta:O,rollDelta:U,around:$,pinchAround:K}=r;K!==void 0&&($=K),$=$||m.transform.centerPoint,b&&!_.isPointOnMapSurface($)&&($=_.centerPoint);const ee={panDelta:T,zoomDelta:M,rollDelta:U,pitchDelta:O,bearingDelta:R,around:$};this._map.cameraHelper.useGlobeControls&&!_.isPointOnMapSurface($)&&($=_.centerPoint);const ae=$.distSqr(_.centerPoint)<.01?_.center:_.screenPointToLocation(T?$.sub(T):$);b?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ee,_),this._terrainMovement||!o.drag&&!o.zoom?o.drag&&this._terrainMovement?_.setCenter(_.screenPointToLocation(_.centerPoint.sub(T))):this._map.cameraHelper.handleMapControlsPan(ee,_,ae):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ee,_,ae))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ee,_),this._map.cameraHelper.handleMapControlsPan(ee,_,ae)),m._applyUpdatedTransform(_),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(o,h,!0)}_fireEvents(r,o,h){const m=Yi(this._eventsInProgress),_=Yi(r),b={};for(const U in r){const{originalEvent:$}=r[U];this._eventsInProgress[U]||(b[`${U}start`]=$),this._eventsInProgress[U]=r[U]}!m&&_&&this._fireEvent("movestart",_.originalEvent);for(const U in b)this._fireEvent(U,b[U]);_&&this._fireEvent("move",_.originalEvent);for(const U in r){const{originalEvent:$}=r[U];this._fireEvent(U,$)}const T={};let M;for(const U in this._eventsInProgress){const{handlerName:$,originalEvent:K}=this._eventsInProgress[U];this._handlersById[$].isActive()||(delete this._eventsInProgress[U],M=o[$]||K,T[`${U}end`]=M)}for(const U in T)this._fireEvent(U,T[U]);const R=Yi(this._eventsInProgress),O=(m||_)&&!R;if(O&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const U=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&U.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(U)}if(h&&O){this._updatingCamera=!0;const U=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),$=K=>K!==0&&-this._bearingSnap<K&&K<this._bearingSnap;!U||!U.essential&&L.prefersReducedMotion?(this._map.fire(new c.k("moveend",{originalEvent:M})),$(this._map.getBearing())&&this._map.resetNorth()):($(U.bearing||this._map.getBearing())&&(U.bearing=0),U.freezeElevation=!0,this._map.easeTo(U,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(r,o){this._map.fire(new c.k(r,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new wd("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Sd extends c.E{constructor(r,o,h){super(),this._renderFrameCallback=()=>{const m=Math.min((L.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=h.bearingSnap,this.cameraHelper=o,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(r,o){r.apply(this.transform),this.transform=r,this.cameraHelper=o}getCenter(){return new c.N(this.transform.center.lng,this.transform.center.lat)}setCenter(r,o){return this.jumpTo({center:r},o)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,o){return this.jumpTo({elevation:r},o),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,o,h){return r=c.P.convert(r).mult(-1),this.panTo(this.transform.center,c.e({offset:r},o),h)}panTo(r,o,h){return this.easeTo(c.e({center:r},o),h)}getZoom(){return this.transform.zoom}setZoom(r,o){return this.jumpTo({zoom:r},o),this}zoomTo(r,o,h){return this.easeTo(c.e({zoom:r},o),h)}zoomIn(r,o){return this.zoomTo(this.getZoom()+1,r,o),this}zoomOut(r,o){return this.zoomTo(this.getZoom()-1,r,o),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,o){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new c.k("movestart",o)).fire(new c.k("move",o)).fire(new c.k("moveend",o))),this}getBearing(){return this.transform.bearing}setBearing(r,o){return this.jumpTo({bearing:r},o),this}getPadding(){return this.transform.padding}setPadding(r,o){return this.jumpTo({padding:r},o),this}rotateTo(r,o,h){return this.easeTo(c.e({bearing:r},o),h)}resetNorth(r,o){return this.rotateTo(0,c.e({duration:1e3},r),o),this}resetNorthPitch(r,o){return this.easeTo(c.e({bearing:0,pitch:0,roll:0,duration:1e3},r),o),this}snapToNorth(r,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,o):this}getPitch(){return this.transform.pitch}setPitch(r,o){return this.jumpTo({pitch:r},o),this}getRoll(){return this.transform.roll}setRoll(r,o){return this.jumpTo({roll:r},o),this}cameraForBounds(r,o){r=vr.convert(r).adjustAntiMeridian();const h=o&&o.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),h,o)}_cameraForBoxAndBearing(r,o,h,m){const _={top:0,bottom:0,right:0,left:0};if(typeof(m=c.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const R=m.padding;m.padding={top:R,bottom:R,right:R,left:R}}const b=c.e(_,m.padding);m.padding=b;const T=this.transform,M=new vr(r,o);return this.cameraHelper.cameraForBoxAndBearing(m,b,M,h,T)}fitBounds(r,o,h){return this._fitInternal(this.cameraForBounds(r,o),o,h)}fitScreenCoordinates(r,o,h,m,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(c.P.convert(r)),this.transform.screenPointToLocation(c.P.convert(o)),h,m),m,_)}_fitInternal(r,o,h){return r?(delete(o=c.e(r,o)).padding,o.linear?this.easeTo(o,h):this.flyTo(o,h)):this}jumpTo(r,o){this.stop();const h=this._getTransformForUpdate();let m=!1,_=!1,b=!1;const T=h.zoom;this.cameraHelper.handleJumpToCenterZoom(h,r);const M=h.zoom!==T;return"elevation"in r&&h.elevation!==+r.elevation&&h.setElevation(+r.elevation),"bearing"in r&&h.bearing!==+r.bearing&&(m=!0,h.setBearing(+r.bearing)),"pitch"in r&&h.pitch!==+r.pitch&&(_=!0,h.setPitch(+r.pitch)),"roll"in r&&h.roll!==+r.roll&&(b=!0,h.setRoll(+r.roll)),r.padding==null||h.isPaddingEqual(r.padding)||h.setPadding(r.padding),this._applyUpdatedTransform(h),this.fire(new c.k("movestart",o)).fire(new c.k("move",o)),M&&this.fire(new c.k("zoomstart",o)).fire(new c.k("zoom",o)).fire(new c.k("zoomend",o)),m&&this.fire(new c.k("rotatestart",o)).fire(new c.k("rotate",o)).fire(new c.k("rotateend",o)),_&&this.fire(new c.k("pitchstart",o)).fire(new c.k("pitch",o)).fire(new c.k("pitchend",o)),b&&this.fire(new c.k("rollstart",o)).fire(new c.k("roll",o)).fire(new c.k("rollend",o)),this.fire(new c.k("moveend",o))}calculateCameraOptionsFromTo(r,o,h,m=0){const _=c.Y.fromLngLat(r,o),b=c.Y.fromLngLat(h,m),T=b.x-_.x,M=b.y-_.y,R=b.z-_.z,O=Math.hypot(T,M,R);if(O===0)throw new Error("Can't calculate camera options with same From and To");const U=Math.hypot(T,M),$=c.a8(this.transform.cameraToCenterDistance/O/this.transform.tileSize),K=180*Math.atan2(T,-M)/Math.PI;let ee=180*Math.acos(U/O)/Math.PI;return ee=R<0?90-ee:90+ee,{center:b.toLngLat(),elevation:m,zoom:$,pitch:ee,bearing:K}}calculateCameraOptionsFromCameraLngLatAltRotation(r,o,h,m,_){const b=this.transform.calculateCenterFromCameraLngLatAlt(r,o,h,m);return{center:b.center,elevation:b.elevation,zoom:b.zoom,bearing:h,pitch:m,roll:_}}easeTo(r,o){this._stop(!1,r.easeId),((r=c.e({offset:[0,0],duration:500,easing:c.c8},r)).animate===!1||!r.essential&&L.prefersReducedMotion)&&(r.duration=0);const h=this._getTransformForUpdate(),m=this.getBearing(),_=h.pitch,b=h.roll,T="bearing"in r?this._normalizeBearing(r.bearing,m):m,M="pitch"in r?+r.pitch:_,R="roll"in r?this._normalizeBearing(r.roll,b):b,O="padding"in r?r.padding:h.padding,U=c.P.convert(r.offset);let $,K;r.around&&($=c.N.convert(r.around),K=h.locationToScreenPoint($));const ee={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ae=this.cameraHelper.handleEaseTo(h,{bearing:T,pitch:M,roll:R,padding:O,around:$,aroundPoint:K,offsetAsPoint:U,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||m!==T,this._pitching=this._pitching||M!==_,this._rolling=this._rolling||R!==b,this._padding=!h.isPaddingEqual(O),this._zooming=this._zooming||ae.isZooming,this._easeId=r.easeId,this._prepareEase(o,r.noMoveStart,ee),this.terrain&&this._prepareElevation(ae.elevationCenter),this._ease(oe=>{ae.easeFunc(oe),this.terrain&&!r.freezeElevation&&this._updateElevation(oe),this._applyUpdatedTransform(h),this._fireMoveEvents(o)},oe=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(o,oe)},r),this}_prepareEase(r,o,h={}){this._moving=!0,o||h.moving||this.fire(new c.k("movestart",r)),this._zooming&&!h.zooming&&this.fire(new c.k("zoomstart",r)),this._rotating&&!h.rotating&&this.fire(new c.k("rotatestart",r)),this._pitching&&!h.pitching&&this.fire(new c.k("pitchstart",r)),this._rolling&&!h.rolling&&this.fire(new c.k("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const o=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&o!==this._elevationTarget){const h=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(h-(o-(h*r+this._elevationStart))/(1-r)),this._elevationTarget=o}this.transform.setElevation(c.y.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};const o=r.getCameraLngLat(),h=r.getCameraAltitude(),m=this.terrain?this.terrain.getElevationForLngLatZoom(o,r.zoom):0;if(h<m){const _=this.calculateCameraOptionsFromTo(o,m,r.center,r.elevation);return{pitch:_.pitch,zoom:_.zoom}}return{}}_applyUpdatedTransform(r){const o=[];if(o.push(m=>this._elevateCameraIfInsideTerrain(m)),this.transformCameraUpdate&&o.push(m=>this.transformCameraUpdate(m)),!o.length)return;const h=r.clone();for(const m of o){const _=h.clone(),{center:b,zoom:T,roll:M,pitch:R,bearing:O,elevation:U}=m(_);b&&_.setCenter(b),U!==void 0&&_.setElevation(U),T!==void 0&&_.setZoom(T),M!==void 0&&_.setRoll(M),R!==void 0&&_.setPitch(R),O!==void 0&&_.setBearing(O),h.apply(_)}this.transform.apply(h)}_fireMoveEvents(r){this.fire(new c.k("move",r)),this._zooming&&this.fire(new c.k("zoom",r)),this._rotating&&this.fire(new c.k("rotate",r)),this._pitching&&this.fire(new c.k("pitch",r)),this._rolling&&this.fire(new c.k("roll",r))}_afterEase(r,o){if(this._easeId&&o&&this._easeId===o)return;delete this._easeId;const h=this._zooming,m=this._rotating,_=this._pitching,b=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,h&&this.fire(new c.k("zoomend",r)),m&&this.fire(new c.k("rotateend",r)),_&&this.fire(new c.k("pitchend",r)),b&&this.fire(new c.k("rollend",r)),this.fire(new c.k("moveend",r))}flyTo(r,o){if(!r.essential&&L.prefersReducedMotion){const $e=c.M(r,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo($e,o)}this.stop(),r=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.c8},r);const h=this._getTransformForUpdate(),m=h.bearing,_=h.pitch,b=h.roll,T=h.padding,M="bearing"in r?this._normalizeBearing(r.bearing,m):m,R="pitch"in r?+r.pitch:_,O="roll"in r?this._normalizeBearing(r.roll,b):b,U="padding"in r?r.padding:h.padding,$=c.P.convert(r.offset);let K=h.centerPoint.add($);const ee=h.screenPointToLocation(K),ae=this.cameraHelper.handleFlyTo(h,{bearing:M,pitch:R,roll:O,padding:U,locationAtOffset:ee,offsetAsPoint:$,center:r.center,minZoom:r.minZoom,zoom:r.zoom});let oe=r.curve;const le=Math.max(h.width,h.height),fe=le/ae.scaleOfZoom,_e=ae.pixelPathLength;typeof ae.scaleOfMinZoom=="number"&&(oe=Math.sqrt(le/ae.scaleOfMinZoom/_e*2));const xe=oe*oe;function be($e){const ft=(fe*fe-le*le+($e?-1:1)*xe*xe*_e*_e)/(2*($e?fe:le)*xe*_e);return Math.log(Math.sqrt(ft*ft+1)-ft)}function ke($e){return(Math.exp($e)-Math.exp(-$e))/2}function Pe($e){return(Math.exp($e)+Math.exp(-$e))/2}const Le=be(!1);let Fe=function($e){return Pe(Le)/Pe(Le+oe*$e)},Ke=function($e){return le*((Pe(Le)*(ke(ft=Le+oe*$e)/Pe(ft))-ke(Le))/xe)/_e;var ft},qe=(be(!0)-Le)/oe;if(Math.abs(_e)<2e-6||!isFinite(qe)){if(Math.abs(le-fe)<1e-6)return this.easeTo(r,o);const $e=fe<le?-1:1;qe=Math.abs(Math.log(fe/le))/oe,Ke=()=>0,Fe=ft=>Math.exp($e*oe*ft)}return r.duration="duration"in r?+r.duration:1e3*qe/("screenSpeed"in r?+r.screenSpeed/oe:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=m!==M,this._pitching=R!==_,this._rolling=O!==b,this._padding=!h.isPaddingEqual(U),this._prepareEase(o,!1),this.terrain&&this._prepareElevation(ae.targetCenter),this._ease($e=>{const ft=$e*qe,ut=1/Fe(ft),Ye=Ke(ft);this._rotating&&h.setBearing(c.y.number(m,M,$e)),this._pitching&&h.setPitch(c.y.number(_,R,$e)),this._rolling&&h.setRoll(c.y.number(b,O,$e)),this._padding&&(h.interpolatePadding(T,U,$e),K=h.centerPoint.add($)),ae.easeFunc($e,ut,Ye,K),this.terrain&&!r.freezeElevation&&this._updateElevation($e),this._applyUpdatedTransform(h),this._fireMoveEvents(o)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(o)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,o){var h;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,o)}return r||(h=this.handlers)===null||h===void 0||h.stop(!1),this}_ease(r,o,h){h.animate===!1||h.duration===0?(r(1),o()):(this._easeStart=L.now(),this._easeOptions=h,this._onEaseFrame=r,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,o){r=c.aI(r,-180,180);const h=Math.abs(r-o);return Math.abs(r-360-o)<h&&(r-=360),Math.abs(r+360-o)<h&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(c.N.convert(r),this.transform.tileZoom):null}}const Td={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Cd{constructor(r=Td){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=o=>{!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=I.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=I.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=I.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){I.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._sanitizedAttributionHTML=void 0}_setElementTitle(r,o){const h=this._map._getUIString(`AttributionControl.${o}`);r.title=h,r.setAttribute("aria-label",h)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const o=this._map.style.sourceCaches;for(const m in o){const _=o[m];if(_.used||_.usedForTerrain){const b=_.getSource();b.attribution&&r.indexOf(b.attribution)<0&&r.push(b.attribution)}}r=r.filter(m=>String(m).trim()),r.sort((m,_)=>m.length-_.length),r=r.filter((m,_)=>{for(let b=_+1;b<r.length;b++)if(r[b].indexOf(m)>=0)return!1;return!0});const h=r.join(" | ");h!==this._sanitizedAttributionHTML&&(this._sanitizedAttributionHTML=I.sanitize(h),r.length?(this._innerContainer.innerHTML=this._sanitizedAttributionHTML,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class bi{constructor(r={}){this._updateCompact=()=>{const o=this._container.children;if(o.length){const h=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&h.classList.add("maplibregl-compact"):h.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=I.create("div","maplibregl-ctrl");const o=I.create("a","maplibregl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://maplibre.org/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){I.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ny{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const o=++this._id;return this._queue.push({callback:r,id:o,cancelled:!1}),o}remove(r){const o=this._currentlyRunning,h=o?this._queue.concat(o):this._queue;for(const m of h)if(m.id===r)return void(m.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const o=this._currentlyRunning=this._queue;this._queue=[];for(const h of o)if(!h.cancelled&&(h.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var no=c.aA([{name:"a_pos3d",type:"Int16",components:3}]);class q0 extends c.E{constructor(r){super(),this._lastTilesetChange=L.now(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*2**this.deltaZoom,r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,o){this.sourceCache.update(r,o),this._renderableTilesKeys=[];const h={};for(const m of se(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:o,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))h[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.terrainRttPosMatrix32f=new Float64Array(16),c.bL(m.terrainRttPosMatrix32f,0,c.X,c.X,0,0,1),this._tiles[m.key]=new Ii(m,this.tileSize),this._lastTilesetChange=L.now());for(const m in this._tiles)h[m]||delete this._tiles[m]}freeRtt(r){for(const o in this._tiles){const h=this._tiles[o];(!r||h.tileID.equals(r)||h.tileID.isChildOf(r)||r.isChildOf(h.tileID))&&(h.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const o={};for(const h of this._renderableTilesKeys){const m=this._tiles[h].tileID,_=r.clone(),b=c.a$();if(m.canonical.equals(r.canonical))c.bL(b,0,c.X,c.X,0,0,1);else if(m.canonical.isChildOf(r.canonical)){const T=m.canonical.z-r.canonical.z,M=m.canonical.x-(m.canonical.x>>T<<T),R=m.canonical.y-(m.canonical.y>>T<<T),O=c.X>>T;c.bL(b,0,O,O,0,0,1),c.J(b,b,[-M*O,-R*O,0])}else{if(!r.canonical.isChildOf(m.canonical))continue;{const T=r.canonical.z-m.canonical.z,M=r.canonical.x-(r.canonical.x>>T<<T),R=r.canonical.y-(r.canonical.y>>T<<T),O=c.X>>T;c.bL(b,0,c.X,c.X,0,0,1),c.J(b,b,[M*O,R*O,0]),c.K(b,b,[1/2**T,1/2**T,0])}}_.terrainRttPosMatrix32f=new Float32Array(b),o[h]=_}return o}getSourceTile(r,o){const h=this.sourceCache._source;let m=r.overscaledZ-this.deltaZoom;if(m>h.maxzoom&&(m=h.maxzoom),m<h.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(m).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!_||!_.dem)&&o)for(;m>=h.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(r.scaledTo(m--).key);return _}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}}class Wc{constructor(r,o,h){this._meshCache={},this.painter=r,this.sourceCache=new q0(o),this.options=h,this.exaggeration=typeof h.exaggeration=="number"?h.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,o,h,m=c.X){var _;if(!(o>=0&&o<m&&h>=0&&h<m))return 0;const b=this.getTerrainData(r),T=(_=b.tile)===null||_===void 0?void 0:_.dem;if(!T)return 0;const M=c.c9([],[o/m*c.X,h/m*c.X],b.u_terrain_matrix),R=[M[0]*T.dim,M[1]*T.dim],O=Math.floor(R[0]),U=Math.floor(R[1]),$=R[0]-O,K=R[1]-U;return T.get(O,U)*(1-$)*(1-K)+T.get(O+1,U)*$*(1-K)+T.get(O,U+1)*(1-$)*K+T.get(O+1,U+1)*$*K}getElevationForLngLatZoom(r,o){if(!c.ca(o,r.wrap()))return 0;const{tileID:h,mercatorX:m,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(r,o);return this.getElevation(h,m%c.X,_%c.X,c.X)}getElevation(r,o,h,m=c.X){return this.getDEMElevation(r,o,h,m)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const m=this.painter.context,_=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ie(m,_,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ie(m,new c.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.aq([])}const o=this.sourceCache.getSourceTile(r,!0);if(o&&o.dem&&(!o.demTexture||o.needsTerrainPrepare)){const m=this.painter.context;o.demTexture=this.painter.getTileTexture(o.dem.stride),o.demTexture?o.demTexture.update(o.dem.getPixels(),{premultiply:!1}):o.demTexture=new Ie(m,o.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),o.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),o.needsTerrainPrepare=!1}const h=o&&o+o.tileID.key+r.key;if(h&&!this._demMatrixCache[h]){const m=this.sourceCache.sourceCache._source.maxzoom;let _=r.canonical.z-o.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=m?_=r.canonical.z-m:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const b=r.canonical.x-(r.canonical.x>>_<<_),T=r.canonical.y-(r.canonical.y>>_<<_),M=c.cb(new Float64Array(16),[1/(c.X<<_),1/(c.X<<_),0]);c.J(M,M,[b*c.X,T*c.X,0]),this._demMatrixCache[r.key]={matrix:M,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:o&&o.dem&&o.dem.dim||1,u_terrain_matrix:h?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:o&&o.dem&&o.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(o&&o.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:o}}getFramebuffer(r){const o=this.painter,h=o.width/devicePixelRatio,m=o.height/devicePixelRatio;return!this._fbo||this._fbo.width===h&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ie(o.context,{width:h,height:m,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ie(o.context,{width:h,height:m,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=o.context.createFramebuffer(h,m,!0,!1),this._fbo.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,h,m))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const o=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,b=0;_<this._coordsTextureSize;_++)for(let T=0;T<this._coordsTextureSize;T++,b+=4)o[b+0]=255&T,o[b+1]=255&_,o[b+2]=T>>8<<4|_>>8,o[b+3]=0;const h=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(o.buffer)),m=new Ie(r,h,r.gl.RGBA,{premultiply:!1});return m.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const o=new Uint8Array(4),h=this.painter.context,m=h.gl,_=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),b=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),T=Math.round(this.painter.height/devicePixelRatio);h.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(_,T-b-1,1,1,m.RGBA,m.UNSIGNED_BYTE,o),h.bindFramebuffer.set(null);const M=o[0]+(o[2]>>4<<8),R=o[1]+((15&o[2])<<8),O=this.coordsIndex[255-o[3]],U=O&&this.sourceCache.getTileByID(O);if(!U)return null;const $=this._coordsTextureSize,K=(1<<U.tileID.canonical.z)*$;return new c.Y((U.tileID.canonical.x*$+M)/K+U.tileID.wrap,(U.tileID.canonical.y*$+R)/K,this.getElevation(U.tileID,M,R,$))}depthAtPoint(r){const o=new Uint8Array(4),h=this.painter.context,m=h.gl;return h.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,o),h.bindFramebuffer.set(null),(o[0]/16777216+o[1]/65536+o[2]/256+o[3])/256}getTerrainMesh(r){var o;const h=((o=this.painter.style.projection)===null||o===void 0?void 0:o.transitionState)>0,m=h&&r.canonical.y===0,_=h&&r.canonical.y===(1<<r.canonical.z)-1,b=`m_${m?"n":""}_${_?"s":""}`;if(this._meshCache[b])return this._meshCache[b];const T=this.painter.context,M=new c.cc,R=new c.aE,O=this.meshSize,U=c.X/O,$=O*O;for(let Pe=0;Pe<=O;Pe++)for(let Le=0;Le<=O;Le++)M.emplaceBack(Le*U,Pe*U,0);for(let Pe=0;Pe<$;Pe+=O+1)for(let Le=0;Le<O;Le++)R.emplaceBack(Le+Pe,O+Le+Pe+1,O+Le+Pe+2),R.emplaceBack(Le+Pe,O+Le+Pe+2,Le+Pe+1);const K=M.length,ee=K+(O+1),ae=(O+1)*O,oe=m?c.b6:0,le=m?0:1,fe=_?c.b7:c.X,_e=_?0:1;for(let Pe=0;Pe<=O;Pe++)M.emplaceBack(Pe*U,oe,le);for(let Pe=0;Pe<=O;Pe++)M.emplaceBack(Pe*U,fe,_e);for(let Pe=0;Pe<O;Pe++)R.emplaceBack(ae+Pe,ee+Pe,ee+Pe+1),R.emplaceBack(ae+Pe,ee+Pe+1,ae+Pe+1),R.emplaceBack(0+Pe,K+Pe+1,K+Pe),R.emplaceBack(0+Pe,0+Pe+1,K+Pe+1);const xe=M.length,be=xe+2*(O+1);for(const Pe of[0,1])for(let Le=0;Le<=O;Le++)for(const Fe of[0,1])M.emplaceBack(Pe*c.X,Le*U,Fe);for(let Pe=0;Pe<2*O;Pe+=2)R.emplaceBack(xe+Pe,xe+Pe+1,xe+Pe+3),R.emplaceBack(xe+Pe,xe+Pe+3,xe+Pe+2),R.emplaceBack(be+Pe,be+Pe+3,be+Pe+1),R.emplaceBack(be+Pe,be+Pe+2,be+Pe+3);const ke=new Js(T.createVertexBuffer(M,no.members),T.createIndexBuffer(R),c.aD.simpleSegment(0,0,M.length,R.length));return this._meshCache[b]=ke,ke}getMeshFrameDelta(r){return 2*Math.PI*c.bo/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,o){var h;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(r,o);return(h=this.getMinMaxElevation(m).minElevation)!==null&&h!==void 0?h:0}getMinMaxElevation(r){const o=this.getTerrainData(r).tile,h={minElevation:null,maxElevation:null};return o&&o.dem&&(h.minElevation=o.dem.min*this.exaggeration,h.maxElevation=o.dem.max*this.exaggeration),h}_getOverscaledTileIDFromLngLatZoom(r,o){const h=c.Y.fromLngLat(r.wrap()),m=(1<<o)*c.X,_=h.x*m,b=h.y*m,T=Math.floor(_/c.X),M=Math.floor(b/c.X);return{tileID:new c.S(o,0,o,T,M),mercatorX:_,mercatorY:b}}}class ln{constructor(r,o,h){this._context=r,this._size=o,this._tileSize=h,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const o=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),h=new Ie(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return h.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),o.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),o.colorAttachment.set(h.texture),{id:r,fbo:o,texture:h,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(o=>r.id!==o),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const o of this._recentlyUsed)if(!this._objects[o].inUse)return this._objects[o];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const qr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class iy{constructor(r,o){this.painter=r,this.terrain=o,this.pool=new ln(r.context,30,o.sourceCache.tileSize*o.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,o){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(h=>!r._layers[h].isHidden(o)),this._coordsAscending={};for(const h in r.sourceCaches){this._coordsAscending[h]={};const m=r.sourceCaches[h].getVisibleCoordinates();for(const _ of m){const b=this.terrain.sourceCache.getTerrainCoords(_);for(const T in b)this._coordsAscending[h][T]||(this._coordsAscending[h][T]=[]),this._coordsAscending[h][T].push(b[T])}}this._coordsAscendingStr={};for(const h of r._order){const m=r._layers[h],_=m.source;if(qr[m.type]&&!this._coordsAscendingStr[_]){this._coordsAscendingStr[_]={};for(const b in this._coordsAscending[_])this._coordsAscendingStr[_][b]=this._coordsAscending[_][b].map(T=>T.key).sort().join()}}for(const h of this._renderableTiles)for(const m in this._coordsAscendingStr){const _=this._coordsAscendingStr[m][h.tileID.key];_&&_!==h.rttCoords[m]&&(h.rtt=[])}}renderLayer(r,o){if(r.isHidden(this.painter.transform.zoom))return!1;const h=Object.assign(Object.assign({},o),{isRenderingToTexture:!0}),m=r.type,_=this.painter,b=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(qr[m]&&(this._prevType&&qr[this._prevType]||this._stacks.push([]),this._prevType=m,this._stacks[this._stacks.length-1].push(r.id),!b))return!0;if(qr[this._prevType]||qr[m]&&b){this._prevType=m;const T=this._stacks.length-1,M=this._stacks[T]||[];for(const R of this._renderableTiles){if(this.pool.isFull()&&(Zp(this.painter,this.terrain,this._rttTiles,h),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(R),R.rtt[T]){const U=this.pool.getObjectForId(R.rtt[T].id);if(U.stamp===R.rtt[T].stamp){this.pool.useObject(U);continue}}const O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),R.rtt[T]={id:O.id,stamp:O.stamp},_.context.bindFramebuffer.set(O.fbo.framebuffer),_.context.clear({color:c.b4.transparent,stencil:0}),_.currentStencilSource=void 0;for(let U=0;U<M.length;U++){const $=_.style._layers[M[U]],K=$.source?this._coordsAscending[$.source][R.tileID.key]:[R.tileID];_.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),_._renderTileClippingMasks($,K,!0),_.renderLayer(_,_.style.sourceCaches[$.source],$,K,h),$.source&&(R.rttCoords[$.source]=this._coordsAscendingStr[$.source][R.tileID.key])}}return Zp(this.painter,this.terrain,this._rttTiles,h),this._rttTiles=[],this.pool.freeAllObjects(),qr[m]}return!1}}const Xc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Pd=S,Ed={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Td,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},rf={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class nf{constructor(r,o,h=!1){this.mousedown=_=>{this.startMove(_,I.mousePos(this.element,_)),I.addEventListener(window,"mousemove",this.mousemove),I.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=_=>{this.move(_,I.mousePos(this.element,_))},this.mouseup=_=>{this._rotatePitchHanlder.dragEnd(_),this.offTemp()},this.touchstart=_=>{_.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=I.touchPos(this.element,_.targetTouches)[0],this.startMove(_,this._startPos),I.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.addEventListener(window,"touchend",this.touchend))},this.touchmove=_=>{_.targetTouches.length!==1?this.reset():(this._lastPos=I.touchPos(this.element,_.targetTouches)[0],this.move(_,this._lastPos))},this.touchend=_=>{_.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=o;const m=new Zc;this._rotatePitchHanlder=new wl({clickTolerance:3,move:(_,b)=>{const T=o.getBoundingClientRect(),M=new c.P((T.bottom-T.top)/2,(T.right-T.left)/2);return{bearingDelta:c.c7(new c.P(_.x,b.y),b,M),pitchDelta:h?-.5*(b.y-_.y):void 0}},moveStateManager:m,enable:!0,assignEvents:()=>{}}),this.map=r,I.addEventListener(o,"mousedown",this.mousedown),I.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),I.addEventListener(o,"touchcancel",this.reset)}startMove(r,o){this._rotatePitchHanlder.dragStart(r,o),I.disableDrag()}move(r,o){const h=this.map,{bearingDelta:m,pitchDelta:_}=this._rotatePitchHanlder.dragMove(r,o)||{};m&&h.setBearing(h.getBearing()+m),_&&h.setPitch(h.getPitch()+_)}off(){const r=this.element;I.removeEventListener(r,"mousedown",this.mousedown),I.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),I.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.removeEventListener(window,"touchend",this.touchend),I.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){I.enableDrag(),I.removeEventListener(window,"mousemove",this.mousemove),I.removeEventListener(window,"mouseup",this.mouseup),I.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.removeEventListener(window,"touchend",this.touchend)}}let Rs;function Md(y,r,o){const h=new c.N(y.lng,y.lat);if(y=new c.N(y.lng,y.lat),r){const m=new c.N(y.lng-360,y.lat),_=new c.N(y.lng+360,y.lat),b=o.locationToScreenPoint(y).distSqr(r);o.locationToScreenPoint(m).distSqr(r)<b?y=m:o.locationToScreenPoint(_).distSqr(r)<b&&(y=_)}for(;Math.abs(y.lng-o.center.lng)>180;){const m=o.locationToScreenPoint(y);if(m.x>=0&&m.y>=0&&m.x<=o.width&&m.y<=o.height)break;y.lng>o.center.lng?y.lng-=360:y.lng+=360}return y.lng!==h.lng&&o.isPointOnMapSurface(o.locationToScreenPoint(y))?y:h}const Kc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function kd(y,r,o){const h=y.classList;for(const m in Kc)h.remove(`maplibregl-${o}-anchor-${m}`);h.add(`maplibregl-${o}-anchor-${r}`)}class Yc extends c.E{constructor(r){if(super(),this._onKeyPress=o=>{const h=o.code,m=o.charCode||o.keyCode;h!=="Space"&&h!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=o=>{const h=o.originalEvent.target,m=this._element;this._popup&&(h===m||m.contains(h))&&this.togglePopup()},this._update=o=>{var h;if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((o==null?void 0:o.type)==="terrain"||(o==null?void 0:o.type)==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Md(this._lngLat,this._flatPos,this._map.transform):(h=this._lngLat)===null||h===void 0?void 0:h.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||o&&o.type!=="moveend"||(this._pos=this._pos.round()),I.setTransform(this._element,`${Kc[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${_}`),L.frameAsync(new AbortController).then(()=>{this._updateOpacity(o&&o.type==="moveend")}).catch(()=>{})},this._onMove=o=>{if(!this._isDragging){const h=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=h}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.k("dragstart"))),this.fire(new c.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.k("dragend")),this._state="inactive"},this._addDragHandler=o=>{this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=c.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=I.create("div");const o=I.createNS("http://www.w3.org/2000/svg","svg"),h=41,m=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height",`${h}px`),o.setAttributeNS(null,"width",`${m}px`),o.setAttributeNS(null,"viewBox",`0 0 ${m} ${h}`);const _=I.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const b=I.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"fill-rule","nonzero");const T=I.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(3.0, 29.0)"),T.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const le of M){const fe=I.createNS("http://www.w3.org/2000/svg","ellipse");fe.setAttributeNS(null,"opacity","0.04"),fe.setAttributeNS(null,"cx","10.5"),fe.setAttributeNS(null,"cy","5.80029008"),fe.setAttributeNS(null,"rx",le.rx),fe.setAttributeNS(null,"ry",le.ry),T.appendChild(fe)}const R=I.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill",this._color);const O=I.createNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),R.appendChild(O);const U=I.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"opacity","0.25"),U.setAttributeNS(null,"fill","#000000");const $=I.createNS("http://www.w3.org/2000/svg","path");$.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),U.appendChild($);const K=I.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"transform","translate(6.0, 7.0)"),K.setAttributeNS(null,"fill","#FFFFFF");const ee=I.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ae=I.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#000000"),ae.setAttributeNS(null,"opacity","0.25"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962");const oe=I.createNS("http://www.w3.org/2000/svg","circle");oe.setAttributeNS(null,"fill","#FFFFFF"),oe.setAttributeNS(null,"cx","5.5"),oe.setAttributeNS(null,"cy","5.5"),oe.setAttributeNS(null,"r","5.4999962"),ee.appendChild(ae),ee.appendChild(oe),b.appendChild(T),b.appendChild(R),b.appendChild(U),b.appendChild(K),b.appendChild(ee),o.appendChild(b),o.setAttributeNS(null,"height",h*this._scale+"px"),o.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(o),this._offset=c.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",o=>{o.preventDefault()}),this._element.addEventListener("mousedown",o=>{o.preventDefault()}),kd(this._element,this._anchor,"marker"),r&&r.className)for(const o of r.className.split(" "))this._element.classList.add(o);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),I.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=c.N.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const m=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var o,h;if(!(!((o=this._map)===null||o===void 0)&&o.terrain)){const U=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==U&&(this._element.style.opacity=U))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const m=this._map,_=m.terrain.depthAtPoint(this._pos),b=m.terrain.getElevationForLngLatZoom(this._lngLat,m.transform.tileZoom);if(m.transform.lngLatToCameraDepth(this._lngLat,b)-_<.006)return void(this._element.style.opacity=this._opacity);const T=-this._offset.y/m.transform.pixelsPerMeter,M=Math.sin(m.getPitch()*Math.PI/180)*T,R=m.terrain.depthAtPoint(new c.P(this._pos.x,this._pos.y-this._offset.y)),O=m.transform.lngLatToCameraDepth(this._lngLat,b+M)-R>.006;!((h=this._popup)===null||h===void 0)&&h.isOpen()&&O&&this._popup.remove(),this._element.style.opacity=O?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=c.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,o){return r===void 0&&o===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),o!==void 0&&(this._opacityWhenCovered=o),this._map&&this._updateOpacity(!0),this}}const sf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Tl=0,Ra=!1;const of={maxWidth:100,unit:"metric"};function Qc(y,r,o){const h=o&&o.maxWidth||100,m=y._container.clientHeight/2,_=y._container.clientWidth/2,b=y.unproject([_-h/2,m]),T=y.unproject([_+h/2,m]),M=Math.round(y.project(T).x-y.project(b).x),R=Math.min(h,M,y._container.clientWidth),O=b.distanceTo(T);if(o&&o.unit==="imperial"){const U=3.2808*O;U>5280?Aa(r,R,U/5280,y._getUIString("ScaleControl.Miles")):Aa(r,R,U,y._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?Aa(r,R,O/1852,y._getUIString("ScaleControl.NauticalMiles")):O>=1e3?Aa(r,R,O/1e3,y._getUIString("ScaleControl.Kilometers")):Aa(r,R,O,y._getUIString("ScaleControl.Meters"))}function Aa(y,r,o,h){const m=function(_){const b=Math.pow(10,`${Math.floor(_)}`.length-1);let T=_/b;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:T>=1?1:function(M){const R=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*R)/R}(T),b*T}(o);y.style.width=r*(m/o)+"px",y.innerHTML=`${m}&nbsp;${h}`}const af={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Id=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Rd(y){if(y){if(typeof y=="number"){const r=Math.round(Math.abs(y)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,y),"top-left":new c.P(r,r),"top-right":new c.P(-r,r),bottom:new c.P(0,-y),"bottom-left":new c.P(r,-r),"bottom-right":new c.P(-r,-r),left:new c.P(y,0),right:new c.P(-y,0)}}if(y instanceof c.P||Array.isArray(y)){const r=c.P.convert(y);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:c.P.convert(y.center||[0,0]),top:c.P.convert(y.top||[0,0]),"top-left":c.P.convert(y["top-left"]||[0,0]),"top-right":c.P.convert(y["top-right"]||[0,0]),bottom:c.P.convert(y.bottom||[0,0]),"bottom-left":c.P.convert(y["bottom-left"]||[0,0]),"bottom-right":c.P.convert(y["bottom-right"]||[0,0]),left:c.P.convert(y.left||[0,0]),right:c.P.convert(y.right||[0,0])}}return Rd(new c.P(0,0))}const lf=S;f.AJAXError=c.cg,f.Event=c.k,f.Evented=c.E,f.LngLat=c.N,f.MercatorCoordinate=c.Y,f.Point=c.P,f.addProtocol=c.ch,f.config=c.a,f.removeProtocol=c.ci,f.AttributionControl=Cd,f.BoxZoomHandler=Qg,f.CanvasSource=Ts,f.CooperativeGesturesHandler=ry,f.DoubleClickZoomHandler=Hr,f.DragPanHandler=Jp,f.DragRotateHandler=ef,f.EdgeInsets=ri,f.FullscreenControl=class extends c.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var r;let o=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=o==null?void 0:o.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)o=o.shadowRoot.fullscreenElement;o===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){I.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=I.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);I.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new c.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},f.GeoJSONSource=Zn,f.GeolocateControl=class extends c.E{constructor(y){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new c.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const o=new c.N(r.coords.longitude,r.coords.latitude),h=r.coords.accuracy,m=this._map.getBearing(),_=c.e({bearing:m},this.options.fitBoundsOptions),b=vr.fromLngLat(o,h);this._map.fitBounds(b,_,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const o=new c.N(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Ra)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=I.create("button","maplibregl-ctrl-geolocate",this._container),I.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=I.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Yc({element:this._dotElement}),this._circleElement=I.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Yc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.k("trackuserlocationend")),this.fire(new c.k("userlocationlostfocus")))})}},this.options=c.e({},sf,y)}onAdd(y){return this._map=y,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return c._(this,arguments,void 0,function*(r=!1){if(Rs!==void 0&&!r)return Rs;if(window.navigator.permissions===void 0)return Rs=!!window.navigator.geolocation,Rs;try{Rs=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Rs=!!window.navigator.geolocation}return Rs})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),I.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Tl=0,Ra=!1}_isOutOfMapMaxBounds(y){const r=this._map.getMaxBounds(),o=y.coords;return r&&(o.longitude<r.getWest()||o.longitude>r.getEast()||o.latitude<r.getSouth()||o.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),r=y.getSouthEast(),o=y.getNorthEast(),h=r.distanceTo(o),m=Math.ceil(this._accuracy/(h/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Tl--,Ra=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.k("trackuserlocationstart")),this.fire(new c.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Tl++,Tl>1?(y={maximumAge:6e5,timeout:0},Ra=!0):(y=this.options.positionOptions,Ra=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},f.GlobeControl=class{constructor(){this._toggleProjection=()=>{var y;const r=(y=this._map.getProjection())===null||y===void 0?void 0:y.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var y;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((y=this._map.getProjection())===null||y===void 0?void 0:y.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(y){return this._map=y,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=I.create("button","maplibregl-ctrl-globe",this._container),I.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){I.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},f.Hash=qp,f.ImageSource=mn,f.KeyboardHandler=Yp,f.LngLatBounds=vr,f.LogoControl=bi,f.Map=class extends Sd{constructor(y){var r,o;c.cd.mark(c.ce.create);const h=Object.assign(Object.assign(Object.assign({},Ed),y),{canvasContextAttributes:Object.assign(Object.assign({},Ed.canvasContextAttributes),y.canvasContextAttributes)});if(h.minZoom!=null&&h.maxZoom!=null&&h.minZoom>h.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(h.minPitch!=null&&h.maxPitch!=null&&h.minPitch>h.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(h.minPitch!=null&&h.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(h.maxPitch!=null&&h.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const m=new ui,_=new Tc;if(h.minZoom!==void 0&&m.setMinZoom(h.minZoom),h.maxZoom!==void 0&&m.setMaxZoom(h.maxZoom),h.minPitch!==void 0&&m.setMinPitch(h.minPitch),h.maxPitch!==void 0&&m.setMaxPitch(h.maxPitch),h.renderWorldCopies!==void 0&&m.setRenderWorldCopies(h.renderWorldCopies),super(m,_,{bearingSnap:h.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new ny,this._controls=[],this._mapId=c.a1(),this._contextLost=T=>{T.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new c.k("webglcontextlost",{originalEvent:T}))},this._contextRestored=T=>{this._setupPainter(),this.resize(),this._update(),this.fire(new c.k("webglcontextrestored",{originalEvent:T}))},this._onMapScroll=T=>{if(T.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=h.interactive,this._maxTileCacheSize=h.maxTileCacheSize,this._maxTileCacheZoomLevels=h.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},h.canvasContextAttributes),this._trackResize=h.trackResize===!0,this._bearingSnap=h.bearingSnap,this._centerClampedToGround=h.centerClampedToGround,this._refreshExpiredTiles=h.refreshExpiredTiles===!0,this._fadeDuration=h.fadeDuration,this._crossSourceCollisions=h.crossSourceCollisions===!0,this._collectResourceTiming=h.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Xc),h.locale),this._clickTolerance=h.clickTolerance,this._overridePixelRatio=h.pixelRatio,this._maxCanvasSize=h.maxCanvasSize,this.transformCameraUpdate=h.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=h.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=de.addThrottleControl(()=>this.isMoving()),this._requestManager=new Se(h.transformRequest),typeof h.container=="string"){if(this._container=document.getElementById(h.container),!this._container)throw new Error(`Container '${h.container}' not found.`)}else{if(!(h.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=h.container}if(h.maxBounds&&this.setMaxBounds(h.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let T=!1;const M=Hp(R=>{this._trackResize&&!this._removed&&(this.resize(R),this.redraw())},50);this._resizeObserver=new ResizeObserver(R=>{T?M(R):T=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Ht(this,h),this._hash=h.hash&&new qp(typeof h.hash=="string"&&h.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:h.center,elevation:h.elevation,zoom:h.zoom,bearing:h.bearing,pitch:h.pitch,roll:h.roll}),h.bounds&&(this.resize(),this.fitBounds(h.bounds,c.e({},h.fitBoundsOptions,{duration:0}))));const b=typeof h.style=="string"||((o=(r=h.style)===null||r===void 0?void 0:r.projection)===null||o===void 0?void 0:o.type)!=="globe";this.resize(null,b),this._localIdeographFontFamily=h.localIdeographFontFamily,this._validateStyle=h.validateStyle,h.style&&this.setStyle(h.style,{localIdeographFontFamily:h.localIdeographFontFamily}),h.attributionControl&&this.addControl(new Cd(typeof h.attributionControl=="boolean"?void 0:h.attributionControl)),h.maplibreLogo&&this.addControl(new bi,h.logoPosition),this.on("style.load",()=>{if(b||this._resizeTransform(),this.transform.unmodified){const T=c.M(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(T)}}),this.on("data",T=>{this._update(T.dataType==="style"),this.fire(new c.k(`${T.dataType}data`,T))}),this.on("dataloading",T=>{this.fire(new c.k(`${T.dataType}dataloading`,T))}),this.on("dataabort",T=>{this.fire(new c.k("sourcedataabort",T))})}_getMapId(){return this._mapId}addControl(y,r){if(r===void 0&&(r=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new c.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=y.onAdd(this);this._controls.push(y);const h=this._controlPositions[r];return r.indexOf("bottom")!==-1?h.insertBefore(o,h.firstChild):h.appendChild(o),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new c.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(y);return r>-1&&this._controls.splice(r,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,r,o,h){return h==null&&this.terrain&&(h=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,r,o,h)}resize(y,r=!0){const[o,h]=this._containerDimensions(),m=this._getClampedPixelRatio(o,h);if(this._resizeCanvas(o,h,m),this.painter.resize(o,h,m),this.painter.overLimit()){const b=this.painter.context.gl;this._maxCanvasSize=[b.drawingBufferWidth,b.drawingBufferHeight];const T=this._getClampedPixelRatio(o,h);this._resizeCanvas(o,h,T),this.painter.resize(o,h,T)}this._resizeTransform(r);const _=!this._moving;return _&&(this.stop(),this.fire(new c.k("movestart",y)).fire(new c.k("move",y))),this.fire(new c.k("resize",y)),_&&this.fire(new c.k("moveend",y)),this}_resizeTransform(y=!0){var r;const[o,h]=this._containerDimensions();this.transform.resize(o,h,y),(r=this._requestedCameraState)===null||r===void 0||r.resize(o,h,y)}_getClampedPixelRatio(y,r){const{0:o,1:h}=this._maxCanvasSize,m=this.getPixelRatio(),_=y*m,b=r*m;return Math.min(_>o?o/_:1,b>h?h/b:1)*m}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(vr.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.setMinZoom(y),this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.setMaxZoom(y),this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.setMinPitch(y),this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(y>=this.transform.minPitch)return this.transform.setMaxPitch(y),this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.setRenderWorldCopies(y),this._update()}project(y){return this.transform.locationToScreenPoint(c.N.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.screenPointToLocation(c.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,r,o){if(y==="mouseenter"||y==="mouseover"){let h=!1;return{layers:r,listener:o,delegates:{mousemove:_=>{const b=r.filter(M=>this.getLayer(M)),T=b.length!==0?this.queryRenderedFeatures(_.point,{layers:b}):[];T.length?h||(h=!0,o.call(this,new ji(y,this,_.originalEvent,{features:T}))):h=!1},mouseout:()=>{h=!1}}}}if(y==="mouseleave"||y==="mouseout"){let h=!1;return{layers:r,listener:o,delegates:{mousemove:b=>{const T=r.filter(M=>this.getLayer(M));(T.length!==0?this.queryRenderedFeatures(b.point,{layers:T}):[]).length?h=!0:h&&(h=!1,o.call(this,new ji(y,this,b.originalEvent)))},mouseout:b=>{h&&(h=!1,o.call(this,new ji(y,this,b.originalEvent)))}}}}{const h=m=>{const _=r.filter(T=>this.getLayer(T)),b=_.length!==0?this.queryRenderedFeatures(m.point,{layers:_}):[];b.length&&(m.features=b,o.call(this,m),delete m.features)};return{layers:r,listener:o,delegates:{[y]:h}}}}_saveDelegatedListener(y,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(r)}_removeDelegatedListener(y,r,o){if(!this._delegatedListeners||!this._delegatedListeners[y])return;const h=this._delegatedListeners[y];for(let m=0;m<h.length;m++){const _=h[m];if(_.listener===o&&_.layers.length===r.length&&_.layers.every(b=>r.includes(b))){for(const b in _.delegates)this.off(b,_.delegates[b]);return void h.splice(m,1)}}}on(y,r,o){if(o===void 0)return super.on(y,r);const h=typeof r=="string"?[r]:r,m=this._createDelegatedListener(y,h,o);this._saveDelegatedListener(y,m);for(const _ in m.delegates)this.on(_,m.delegates[_]);return{unsubscribe:()=>{this._removeDelegatedListener(y,h,o)}}}once(y,r,o){if(o===void 0)return super.once(y,r);const h=typeof r=="string"?[r]:r,m=this._createDelegatedListener(y,h,o);for(const _ in m.delegates){const b=m.delegates[_];m.delegates[_]=(...T)=>{this._removeDelegatedListener(y,h,o),b(...T)}}this._saveDelegatedListener(y,m);for(const _ in m.delegates)this.once(_,m.delegates[_]);return this}off(y,r,o){return o===void 0?super.off(y,r):(this._removeDelegatedListener(y,typeof r=="string"?[r]:r,o),this)}queryRenderedFeatures(y,r){if(!this.style)return[];let o;const h=y instanceof c.P||Array.isArray(y),m=h?y:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(h?{}:y)||{},m instanceof c.P||typeof m[0]=="number")o=[c.P.convert(m)];else{const _=c.P.convert(m[0]),b=c.P.convert(m[1]);o=[_,new c.P(b.x,_.y),b,new c.P(_.x,b.y),_]}return this.style.queryRenderedFeatures(o,r,this.transform)}querySourceFeatures(y,r){return this.style.querySourceFeatures(y,r)}setStyle(y,r){return(r=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(y,r))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const r=this._locale[y];if(r==null)throw new Error(`Missing UI string '${y}'`);return r}_updateStyle(y,r){var o,h;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,r));const m=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new pp(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,r,m):this.style.loadJSON(y,r,m),this):((h=(o=this.style)===null||o===void 0?void 0:o.projection)===null||h===void 0||h.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new pp(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,r){if(typeof y=="string"){const o=this._requestManager.transformRequest(y,"Style");c.h(o,new AbortController).then(h=>{this._updateDiff(h.data,r)}).catch(h=>{h&&this.fire(new c.j(h))})}else typeof y=="object"&&this._updateDiff(y,r)}_updateDiff(y,r){try{this.style.setState(y,r)&&this._update(!0)}catch(o){c.w(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(y,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(y,r){return this._lazyInitEmptyStyle(),this.style.addSource(y,r),this._update(!0)}isSourceLoaded(y){const r=this.style&&this.style.sourceCaches[y];if(r!==void 0)return r.loaded();this.fire(new c.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const r=this.style.sourceCaches[y.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&r.reload();for(const o in this.style._layers){const h=this.style._layers[o];h.type==="hillshade"&&h.source===y.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Wc(this.painter,r,y),this.painter.renderToTexture=new iy(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=o=>{o.dataType==="style"?this.terrain.sourceCache.freeRtt():o.dataType==="source"&&o.tile&&(o.sourceId!==y.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),this.terrain.sourceCache.freeRtt(o.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new c.k("terrain",{terrain:y})),this}getTerrain(){var y,r;return(r=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const r in y){const o=y[r]._tiles;for(const h in o){const m=o[h];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,r,o={}){const{pixelRatio:h=1,sdf:m=!1,stretchX:_,stretchY:b,content:T,textFitWidth:M,textFitHeight:R}=o;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||c.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:O,height:U,data:$}=r,K=r;return this.style.addImage(y,{data:new c.R({width:O,height:U},new Uint8Array($)),pixelRatio:h,stretchX:_,stretchY:b,content:T,textFitWidth:M,textFitHeight:R,sdf:m,version:0,userImage:K}),K.onAdd&&K.onAdd(this,y),this}}{const{width:O,height:U,data:$}=L.getImageData(r);this.style.addImage(y,{data:new c.R({width:O,height:U},$),pixelRatio:h,stretchX:_,stretchY:b,content:T,textFitWidth:M,textFitHeight:R,sdf:m,version:0})}}updateImage(y,r){const o=this.style.getImage(y);if(!o)return this.fire(new c.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const h=r instanceof HTMLImageElement||c.b(r)?L.getImageData(r):r,{width:m,height:_,data:b}=h;if(m===void 0||_===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==o.data.width||_!==o.data.height)return this.fire(new c.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const T=!(r instanceof HTMLImageElement||c.b(r));return o.data.replace(b,T),this.style.updateImage(y,o),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new c.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return de.getImage(this._requestManager.transformRequest(y,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,r){return this._lazyInitEmptyStyle(),this.style.addLayer(y,r),this._update(!0)}moveLayer(y,r){return this.style.moveLayer(y,r),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,r,o){return this.style.setLayerZoomRange(y,r,o),this._update(!0)}setFilter(y,r,o={}){return this.style.setFilter(y,r,o),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,r,o,h={}){return this.style.setPaintProperty(y,r,o,h),this._update(!0)}getPaintProperty(y,r){return this.style.getPaintProperty(y,r)}setLayoutProperty(y,r,o,h={}){return this.style.setLayoutProperty(y,r,o,h),this._update(!0)}getLayoutProperty(y,r){return this.style.getLayoutProperty(y,r)}setGlyphs(y,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,r,o={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,r,o,h=>{h||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,r,o=>{o||this._update(!0)}),this}setLight(y,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(y,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(y,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(y,r){return this.style.setFeatureState(y,r),this._update()}removeFeatureState(y,r){return this.style.removeFeatureState(y,r),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,r=0;return this._container&&(y=this._container.clientWidth||400,r=this._container.clientHeight||300),[y,r]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const r=this._canvasContainer=I.create("div","maplibregl-canvas-container",y);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=I.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const o=this._containerDimensions(),h=this._getClampedPixelRatio(o[0],o[1]);this._resizeCanvas(o[0],o[1],h);const m=this._controlContainer=I.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{_[b]=I.create("div",`maplibregl-ctrl-${b} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,r,o){this._canvas.width=Math.floor(o*y),this._canvas.height=Math.floor(o*r),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const y=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let r=null;this._canvas.addEventListener("webglcontextcreationerror",h=>{r={requestedAttributes:y},h&&(r.statusMessage=h.statusMessage,r.type=h.type)},{once:!0});let o=null;if(o=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,y):this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y),!o){const h="Failed to initialize WebGL";throw r?(r.message=h,new Error(JSON.stringify(r))):new Error(h)}this.painter=new ka(o,this.transform),F.testSupport(o)}migrateProjection(y,r){super.migrateProjection(y,r),this.painter.transform=y,this.fire(new c.k("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){var r,o,h,m,_;const b=this._idleTriggered?this._fadeDuration:0,T=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let M=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const U=this.transform.zoom,$=L.now();this.style.zoomHistory.update(U,$);const K=new c.z(U,{now:$,fadeDuration:b,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ee=K.crossFadingFactor();ee===1&&ee===this._crossFadingFactor||(M=!0,this._crossFadingFactor=ee),this.style.update(K)}const R=((o=this.style.projection)===null||o===void 0?void 0:o.transitionState)>0!==T;(h=this.style.projection)===null||h===void 0||h.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((m=this.style.projection)===null||m===void 0?void 0:m.transitionState,(_=this.style.projection)===null||_===void 0?void 0:_.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||R)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,b,this._crossSourceCollisions,R),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:b,showPadding:this.showPadding}),this.fire(new c.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.cd.mark(c.ce.load),this.fire(new c.k("load"))),this.style&&(this.style.hasTransitions()||M)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const O=this._sourcesDirty||this._styleDirty||this._placementDirty;return O||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.k("idle")),!this._loaded||this._fullyLoaded||O||(this._fullyLoaded=!0,c.cd.mark(c.ce.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),de.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),I.remove(this._canvasContainer),I.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),c.cd.clearMetrics(),this._removed=!0,this.fire(new c.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,L.frameAsync(this._frameRequest).then(y=>{c.cd.frame(y),this._frameRequest=null,this._render(y)}).catch(y=>{if(!c.cf(y)&&!function(r){return r.message===Lc}(y))throw y}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return Pd}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(y){return this._lazyInitEmptyStyle(),this.style.setProjection(y),this._update(!0)}},f.MapMouseEvent=ji,f.MapTouchEvent=Li,f.MapWheelEvent=Ia,f.Marker=Yc,f.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const r=this._map.getZoom(),o=r===this._map.getMaxZoom(),h=r===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,o)=>{const h=this._map._getUIString(`NavigationControl.${o}`);r.title=h,r.setAttribute("aria-label",h)},this.options=c.e({},rf,y),this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),I.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),I.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=I.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new nf(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){I.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,r){const o=I.create("button",y,this._container);return o.type="button",o.addEventListener("click",r),o}},f.Popup=class extends c.E{constructor(y){super(),this.remove=()=>(this._content&&I.remove(this._content),this._container&&(I.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new c.k("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{var o;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=I.create("div","maplibregl-popup",this._map.getContainer()),this._tip=I.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Md(this._lngLat,this._flatPos,this._map.transform):(o=this._lngLat)===null||o===void 0?void 0:o.wrap(),this._trackPointer&&!r)return;const h=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let m=this.options.anchor;const _=Rd(this.options.offset);if(!m){const T=this._container.offsetWidth,M=this._container.offsetHeight;let R;R=h.y+_.bottom.y<M?["top"]:h.y>this._map.transform.height-M?["bottom"]:[],h.x<T/2?R.push("left"):h.x>this._map.transform.width-T/2&&R.push("right"),m=R.length===0?"bottom":R.join("-")}let b=h.add(_[m]);this.options.subpixelPositioning||(b=b.round()),I.setTransform(this._container,`${Kc[m]} translate(${b.x}px,${b.y}px)`),kd(this._container,m,"popup")},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(af),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=c.N.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const r=document.createDocumentFragment(),o=document.createElement("body");let h;for(o.innerHTML=y;h=o.firstChild,h;)r.appendChild(h);return this.setDOMContent(r)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=I.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){return this._container&&this._container.classList.add(y),this}removeClassName(y){return this._container&&this._container.classList.remove(y),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=I.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Id);y&&y.focus()}},f.RasterDEMTileSource=$n,f.RasterTileSource=fn,f.ScaleControl=class{constructor(y){this._onMove=()=>{Qc(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Qc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},of),y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){I.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},f.ScrollZoomHandler=wo,f.Style=pp,f.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=I.create("button","maplibregl-ctrl-terrain",this._container),I.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){I.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},f.TwoFingersTouchPitchHandler=Kp,f.TwoFingersTouchRotateHandler=Xp,f.TwoFingersTouchZoomHandler=Jg,f.TwoFingersTouchZoomRotateHandler=tf,f.VectorTileSource=ei,f.VideoSource=Ss,f.addSourceType=(y,r)=>c._(void 0,void 0,void 0,function*(){if(Gn(y))throw new Error(`A source type called "${y}" already exists.`);((o,h)=>{Nr[o]=h})(y,r)}),f.clearPrewarmedResources=function(){const y=It;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Et),It=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},f.createTileMesh=hl,f.getMaxParallelImageRequests=function(){return c.a.MAX_PARALLEL_IMAGE_REQUESTS},f.getRTLTextPluginStatus=function(){return wn().getRTLTextPluginStatus()},f.getVersion=function(){return lf},f.getWorkerCount=function(){return wt.workerCount},f.getWorkerUrl=function(){return c.a.WORKER_URL},f.importScriptInWorkers=function(y){return or().broadcast("IS",y)},f.prewarm=function(){tr().acquire(Et)},f.setMaxParallelImageRequests=function(y){c.a.MAX_PARALLEL_IMAGE_REQUESTS=y},f.setRTLTextPlugin=function(y,r){return wn().setRTLTextPlugin(y,r)},f.setWorkerCount=function(y){wt.workerCount=y},f.setWorkerUrl=function(y){c.a.WORKER_URL=y}});var p=n;return p})})(Lj);var hG=Lj.exports;const e_=_v(hG),kb=768;function pG(){const[e,t]=N.useState(void 0);return N.useEffect(()=>{const n=window.matchMedia(`(max-width: ${kb-1}px)`),s=()=>{t(window.innerWidth<kb)};return n.addEventListener("change",s),t(window.innerWidth<kb),()=>n.removeEventListener("change",s)},[]),!!e}const fG=async()=>(await new Promise(e=>setTimeout(e,1e3)),[{id:1,type:"paid",title:"Order Delivered",location:"Table 5",time:"10 minutes ago",description:"Order #1234 has been delivered to Table 5.",icon:kU,color:"bg-green-100 text-green-800",severity:"high",actions:["View Details","Share"],toll:"RM 0"},{id:2,type:"pending",title:"Order Preparation",location:"Kitchen",time:"30 minutes ago",description:"Order #1235 is being prepared in the kitchen.",icon:hU,color:"bg-yellow-100 text-yellow-800",severity:"medium",actions:["View Details","Share"],toll:"RM 2.50"},{id:3,type:"paid",title:"Order Ready for Pickup",location:"Counter",time:"1 hour ago",description:"Order #1236 is ready for pickup at the counter.",icon:pU,color:"bg-blue-100 text-blue-800",severity:"low",actions:["View Details","Share"],toll:"RM 1.80"},{id:4,type:"pending",title:"Order Delayed",location:"Kitchen",time:"15 minutes ago",description:"Order #1237 is delayed due to high demand.",icon:RU,color:"bg-red-100 text-red-800",severity:"high",actions:["View Details","Share"],toll:"RM 3.20"},{id:5,type:"paid",title:"Order Completed",location:"Table 10",time:"45 minutes ago",description:"Order #1238 has been completed and served to Table 10.",icon:cU,color:"bg-green-100 text-green-800",severity:"medium",actions:["View Details","Share"],toll:"RM 4.50"},{id:6,type:"pending",title:"Order Issue",location:"Table 3",time:"20 minutes ago",description:"Issue reported with Order #1239 at Table 3.",icon:wU,color:"bg-red-100 text-red-800",severity:"high",actions:["View Details","Share"],toll:"RM 2.80"},{id:7,type:"paid",title:"Order Cancelled",location:"Table 7",time:"25 minutes ago",description:"Order #1240 has been cancelled at Table 7.",icon:DU,color:"bg-red-100 text-red-800",severity:"high",actions:["View Details","Share"],toll:"RM 1.50"},{id:8,type:"pending",title:"Order in Queue",location:"Kitchen",time:"1 hour ago",description:"Order #1241 is in the queue for preparation.",icon:AU,color:"bg-yellow-100 text-yellow-800",severity:"medium",actions:["View Details","Share"],toll:"RM 5.70"},{id:9,type:"paid",title:"Order Completed",location:"Table 12",time:"2 hours ago",description:"Order #1242 has been completed and served to Table 12.",icon:EU,color:"bg-green-100 text-green-800",severity:"medium",actions:["View Details","Share"],toll:"RM 1.20"}]),mG=1,gG=1e6;let Ib=0;function yG(){return Ib=(Ib+1)%Number.MAX_SAFE_INTEGER,Ib.toString()}const Rb=new Map,PE=e=>{if(Rb.has(e))return;const t=setTimeout(()=>{Rb.delete(e),um({type:"REMOVE_TOAST",toastId:e})},gG);Rb.set(e,t)},_G=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,mG)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?PE(n):e.toasts.forEach(s=>{PE(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===n||n===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},w_=[];let S_={toasts:[]};function um(e){S_=_G(S_,e),w_.forEach(t=>{t(S_)})}function vG({...e}){const t=yG(),n=u=>um({type:"UPDATE_TOAST",toast:{...u,id:t}}),s=()=>um({type:"DISMISS_TOAST",toastId:t});return um({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:u=>{u||s()}}}),{id:t,dismiss:s,update:n}}function xG(){const[e,t]=N.useState(S_);return N.useEffect(()=>(w_.push(t),()=>{const n=w_.indexOf(t);n>-1&&w_.splice(n,1)}),[e]),{...e,toast:vG,dismiss:n=>um({type:"DISMISS_TOAST",toastId:n})}}var vg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$u=typeof window>"u"||"Deno"in globalThis;function co(){}function bG(e,t){return typeof e=="function"?e(t):e}function lw(e){return typeof e=="number"&&e>=0&&e!==1/0}function Oj(e,t){return Math.max(e+(t||0)-Date.now(),0)}function vh(e,t){return typeof e=="function"?e(t):e}function zo(e,t){return typeof e=="function"?e(t):e}function EE(e,t){const{type:n="all",exact:s,fetchStatus:u,predicate:p,queryKey:f,stale:c}=e;if(f){if(s){if(t.queryHash!==fS(f,t.options))return!1}else if(!Ym(t.queryKey,f))return!1}if(n!=="all"){const S=t.isActive();if(n==="active"&&!S||n==="inactive"&&S)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||u&&u!==t.state.fetchStatus||p&&!p(t))}function ME(e,t){const{exact:n,status:s,predicate:u,mutationKey:p}=e;if(p){if(!t.options.mutationKey)return!1;if(n){if(Km(t.options.mutationKey)!==Km(p))return!1}else if(!Ym(t.options.mutationKey,p))return!1}return!(s&&t.state.status!==s||u&&!u(t))}function fS(e,t){return((t==null?void 0:t.queryKeyHashFn)||Km)(e)}function Km(e){return JSON.stringify(e,(t,n)=>uw(n)?Object.keys(n).sort().reduce((s,u)=>(s[u]=n[u],s),{}):n)}function Ym(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Ym(e[n],t[n])):!1}function Fj(e,t){if(e===t)return e;const n=kE(e)&&kE(t);if(n||uw(e)&&uw(t)){const s=n?e:Object.keys(e),u=s.length,p=n?t:Object.keys(t),f=p.length,c=n?[]:{};let S=0;for(let E=0;E<f;E++){const A=n?E:p[E];(!n&&s.includes(A)||n)&&e[A]===void 0&&t[A]===void 0?(c[A]=void 0,S++):(c[A]=Fj(e[A],t[A]),c[A]===e[A]&&e[A]!==void 0&&S++)}return u===f&&S===u?e:c}return t}function cw(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function kE(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function uw(e){if(!IE(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!IE(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function IE(e){return Object.prototype.toString.call(e)==="[object Object]"}function wG(e){return new Promise(t=>{setTimeout(t,e)})}function dw(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Fj(e,t):t}function SG(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function TG(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var mS=Symbol();function Bj(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===mS?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var _u,Ul,xh,FE,CG=(FE=class extends vg{constructor(){super();rr(this,_u);rr(this,Ul);rr(this,xh);Ft(this,xh,t=>{if(!$u&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){je(this,Ul)||this.setEventListener(je(this,xh))}onUnsubscribe(){var t;this.hasListeners()||((t=je(this,Ul))==null||t.call(this),Ft(this,Ul,void 0))}setEventListener(t){var n;Ft(this,xh,t),(n=je(this,Ul))==null||n.call(this),Ft(this,Ul,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){je(this,_u)!==t&&(Ft(this,_u,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof je(this,_u)=="boolean"?je(this,_u):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},_u=new WeakMap,Ul=new WeakMap,xh=new WeakMap,FE),gS=new CG,bh,Vl,wh,BE,PG=(BE=class extends vg{constructor(){super();rr(this,bh,!0);rr(this,Vl);rr(this,wh);Ft(this,wh,t=>{if(!$u&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){je(this,Vl)||this.setEventListener(je(this,wh))}onUnsubscribe(){var t;this.hasListeners()||((t=je(this,Vl))==null||t.call(this),Ft(this,Vl,void 0))}setEventListener(t){var n;Ft(this,wh,t),(n=je(this,Vl))==null||n.call(this),Ft(this,Vl,t(this.setOnline.bind(this)))}setOnline(t){je(this,bh)!==t&&(Ft(this,bh,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return je(this,bh)}},bh=new WeakMap,Vl=new WeakMap,wh=new WeakMap,BE),yv=new PG;function hw(){let e,t;const n=new Promise((u,p)=>{e=u,t=p});n.status="pending",n.catch(()=>{});function s(u){Object.assign(n,u),delete n.resolve,delete n.reject}return n.resolve=u=>{s({status:"fulfilled",value:u}),e(u)},n.reject=u=>{s({status:"rejected",reason:u}),t(u)},n}function EG(e){return Math.min(1e3*2**e,3e4)}function Uj(e){return(e??"online")==="online"?yv.isOnline():!0}var Vj=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Ab(e){return e instanceof Vj}function $j(e){let t=!1,n=0,s=!1,u;const p=hw(),f=B=>{var X;s||(L(new Vj(B)),(X=e.abort)==null||X.call(e))},c=()=>{t=!0},S=()=>{t=!1},E=()=>gS.isFocused()&&(e.networkMode==="always"||yv.isOnline())&&e.canRun(),A=()=>Uj(e.networkMode)&&e.canRun(),z=B=>{var X;s||(s=!0,(X=e.onSuccess)==null||X.call(e,B),u==null||u(),p.resolve(B))},L=B=>{var X;s||(s=!0,(X=e.onError)==null||X.call(e,B),u==null||u(),p.reject(B))},I=()=>new Promise(B=>{var X;u=q=>{(s||E())&&B(q)},(X=e.onPause)==null||X.call(e)}).then(()=>{var B;u=void 0,s||(B=e.onContinue)==null||B.call(e)}),F=()=>{if(s)return;let B;const X=n===0?e.initialPromise:void 0;try{B=X??e.fn()}catch(q){B=Promise.reject(q)}Promise.resolve(B).then(z).catch(q=>{var ce;if(s)return;const V=e.retry??($u?0:3),Y=e.retryDelay??EG,de=typeof Y=="function"?Y(n,q):Y,Se=V===!0||typeof V=="number"&&n<V||typeof V=="function"&&V(n,q);if(t||!Se){L(q);return}n++,(ce=e.onFail)==null||ce.call(e,n,q),wG(de).then(()=>E()?void 0:I()).then(()=>{t?L(q):F()})})};return{promise:p,cancel:f,continue:()=>(u==null||u(),p),cancelRetry:c,continueRetry:S,canStart:A,start:()=>(A()?F():I().then(F),p)}}function MG(){let e=[],t=0,n=c=>{c()},s=c=>{c()},u=c=>setTimeout(c,0);const p=c=>{t?e.push(c):u(()=>{n(c)})},f=()=>{const c=e;e=[],c.length&&u(()=>{s(()=>{c.forEach(S=>{n(S)})})})};return{batch:c=>{let S;t++;try{S=c()}finally{t--,t||f()}return S},batchCalls:c=>(...S)=>{p(()=>{c(...S)})},schedule:p,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{s=c},setScheduler:c=>{u=c}}}var Pi=MG(),vu,UE,Zj=(UE=class{constructor(){rr(this,vu)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),lw(this.gcTime)&&Ft(this,vu,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??($u?1/0:5*60*1e3))}clearGcTimeout(){je(this,vu)&&(clearTimeout(je(this,vu)),Ft(this,vu,void 0))}},vu=new WeakMap,UE),Sh,Th,lo,$i,Qm,xu,Mo,Va,VE,kG=(VE=class extends Zj{constructor(t){super();rr(this,Mo);rr(this,Sh);rr(this,Th);rr(this,lo);rr(this,$i);rr(this,Qm);rr(this,xu);Ft(this,xu,!1),Ft(this,Qm,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ft(this,lo,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ft(this,Sh,IG(this.options)),this.state=t.state??je(this,Sh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=je(this,$i))==null?void 0:t.promise}setOptions(t){this.options={...je(this,Qm),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&je(this,lo).remove(this)}setData(t,n){const s=dw(this.state.data,t,this.options);return Mr(this,Mo,Va).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){Mr(this,Mo,Va).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,u;const n=(s=je(this,$i))==null?void 0:s.promise;return(u=je(this,$i))==null||u.cancel(t),n?n.then(co).catch(co):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(je(this,Sh))}isActive(){return this.observers.some(t=>zo(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===mS||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!Oj(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=je(this,$i))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=je(this,$i))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),je(this,lo).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(je(this,$i)&&(je(this,xu)?je(this,$i).cancel({revert:!0}):je(this,$i).cancelRetry()),this.scheduleGc()),je(this,lo).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Mr(this,Mo,Va).call(this,{type:"invalidate"})}fetch(t,n){var S,E,A;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(je(this,$i))return je(this,$i).continueRetry(),je(this,$i).promise}if(t&&this.setOptions(t),!this.options.queryFn){const z=this.observers.find(L=>L.options.queryFn);z&&this.setOptions(z.options)}const s=new AbortController,u=z=>{Object.defineProperty(z,"signal",{enumerable:!0,get:()=>(Ft(this,xu,!0),s.signal)})},p=()=>{const z=Bj(this.options,n),L={queryKey:this.queryKey,meta:this.meta};return u(L),Ft(this,xu,!1),this.options.persister?this.options.persister(z,L,this):z(L)},f={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:p};u(f),(S=this.options.behavior)==null||S.onFetch(f,this),Ft(this,Th,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((E=f.fetchOptions)==null?void 0:E.meta))&&Mr(this,Mo,Va).call(this,{type:"fetch",meta:(A=f.fetchOptions)==null?void 0:A.meta});const c=z=>{var L,I,F,B;Ab(z)&&z.silent||Mr(this,Mo,Va).call(this,{type:"error",error:z}),Ab(z)||((I=(L=je(this,lo).config).onError)==null||I.call(L,z,this),(B=(F=je(this,lo).config).onSettled)==null||B.call(F,this.state.data,z,this)),this.scheduleGc()};return Ft(this,$i,$j({initialPromise:n==null?void 0:n.initialPromise,fn:f.fetchFn,abort:s.abort.bind(s),onSuccess:z=>{var L,I,F,B;if(z===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(z)}catch(X){c(X);return}(I=(L=je(this,lo).config).onSuccess)==null||I.call(L,z,this),(B=(F=je(this,lo).config).onSettled)==null||B.call(F,z,this.state.error,this),this.scheduleGc()},onError:c,onFail:(z,L)=>{Mr(this,Mo,Va).call(this,{type:"failed",failureCount:z,error:L})},onPause:()=>{Mr(this,Mo,Va).call(this,{type:"pause"})},onContinue:()=>{Mr(this,Mo,Va).call(this,{type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode,canRun:()=>!0})),je(this,$i).start()}},Sh=new WeakMap,Th=new WeakMap,lo=new WeakMap,$i=new WeakMap,Qm=new WeakMap,xu=new WeakMap,Mo=new WeakSet,Va=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Gj(s.data,this.options),fetchMeta:t.meta??null};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const u=t.error;return Ab(u)&&u.revert&&je(this,Th)?{...je(this,Th),fetchStatus:"idle"}:{...s,error:u,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:u,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),Pi.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),je(this,lo).notify({query:this,type:"updated",action:t})})},VE);function Gj(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Uj(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function IG(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ta,$E,RG=($E=class extends vg{constructor(t={}){super();rr(this,ta);this.config=t,Ft(this,ta,new Map)}build(t,n,s){const u=n.queryKey,p=n.queryHash??fS(u,n);let f=this.get(p);return f||(f=new kG({cache:this,queryKey:u,queryHash:p,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(u)}),this.add(f)),f}add(t){je(this,ta).has(t.queryHash)||(je(this,ta).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=je(this,ta).get(t.queryHash);n&&(t.destroy(),n===t&&je(this,ta).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Pi.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return je(this,ta).get(t)}getAll(){return[...je(this,ta).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>EE(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>EE(t,s)):n}notify(t){Pi.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Pi.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Pi.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ta=new WeakMap,$E),ra,rs,bu,na,Ll,ZE,AG=(ZE=class extends Zj{constructor(t){super();rr(this,na);rr(this,ra);rr(this,rs);rr(this,bu);this.mutationId=t.mutationId,Ft(this,rs,t.mutationCache),Ft(this,ra,[]),this.state=t.state||DG(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){je(this,ra).includes(t)||(je(this,ra).push(t),this.clearGcTimeout(),je(this,rs).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ft(this,ra,je(this,ra).filter(n=>n!==t)),this.scheduleGc(),je(this,rs).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){je(this,ra).length||(this.state.status==="pending"?this.scheduleGc():je(this,rs).remove(this))}continue(){var t;return((t=je(this,bu))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var u,p,f,c,S,E,A,z,L,I,F,B,X,q,V,Y,de,Se,ce,Re;Ft(this,bu,$j({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(Ie,We)=>{Mr(this,na,Ll).call(this,{type:"failed",failureCount:Ie,error:We})},onPause:()=>{Mr(this,na,Ll).call(this,{type:"pause"})},onContinue:()=>{Mr(this,na,Ll).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>je(this,rs).canRun(this)}));const n=this.state.status==="pending",s=!je(this,bu).canStart();try{if(!n){Mr(this,na,Ll).call(this,{type:"pending",variables:t,isPaused:s}),await((p=(u=je(this,rs).config).onMutate)==null?void 0:p.call(u,t,this));const We=await((c=(f=this.options).onMutate)==null?void 0:c.call(f,t));We!==this.state.context&&Mr(this,na,Ll).call(this,{type:"pending",context:We,variables:t,isPaused:s})}const Ie=await je(this,bu).start();return await((E=(S=je(this,rs).config).onSuccess)==null?void 0:E.call(S,Ie,t,this.state.context,this)),await((z=(A=this.options).onSuccess)==null?void 0:z.call(A,Ie,t,this.state.context)),await((I=(L=je(this,rs).config).onSettled)==null?void 0:I.call(L,Ie,null,this.state.variables,this.state.context,this)),await((B=(F=this.options).onSettled)==null?void 0:B.call(F,Ie,null,t,this.state.context)),Mr(this,na,Ll).call(this,{type:"success",data:Ie}),Ie}catch(Ie){try{throw await((q=(X=je(this,rs).config).onError)==null?void 0:q.call(X,Ie,t,this.state.context,this)),await((Y=(V=this.options).onError)==null?void 0:Y.call(V,Ie,t,this.state.context)),await((Se=(de=je(this,rs).config).onSettled)==null?void 0:Se.call(de,void 0,Ie,this.state.variables,this.state.context,this)),await((Re=(ce=this.options).onSettled)==null?void 0:Re.call(ce,void 0,Ie,t,this.state.context)),Ie}finally{Mr(this,na,Ll).call(this,{type:"error",error:Ie})}}finally{je(this,rs).runNext(this)}}},ra=new WeakMap,rs=new WeakMap,bu=new WeakMap,na=new WeakSet,Ll=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Pi.batch(()=>{je(this,ra).forEach(s=>{s.onMutationUpdate(t)}),je(this,rs).notify({mutation:this,type:"updated",action:t})})},ZE);function DG(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ha,ko,Jm,GE,zG=(GE=class extends vg{constructor(t={}){super();rr(this,Ha);rr(this,ko);rr(this,Jm);this.config=t,Ft(this,Ha,new Set),Ft(this,ko,new Map),Ft(this,Jm,0)}build(t,n,s){const u=new AG({mutationCache:this,mutationId:++My(this,Jm)._,options:t.defaultMutationOptions(n),state:s});return this.add(u),u}add(t){je(this,Ha).add(t);const n=t_(t);if(typeof n=="string"){const s=je(this,ko).get(n);s?s.push(t):je(this,ko).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(je(this,Ha).delete(t)){const n=t_(t);if(typeof n=="string"){const s=je(this,ko).get(n);if(s)if(s.length>1){const u=s.indexOf(t);u!==-1&&s.splice(u,1)}else s[0]===t&&je(this,ko).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=t_(t);if(typeof n=="string"){const s=je(this,ko).get(n),u=s==null?void 0:s.find(p=>p.state.status==="pending");return!u||u===t}else return!0}runNext(t){var s;const n=t_(t);if(typeof n=="string"){const u=(s=je(this,ko).get(n))==null?void 0:s.find(p=>p!==t&&p.state.isPaused);return(u==null?void 0:u.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Pi.batch(()=>{je(this,Ha).forEach(t=>{this.notify({type:"removed",mutation:t})}),je(this,Ha).clear(),je(this,ko).clear()})}getAll(){return Array.from(je(this,Ha))}find(t){const n={exact:!0,...t};return this.getAll().find(s=>ME(n,s))}findAll(t={}){return this.getAll().filter(n=>ME(t,n))}notify(t){Pi.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Pi.batch(()=>Promise.all(t.map(n=>n.continue().catch(co))))}},Ha=new WeakMap,ko=new WeakMap,Jm=new WeakMap,GE);function t_(e){var t;return(t=e.options.scope)==null?void 0:t.id}function RE(e){return{onFetch:(t,n)=>{var A,z,L,I,F;const s=t.options,u=(L=(z=(A=t.fetchOptions)==null?void 0:A.meta)==null?void 0:z.fetchMore)==null?void 0:L.direction,p=((I=t.state.data)==null?void 0:I.pages)||[],f=((F=t.state.data)==null?void 0:F.pageParams)||[];let c={pages:[],pageParams:[]},S=0;const E=async()=>{let B=!1;const X=Y=>{Object.defineProperty(Y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?B=!0:t.signal.addEventListener("abort",()=>{B=!0}),t.signal)})},q=Bj(t.options,t.fetchOptions),V=async(Y,de,Se)=>{if(B)return Promise.reject();if(de==null&&Y.pages.length)return Promise.resolve(Y);const ce={queryKey:t.queryKey,pageParam:de,direction:Se?"backward":"forward",meta:t.options.meta};X(ce);const Re=await q(ce),{maxPages:Ie}=t.options,We=Se?TG:SG;return{pages:We(Y.pages,Re,Ie),pageParams:We(Y.pageParams,de,Ie)}};if(u&&p.length){const Y=u==="backward",de=Y?jG:AE,Se={pages:p,pageParams:f},ce=de(s,Se);c=await V(Se,ce,Y)}else{const Y=e??p.length;do{const de=S===0?f[0]??s.initialPageParam:AE(s,c);if(S>0&&de==null)break;c=await V(c,de),S++}while(S<Y)}return c};t.options.persister?t.fetchFn=()=>{var B,X;return(X=(B=t.options).persister)==null?void 0:X.call(B,E,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=E}}}function AE(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function jG(e,{pages:t,pageParams:n}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,n[0],n):void 0}var Rn,$l,Zl,Ch,Ph,Gl,Eh,Mh,HE,LG=(HE=class{constructor(e={}){rr(this,Rn);rr(this,$l);rr(this,Zl);rr(this,Ch);rr(this,Ph);rr(this,Gl);rr(this,Eh);rr(this,Mh);Ft(this,Rn,e.queryCache||new RG),Ft(this,$l,e.mutationCache||new zG),Ft(this,Zl,e.defaultOptions||{}),Ft(this,Ch,new Map),Ft(this,Ph,new Map),Ft(this,Gl,0)}mount(){My(this,Gl)._++,je(this,Gl)===1&&(Ft(this,Eh,gS.subscribe(async e=>{e&&(await this.resumePausedMutations(),je(this,Rn).onFocus())})),Ft(this,Mh,yv.subscribe(async e=>{e&&(await this.resumePausedMutations(),je(this,Rn).onOnline())})))}unmount(){var e,t;My(this,Gl)._--,je(this,Gl)===0&&((e=je(this,Eh))==null||e.call(this),Ft(this,Eh,void 0),(t=je(this,Mh))==null||t.call(this),Ft(this,Mh,void 0))}isFetching(e){return je(this,Rn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return je(this,$l).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=je(this,Rn).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=je(this,Rn).build(this,t),s=n.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(vh(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return je(this,Rn).findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),u=je(this,Rn).get(s.queryHash),p=u==null?void 0:u.state.data,f=bG(t,p);if(f!==void 0)return je(this,Rn).build(this,s).setData(f,{...n,manual:!0})}setQueriesData(e,t,n){return Pi.batch(()=>je(this,Rn).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=je(this,Rn).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=je(this,Rn);Pi.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=je(this,Rn),s={type:"active",...e};return Pi.batch(()=>(n.findAll(e).forEach(u=>{u.reset()}),this.refetchQueries(s,t)))}cancelQueries(e,t={}){const n={revert:!0,...t},s=Pi.batch(()=>je(this,Rn).findAll(e).map(u=>u.cancel(n)));return Promise.all(s).then(co).catch(co)}invalidateQueries(e,t={}){return Pi.batch(()=>{if(je(this,Rn).findAll(e).forEach(s=>{s.invalidate()}),(e==null?void 0:e.refetchType)==="none")return Promise.resolve();const n={...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"};return this.refetchQueries(n,t)})}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},s=Pi.batch(()=>je(this,Rn).findAll(e).filter(u=>!u.isDisabled()).map(u=>{let p=u.fetch(void 0,n);return n.throwOnError||(p=p.catch(co)),u.state.fetchStatus==="paused"?Promise.resolve():p}));return Promise.all(s).then(co)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=je(this,Rn).build(this,t);return n.isStaleByTime(vh(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(co).catch(co)}fetchInfiniteQuery(e){return e.behavior=RE(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(co).catch(co)}ensureInfiniteQueryData(e){return e.behavior=RE(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return yv.isOnline()?je(this,$l).resumePausedMutations():Promise.resolve()}getQueryCache(){return je(this,Rn)}getMutationCache(){return je(this,$l)}getDefaultOptions(){return je(this,Zl)}setDefaultOptions(e){Ft(this,Zl,e)}setQueryDefaults(e,t){je(this,Ch).set(Km(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...je(this,Ch).values()],n={};return t.forEach(s=>{Ym(e,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(e,t){je(this,Ph).set(Km(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...je(this,Ph).values()];let n={};return t.forEach(s=>{Ym(e,s.mutationKey)&&(n={...n,...s.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...je(this,Zl).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=fS(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===mS&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...je(this,Zl).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){je(this,Rn).clear(),je(this,$l).clear()}},Rn=new WeakMap,$l=new WeakMap,Zl=new WeakMap,Ch=new WeakMap,Ph=new WeakMap,Gl=new WeakMap,Eh=new WeakMap,Mh=new WeakMap,HE),ms,kr,eg,ns,wu,kh,Hl,ia,tg,Ih,Rh,Su,Tu,ql,Ah,$r,em,pw,fw,mw,gw,yw,_w,vw,Hj,qE,NG=(qE=class extends vg{constructor(t,n){super();rr(this,$r);rr(this,ms);rr(this,kr);rr(this,eg);rr(this,ns);rr(this,wu);rr(this,kh);rr(this,Hl);rr(this,ia);rr(this,tg);rr(this,Ih);rr(this,Rh);rr(this,Su);rr(this,Tu);rr(this,ql);rr(this,Ah,new Set);this.options=n,Ft(this,ms,t),Ft(this,ia,null),Ft(this,Hl,hw()),this.options.experimental_prefetchInRender||je(this,Hl).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(je(this,kr).addObserver(this),DE(je(this,kr),this.options)?Mr(this,$r,em).call(this):this.updateResult(),Mr(this,$r,gw).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return xw(je(this,kr),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return xw(je(this,kr),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Mr(this,$r,yw).call(this),Mr(this,$r,_w).call(this),je(this,kr).removeObserver(this)}setOptions(t,n){const s=this.options,u=je(this,kr);if(this.options=je(this,ms).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof zo(this.options.enabled,je(this,kr))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Mr(this,$r,vw).call(this),je(this,kr).setOptions(this.options),s._defaulted&&!cw(this.options,s)&&je(this,ms).getQueryCache().notify({type:"observerOptionsUpdated",query:je(this,kr),observer:this});const p=this.hasListeners();p&&zE(je(this,kr),u,this.options,s)&&Mr(this,$r,em).call(this),this.updateResult(n),p&&(je(this,kr)!==u||zo(this.options.enabled,je(this,kr))!==zo(s.enabled,je(this,kr))||vh(this.options.staleTime,je(this,kr))!==vh(s.staleTime,je(this,kr)))&&Mr(this,$r,pw).call(this);const f=Mr(this,$r,fw).call(this);p&&(je(this,kr)!==u||zo(this.options.enabled,je(this,kr))!==zo(s.enabled,je(this,kr))||f!==je(this,ql))&&Mr(this,$r,mw).call(this,f)}getOptimisticResult(t){const n=je(this,ms).getQueryCache().build(je(this,ms),t),s=this.createResult(n,t);return FG(this,s)&&(Ft(this,ns,s),Ft(this,kh,this.options),Ft(this,wu,je(this,kr).state)),s}getCurrentResult(){return je(this,ns)}trackResult(t,n){const s={};return Object.keys(t).forEach(u=>{Object.defineProperty(s,u,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(u),n==null||n(u),t[u])})}),s}trackProp(t){je(this,Ah).add(t)}getCurrentQuery(){return je(this,kr)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=je(this,ms).defaultQueryOptions(t),s=je(this,ms).getQueryCache().build(je(this,ms),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(t){return Mr(this,$r,em).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),je(this,ns)))}createResult(t,n){var Ie;const s=je(this,kr),u=this.options,p=je(this,ns),f=je(this,wu),c=je(this,kh),E=t!==s?t.state:je(this,eg),{state:A}=t;let z={...A},L=!1,I;if(n._optimisticResults){const We=this.hasListeners(),tt=!We&&DE(t,n),vt=We&&zE(t,s,n,u);(tt||vt)&&(z={...z,...Gj(A.data,t.options)}),n._optimisticResults==="isRestoring"&&(z.fetchStatus="idle")}let{error:F,errorUpdatedAt:B,status:X}=z;if(n.select&&z.data!==void 0)if(p&&z.data===(f==null?void 0:f.data)&&n.select===je(this,tg))I=je(this,Ih);else try{Ft(this,tg,n.select),I=n.select(z.data),I=dw(p==null?void 0:p.data,I,n),Ft(this,Ih,I),Ft(this,ia,null)}catch(We){Ft(this,ia,We)}else I=z.data;if(n.placeholderData!==void 0&&I===void 0&&X==="pending"){let We;if(p!=null&&p.isPlaceholderData&&n.placeholderData===(c==null?void 0:c.placeholderData))We=p.data;else if(We=typeof n.placeholderData=="function"?n.placeholderData((Ie=je(this,Rh))==null?void 0:Ie.state.data,je(this,Rh)):n.placeholderData,n.select&&We!==void 0)try{We=n.select(We),Ft(this,ia,null)}catch(tt){Ft(this,ia,tt)}We!==void 0&&(X="success",I=dw(p==null?void 0:p.data,We,n),L=!0)}je(this,ia)&&(F=je(this,ia),I=je(this,Ih),B=Date.now(),X="error");const q=z.fetchStatus==="fetching",V=X==="pending",Y=X==="error",de=V&&q,Se=I!==void 0,Re={status:X,fetchStatus:z.fetchStatus,isPending:V,isSuccess:X==="success",isError:Y,isInitialLoading:de,isLoading:de,data:I,dataUpdatedAt:z.dataUpdatedAt,error:F,errorUpdatedAt:B,failureCount:z.fetchFailureCount,failureReason:z.fetchFailureReason,errorUpdateCount:z.errorUpdateCount,isFetched:z.dataUpdateCount>0||z.errorUpdateCount>0,isFetchedAfterMount:z.dataUpdateCount>E.dataUpdateCount||z.errorUpdateCount>E.errorUpdateCount,isFetching:q,isRefetching:q&&!V,isLoadingError:Y&&!Se,isPaused:z.fetchStatus==="paused",isPlaceholderData:L,isRefetchError:Y&&Se,isStale:yS(t,n),refetch:this.refetch,promise:je(this,Hl)};if(this.options.experimental_prefetchInRender){const We=st=>{Re.status==="error"?st.reject(Re.error):Re.data!==void 0&&st.resolve(Re.data)},tt=()=>{const st=Ft(this,Hl,Re.promise=hw());We(st)},vt=je(this,Hl);switch(vt.status){case"pending":t.queryHash===s.queryHash&&We(vt);break;case"fulfilled":(Re.status==="error"||Re.data!==vt.value)&&tt();break;case"rejected":(Re.status!=="error"||Re.error!==vt.reason)&&tt();break}}return Re}updateResult(t){const n=je(this,ns),s=this.createResult(je(this,kr),this.options);if(Ft(this,wu,je(this,kr).state),Ft(this,kh,this.options),je(this,wu).data!==void 0&&Ft(this,Rh,je(this,kr)),cw(s,n))return;Ft(this,ns,s);const u={},p=()=>{if(!n)return!0;const{notifyOnChangeProps:f}=this.options,c=typeof f=="function"?f():f;if(c==="all"||!c&&!je(this,Ah).size)return!0;const S=new Set(c??je(this,Ah));return this.options.throwOnError&&S.add("error"),Object.keys(je(this,ns)).some(E=>{const A=E;return je(this,ns)[A]!==n[A]&&S.has(A)})};(t==null?void 0:t.listeners)!==!1&&p()&&(u.listeners=!0),Mr(this,$r,Hj).call(this,{...u,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Mr(this,$r,gw).call(this)}},ms=new WeakMap,kr=new WeakMap,eg=new WeakMap,ns=new WeakMap,wu=new WeakMap,kh=new WeakMap,Hl=new WeakMap,ia=new WeakMap,tg=new WeakMap,Ih=new WeakMap,Rh=new WeakMap,Su=new WeakMap,Tu=new WeakMap,ql=new WeakMap,Ah=new WeakMap,$r=new WeakSet,em=function(t){Mr(this,$r,vw).call(this);let n=je(this,kr).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(co)),n},pw=function(){Mr(this,$r,yw).call(this);const t=vh(this.options.staleTime,je(this,kr));if($u||je(this,ns).isStale||!lw(t))return;const s=Oj(je(this,ns).dataUpdatedAt,t)+1;Ft(this,Su,setTimeout(()=>{je(this,ns).isStale||this.updateResult()},s))},fw=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(je(this,kr)):this.options.refetchInterval)??!1},mw=function(t){Mr(this,$r,_w).call(this),Ft(this,ql,t),!($u||zo(this.options.enabled,je(this,kr))===!1||!lw(je(this,ql))||je(this,ql)===0)&&Ft(this,Tu,setInterval(()=>{(this.options.refetchIntervalInBackground||gS.isFocused())&&Mr(this,$r,em).call(this)},je(this,ql)))},gw=function(){Mr(this,$r,pw).call(this),Mr(this,$r,mw).call(this,Mr(this,$r,fw).call(this))},yw=function(){je(this,Su)&&(clearTimeout(je(this,Su)),Ft(this,Su,void 0))},_w=function(){je(this,Tu)&&(clearInterval(je(this,Tu)),Ft(this,Tu,void 0))},vw=function(){const t=je(this,ms).getQueryCache().build(je(this,ms),this.options);if(t===je(this,kr))return;const n=je(this,kr);Ft(this,kr,t),Ft(this,eg,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},Hj=function(t){Pi.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(je(this,ns))}),je(this,ms).getQueryCache().notify({query:je(this,kr),type:"observerResultsUpdated"})})},qE);function OG(e,t){return zo(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function DE(e,t){return OG(e,t)||e.state.data!==void 0&&xw(e,t,t.refetchOnMount)}function xw(e,t,n){if(zo(t.enabled,e)!==!1){const s=typeof n=="function"?n(e):n;return s==="always"||s!==!1&&yS(e,t)}return!1}function zE(e,t,n,s){return(e!==t||zo(s.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&yS(e,n)}function yS(e,t){return zo(t.enabled,e)!==!1&&e.isStaleByTime(vh(t.staleTime,e))}function FG(e,t){return!cw(e.getCurrentResult(),t)}var qj=N.createContext(void 0),BG=e=>{const t=N.useContext(qj);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},UG=({client:e,children:t})=>(N.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),C.jsx(qj.Provider,{value:e,children:t})),Wj=N.createContext(!1),VG=()=>N.useContext(Wj);Wj.Provider;function $G(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var ZG=N.createContext($G()),GG=()=>N.useContext(ZG);function HG(e,t){return typeof e=="function"?e(...t):!!e}function jE(){}var qG=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},WG=e=>{N.useEffect(()=>{e.clearReset()},[e])},XG=({result:e,errorResetBoundary:t,throwOnError:n,query:s})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&HG(n,[e.error,s]),KG=e=>{const t=e.staleTime;e.suspense&&(e.staleTime=typeof t=="function"?(...n)=>Math.max(t(...n),1e3):Math.max(t??1e3,1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},YG=(e,t)=>e.isLoading&&e.isFetching&&!t,QG=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,LE=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function JG(e,t,n){var z,L,I,F,B;const s=BG(),u=VG(),p=GG(),f=s.defaultQueryOptions(e);(L=(z=s.getDefaultOptions().queries)==null?void 0:z._experimental_beforeQuery)==null||L.call(z,f),f._optimisticResults=u?"isRestoring":"optimistic",KG(f),qG(f,p),WG(p);const c=!s.getQueryCache().get(f.queryHash),[S]=N.useState(()=>new t(s,f)),E=S.getOptimisticResult(f),A=!u&&e.subscribed!==!1;if(N.useSyncExternalStore(N.useCallback(X=>{const q=A?S.subscribe(Pi.batchCalls(X)):jE;return S.updateResult(),q},[S,A]),()=>S.getCurrentResult(),()=>S.getCurrentResult()),N.useEffect(()=>{S.setOptions(f,{listeners:!1})},[f,S]),QG(f,E))throw LE(f,S,p);if(XG({result:E,errorResetBoundary:p,throwOnError:f.throwOnError,query:s.getQueryCache().get(f.queryHash)}))throw E.error;if((F=(I=s.getDefaultOptions().queries)==null?void 0:I._experimental_afterQuery)==null||F.call(I,f,E),f.experimental_prefetchInRender&&!$u&&YG(E,u)){const X=c?LE(f,S,p):(B=s.getQueryCache().get(f.queryHash))==null?void 0:B.promise;X==null||X.catch(jE).finally(()=>{S.updateResult()})}return f.notifyOnChangeProps?E:S.trackResult(E)}function eH(e,t){return JG(e,NG)}const tH=()=>{const e=N.useRef(null),t=N.useRef(null),n=N.useRef({}),s=pG(),{toast:u}=xG(),[p,f]=N.useState(null),[c,S]=N.useState("all"),[E,A]=N.useState(!1),{data:z}=eH({queryKey:["alerts"],queryFn:fG,refetchInterval:3e4}),L=z==null?void 0:z.filter(I=>{if(p&&I.type!==p)return!1;if(c!=="all"){const F=new Date(I.time),X=(new Date().getTime()-F.getTime())/(1e3*60*60);if(c==="1h"&&X>1||c==="24h"&&X>24)return!1}return!0});return N.useEffect(()=>{if(!(!e.current||t.current))return t.current=new e_.Map({container:e.current,style:{version:8,sources:{},layers:[],glyphs:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf"},center:[103.7414,1.4927],zoom:s?11:12}),t.current.on("load",()=>{t.current&&(t.current.addSource("background",{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),t.current.addLayer({id:"background-layer",type:"raster",source:"background"}))}),()=>{var I;(I=t.current)==null||I.remove(),t.current=null}},[s]),N.useEffect(()=>{!t.current||!z||(t.current.getLayer("safety-heat")&&t.current.removeLayer("safety-heat"),t.current.getSource("safety-heat")&&t.current.removeSource("safety-heat"),E&&t.current.addLayer({id:"safety-heat",type:"heatmap",source:{type:"geojson",data:{type:"FeatureCollection",features:z.map(I=>({type:"Feature",geometry:{type:"Point",coordinates:NE(I.location)||[0,0]},properties:{intensity:I.type==="paid"?1:.5}}))}},paint:{"heatmap-weight":["get","intensity"],"heatmap-intensity":1,"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 255, 0, 0)",.5,"rgba(255, 255, 0, 0.5)",1,"rgba(255, 0, 0, 0.8)"],"heatmap-radius":30}}))},[E,z]),N.useEffect(()=>{!t.current||!L||(Object.entries(n.current).forEach(([I,F])=>{L.find(B=>B.id.toString()===I)||(F.remove(),delete n.current[I])}),L.forEach(I=>{const F=NE(I.location);if(!F)return;const B=I.id.toString();if(n.current[B]){const Y=new e_.Popup({offset:25}).setHTML(`
          <div class="p-2">
            <h3 class="font-bold">${I.title}</h3>
            <p class="text-sm">${I.description}</p>
            <p class="text-xs mt-1">Toll: ${I.toll}</p>
            <p class="text-xs">Time: ${I.time}</p>
          </div>
        `);n.current[B].setPopup(Y);return}const X=document.createElement("div");X.className=`marker ${I.type}`,X.style.width="24px",X.style.height="24px",X.style.borderRadius="50%",X.style.backgroundColor=rH(I.type),X.style.border="2px solid white",X.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)",X.title=`${I.title}
${I.description}`;const q=new e_.Popup({offset:25}).setHTML(`
        <div class="p-2">
          <h3 class="font-bold">${I.title}</h3>
          <p class="text-sm">${I.description}</p>
          <p class="text-xs mt-1">Toll: ${I.toll}</p>
          <p class="text-xs">Time: ${I.time}</p>
        </div>
      `),V=new e_.Marker(X).setLngLat(F).setPopup(q).addTo(t.current);n.current[B]=V,I.type==="paid"&&u({title:"New Order Detected",description:`${I.title} at ${I.location}`})}))},[L,u]),C.jsx(C.Fragment,{children:C.jsxs("div",{className:"relative h-[500px]",children:[C.jsxs("div",{className:"absolute top-20 right-4 z-10 space-y-2",children:[C.jsxs(pv,{children:[C.jsx(fv,{asChild:!0,children:C.jsxs(jr,{variant:"outline",size:"sm",children:[C.jsx(fU,{className:"w-4 h-4 mr-2"}),"Filter Orders"]})}),C.jsxs(Xm,{children:[C.jsx(Do,{onClick:()=>f(null),children:"All Types"}),C.jsx(Do,{onClick:()=>f("pending"),children:"Pending Only"}),C.jsx(Do,{onClick:()=>f("paid"),children:"Paid Only"})]})]}),C.jsxs(pv,{children:[C.jsx(fv,{asChild:!0,children:C.jsxs(jr,{variant:"outline",size:"sm",children:[C.jsx(dU,{className:"w-4 h-4 mr-2"}),"Time Filter"]})}),C.jsxs(Xm,{children:[C.jsx(Do,{onClick:()=>S("all"),children:"All Time"}),C.jsx(Do,{onClick:()=>S("1h"),children:"Last Hour"}),C.jsx(Do,{onClick:()=>S("24h"),children:"Last 24 Hours"})]})]})]}),C.jsx("div",{className:"h-full",children:C.jsx("div",{ref:e,className:"h-full"})})]})})},rH=e=>{switch(e){case"paid":return"#FF0000";case"pending":return"#FFA500";default:return"#3B82F6"}},NE=e=>({"Table 5":[103.7614,1.4927],Kitchen:[103.7514,1.4827],Counter:[103.7714,1.5027],"Table 10":[103.7814,1.4727],"Table 3":[103.7914,1.4627],"Table 7":[103.7414,1.5127],"Table 12":[103.7314,1.4727]})[e]||null,nH=()=>{const{getOrdersForDeliveryMan:e,orders:t}=pS(),n=async(s,u)=>{await updateRestaurantOrder(s,u)};return N.useEffect(()=>{e()},[]),C.jsxs("div",{className:"max-w-6xl mx-auto py-10 px-6",children:[C.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white mb-10",children:"Orders Overview"}),C.jsx(tH,{}),C.jsx("div",{className:"space-y-8",children:t.map(s=>C.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start sm:items-center bg-white dark:bg-gray-800 shadow-lg rounded-xl p-6 sm:p-8 border border-gray-200 dark:border-gray-700",children:[C.jsxs("div",{className:"flex-1 mb-6 sm:mb-0",children:[C.jsx("h1",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:s.deliveryDetails.name}),C.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:[C.jsx("span",{className:"font-semibold",children:"Address: "}),s.deliveryDetails.address]}),C.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:[C.jsx("span",{className:"font-semibold",children:"Total Amount: "}),s.totalAmount/100]})]}),C.jsxs("div",{className:"w-full sm:w-1/3",children:[C.jsx(Yr,{className:"block text-sm font-medium text-gray-700 dark:text-gray300 mb-2",children:"Order Status"}),C.jsxs(Ej,{onValueChange:u=>n(s._id,u),defaultValue:s.status,children:[C.jsx(uS,{children:C.jsx(kj,{placeholder:"Select Status"})}),C.jsx(dS,{children:C.jsx(Mj,{children:["Pending","Confirmed","Preparing","OutForDelivery","Delivered"].map((u,p)=>C.jsx(hS,{value:u.toLowerCase(),children:u},p))})})]})]})]}))})]})},iH=new LG,sH=({children:e})=>{const{isAuthenticated:t}=Zo();return t?e:C.jsx(Uh,{to:"/login",replace:!0})},Db=({children:e})=>{const{isAuthenticated:t,user:n}=Zo();return t&&(n!=null&&n.isVerified)?C.jsx(Uh,{to:"/",replace:!0}):e},zb=({children:e})=>{const{user:t,isAuthenticated:n}=Zo();return n?t!=null&&t.admin?e:C.jsx(Uh,{to:"/",replace:!0}):C.jsx(Uh,{to:"/login",replace:!0})},oH=({children:e})=>{const{user:t,isAuthenticated:n}=Zo();return n?t!=null&&t.deliveryUser?e:C.jsx(Uh,{to:"/",replace:!0}):C.jsx(Uh,{to:"/login",replace:!0})},aH=_3([{path:"/",element:C.jsx(sH,{children:C.jsx(t7,{})}),children:[{path:"/",element:C.jsx(NU,{})},{path:"/profile",element:C.jsx(i7,{})},{path:"/search/:text",element:C.jsx(_7,{})},{path:"/restaurant/:id",element:C.jsx(w7,{})},{path:"/cart",element:C.jsx(dG,{})},{path:"/order/status",element:C.jsx(sG,{})},{path:"/admin/restaurant",element:C.jsx(zb,{children:C.jsx(T7,{})})},{path:"/admin/menu",element:C.jsx(zb,{children:C.jsx(M7,{})})},{path:"/admin/orders",element:C.jsx(zb,{children:C.jsx(iG,{})})},{path:"/delivery/orders",element:C.jsx(oH,{children:C.jsx(nH,{})})}]},{path:"/login",element:C.jsx(Db,{children:C.jsx(lG,{})})},{path:"/signup",element:C.jsx(Db,{children:C.jsx(zU,{})})},{path:"/forgot-password",element:C.jsx(Db,{children:C.jsx(aG,{})})},{path:"/reset-password",element:C.jsx(jU,{})}]);function lH(){const e=iS(s=>s.initializeTheme),{checkAuthentication:t,isCheckingAuth:n}=Zo();return N.useEffect(()=>{t(),e()},[t]),console.log("test"),n?C.jsx(oG,{}):C.jsx(UG,{client:iH,children:C.jsx("main",{children:C.jsx(E3,{router:aH})})})}var OE=["light","dark"],cH="(prefers-color-scheme: dark)",uH=N.createContext(void 0),dH={setTheme:e=>{},themes:[]},hH=()=>{var e;return(e=N.useContext(uH))!=null?e:dH};N.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:s,enableColorScheme:u,defaultTheme:p,value:f,attrs:c,nonce:S})=>{let E=p==="system",A=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${c.map(F=>`'${F}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,z=u?OE.includes(p)&&p?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${p}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",L=(F,B=!1,X=!0)=>{let q=f?f[F]:F,V=B?F+"|| ''":`'${q}'`,Y="";return u&&X&&!B&&OE.includes(F)&&(Y+=`d.style.colorScheme = '${F}';`),n==="class"?B||q?Y+=`c.add(${V})`:Y+="null":q&&(Y+=`d[s](n,${V})`),Y},I=e?`!function(){${A}${L(e)}}()`:s?`!function(){try{${A}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${E})){var t='${cH}',m=window.matchMedia(t);if(m.media!==t||m.matches){${L("dark")}}else{${L("light")}}}else if(e){${f?`var x=${JSON.stringify(f)};`:""}${L(f?"x[e]":"e",!0)}}${E?"":"else{"+L(p,!1,!1)+"}"}${z}}catch(e){}}()`:`!function(){try{${A}var e=localStorage.getItem('${t}');if(e){${f?`var x=${JSON.stringify(f)};`:""}${L(f?"x[e]":"e",!0)}}else{${L(p,!1,!1)};}${z}}catch(t){}}();`;return N.createElement("script",{nonce:S,dangerouslySetInnerHTML:{__html:I}})});const pH=({...e})=>{const{theme:t="system"}=hH();return C.jsx(sU,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};lI(document.getElementById("root")).render(C.jsxs(N.StrictMode,{children:[C.jsx(lH,{}),C.jsx(pH,{})]}));
